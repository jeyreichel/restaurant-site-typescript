(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u}),n.d(e,"c",function(){return a});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.onInitCallbacks=new Set}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);if(!this.isInitialized(i)&&!this.shouldAutoInitialize()){if(n)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:i})}catch(o){if(n)return null;throw o}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(d){e={error:d}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.instanceIdentifier,o=t.options,a=void 0===o?{}:o,u=this.normalizeInstanceIdentifier(void 0===i?s:i);if(this.isInitialized(u))throw Error(this.name+"("+u+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var c=this.getOrInitializeService({instanceIdentifier:u,options:a});try{for(var l=Object(r.g)(this.instancesDeferred.entries()),h=l.next();!h.done;h=l.next()){var d=Object(r.e)(h.value,2),f=d[1];u===this.normalizeInstanceIdentifier(d[0])&&f.resolve(c)}}catch(p){e={error:p}}finally{try{h&&!h.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return this.invokeOnInitCallbacks(c,u),c},t.prototype.onInit=function(t){var e=this;return this.onInitCallbacks.add(t),function(){e.onInitCallbacks.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i;try{for(var o=Object(r.g)(this.onInitCallbacks),s=o.next();!s.done;s=o.next()){var a=s.value;try{a(t,e)}catch(u){}}}catch(c){n={error:c}}finally{try{s&&!s.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(a){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"6Uf2":function(t,e,n){"use strict";(function(t){var e=n("zIRd"),r=n("/6Yf"),i=n("qOnz"),o=n("mrSG"),s=n("q/0M"),a="";function u(t){a=t}var c,l=function(){function t(t){this.domStorage_=t,this.prefix_="firebase:"}return t.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Object(i.L)(e))},t.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:Object(i.F)(e)},t.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},t.prototype.prefixedName_=function(t){return this.prefix_+t},t.prototype.toString=function(){return this.domStorage_.toString()},t}(),h=function(){function t(){this.cache_={},this.isInMemoryStorage=!0}return t.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},t.prototype.get=function(t){return Object(i.k)(this.cache_,t)?this.cache_[t]:null},t.prototype.remove=function(t){delete this.cache_[t]},t}(),d=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new l(e)}}catch(n){}return new h},f=d("localStorage"),p=d("sessionStorage"),g=new s.b("@firebase/database"),m=(c=1,function(){return c++}),b=function(t){var e=Object(i.K)(t),n=new i.d;n.update(e);var r=n.digest();return i.h.encodeByteArray(r)},v=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var o=t[r];Array.isArray(o)||o&&"object"==typeof o&&"number"==typeof o.length?n+=v.apply(null,o):n+="object"==typeof o?Object(i.L)(o):o,n+=" "}return n},y=null,_=!0,w=function(t,e){Object(i.f)(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(g.logLevel=s.a.VERBOSE,y=g.log.bind(g),e&&p.set("logging_enabled",!0)):"function"==typeof t?y=t:(y=null,p.remove("logging_enabled"))},C=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===_&&(_=!1,null===y&&!0===p.get("logging_enabled")&&w(!0)),y){var n=v.apply(null,t);y(n)}},O=function(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];C.apply(void 0,Object(o.f)([t],Object(o.e)(e)))}},E=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+v.apply(void 0,Object(o.f)([],Object(o.e)(t)));g.error(n)},S=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+v.apply(void 0,Object(o.f)([],Object(o.e)(t)));throw g.error(n),new Error(n)},I=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+v.apply(void 0,Object(o.f)([],Object(o.e)(t)));g.warn(n)},A=function(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},T="[MIN_NAME]",x="[MAX_NAME]",D=function(t,e){if(t===e)return 0;if(t===T||e===x)return-1;if(e===T||t===x)return 1;var n=L(t),r=L(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},k=function(t,e){return t===e?0:t<e?-1:1},N=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Object(i.L)(e))},j=function(t){if("object"!=typeof t||null===t)return Object(i.L)(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",o=0;o<e.length;o++)0!==o&&(r+=","),r+=Object(i.L)(e[o]),r+=":",r+=j(t[e[o]]);return r+"}"},R=function(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)r.push(t.substring(i,i+e>n?n:i+e));return r};function M(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}var P=function(t){var e,n,r,o,s;Object(i.f)(!A(t),"Invalid JSON number"),0===t?(n=0,r=0,e=1/t==-1/0?1:0):(e=t<0,(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(o=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,r=Math.round(t*Math.pow(2,52-o)-Math.pow(2,52))):(n=0,r=Math.round(t/Math.pow(2,-1074))));var a=[];for(s=52;s;s-=1)a.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;s-=1)a.push(n%2?1:0),n=Math.floor(n/2);a.push(e?1:0),a.reverse();var u=a.join(""),c="";for(s=0;s<64;s+=8){var l=parseInt(u.substr(s,8),2).toString(16);1===l.length&&(l="0"+l),c+=l}return c.toLowerCase()},F=new RegExp("^-?(0*)\\d{1,10}$"),L=function(t){if(F.test(t)){var e=Number(t);if(e>=-2147483648&&e<=2147483647)return e}return null},U=function(t){try{t()}catch(e){setTimeout(function(){throw I("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},V=function(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n},q=function(){function t(t,e){var n=this;this.appName_=t,this.appCheckProvider=e,this.appCheck=null==e?void 0:e.getImmediate({optional:!0}),this.appCheck||null==e||e.get().then(function(t){return n.appCheck=t})}return t.prototype.getToken=function(t){return this.appCheck?this.appCheck.getToken(t):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){var e;null===(e=this.appCheckProvider)||void 0===e||e.get().then(function(e){return e.addTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){I('Provided AppCheck credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly.')},t}(),B=function(){function t(t,e,n){var r=this;this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.get().then(function(t){return r.auth_=t})}return t.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(C("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},t.prototype.addTokenChangeListener=function(t){this.auth_?this.auth_.addAuthTokenListener(t):(setTimeout(function(){return t(null)},0),this.authProvider_.get().then(function(e){return e.addAuthTokenListener(t)}))},t.prototype.removeTokenChangeListener=function(t){this.authProvider_.get().then(function(e){return e.removeAuthTokenListener(t)})},t.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';I(t+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.')},t}(),z=function(){function t(t){this.accessToken=t}return t.prototype.getToken=function(t){return Promise.resolve({accessToken:this.accessToken})},t.prototype.addTokenChangeListener=function(t){t(this.accessToken)},t.prototype.removeTokenChangeListener=function(t){},t.prototype.notifyForInvalidToken=function(){},t.OWNER="owner",t}(),H=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,W="websocket",K="long_polling",G=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=f.get("host:"+t)||this._host}return t.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},t.prototype.isCustomHost=function(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain},Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&f.set("host:"+this._host,this.internalHost))},enumerable:!1,configurable:!0}),t.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},t.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host+"/"+(this.includeNamespaceInQueryParams?"?ns="+this.namespace:"")},t}();function $(t,e,n){var r;if(Object(i.f)("string"==typeof e,"typeof type must == string"),Object(i.f)("object"==typeof n,"typeof params must == object"),e===W)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else{if(e!==K)throw new Error("Unknown connection type: "+e);r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?"}(function(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams})(t)&&(n.ns=t.namespace);var o=[];return M(n,function(t,e){o.push(t+"="+e)}),r+o.join("&")}var Y=function(){function t(){this.counters_={}}return t.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Object(i.k)(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},t.prototype.get=function(){return Object(i.n)(this.counters_)},t}(),Q={},X={};function J(t){var e=t.toString();return Q[e]||(Q[e]=new Y),Q[e]}var Z=function(){function t(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}return t.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},t.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=function(){var t=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var e=function(e){t[e]&&U(function(){n.onMessage_(t[e])})},r=0;r<t.length;++r)e(r);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==r(););},t}(),tt="start",et="close",nt=function(){function t(t,e,n,r,i,o,s){var a=this;this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=i,this.transportSessionId=o,this.lastSessionId=s,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=O(t),this.stats_=J(e),this.urlFn=function(t){return a.appCheckToken&&(t.ac=a.appCheckToken),$(e,K,t)}}return t.prototype.open=function(t,e){var n=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Z(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){n.log_("Timed out trying to connect."),n.onClosed_(),n.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(Object(i.B)()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!n.isClosed_){n.scriptTagHolder=new rt(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,5),i=r[0],s=r[1],a=r[2];if(n.incrementIncomingBytes_(t),n.scriptTagHolder)if(n.connectTimeoutTimer_&&(clearTimeout(n.connectTimeoutTimer_),n.connectTimeoutTimer_=null),n.everConnected_=!0,i===tt)n.id=s,n.password=a;else{if(i!==et)throw new Error("Unrecognized command received: "+i);s?(n.scriptTagHolder.sendNewPolls=!1,n.myPacketOrderer.closeAfter(s,function(){n.onClosed_()})):n.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Object(o.e)(t,2),i=r[0],s=r[1];n.incrementIncomingBytes_(t),n.myPacketOrderer.handleResponse(i,s)},function(){n.onClosed_()},n.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),n.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=n.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",n.transportSessionId&&(t.s=n.transportSessionId),n.lastSessionId&&(t.ls=n.lastSessionId),n.applicationId&&(t.p=n.applicationId),n.appCheckToken&&(t.ac=n.appCheckToken),"undefined"!=typeof location&&location.hostname&&H.test(location.hostname)&&(t.r="f");var e=n.urlFn(t);n.log_("Connecting via long-poll to "+e),n.scriptTagHolder.addTag(e,function(){})}})},t.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},t.forceAllow=function(){t.forceAllow_=!0},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){return!(Object(i.B)()||!t.forceAllow_&&(t.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},t.prototype.markConnectionHealthy=function(){},t.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},t.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},t.prototype.send=function(t){var e=Object(i.L)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=Object(i.i)(e),r=R(n,1840),o=0;o<r.length;o++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[o]),this.curSegmentNum++},t.prototype.addDisconnectPingFrame=function(t,e){if(!Object(i.B)()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},t.prototype.incrementIncomingBytes_=function(t){var e=Object(i.L)(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},t}(),rt=function(){function t(e,n,r,o){if(this.onDisconnect=r,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,Object(i.B)())this.commandCB=e,this.onMessageCB=n;else{this.uniqueCallbackIdentifier=m(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=n,this.myIFrame=t.createIFrame_();var s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(s='<script>document.domain="'+document.domain+'";<\/script>');var a="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(a),this.myIFrame.doc.close()}catch(u){C("frame writing exception"),u.stack&&C(u.stack),C(u)}}}return t.createIFrame_=function(){var t=document.createElement("iframe");if(t.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(t);try{t.contentWindow.document||C("No IE domain setting required")}catch(n){var e=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+e+"';document.close();})())"}return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t},t.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},t.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},t.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return this.addLongPollTag_(e+=n,this.currentSerial),!0}return!1},t.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},t.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);var r=function(){n.outstandingRequests.delete(e),n.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},t.prototype.addTag=function(t,e){var n=this;Object(i.B)()?this.doNodeLongPoll(t,e):setTimeout(function(){try{if(!n.sendNewPolls)return;var r=n.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=t,r.onload=r.onreadystatechange=function(){var t=r.readyState;t&&"loaded"!==t&&"complete"!==t||(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),e())},r.onerror=function(){C("Long-poll script failed to load: "+t),n.sendNewPolls=!1,n.close()},n.myIFrame.doc.body.appendChild(r)}catch(i){}},Math.floor(1))},t}(),it=null;"undefined"!=typeof MozWebSocket?it=MozWebSocket:"undefined"!=typeof WebSocket&&(it=WebSocket);var ot=function(){function t(e,n,r,i,o,s,a){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=O(this.connId),this.stats_=J(n),this.connURL=t.connectionURL_(n,s,a,i),this.nodeAdmin=n.nodeAdmin}return t.connectionURL_=function(t,e,n,r){var o={v:"5"};return!Object(i.B)()&&"undefined"!=typeof location&&location.hostname&&H.test(location.hostname)&&(o.r="f"),e&&(o.s=e),n&&(o.ls=n),r&&(o.ac=r),$(t,W,o)},t.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,f.set("previous_websocket_failure",!0);try{if(Object(i.B)()){var r={headers:{"User-Agent":"Firebase/5/"+a+"/"+process.platform+"/"+(this.nodeAdmin?"AdminNode":"Node"),"X-Firebase-GMPID":this.applicationId||""}};this.nodeAdmin?r.headers.Authorization=this.authToken||"":r.headers["X-Firebase-AppCheck"]=this.appCheckToken||"";var o=process.env,s=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;s&&(r.proxy={origin:s}),this.mySock=new it(this.connURL,[],r)}else this.mySock=new it(this.connURL,[],r={headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(c){this.log_("Error instantiating WebSocket.");var u=c.message||c.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},t.prototype.start=function(){},t.forceDisallow=function(){t.forceDisallow_=!0},t.isAvailable=function(){var e=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var n=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);n&&n.length>1&&parseFloat(n[1])<4.4&&(e=!0)}return!e&&null!==it&&!t.forceDisallow_},t.previouslyFailed=function(){return f.isInMemoryStorage||!0===f.get("previous_websocket_failure")},t.prototype.markConnectionHealthy=function(){f.remove("previous_websocket_failure")},t.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=Object(i.F)(e);this.onMessage(n)}},t.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},t.prototype.extractFrameCount_=function(t){if(Object(i.f)(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},t.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},t.prototype.send=function(t){this.resetKeepAlive();var e=Object(i.L)(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=R(e,16384);n.length>1&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},t.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},t.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},t.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},t.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},t.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(e){this.log_("Exception thrown from WebSocket.send():",e.message||e.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},t.responsesRequiredToBeHealthy=2,t.healthyTimeout=3e4,t}(),st=function(){function t(t){this.initTransports_(t)}return Object.defineProperty(t,"ALL_TRANSPORTS",{get:function(){return[nt,ot]},enumerable:!1,configurable:!0}),t.prototype.initTransports_=function(e){var n,r,i=ot&&ot.isAvailable(),s=i&&!ot.previouslyFailed();if(e.webSocketOnly&&(i||I("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[ot];else{var a=this.transports_=[];try{for(var u=Object(o.g)(t.ALL_TRANSPORTS),c=u.next();!c.done;c=u.next()){var l=c.value;l&&l.isAvailable()&&a.push(l)}}catch(h){n={error:h}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}},t.prototype.initialTransport=function(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")},t.prototype.upgradeTransport=function(){return this.transports_.length>1?this.transports_[1]:null},t}(),at=function(){function t(t,e,n,r,i,o,s,a,u,c){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=i,this.onMessage_=o,this.onReady_=s,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=c,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=O("c:"+this.id+":"),this.transportManager_=new st(e),this.log_("Connection created"),this.start_()}return t.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=V(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&t.conn_.bytesReceived>102400?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&t.conn_.bytesSent>10240?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},t.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},t.prototype.disconnReceiver_=function(t){var e=this;return function(n){t===e.conn_?e.onConnectionLost_(n):t===e.secondaryConn_?(e.log_("Secondary connection lost."),e.onSecondaryConnectionLost_()):e.log_("closing an old connection")}},t.prototype.connReceiver_=function(t){var e=this;return function(n){2!==e.state_&&(t===e.rx_?e.onPrimaryMessageReceived_(n):t===e.secondaryConn_?e.onSecondaryMessageReceived_(n):e.log_("message on old connection"))}},t.prototype.sendRequest=function(t){this.sendData_({t:"d",d:t})},t.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},t.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},t.prototype.onSecondaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},t.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},t.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},t.prototype.onPrimaryMessageReceived_=function(t){var e=N("t",t),n=N("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},t.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},t.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},t.prototype.onControl_=function(t){var e=N("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?E("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):E("Unknown control packet command: "+e)}},t.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&I("Protocol version mismatch detected"),this.tryStartUpgrade_())},t.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},t.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),V(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},t.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,1===this.state_?this.close():(this.closeConnections_(),this.start_())},t.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):V(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},t.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},t.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},t.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(f.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},t.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},t.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},t.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},t.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},t}(),ut=function(){function t(){}return t.prototype.put=function(t,e,n,r){},t.prototype.merge=function(t,e,n,r){},t.prototype.refreshAuthToken=function(t){},t.prototype.refreshAppCheckToken=function(t){},t.prototype.onDisconnectPut=function(t,e,n){},t.prototype.onDisconnectMerge=function(t,e,n){},t.prototype.onDisconnectCancel=function(t,e){},t.prototype.reportStats=function(t){},t}(),ct=function(){function t(t){this.allowedEvents_=t,this.listeners_={},Object(i.f)(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}return t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Object(o.f)([],Object(o.e)(this.listeners_[t])),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},t.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},t.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},t.prototype.validateEventType_=function(t){Object(i.f)(this.allowedEvents_.find(function(e){return e===t}),"Unknown event: "+t)},t}(),lt=function(t){function e(){var e=t.call(this,["online"])||this;return e.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Object(i.z)()||(window.addEventListener("online",function(){e.online_||(e.online_=!0,e.trigger("online",!0))},!1),window.addEventListener("offline",function(){e.online_&&(e.online_=!1,e.trigger("online",!1))},!1)),e}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.f)("online"===t,"Unknown event type: "+t),[this.online_]},e.prototype.currentlyOnline=function(){return this.online_},e}(ct),ht=function(){function t(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}return t.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},t}();function dt(){return new ht("")}function ft(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function pt(t){return t.pieces_.length-t.pieceNum_}function gt(t){var e=t.pieceNum_;return e<t.pieces_.length&&e++,new ht(t.pieces_,e)}function mt(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function bt(t,e){return void 0===e&&(e=0),t.pieces_.slice(t.pieceNum_+e)}function vt(t){if(t.pieceNum_>=t.pieces_.length)return null;for(var e=[],n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new ht(e,0)}function yt(t,e){for(var n=[],r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof ht)for(r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{var i=e.split("/");for(r=0;r<i.length;r++)i[r].length>0&&n.push(i[r])}return new ht(n,0)}function _t(t){return t.pieceNum_>=t.pieces_.length}function wt(t,e){var n=ft(t),r=ft(e);if(null===n)return e;if(n===r)return wt(gt(t),gt(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function Ct(t,e){for(var n=bt(t,0),r=bt(e,0),i=0;i<n.length&&i<r.length;i++){var o=D(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1}function Ot(t,e){if(pt(t)!==pt(e))return!1;for(var n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Et(t,e){var n=t.pieceNum_,r=e.pieceNum_;if(pt(t)>pt(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}var St=function(){return function(t,e){this.errorPrefix_=e,this.parts_=bt(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=Object(i.J)(this.parts_[n]);It(this)}}();function It(t){if(t.byteLength_>768)throw new Error(t.errorPrefix_+"has a key path longer than 768 bytes ("+t.byteLength_+").");if(t.parts_.length>32)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+At(t))}function At(t){return 0===t.parts_.length?"":"in property '"+t.parts_.join(".")+"'"}var Tt,xt,Dt=function(t){function e(){var e,n,r=t.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(n="visibilitychange",e="hidden"):void 0!==document.mozHidden?(n="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(n="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(n="webkitvisibilitychange",e="webkitHidden")),r.visible_=!0,n&&document.addEventListener(n,function(){var t=!document[e];t!==r.visible_&&(r.visible_=t,r.trigger("visible",t))},!1),r}return Object(o.c)(e,t),e.getInstance=function(){return new e},e.prototype.getInitialEvent=function(t){return Object(i.f)("visible"===t,"Unknown event type: "+t),[this.visible_]},e}(ct),kt=1e3,Nt=function(t){function e(n,r,o,s,a,u,c,l){var h=t.call(this)||this;if(h.repoInfo_=n,h.applicationId_=r,h.onDataUpdate_=o,h.onConnectStatus_=s,h.onServerInfoUpdate_=a,h.authTokenProvider_=u,h.appCheckTokenProvider_=c,h.authOverride_=l,h.id=e.nextPersistentConnectionId_++,h.log_=O("p:"+h.id+":"),h.interruptReasons_={},h.listens=new Map,h.outstandingPuts_=[],h.outstandingGets_=[],h.outstandingPutCount_=0,h.outstandingGetCount_=0,h.onDisconnectRequestQueue_=[],h.connected_=!1,h.reconnectDelay_=kt,h.maxReconnectDelay_=3e5,h.securityDebugCallback_=null,h.lastSessionId=null,h.establishConnectionTimer_=null,h.visible_=!1,h.requestCBHash_={},h.requestNumber_=0,h.realtime_=null,h.authToken_=null,h.appCheckToken_=null,h.forceTokenRefresh_=!1,h.invalidAuthTokenCount_=0,h.invalidAppCheckTokenCount_=0,h.firstConnection_=!0,h.lastConnectionAttemptTime_=null,h.lastConnectionEstablishedTime_=null,l&&!Object(i.B)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return h.scheduleConnect_(0),Dt.getInstance().on("visible",h.onVisible_,h),-1===n.host.indexOf("fblocal")&&lt.getInstance().on("online",h.onOnline_,h),h}return Object(o.c)(e,t),e.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,o={r:r,a:t,b:e};this.log_(Object(i.L)(o)),Object(i.f)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),n&&(this.requestCBHash_[r]=n)},e.prototype.get=function(t){var e=this,n=new i.a,r={p:t._path.toString(),q:t._queryObject},o={action:"g",request:r,onComplete:function(t){var i=t.d;"ok"===t.s?(e.onDataUpdate_(r.p,i,!1,null),n.resolve(i)):n.reject(i)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;var s=this.outstandingGets_.length-1;return this.connected_||setTimeout(function(){var t=e.outstandingGets_[s];void 0!==t&&o===t&&(delete e.outstandingGets_[s],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),e.log_("get "+s+" timed out on connection"),n.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(s),n.promise},e.prototype.listen=function(t,e,n,r){var o=t._queryIdentifier,s=t._path.toString();this.log_("Listen called for "+s+" "+o),this.listens.has(s)||this.listens.set(s,new Map),Object(i.f)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),Object(i.f)(!this.listens.get(s).has(o),"listen() called twice for same path/queryId.");var a={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(s).set(o,a),this.connected_&&this.sendListen_(a)},e.prototype.sendGet_=function(t){var e=this,n=this.outstandingGets_[t];this.sendRequest("g",n.request,function(r){delete e.outstandingGets_[t],e.outstandingGetCount_--,0===e.outstandingGetCount_&&(e.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})},e.prototype.sendListen_=function(t){var n=this,r=t.query,i=r._path.toString(),o=r._queryIdentifier;this.log_("Listen on "+i+" for "+o);var s={p:i};t.tag&&(s.q=r._queryObject,s.t=t.tag),s.h=t.hashFn(),this.sendRequest("q",s,function(s){var a=s.d,u=s.s;e.warnOnListenWarnings_(a,r),(n.listens.get(i)&&n.listens.get(i).get(o))===t&&(n.log_("listen response",s),"ok"!==u&&n.removeListen_(i,o),t.onComplete&&t.onComplete(u,a))})},e.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&Object(i.k)(t,"w")){var n=Object(i.I)(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e._queryParams.getIndex().toString()+'"',o=e._path.toString();I("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+o+" to your security rules for better performance.")}}},e.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},e.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||Object(i.s)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},e.prototype.refreshAppCheckToken=function(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},function(){})},e.prototype.tryAuth=function(){var t=this;if(this.connected_&&this.authToken_){var e=this.authToken_,n=Object(i.E)(e)?"auth":"gauth",r={cred:e};null===this.authOverride_?r.noauth=!0:"object"==typeof this.authOverride_&&(r.authvar=this.authOverride_),this.sendRequest(n,r,function(n){var r=n.s,i=n.d||"error";t.authToken_===e&&("ok"===r?t.invalidAuthTokenCount_=0:t.onAuthRevoked_(r,i))})}},e.prototype.tryAppCheck=function(){var t=this;this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},function(e){var n=e.s,r=e.d||"error";"ok"===n?t.invalidAppCheckTokenCount_=0:t.onAppCheckRevoked_(n,r)})},e.prototype.unlisten=function(t,e){var n=t._path.toString(),r=t._queryIdentifier;this.log_("Unlisten called for "+n+" "+r),Object(i.f)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t._queryObject,e)},e.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},e.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},e.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},e.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},e.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},e.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},e.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},e.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+e)},e.prototype.sendPut_=function(t){var e=this,n=this.outstandingPuts_[t].action,r=this.outstandingPuts_[t].request,i=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(n,r,function(r){e.log_(n+" response",r),delete e.outstandingPuts_[t],e.outstandingPutCount_--,0===e.outstandingPutCount_&&(e.outstandingPuts_=[]),i&&i(r.s,r.d)})},e.prototype.reportStats=function(t){var e=this;if(this.connected_){var n={c:t};this.log_("reportStats",n),this.sendRequest("s",n,function(t){"ok"!==t.s&&e.log_("reportStats","Error sending stats: "+t.d)})}},e.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Object(i.L)(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},e.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"apc"===t?this.onAppCheckRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):E("Unrecognized action received from server: "+Object(i.L)(t)+"\nAre you using the latest client?")},e.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},e.prototype.scheduleConnect_=function(t){var e=this;Object(i.f)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},e.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=kt,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},e.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=kt,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},e.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=kt),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},e.prototype.establishConnection_=function(){return Object(o.b)(this,void 0,void 0,function(){var t,n,r,s,a,u,c,l,h,d,f,p,g,m=this;return Object(o.d)(this,function(b){switch(b.label){case 0:if(!this.shouldReconnect_())return[3,4];this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,t=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+e.nextConnectionId_++,a=this.lastSessionId,u=!1,c=null,this.realtime_={close:l=function(){c?c.close():(u=!0,r())},sendRequest:function(t){Object(i.f)(c,"sendRequest call when we're not connected not allowed."),c.sendRequest(t)}},h=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,b.label=1;case 1:return b.trys.push([1,3,,4]),[4,Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)])];case 2:return d=o.e.apply(void 0,[b.sent(),2]),f=d[0],p=d[1],u?C("getToken() completed but was canceled"):(C("getToken() completed. Creating connection."),this.authToken_=f&&f.accessToken,this.appCheckToken_=p&&p.token,c=new at(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,t,n,r,function(t){I(t+" ("+m.repoInfo_.toString()+")"),m.interrupt("server_kill")},a)),[3,4];case 3:return g=b.sent(),this.log_("Failed to get token: "+g),u||(this.repoInfo_.nodeAdmin&&I(g),l()),[3,4];case 4:return[2]}})})},e.prototype.interrupt=function(t){C("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},e.prototype.resume=function(t){C("Resuming connection for reason: "+t),delete this.interruptReasons_[t],Object(i.w)(this.interruptReasons_)&&(this.reconnectDelay_=kt,this.realtime_||this.scheduleConnect_(0))},e.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},e.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},e.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return j(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},e.prototype.removeListen_=function(t,e){var n,r=new ht(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},e.prototype.onAuthRevoked_=function(t,e){C("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},e.prototype.onAppCheckRevoked_=function(t,e){C("App check token revoked: "+t+"/"+e),this.appCheckToken_=null,this.forceTokenRefresh_=!0,"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())},e.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},e.prototype.restoreState_=function(){var t,e,n,r;this.tryAuth(),this.tryAppCheck();try{for(var i=Object(o.g)(this.listens.values()),s=i.next();!s.done;s=i.next()){var a=s.value;try{for(var u=(n=void 0,Object(o.g)(a.values())),c=u.next();!c.done;c=u.next())this.sendListen_(c.value)}catch(d){n={error:d}}finally{try{c&&!c.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}}}catch(f){t={error:f}}finally{try{s&&!s.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}for(var l=0;l<this.outstandingPuts_.length;l++)this.outstandingPuts_[l]&&this.sendPut_(l);for(;this.onDisconnectRequestQueue_.length;){var h=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(h.action,h.pathString,h.data,h.onComplete)}for(l=0;l<this.outstandingGets_.length;l++)this.outstandingGets_[l]&&this.sendGet_(l)},e.prototype.sendConnectStats_=function(){var t={},e="js";Object(i.B)()&&(e=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+e+"."+a.replace(/\./g,"-")]=1,Object(i.z)()?t["framework.cordova"]=1:Object(i.C)()&&(t["framework.reactnative"]=1),this.reportStats(t)},e.prototype.shouldReconnect_=function(){var t=lt.getInstance().currentlyOnline();return Object(i.w)(this.interruptReasons_)&&t},e.nextPersistentConnectionId_=0,e.nextConnectionId_=0,e}(ut),jt=function(){function t(t,e){this.name=t,this.node=e}return t.Wrap=function(e,n){return new t(e,n)},t}(),Rt=function(){function t(){}return t.prototype.getCompare=function(){return this.compare.bind(this)},t.prototype.indexedValueChanged=function(t,e){var n=new jt(T,t),r=new jt(T,e);return 0!==this.compare(n,r)},t.prototype.minPost=function(){return jt.MIN},t}(),Mt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),Object.defineProperty(e,"__EMPTY_NODE",{get:function(){return Tt},set:function(t){Tt=t},enumerable:!1,configurable:!0}),e.prototype.compare=function(t,e){return D(t.name,e.name)},e.prototype.isDefinedOn=function(t){throw Object(i.g)("KeyIndex.isDefinedOn not expected to be called.")},e.prototype.indexedValueChanged=function(t,e){return!1},e.prototype.minPost=function(){return jt.MIN},e.prototype.maxPost=function(){return new jt(x,Tt)},e.prototype.makePost=function(t,e){return Object(i.f)("string"==typeof t,"KeyIndex indexValue must always be a string."),new jt(t,Tt)},e.prototype.toString=function(){return".key"},e}(Rt),Pt=new Mt,Ft=function(){function t(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}return t.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},t.prototype.hasNext=function(){return this.nodeStack_.length>0},t.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},t}(),Lt=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:Vt.EMPTY_NODE,this.right=null!=o?o:Vt.EMPTY_NODE}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.count=function(){return this.left.count()+1+this.right.count()},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},t.prototype.minKey=function(){return this.min_().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},t.prototype.removeMin_=function(){if(this.left.isEmpty())return Vt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},t.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return Vt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},t.prototype.isRed_=function(){return this.color},t.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},t.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},t.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},t.prototype.rotateLeft_=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight_=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},t.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},t.RED=!0,t.BLACK=!1,t}(),Ut=function(){function t(){}return t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Lt(t,e,null)},t.prototype.remove=function(t,e){return this},t.prototype.count=function(){return 0},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.check_=function(){return 0},t.prototype.isRed_=function(){return!1},t}(),Vt=function(){function t(e,n){void 0===n&&(n=t.EMPTY_NODE),this.comparator_=e,this.root_=n}return t.prototype.insert=function(e,n){return new t(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,Lt.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Lt.BLACK,null,null))},t.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null},t.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:e>0&&(r=n,n=n.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},t.prototype.isEmpty=function(){return this.root_.isEmpty()},t.prototype.count=function(){return this.root_.count()},t.prototype.minKey=function(){return this.root_.minKey()},t.prototype.maxKey=function(){return this.root_.maxKey()},t.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},t.prototype.getIterator=function(t){return new Ft(this.root_,null,this.comparator_,!1,t)},t.prototype.getIteratorFrom=function(t,e){return new Ft(this.root_,t,this.comparator_,!1,e)},t.prototype.getReverseIteratorFrom=function(t,e){return new Ft(this.root_,t,this.comparator_,!0,e)},t.prototype.getReverseIterator=function(t){return new Ft(this.root_,null,this.comparator_,!0,t)},t.EMPTY_NODE=new Ut,t}();function qt(t,e){return D(t.name,e.name)}function Bt(t,e){return D(t,e)}var zt,Ht,Wt,Kt,Gt,$t=function(t){return"number"==typeof t?"number:"+P(t):"string:"+t},Yt=function(t){if(t.isLeafNode()){var e=t.val();Object(i.f)("string"==typeof e||"number"==typeof e||"object"==typeof e&&Object(i.k)(e,".sv"),"Priority must be a string or number.")}else Object(i.f)(t===xt||t.isEmpty(),"priority of unexpected type.");Object(i.f)(t===xt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Qt=function(){function t(e,n){void 0===n&&(n=t.__childrenNodeConstructor.EMPTY_NODE),this.value_=e,this.priorityNode_=n,this.lazyHash_=null,Object(i.f)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Yt(this.priorityNode_)}return Object.defineProperty(t,"__childrenNodeConstructor",{get:function(){return zt},set:function(t){zt=t},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!0},t.prototype.getPriority=function(){return this.priorityNode_},t.prototype.updatePriority=function(e){return new t(this.value_,e)},t.prototype.getImmediateChild=function(e){return".priority"===e?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.getChild=function(e){return _t(e)?this:".priority"===ft(e)?this.priorityNode_:t.__childrenNodeConstructor.EMPTY_NODE},t.prototype.hasChild=function(){return!1},t.prototype.getPredecessorChildName=function(t,e){return null},t.prototype.updateImmediateChild=function(e,n){return".priority"===e?this.updatePriority(n):n.isEmpty()&&".priority"!==e?this:t.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)},t.prototype.updateChild=function(e,n){var r=ft(e);return null===r?n:n.isEmpty()&&".priority"!==r?this:(Object(i.f)(".priority"!==r||1===pt(e),".priority must be the last token in a path"),this.updateImmediateChild(r,t.__childrenNodeConstructor.EMPTY_NODE.updateChild(gt(e),n)))},t.prototype.isEmpty=function(){return!1},t.prototype.numChildren=function(){return 0},t.prototype.forEachChild=function(t,e){return!1},t.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+$t(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"===e?P(this.value_):this.value_,this.lazyHash_=b(t)}return this.lazyHash_},t.prototype.getValue=function(){return this.value_},t.prototype.compareTo=function(e){return e===t.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof t.__childrenNodeConstructor?-1:(Object(i.f)(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))},t.prototype.compareToLeafNode_=function(e){var n=typeof e.value_,r=typeof this.value_,o=t.VALUE_TYPE_ORDER.indexOf(n),s=t.VALUE_TYPE_ORDER.indexOf(r);return Object(i.f)(o>=0,"Unknown leaf type: "+n),Object(i.f)(s>=0,"Unknown leaf type: "+r),o===s?"object"===r?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-o},t.prototype.withIndex=function(){return this},t.prototype.isIndexed=function(){return!0},t.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_)},t.VALUE_TYPE_ORDER=["object","boolean","number","string"],t}(),Xt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?D(t.name,e.name):i},e.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},e.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},e.prototype.minPost=function(){return jt.MIN},e.prototype.maxPost=function(){return new jt(x,new Qt("[PRIORITY-POST]",Wt))},e.prototype.makePost=function(t,e){var n=Ht(t);return new jt(e,new Qt("[PRIORITY-POST]",n))},e.prototype.toString=function(){return".priority"},e}(Rt)),Jt=Math.log(2),Zt=function(){function t(t){this.count=parseInt(Math.log(t+1)/Jt,10),this.current_=this.count-1;var e=parseInt(Array(this.count+1).join("1"),2);this.bits_=t+1&e}return t.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},t}(),te=function(t,e,n,r){t.sort(e);var i=function(e,r){var o,s,a=r-e;if(0===a)return null;if(1===a)return o=t[e],s=n?n(o):o,new Lt(s,o.node,Lt.BLACK,null,null);var u=parseInt(a/2,10)+e,c=i(e,u),l=i(u+1,r);return o=t[u],s=n?n(o):o,new Lt(s,o.node,Lt.BLACK,c,l)},o=function(e){for(var r=null,o=null,s=t.length,a=function(e,r){var o=s-e,a=s;s-=e;var c=i(o+1,a),l=t[o],h=n?n(l):l;u(new Lt(h,l.node,r,null,c))},u=function(t){r?(r.left=t,r=t):(o=t,r=t)},c=0;c<e.count;++c){var l=e.nextBitIsOne(),h=Math.pow(2,e.count-(c+1));l?a(h,Lt.BLACK):(a(h,Lt.BLACK),a(h,Lt.RED))}return o}(new Zt(t.length));return new Vt(r||e,o)},ee={},ne=function(){function t(t,e){this.indexes_=t,this.indexSet_=e}return Object.defineProperty(t,"Default",{get:function(){return Object(i.f)(ee&&Xt,"ChildrenNode.ts has not been loaded"),Kt=Kt||new t({".priority":ee},{".priority":Xt})},enumerable:!1,configurable:!0}),t.prototype.get=function(t){var e=Object(i.I)(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Vt?e:null},t.prototype.hasIndex=function(t){return Object(i.k)(this.indexSet_,t.toString())},t.prototype.addIndex=function(e,n){Object(i.f)(e!==Pt,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var r,s=[],a=!1,u=n.getIterator(jt.Wrap),c=u.getNext();c;)a=a||e.isDefinedOn(c.node),s.push(c),c=u.getNext();r=a?te(s,e.getCompare()):ee;var l=e.toString(),h=Object(o.a)({},this.indexSet_);h[l]=e;var d=Object(o.a)({},this.indexes_);return d[l]=r,new t(d,h)},t.prototype.addToIndexes=function(e,n){var r=this;return new t(Object(i.G)(this.indexes_,function(t,o){var s=Object(i.I)(r.indexSet_,o);if(Object(i.f)(s,"Missing index implementation for "+o),t===ee){if(s.isDefinedOn(e.node)){for(var a=[],u=n.getIterator(jt.Wrap),c=u.getNext();c;)c.name!==e.name&&a.push(c),c=u.getNext();return a.push(e),te(a,s.getCompare())}return ee}var l=n.get(e.name),h=t;return l&&(h=h.remove(new jt(e.name,l))),h.insert(e,e.node)}),this.indexSet_)},t.prototype.removeFromIndexes=function(e,n){return new t(Object(i.G)(this.indexes_,function(t){if(t===ee)return t;var r=n.get(e.name);return r?t.remove(new jt(e.name,r)):t}),this.indexSet_)},t}(),re=function(){function t(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Yt(this.priorityNode_),this.children_.isEmpty()&&Object(i.f)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}return Object.defineProperty(t,"EMPTY_NODE",{get:function(){return Gt||(Gt=new t(new Vt(Bt),null,ne.Default))},enumerable:!1,configurable:!0}),t.prototype.isLeafNode=function(){return!1},t.prototype.getPriority=function(){return this.priorityNode_||Gt},t.prototype.updatePriority=function(e){return this.children_.isEmpty()?this:new t(this.children_,e,this.indexMap_)},t.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?Gt:e},t.prototype.getChild=function(t){var e=ft(t);return null===e?this:this.getImmediateChild(e).getChild(gt(t))},t.prototype.hasChild=function(t){return null!==this.children_.get(t)},t.prototype.updateImmediateChild=function(e,n){if(Object(i.f)(n,"We should always be passing snapshot nodes"),".priority"===e)return this.updatePriority(n);var r=new jt(e,n),o=void 0,s=void 0;n.isEmpty()?(o=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(o=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));var a=o.isEmpty()?Gt:this.priorityNode_;return new t(o,a,s)},t.prototype.updateChild=function(t,e){var n=ft(t);if(null===n)return e;Object(i.f)(".priority"!==ft(t)||1===pt(t),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(gt(t),e);return this.updateImmediateChild(n,r)},t.prototype.isEmpty=function(){return this.children_.isEmpty()},t.prototype.numChildren=function(){return this.children_.count()},t.prototype.val=function(e){if(this.isEmpty())return null;var n={},r=0,i=0,o=!0;if(this.forEachChild(Xt,function(s,a){n[s]=a.val(e),r++,o&&t.INTEGER_REGEXP_.test(s)?i=Math.max(i,Number(s)):o=!1}),!e&&o&&i<2*r){var s=[];for(var a in n)s[a]=n[a];return s}return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n},t.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.getPriority().isEmpty()||(t+="priority:"+$t(this.getPriority().val())+":"),this.forEachChild(Xt,function(e,n){var r=n.hash();""!==r&&(t+=":"+e+":"+r)}),this.lazyHash_=""===t?"":b(t)}return this.lazyHash_},t.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new jt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},t.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},t.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new jt(e,this.children_.get(e)):null},t.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},t.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new jt(e,this.children_.get(e)):null},t.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},t.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},t.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,jt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},t.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},t.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,jt.Wrap),i=r.peek();null!=i&&e.compare(i,t)>0;)r.getNext(),i=r.peek();return r},t.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ie?-1:0},t.prototype.withIndex=function(e){if(e===Pt||this.indexMap_.hasIndex(e))return this;var n=this.indexMap_.addIndex(e,this.children_);return new t(this.children_,this.priorityNode_,n)},t.prototype.isIndexed=function(t){return t===Pt||this.indexMap_.hasIndex(t)},t.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()===e.children_.count()){for(var n=this.getIterator(Xt),r=e.getIterator(Xt),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1}return!1},t.prototype.resolveIndex_=function(t){return t===Pt?null:this.indexMap_.get(t.toString())},t.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,t}(),ie=new(function(t){function e(){return t.call(this,new Vt(Bt),re.EMPTY_NODE,ne.Default)||this}return Object(o.c)(e,t),e.prototype.compareTo=function(t){return t===this?0:1},e.prototype.equals=function(t){return t===this},e.prototype.getPriority=function(){return this},e.prototype.getImmediateChild=function(t){return re.EMPTY_NODE},e.prototype.isEmpty=function(){return!1},e}(re));function oe(t,e){if(void 0===e&&(e=null),null===t)return re.EMPTY_NODE;if("object"==typeof t&&".priority"in t&&(e=t[".priority"]),Object(i.f)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof t&&".value"in t&&null!==t[".value"]&&(t=t[".value"]),"object"!=typeof t||".sv"in t)return new Qt(t,oe(e));if(t instanceof Array){var n=re.EMPTY_NODE;return M(t,function(e,r){if(Object(i.k)(t,e)&&"."!==e.substring(0,1)){var o=oe(r);!o.isLeafNode()&&o.isEmpty()||(n=n.updateImmediateChild(e,o))}}),n.updatePriority(oe(e))}var r=[],o=!1;if(M(t,function(t,e){if("."!==t.substring(0,1)){var n=oe(e);n.isEmpty()||(o=o||!n.getPriority().isEmpty(),r.push(new jt(t,n)))}}),0===r.length)return re.EMPTY_NODE;var s=te(r,qt,function(t){return t.name},Bt);if(o){var a=te(r,Xt.getCompare());return new re(s,oe(e),new ne({".priority":a},{".priority":Xt}))}return new re(s,oe(e),ne.Default)}Object.defineProperties(jt,{MIN:{value:new jt(T,re.EMPTY_NODE)},MAX:{value:new jt(x,ie)}}),Mt.__EMPTY_NODE=re.EMPTY_NODE,Qt.__childrenNodeConstructor=re,xt=ie,Wt=ie,Ht=oe;var se,ae,ue=function(t){function e(e){var n=t.call(this)||this;return n.indexPath_=e,Object(i.f)(!_t(e)&&".priority"!==ft(e),"Can't create PathIndex with empty path or .priority key"),n}return Object(o.c)(e,t),e.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},e.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},e.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?D(t.name,e.name):i},e.prototype.makePost=function(t,e){var n=oe(t),r=re.EMPTY_NODE.updateChild(this.indexPath_,n);return new jt(e,r)},e.prototype.maxPost=function(){var t=re.EMPTY_NODE.updateChild(this.indexPath_,ie);return new jt(x,t)},e.prototype.toString=function(){return bt(this.indexPath_,0).join("/")},e}(Rt),ce=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?D(t.name,e.name):n},e.prototype.isDefinedOn=function(t){return!0},e.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},e.prototype.minPost=function(){return jt.MIN},e.prototype.maxPost=function(){return jt.MAX},e.prototype.makePost=function(t,e){var n=oe(t);return new jt(e,n)},e.prototype.toString=function(){return".value"},e}(Rt)),le="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",he=(se=0,ae=[],function(t){var e,n=t===se;se=t;var r=new Array(8);for(e=7;e>=0;e--)r[e]=le.charAt(t%64),t=Math.floor(t/64);Object(i.f)(0===t,"Cannot push at time == 0");var o=r.join("");if(n){for(e=11;e>=0&&63===ae[e];e--)ae[e]=0;ae[e]++}else for(e=0;e<12;e++)ae[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)o+=le.charAt(ae[e]);return Object(i.f)(20===o.length,"nextPushId: Length should be 20."),o}),de=function(t){if("2147483647"===t)return"-";var e=L(t);if(null!=e)return""+(e+1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);if(n.length<786)return n.push("-"),n.join("");for(var i=n.length-1;i>=0&&"z"===n[i];)i--;if(-1===i)return x;var o=le.charAt(le.indexOf(n[i])+1);return n[i]=o,n.slice(0,i+1).join("")},fe=function(t){if("-2147483648"===t)return T;var e=L(t);if(null!=e)return""+(e-1);for(var n=new Array(t.length),r=0;r<n.length;r++)n[r]=t.charAt(r);return"-"===n[n.length-1]?1===n.length?"2147483647":(delete n[n.length-1],n.join("")):(n[n.length-1]=le.charAt(le.indexOf(n[n.length-1])-1),n.join("")+"z".repeat(786-n.length))};function pe(t){return{type:"value",snapshotNode:t}}function ge(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function me(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function be(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}var ve=function(){function t(t){this.index_=t}return t.prototype.updateChild=function(t,e,n,r,o,s){Object(i.f)(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()?t:(null!=s&&(n.isEmpty()?t.hasChild(e)?s.trackChildChange(me(e,a)):Object(i.f)(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?s.trackChildChange(ge(e,n)):s.trackChildChange(be(e,n,a))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},t.prototype.updateFullNode=function(t,e,n){return null!=n&&(t.isLeafNode()||t.forEachChild(Xt,function(t,r){e.hasChild(t)||n.trackChildChange(me(t,r))}),e.isLeafNode()||e.forEachChild(Xt,function(e,r){if(t.hasChild(e)){var i=t.getImmediateChild(e);i.equals(r)||n.trackChildChange(be(e,r,i))}else n.trackChildChange(ge(e,r))})),e.withIndex(this.index_)},t.prototype.updatePriority=function(t,e){return t.isEmpty()?re.EMPTY_NODE:t.updatePriority(e)},t.prototype.filtersNodes=function(){return!1},t.prototype.getIndexedFilter=function(){return this},t.prototype.getIndex=function(){return this.index_},t}(),ye=function(){function t(e){this.indexedFilter_=new ve(e.getIndex()),this.index_=e.getIndex(),this.startPost_=t.getStartPost_(e),this.endPost_=t.getEndPost_(e)}return t.prototype.getStartPost=function(){return this.startPost_},t.prototype.getEndPost=function(){return this.endPost_},t.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},t.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new jt(e,n))||(n=re.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},t.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=re.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(re.EMPTY_NODE);var i=this;return e.forEachChild(Xt,function(t,e){i.matches(new jt(t,e))||(r=r.updateImmediateChild(t,re.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.indexedFilter_},t.prototype.getIndex=function(){return this.index_},t.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},t.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},t}(),_e=function(){function t(t){this.rangedFilter_=new ye(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}return t.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new jt(e,n))||(n=re.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},t.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=re.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=re.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(re.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var l=this.index_.getCompare();c=function(t,e){return l(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var h=!1;i.hasNext();)s=i.getNext(),!h&&c(a,s)<=0&&(h=!0),h&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,re.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},t.prototype.updatePriority=function(t,e){return t},t.prototype.filtersNodes=function(){return!0},t.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},t.prototype.getIndex=function(){return this.index_},t.prototype.fullLimitUpdateChild_=function(t,e,n,r,o){var s;if(this.reverse_){var a=this.index_.getCompare();s=function(t,e){return a(e,t)}}else s=this.index_.getCompare();var u=t;Object(i.f)(u.numChildren()===this.limit_,"");var c=new jt(e,n),l=this.reverse_?u.getFirstChild(this.index_):u.getLastChild(this.index_),h=this.rangedFilter_.matches(c);if(u.hasChild(e)){for(var d=u.getImmediateChild(e),f=r.getChildAfterChild(this.index_,l,this.reverse_);null!=f&&(f.name===e||u.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,c);if(h&&!n.isEmpty()&&p>=0)return null!=o&&o.trackChildChange(be(e,n,d)),u.updateImmediateChild(e,n);null!=o&&o.trackChildChange(me(e,d));var g=u.updateImmediateChild(e,re.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=o&&o.trackChildChange(ge(f.name,f.node)),g.updateImmediateChild(f.name,f.node)):g}return n.isEmpty()?t:h&&s(l,c)>=0?(null!=o&&(o.trackChildChange(me(l.name,l.node)),o.trackChildChange(ge(e,n))),u.updateImmediateChild(e,n).updateImmediateChild(l.name,re.EMPTY_NODE)):t},t}(),we=function(){function t(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Xt}return t.prototype.hasStart=function(){return this.startSet_},t.prototype.hasStartAfter=function(){return this.startAfterSet_},t.prototype.hasEndBefore=function(){return this.endBeforeSet_},t.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_},t.prototype.getIndexStartValue=function(){return Object(i.f)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},t.prototype.getIndexStartName=function(){return Object(i.f)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:T},t.prototype.hasEnd=function(){return this.endSet_},t.prototype.getIndexEndValue=function(){return Object(i.f)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},t.prototype.getIndexEndName=function(){return Object(i.f)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:x},t.prototype.hasLimit=function(){return this.limitSet_},t.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},t.prototype.getLimit=function(){return Object(i.f)(this.limitSet_,"Only valid if limit has been set"),this.limit_},t.prototype.getIndex=function(){return this.index_},t.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},t.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Xt},t.prototype.copy=function(){var e=new t;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e},t}();function Ce(t,e,n){var r=t.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=n?(r.startNameSet_=!0,r.indexStartName_=n):(r.startNameSet_=!1,r.indexStartName_=""),r}function Oe(t,e,n){var r=t.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==n?(r.endNameSet_=!0,r.indexEndName_=n):(r.endNameSet_=!1,r.indexEndName_=""),r}function Ee(t,e){var n=t.copy();return n.index_=e,n}function Se(t){var e,n={};return t.isDefault()||(t.index_===Xt?e="$priority":t.index_===ce?e="$value":t.index_===Pt?e="$key":(Object(i.f)(t.index_ instanceof ue,"Unrecognized index type!"),e=t.index_.toString()),n.orderBy=Object(i.L)(e),t.startSet_&&(n.startAt=Object(i.L)(t.indexStartValue_),t.startNameSet_&&(n.startAt+=","+Object(i.L)(t.indexStartName_))),t.endSet_&&(n.endAt=Object(i.L)(t.indexEndValue_),t.endNameSet_&&(n.endAt+=","+Object(i.L)(t.indexEndName_))),t.limitSet_&&(t.isViewFromLeft()?n.limitToFirst=t.limit_:n.limitToLast=t.limit_)),n}function Ie(t){var e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_)),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_)),t.limitSet_){e.l=t.limit_;var n=t.viewFrom_;""===n&&(n=t.isViewFromLeft()?"l":"r"),e.vf=n}return t.index_!==Xt&&(e.i=t.index_.toString()),e}var Ae=function(t){function e(e,n,r,i){var o=t.call(this)||this;return o.repoInfo_=e,o.onDataUpdate_=n,o.authTokenProvider_=r,o.appCheckTokenProvider_=i,o.log_=O("p:rest:"),o.listens_={},o}return Object(o.c)(e,t),e.prototype.reportStats=function(t){throw new Error("Method not implemented.")},e.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Object(i.f)(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())},e.prototype.listen=function(t,n,r,o){var s=this,a=t._path.toString();this.log_("Listen called for "+a+" "+t._queryIdentifier);var u=e.getListenId_(t,r),c={};this.listens_[u]=c;var l=Se(t._queryParams);this.restRequest_(a+".json",l,function(t,e){var n=e;404===t&&(n=null,t=null),null===t&&s.onDataUpdate_(a,n,!1,r),Object(i.I)(s.listens_,u)===c&&o(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},e.prototype.unlisten=function(t,n){var r=e.getListenId_(t,n);delete this.listens_[r]},e.prototype.get=function(t){var e=this,n=Se(t._queryParams),r=t._path.toString(),o=new i.a;return this.restRequest_(r+".json",n,function(t,n){var i=n;404===t&&(i=null,t=null),null===t?(e.onDataUpdate_(r,i,!1,null),o.resolve(i)):o.reject(new Error(i))}),o.promise},e.prototype.refreshAuthToken=function(t){},e.prototype.restRequest_=function(t,e,n){var r=this;return void 0===e&&(e={}),e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(function(s){var a=Object(o.e)(s,2),u=a[0],c=a[1];u&&u.accessToken&&(e.auth=u.accessToken),c&&c.token&&(e.ac=c.token);var l=(r.repoInfo_.secure?"https://":"http://")+r.repoInfo_.host+t+"?ns="+r.repoInfo_.namespace+Object(i.H)(e);r.log_("Sending REST request for "+l);var h=new XMLHttpRequest;h.onreadystatechange=function(){if(n&&4===h.readyState){r.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);var t=null;if(h.status>=200&&h.status<300){try{t=Object(i.F)(h.responseText)}catch(e){I("Failed to parse JSON response for "+l+": "+h.responseText)}n(null,t)}else 401!==h.status&&404!==h.status&&I("Got unsuccessful REST response for "+l+" Status: "+h.status),n(h.status);n=null}},h.open("GET",l,!0),h.send()})},e}(ut),Te=function(){function t(){this.rootNode_=re.EMPTY_NODE}return t.prototype.getNode=function(t){return this.rootNode_.getChild(t)},t.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},t}();function xe(){return{value:null,children:new Map}}function De(t,e,n){if(_t(e))t.value=n,t.children.clear();else if(null!==t.value)t.value=t.value.updateChild(e,n);else{var r=ft(e);t.children.has(r)||t.children.set(r,xe()),De(t.children.get(r),e=gt(e),n)}}function ke(t,e){if(_t(e))return t.value=null,t.children.clear(),!0;if(null!==t.value){if(t.value.isLeafNode())return!1;var n=t.value;return t.value=null,n.forEachChild(Xt,function(e,n){De(t,new ht(e),n)}),ke(t,e)}if(t.children.size>0){var r=ft(e);return e=gt(e),t.children.has(r)&&ke(t.children.get(r),e)&&t.children.delete(r),0===t.children.size}return!0}function Ne(t,e,n){null!==t.value?n(e,t.value):function(t,e){t.children.forEach(function(t,n){e(n,t)})}(t,function(t,r){Ne(r,new ht(e.toString()+"/"+t),n)})}var je=function(){function t(t){this.collection_=t,this.last_=null}return t.prototype.get=function(){var t=this.collection_.get(),e=Object(o.a)({},t);return this.last_&&M(this.last_,function(t,n){e[t]=e[t]-n}),this.last_=t,e},t}(),Re=function(){function t(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new je(t);var n=1e4+2e4*Math.random();V(this.reportStats_.bind(this),Math.floor(n))}return t.prototype.reportStats_=function(){var t=this,e=this.statsListener_.get(),n={},r=!1;M(e,function(e,o){o>0&&Object(i.k)(t.statsToReport_,e)&&(n[e]=o,r=!0)}),r&&this.server_.reportStats(n),V(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},t}(),Me=function(t){return t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",t}({});function Pe(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}var Fe,Le=function(){function t(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Me.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}return t.prototype.operationForChild=function(e){if(_t(this.path)){if(null!=this.affectedTree.value)return Object(i.f)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var n=this.affectedTree.subtree(new ht(e));return new t(dt(),n,this.revert)}return Object(i.f)(ft(this.path)===e,"operationForChild called for unrelated child."),new t(gt(this.path),this.affectedTree,this.revert)},t}(),Ue=function(){function t(t,e){this.source=t,this.path=e,this.type=Me.LISTEN_COMPLETE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,dt()):new t(this.source,gt(this.path))},t}(),Ve=function(){function t(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Me.OVERWRITE}return t.prototype.operationForChild=function(e){return _t(this.path)?new t(this.source,dt(),this.snap.getImmediateChild(e)):new t(this.source,gt(this.path),this.snap)},t}(),qe=function(){function t(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Me.MERGE}return t.prototype.operationForChild=function(e){if(_t(this.path)){var n=this.children.subtree(new ht(e));return n.isEmpty()?null:n.value?new Ve(this.source,dt(),n.value):new t(this.source,dt(),n)}return Object(i.f)(ft(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new t(this.source,gt(this.path),this.children)},t.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},t}(),Be=function(){function t(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}return t.prototype.isFullyInitialized=function(){return this.fullyInitialized_},t.prototype.isFiltered=function(){return this.filtered_},t.prototype.isCompleteForPath=function(t){if(_t(t))return this.isFullyInitialized()&&!this.filtered_;var e=ft(t);return this.isCompleteForChild(e)},t.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},t.prototype.getNode=function(){return this.node_},t}(),ze=function(){return function(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}}();function He(t,e,n,r,o,s){var a=r.filter(function(t){return t.type===n});a.sort(function(e,n){return function(t,e,n){if(null==e.childName||null==n.childName)throw Object(i.g)("Should only compare child_ events.");var r=new jt(e.childName,e.snapshotNode),o=new jt(n.childName,n.snapshotNode);return t.index_.compare(r,o)}(t,e,n)}),a.forEach(function(n){var r=function(t,e,n){return"value"===e.type||"child_removed"===e.type||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}(t,n,s);o.forEach(function(i){i.respondsTo(n.type)&&e.push(i.createEvent(r,t.query_))})})}function We(t,e){return{eventCache:t,serverCache:e}}function Ke(t,e,n,r){return We(new Be(e,n,r),t.serverCache)}function Ge(t,e,n,r){return We(t.eventCache,new Be(e,n,r))}function $e(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Ye(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}var Qe=function(){function t(t,e){void 0===e&&(Fe||(Fe=new Vt(k)),e=Fe),this.value=t,this.children=e}return t.fromObject=function(e){var n=new t(null);return M(e,function(t,e){n=n.set(new ht(t),e)}),n},t.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},t.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:dt(),value:this.value};if(_t(t))return null;var n=ft(t),r=this.children.get(n);if(null!==r){var i=r.findRootMostMatchingPathAndValue(gt(t),e);return null!=i?{path:yt(new ht(n),i.path),value:i.value}:null}return null},t.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},t.prototype.subtree=function(e){if(_t(e))return this;var n=ft(e),r=this.children.get(n);return null!==r?r.subtree(gt(e)):new t(null)},t.prototype.set=function(e,n){if(_t(e))return new t(n,this.children);var r=ft(e),i=(this.children.get(r)||new t(null)).set(gt(e),n),o=this.children.insert(r,i);return new t(this.value,o)},t.prototype.remove=function(e){if(_t(e))return this.children.isEmpty()?new t(null):new t(null,this.children);var n=ft(e),r=this.children.get(n);if(r){var i=r.remove(gt(e)),o=void 0;return o=i.isEmpty()?this.children.remove(n):this.children.insert(n,i),null===this.value&&o.isEmpty()?new t(null):new t(this.value,o)}return this},t.prototype.get=function(t){if(_t(t))return this.value;var e=ft(t),n=this.children.get(e);return n?n.get(gt(t)):null},t.prototype.setTree=function(e,n){if(_t(e))return n;var r,i=ft(e),o=(this.children.get(i)||new t(null)).setTree(gt(e),n);return r=o.isEmpty()?this.children.remove(i):this.children.insert(i,o),new t(this.value,r)},t.prototype.fold=function(t){return this.fold_(dt(),t)},t.prototype.fold_=function(t,e){var n={};return this.children.inorderTraversal(function(r,i){n[r]=i.fold_(yt(t,r),e)}),e(t,this.value,n)},t.prototype.findOnPath=function(t,e){return this.findOnPath_(t,dt(),e)},t.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(_t(t))return null;var i=ft(t),o=this.children.get(i);return o?o.findOnPath_(gt(t),yt(e,i),n):null},t.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,dt(),e)},t.prototype.foreachOnPath_=function(e,n,r){if(_t(e))return this;this.value&&r(n,this.value);var i=ft(e),o=this.children.get(i);return o?o.foreachOnPath_(gt(e),yt(n,i),r):new t(null)},t.prototype.foreach=function(t){this.foreach_(dt(),t)},t.prototype.foreach_=function(t,e){this.children.inorderTraversal(function(n,r){r.foreach_(yt(t,n),e)}),this.value&&e(t,this.value)},t.prototype.foreachChild=function(t){this.children.inorderTraversal(function(e,n){n.value&&t(e,n.value)})},t}(),Xe=function(){function t(t){this.writeTree_=t}return t.empty=function(){return new t(new Qe(null))},t}();function Je(t,e,n){if(_t(e))return new Xe(new Qe(n));var r=t.writeTree_.findRootMostValueAndPath(e);if(null!=r){var i=r.path,o=r.value,s=wt(i,e);return o=o.updateChild(s,n),new Xe(t.writeTree_.set(i,o))}var a=new Qe(n),u=t.writeTree_.setTree(e,a);return new Xe(u)}function Ze(t,e,n){var r=t;return M(n,function(t,n){r=Je(r,yt(e,t),n)}),r}function tn(t,e){if(_t(e))return Xe.empty();var n=t.writeTree_.setTree(e,new Qe(null));return new Xe(n)}function en(t,e){return null!=nn(t,e)}function nn(t,e){var n=t.writeTree_.findRootMostValueAndPath(e);return null!=n?t.writeTree_.get(n.path).getChild(wt(n.path,e)):null}function rn(t){var e=[],n=t.writeTree_.value;return null!=n?n.isLeafNode()||n.forEachChild(Xt,function(t,n){e.push(new jt(t,n))}):t.writeTree_.children.inorderTraversal(function(t,n){null!=n.value&&e.push(new jt(t,n.value))}),e}function on(t,e){if(_t(e))return t;var n=nn(t,e);return new Xe(null!=n?new Qe(n):t.writeTree_.subtree(e))}function sn(t){return t.writeTree_.isEmpty()}function an(t,e){return un(dt(),t.writeTree_,e)}function un(t,e,n){if(null!=e.value)return n.updateChild(t,e.value);var r=null;return e.children.inorderTraversal(function(e,o){".priority"===e?(Object(i.f)(null!==o.value,"Priority writes must always be leaf nodes"),r=o.value):n=un(yt(t,e),o,n)}),n.getChild(t).isEmpty()||null===r||(n=n.updateChild(yt(t,".priority"),r)),n}function cn(t,e){return _n(e,t)}function ln(t,e){if(t.snap)return Et(t.path,e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&Et(yt(t.path,n),e))return!0;return!1}function hn(t){return t.visible}function dn(t,e,n){for(var r=Xe.empty(),o=0;o<t.length;++o){var s=t[o];if(e(s)){var a=s.path,u=void 0;if(s.snap)Et(n,a)?r=Je(r,u=wt(n,a),s.snap):Et(a,n)&&(u=wt(a,n),r=Je(r,dt(),s.snap.getChild(u)));else{if(!s.children)throw Object(i.g)("WriteRecord should have .snap or .children");if(Et(n,a))r=Ze(r,u=wt(n,a),s.children);else if(Et(a,n))if(_t(u=wt(a,n)))r=Ze(r,dt(),s.children);else{var c=Object(i.I)(s.children,ft(u));if(c){var l=c.getChild(gt(u));r=Je(r,dt(),l)}}}}}return r}function fn(t,e,n,r,i){if(r||i){var o=on(t.visibleWrites,e);return!i&&sn(o)?n:i||null!=n||en(o,dt())?an(dn(t.allWrites,function(t){return(t.visible||i)&&(!r||!~r.indexOf(t.writeId))&&(Et(t.path,e)||Et(e,t.path))},e),n||re.EMPTY_NODE):null}var s=nn(t.visibleWrites,e);if(null!=s)return s;var a=on(t.visibleWrites,e);return sn(a)?n:null!=n||en(a,dt())?an(a,n||re.EMPTY_NODE):null}function pn(t,e,n,r){return fn(t.writeTree,t.treePath,e,n,r)}function gn(t,e){return function(t,e,n){var r=re.EMPTY_NODE,i=nn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(Xt,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(n){var o=on(t.visibleWrites,e);return n.forEachChild(Xt,function(t,e){var n=an(on(o,new ht(t)),e);r=r.updateImmediateChild(t,n)}),rn(o).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return rn(on(t.visibleWrites,e)).forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}(t.writeTree,t.treePath,e)}function mn(t,e,n,r){return function(t,e,n,r,o){Object(i.f)(r||o,"Either existingEventSnap or existingServerSnap must exist");var s=yt(e,n);if(en(t.visibleWrites,s))return null;var a=on(t.visibleWrites,s);return sn(a)?o.getChild(n):an(a,o.getChild(n))}(t.writeTree,t.treePath,e,n,r)}function bn(t,e){return function(t,e){return nn(t.visibleWrites,e)}(t.writeTree,yt(t.treePath,e))}function vn(t,e,n){return function(t,e,n,r){var i=yt(e,n),o=nn(t.visibleWrites,i);return null!=o?o:r.isCompleteForChild(n)?an(on(t.visibleWrites,i),r.getNode().getImmediateChild(n)):null}(t.writeTree,t.treePath,e,n)}function yn(t,e){return _n(yt(t.treePath,e),t.writeTree)}function _n(t,e){return{treePath:t,writeTree:e}}var wn=function(){function t(){this.changeMap=new Map}return t.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Object(i.f)("child_added"===e||"child_changed"===e||"child_removed"===e,"Only child changes supported for tracking"),Object(i.f)(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var o=r.type;if("child_added"===e&&"child_removed"===o)this.changeMap.set(n,be(n,t.snapshotNode,r.snapshotNode));else if("child_removed"===e&&"child_added"===o)this.changeMap.delete(n);else if("child_removed"===e&&"child_changed"===o)this.changeMap.set(n,me(n,r.oldSnap));else if("child_changed"===e&&"child_added"===o)this.changeMap.set(n,ge(n,t.snapshotNode));else{if("child_changed"!==e||"child_changed"!==o)throw Object(i.g)("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,be(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},t.prototype.getChanges=function(){return Array.from(this.changeMap.values())},t}(),Cn=new(function(){function t(){}return t.prototype.getCompleteChild=function(t){return null},t.prototype.getChildAfterChild=function(t,e,n){return null},t}()),On=function(){function t(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}return t.prototype.getCompleteChild=function(t){var e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Be(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return vn(this.writes_,t,n)},t.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ye(this.viewCache_),i=function(t,e,n,r,i,o){return function(t,e,n,r,i,o,s){var a,u=on(t.visibleWrites,e),c=nn(u,dt());if(null!=c)a=c;else{if(null==n)return[];a=an(u,n)}if((a=a.withIndex(s)).isEmpty()||a.isLeafNode())return[];for(var l=[],h=s.getCompare(),d=o?a.getReverseIteratorFrom(r,s):a.getIteratorFrom(r,s),f=d.getNext();f&&l.length<1;)0!==h(f,r)&&l.push(f),f=d.getNext();return l}(t.writeTree,t.treePath,e,n,0,i,o)}(this.writes_,r,e,0,n,t);return 0===i.length?null:i[0]},t}();function En(t,e,n,r,o,s){var a=e.eventCache;if(null!=bn(r,n))return e;var u=void 0,c=void 0;if(_t(n))if(Object(i.f)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){var l=Ye(e),h=gn(r,l instanceof re?l:re.EMPTY_NODE);u=t.filter.updateFullNode(e.eventCache.getNode(),h,s)}else{var d=pn(r,Ye(e));u=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{var f=ft(n);if(".priority"===f){Object(i.f)(1===pt(n),"Can't have a priority with additional path components");var p=a.getNode(),g=mn(r,n,p,c=e.serverCache.getNode());u=null!=g?t.filter.updatePriority(p,g):a.getNode()}else{var m=gt(n),b=void 0;if(a.isCompleteForChild(f)){c=e.serverCache.getNode();var v=mn(r,n,a.getNode(),c);b=null!=v?a.getNode().getImmediateChild(f).updateChild(m,v):a.getNode().getImmediateChild(f)}else b=vn(r,f,e.serverCache);u=null!=b?t.filter.updateChild(a.getNode(),f,b,m,o,s):a.getNode()}}return Ke(e,u,a.isFullyInitialized()||_t(n),t.filter.filtersNodes())}function Sn(t,e,n,r,i,o,s,a){var u,c=e.serverCache,l=s?t.filter:t.filter.getIndexedFilter();if(_t(n))u=l.updateFullNode(c.getNode(),r,null);else if(l.filtersNodes()&&!c.isFiltered()){var h=c.getNode().updateChild(n,r);u=l.updateFullNode(c.getNode(),h,null)}else{var d=ft(n);if(!c.isCompleteForPath(n)&&pt(n)>1)return e;var f=gt(n),p=c.getNode().getImmediateChild(d).updateChild(f,r);u=".priority"===d?l.updatePriority(c.getNode(),p):l.updateChild(c.getNode(),d,p,f,Cn,null)}var g=Ge(e,u,c.isFullyInitialized()||_t(n),l.filtersNodes());return En(t,g,n,i,new On(i,g,o),a)}function In(t,e,n,r,i,o,s){var a,u,c=e.eventCache,l=new On(i,e,o);if(_t(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,s),a=Ke(e,u,!0,t.filter.filtersNodes());else{var h=ft(n);if(".priority"===h)u=t.filter.updatePriority(e.eventCache.getNode(),r),a=Ke(e,u,c.isFullyInitialized(),c.isFiltered());else{var d=gt(n),f=c.getNode().getImmediateChild(h),p=void 0;if(_t(d))p=r;else{var g=l.getCompleteChild(h);p=null!=g?".priority"===mt(d)&&g.getChild(vt(d)).isEmpty()?g:g.updateChild(d,r):re.EMPTY_NODE}a=f.equals(p)?e:Ke(e,t.filter.updateChild(c.getNode(),h,p,d,l,s),c.isFullyInitialized(),t.filter.filtersNodes())}}return a}function An(t,e){return t.eventCache.isCompleteForChild(e)}function Tn(t,e,n){return n.foreach(function(t,n){e=e.updateChild(t,n)}),e}function xn(t,e,n,r,i,o,s,a){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;var u,c=e;u=_t(n)?r:new Qe(null).setTree(n,r);var l=e.serverCache.getNode();return u.children.inorderTraversal(function(n,r){if(l.hasChild(n)){var u=Tn(0,e.serverCache.getNode().getImmediateChild(n),r);c=Sn(t,c,new ht(n),u,i,o,s,a)}}),u.children.inorderTraversal(function(n,r){var u=!e.serverCache.isCompleteForChild(n)&&void 0===r.value;if(!l.hasChild(n)&&!u){var h=Tn(0,e.serverCache.getNode().getImmediateChild(n),r);c=Sn(t,c,new ht(n),h,i,o,s,a)}}),c}var Dn,kn=function(){function t(t,e){this.query_=t,this.eventRegistrations_=[];var n,r=this.query_._queryParams,i=new ve(r.getIndex()),o=(n=r).loadsAllData()?new ve(n.getIndex()):n.hasLimit()?new _e(n):new ye(n);this.processor_=function(t){return{filter:t}}(o);var s=e.serverCache,a=e.eventCache,u=i.updateFullNode(re.EMPTY_NODE,s.getNode(),null),c=o.updateFullNode(re.EMPTY_NODE,a.getNode(),null),l=new Be(u,s.isFullyInitialized(),i.filtersNodes()),h=new Be(c,a.isFullyInitialized(),o.filtersNodes());this.viewCache_=We(h,l),this.eventGenerator_=new ze(this.query_)}return Object.defineProperty(t.prototype,"query",{get:function(){return this.query_},enumerable:!1,configurable:!0}),t}();function Nn(t,e){var n=Ye(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!_t(e)&&!n.getImmediateChild(ft(e)).isEmpty())?n.getChild(e):null}function jn(t){return 0===t.eventRegistrations_.length}function Rn(t,e,n){var r=[];if(n){Object(i.f)(null==e,"A cancel should cancel all event registrations.");var o=t.query._path;t.eventRegistrations_.forEach(function(t){var e=t.createCancelEvent(n,o);e&&r.push(e)})}if(e){for(var s=[],a=0;a<t.eventRegistrations_.length;++a){var u=t.eventRegistrations_[a];if(u.matches(e)){if(e.hasAnyCallback()){s=s.concat(t.eventRegistrations_.slice(a+1));break}}else s.push(u)}t.eventRegistrations_=s}else t.eventRegistrations_=[];return r}function Mn(t,e,n,r){e.type===Me.MERGE&&null!==e.source.queryId&&(Object(i.f)(Ye(t.viewCache_),"We should always have a full cache before handling merges"),Object(i.f)($e(t.viewCache_),"Missing event cache, even though we have a server cache"));var o,s,a=t.viewCache_,u=function(t,e,n,r,o){var s,a,u=new wn;if(n.type===Me.OVERWRITE){var c=n;c.source.fromUser?s=In(t,e,c.path,c.snap,r,o,u):(Object(i.f)(c.source.fromServer,"Unknown source."),a=c.source.tagged||e.serverCache.isFiltered()&&!_t(c.path),s=Sn(t,e,c.path,c.snap,r,o,a,u))}else if(n.type===Me.MERGE){var l=n;l.source.fromUser?s=function(t,e,n,r,i,o,s){var a=e;return r.foreach(function(r,u){var c=yt(n,r);An(e,ft(c))&&(a=In(t,a,c,u,i,o,s))}),r.foreach(function(r,u){var c=yt(n,r);An(e,ft(c))||(a=In(t,a,c,u,i,o,s))}),a}(t,e,l.path,l.children,r,o,u):(Object(i.f)(l.source.fromServer,"Unknown source."),a=l.source.tagged||e.serverCache.isFiltered(),s=xn(t,e,l.path,l.children,r,o,a,u))}else if(n.type===Me.ACK_USER_WRITE){var h=n;s=h.revert?function(t,e,n,r,o,s){var a;if(null!=bn(r,n))return e;var u=new On(r,e,o),c=e.eventCache.getNode(),l=void 0;if(_t(n)||".priority"===ft(n)){var h=void 0;if(e.serverCache.isFullyInitialized())h=pn(r,Ye(e));else{var d=e.serverCache.getNode();Object(i.f)(d instanceof re,"serverChildren would be complete if leaf node"),h=gn(r,d)}l=t.filter.updateFullNode(c,h=h,s)}else{var f=ft(n),p=vn(r,f,e.serverCache);null==p&&e.serverCache.isCompleteForChild(f)&&(p=c.getImmediateChild(f)),(l=null!=p?t.filter.updateChild(c,f,p,gt(n),u,s):e.eventCache.getNode().hasChild(f)?t.filter.updateChild(c,f,re.EMPTY_NODE,gt(n),u,s):c).isEmpty()&&e.serverCache.isFullyInitialized()&&(a=pn(r,Ye(e))).isLeafNode()&&(l=t.filter.updateFullNode(l,a,s))}return a=e.serverCache.isFullyInitialized()||null!=bn(r,dt()),Ke(e,l,a,t.filter.filtersNodes())}(t,e,h.path,r,o,u):function(t,e,n,r,i,o,s){if(null!=bn(i,n))return e;var a=e.serverCache.isFiltered(),u=e.serverCache;if(null!=r.value){if(_t(n)&&u.isFullyInitialized()||u.isCompleteForPath(n))return Sn(t,e,n,u.getNode().getChild(n),i,o,a,s);if(_t(n)){var c=new Qe(null);return u.getNode().forEachChild(Pt,function(t,e){c=c.set(new ht(t),e)}),xn(t,e,n,c,i,o,a,s)}return e}var l=new Qe(null);return r.foreach(function(t,e){var r=yt(n,t);u.isCompleteForPath(r)&&(l=l.set(t,u.getNode().getChild(r)))}),xn(t,e,n,l,i,o,a,s)}(t,e,h.path,h.affectedTree,r,o,u)}else{if(n.type!==Me.LISTEN_COMPLETE)throw Object(i.g)("Unknown operation type: "+n.type);s=function(t,e,n,r,i){var o=e.serverCache;return En(t,Ge(e,o.getNode(),o.isFullyInitialized()||_t(n),o.isFiltered()),n,r,Cn,i)}(t,e,n.path,r,u)}var d=u.getChanges();return function(t,e,n){var r=e.eventCache;if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=$e(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(pe($e(e)))}}(e,s,d),{viewCache:s,changes:d}}(t.processor_,a,e,n,r);return o=t.processor_,s=u.viewCache,Object(i.f)(s.eventCache.getNode().isIndexed(o.filter.getIndex()),"Event snap not indexed"),Object(i.f)(s.serverCache.getNode().isIndexed(o.filter.getIndex()),"Server snap not indexed"),Object(i.f)(u.viewCache.serverCache.isFullyInitialized()||!a.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=u.viewCache,Pn(t,u.changes,u.viewCache.eventCache.getNode(),null)}function Pn(t,e,n,r){return function(t,e,n,r){var i=[],o=[];return e.forEach(function(e){"child_changed"===e.type&&t.index_.indexedValueChanged(e.oldSnap,e.snapshotNode)&&o.push({type:"child_moved",snapshotNode:e.snapshotNode,childName:e.childName})}),He(t,i,"child_removed",e,r,n),He(t,i,"child_added",e,r,n),He(t,i,"child_moved",o,r,n),He(t,i,"child_changed",e,r,n),He(t,i,"value",e,r,n),i}(t.eventGenerator_,e,n,r?[r]:t.eventRegistrations_)}var Fn,Ln=function(){return function(){this.views=new Map}}();function Un(t,e,n,r){var s,a,u=e.source.queryId;if(null!==u){var c=t.views.get(u);return Object(i.f)(null!=c,"SyncTree gave us an op for an invalid query."),Mn(c,e,n,r)}var l=[];try{for(var h=Object(o.g)(t.views.values()),d=h.next();!d.done;d=h.next())l=l.concat(Mn(c=d.value,e,n,r))}catch(f){s={error:f}}finally{try{d&&!d.done&&(a=h.return)&&a.call(h)}finally{if(s)throw s.error}}return l}function Vn(t,e,n,r,i){var o=t.views.get(e._queryIdentifier);if(!o){var s=pn(n,i?r:null),a=!1;s?a=!0:r instanceof re?(s=gn(n,r),a=!1):(s=re.EMPTY_NODE,a=!1);var u=We(new Be(s,a,!1),new Be(r,i,!1));return new kn(e,u)}return o}function qn(t){var e,n,r=[];try{for(var i=Object(o.g)(t.views.values()),s=i.next();!s.done;s=i.next()){var a=s.value;a.query._queryParams.loadsAllData()||r.push(a)}}catch(u){e={error:u}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Bn(t,e){var n,r,i=null;try{for(var s=Object(o.g)(t.views.values()),a=s.next();!a.done;a=s.next())i=i||Nn(a.value,e)}catch(u){n={error:u}}finally{try{a&&!a.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}function zn(t,e){return e._queryParams.loadsAllData()?Kn(t):t.views.get(e._queryIdentifier)}function Hn(t,e){return null!=zn(t,e)}function Wn(t){return null!=Kn(t)}function Kn(t){var e,n;try{for(var r=Object(o.g)(t.views.values()),i=r.next();!i.done;i=r.next()){var s=i.value;if(s.query._queryParams.loadsAllData())return s}}catch(a){e={error:a}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return null}var Gn=1,$n=function(){return function(t){this.listenProvider_=t,this.syncPointTree_=new Qe(null),this.pendingWriteTree_={visibleWrites:Xe.empty(),allWrites:[],lastWriteId:-1},this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}();function Yn(t,e,n,r,o){return function(t,e,n,r,o){Object(i.f)(r>t.lastWriteId,"Stacking an older write on top of newer ones"),void 0===o&&(o=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:o}),o&&(t.visibleWrites=Je(t.visibleWrites,e,n)),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r,o),o?er(t,new Ve({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,n)):[]}function Qn(t,e,n){void 0===n&&(n=!1);var r=function(t,e){for(var n=0;n<t.allWrites.length;n++){var r=t.allWrites[n];if(r.writeId===e)return r}return null}(t.pendingWriteTree_,e);if(function(t,e){var n=t.allWrites.findIndex(function(t){return t.writeId===e});Object(i.f)(n>=0,"removeWrite called with nonexistent writeId.");var r=t.allWrites[n];t.allWrites.splice(n,1);for(var o=r.visible,s=!1,a=t.allWrites.length-1;o&&a>=0;){var u=t.allWrites[a];u.visible&&(a>=n&&ln(u,r.path)?o=!1:Et(r.path,u.path)&&(s=!0)),a--}return!!o&&(s?(function(t){t.visibleWrites=dn(t.allWrites,hn,dt()),t.lastWriteId=t.allWrites.length>0?t.allWrites[t.allWrites.length-1].writeId:-1}(t),!0):(r.snap?t.visibleWrites=tn(t.visibleWrites,r.path):M(r.children,function(e){t.visibleWrites=tn(t.visibleWrites,yt(r.path,e))}),!0))}(t.pendingWriteTree_,e)){var o=new Qe(null);return null!=r.snap?o=o.set(dt(),!0):M(r.children,function(t){o=o.set(new ht(t),!0)}),er(t,new Le(r.path,o,n))}return[]}function Xn(t,e,n){return er(t,new Ve({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,n))}function Jn(t,e,n,r){var s=e._path,a=t.syncPointTree_.get(s),u=[];if(a&&("default"===e._queryIdentifier||Hn(a,e))){var c=function(t,e,n,r){var s,a,u=e._queryIdentifier,c=[],l=[],h=Wn(t);if("default"===u)try{for(var d=Object(o.g)(t.views.entries()),f=d.next();!f.done;f=d.next()){var p,g=Object(o.e)(f.value,2),m=g[0];l=l.concat(Rn(p=g[1],n,r)),jn(p)&&(t.views.delete(m),p.query._queryParams.loadsAllData()||c.push(p.query))}}catch(b){s={error:b}}finally{try{f&&!f.done&&(a=d.return)&&a.call(d)}finally{if(s)throw s.error}}else(p=t.views.get(u))&&(l=l.concat(Rn(p,n,r)),jn(p)&&(t.views.delete(u),p.query._queryParams.loadsAllData()||c.push(p.query)));return h&&!Wn(t)&&c.push(new(Object(i.f)(Dn,"Reference.ts has not been loaded"),Dn)(e._repo,e._path)),{removed:c,events:l}}(a,e,n,r);0===a.views.size&&(t.syncPointTree_=t.syncPointTree_.remove(s));var l=c.removed;u=c.events;var h=-1!==l.findIndex(function(t){return t._queryParams.loadsAllData()}),d=t.syncPointTree_.findOnPath(s,function(t,e){return Wn(e)});if(h&&!d){var f=t.syncPointTree_.subtree(s);if(!f.isEmpty())for(var p=function(t){return t.fold(function(t,e,n){if(e&&Wn(e))return[Kn(e)];var r=[];return e&&(r=qn(e)),M(n,function(t,e){r=r.concat(e)}),r})}(f),g=0;g<p.length;++g){var m=p[g],b=m.query,v=ir(t,m);t.listenProvider_.startListening(lr(b),or(t,b),v.hashFn,v.onComplete)}}!d&&l.length>0&&!r&&(h?t.listenProvider_.stopListening(lr(e),null):l.forEach(function(e){var n=t.queryToTagMap.get(sr(e));t.listenProvider_.stopListening(lr(e),n)})),function(t,e){for(var n=0;n<e.length;++n){var r=e[n];if(!r._queryParams.loadsAllData()){var i=sr(r),o=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(o)}}}(t,l)}return u}function Zn(t,e,n){var r=e._path,o=null,s=!1;t.syncPointTree_.foreachOnPath(r,function(t,e){var n=wt(t,r);o=o||Bn(e,n),s=s||Wn(e)});var a,u=t.syncPointTree_.get(r);u?(s=s||Wn(u),o=o||Bn(u,dt())):(u=new Ln,t.syncPointTree_=t.syncPointTree_.set(r,u)),null!=o?a=!0:(a=!1,o=re.EMPTY_NODE,t.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=Bn(e,dt());n&&(o=o.updateImmediateChild(t,n))}));var c=Hn(u,e);if(!c&&!e._queryParams.loadsAllData()){var l=sr(e);Object(i.f)(!t.queryToTagMap.has(l),"View does not exist, but we have a tag");var h=Gn++;t.queryToTagMap.set(l,h),t.tagToQueryMap.set(h,l)}var d=function(t,e,n,r,i,o){var s=Vn(t,e,r,i,o);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,s),function(t,e){t.eventRegistrations_.push(e)}(s,n),function(t,e){var n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(Xt,function(t,e){r.push(ge(t,e))}),n.isFullyInitialized()&&r.push(pe(n.getNode())),Pn(t,r,n.getNode(),e)}(s,n)}(u,e,n,cn(t.pendingWriteTree_,r),o,a);if(!c&&!s){var f=zn(u,e);d=d.concat(function(t,e,n){var r=e._path,o=or(t,e),s=ir(t,n),a=t.listenProvider_.startListening(lr(e),o,s.hashFn,s.onComplete),u=t.syncPointTree_.subtree(r);if(o)Object(i.f)(!Wn(u.value),"If we're adding a query, it shouldn't be shadowed");else for(var c=u.fold(function(t,e,n){if(!_t(t)&&e&&Wn(e))return[Kn(e).query];var r=[];return e&&(r=r.concat(qn(e).map(function(t){return t.query}))),M(n,function(t,e){r=r.concat(e)}),r}),l=0;l<c.length;++l){var h=c[l];t.listenProvider_.stopListening(lr(h),or(t,h))}return a}(t,e,f))}return d}function tr(t,e,n){var r=t.pendingWriteTree_,i=t.syncPointTree_.findOnPath(e,function(t,n){var r=Bn(n,wt(t,e));if(r)return r});return fn(r,e,i,n,!0)}function er(t,e){return nr(e,t.syncPointTree_,null,cn(t.pendingWriteTree_,dt()))}function nr(t,e,n,r){if(_t(t.path))return rr(t,e,n,r);var i=e.get(dt());null==n&&null!=i&&(n=Bn(i,dt()));var o=[],s=ft(t.path),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,l=yn(r,s);o=o.concat(nr(a,u,c,l))}return i&&(o=o.concat(Un(i,t,r,n))),o}function rr(t,e,n,r){var i=e.get(dt());null==n&&null!=i&&(n=Bn(i,dt()));var o=[];return e.children.inorderTraversal(function(e,i){var s=n?n.getImmediateChild(e):null,a=yn(r,e),u=t.operationForChild(e);u&&(o=o.concat(rr(u,i,s,a)))}),i&&(o=o.concat(Un(i,t,r,n))),o}function ir(t,e){var n=e.query,r=or(t,n);return{hashFn:function(){return(function(t){return t.viewCache_.serverCache.getNode()}(e)||re.EMPTY_NODE).hash()},onComplete:function(e){if("ok"===e)return r?function(t,e,n){var r=ar(t,n);if(r){var i=ur(r),o=i.path,s=i.queryId,a=wt(o,e);return cr(t,o,new Ue(Pe(s),a))}return[]}(t,n._path,r):function(t,e){return er(t,new Ue({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(t,n._path);var i=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}(e,n);return Jn(t,n,null,i)}}}function or(t,e){var n=sr(e);return t.queryToTagMap.get(n)}function sr(t){return t._path.toString()+"$"+t._queryIdentifier}function ar(t,e){return t.tagToQueryMap.get(e)}function ur(t){var e=t.indexOf("$");return Object(i.f)(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ht(t.substr(0,e))}}function cr(t,e,n){var r=t.syncPointTree_.get(e);return Object(i.f)(r,"Missing sync point for query tag that we're tracking"),Un(r,n,cn(t.pendingWriteTree_,e),null)}function lr(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(Object(i.f)(Fn,"Reference.ts has not been loaded"),Fn)(t._repo,t._path):t}var hr=function(){function t(t){this.node_=t}return t.prototype.getImmediateChild=function(e){return new t(this.node_.getImmediateChild(e))},t.prototype.node=function(){return this.node_},t}(),dr=function(){function t(t,e){this.syncTree_=t,this.path_=e}return t.prototype.getImmediateChild=function(e){var n=yt(this.path_,e);return new t(this.syncTree_,n)},t.prototype.node=function(){return tr(this.syncTree_,this.path_)},t}(),fr=function(t,e,n){return t&&"object"==typeof t?(Object(i.f)(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?pr(t[".sv"],e,n):"object"==typeof t[".sv"]?gr(t[".sv"],e):void Object(i.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},pr=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:Object(i.f)(!1,"Unexpected server value: "+t)}},gr=function(t,e,n){t.hasOwnProperty("increment")||Object(i.f)(!1,"Unexpected server value: "+JSON.stringify(t,null,2));var r=t.increment;"number"!=typeof r&&Object(i.f)(!1,"Unexpected increment value: "+r);var o=e.node();if(Object(i.f)(null!=o,"Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return r;var s=o.getValue();return"number"!=typeof s?r:s+r},mr=function(t,e,n,r){return vr(e,new dr(n,t),r)},br=function(t,e,n){return vr(t,new hr(e),n)};function vr(t,e,n){var r,i=t.getPriority().val(),o=fr(i,e.getImmediateChild(".priority"),n);if(t.isLeafNode()){var s=t,a=fr(s.getValue(),e,n);return a!==s.getValue()||o!==s.getPriority().val()?new Qt(a,oe(o)):t}var u=t;return r=u,o!==u.getPriority().val()&&(r=r.updatePriority(new Qt(o))),u.forEachChild(Xt,function(t,i){var o=vr(i,e.getImmediateChild(t),n);o!==i&&(r=r.updateImmediateChild(t,o))}),r}var yr=function(){return function(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n={children:{},childCount:0}),this.name=t,this.parent=e,this.node=n}}();function _r(t,e){for(var n=e instanceof ht?e:new ht(e),r=t,o=ft(n);null!==o;){var s=Object(i.I)(r.node.children,o)||{children:{},childCount:0};r=new yr(o,r,s),o=ft(n=gt(n))}return r}function wr(t){return t.node.value}function Cr(t,e){t.node.value=e,Ar(t)}function Or(t){return t.node.childCount>0}function Er(t,e){M(t.node.children,function(n,r){e(new yr(n,t,r))})}function Sr(t,e,n,r){n&&!r&&e(t),Er(t,function(t){Sr(t,e,!0,r)}),n&&r&&e(t)}function Ir(t){return new ht(null===t.parent?t.name:Ir(t.parent)+"/"+t.name)}function Ar(t){null!==t.parent&&function(t,e,n){var r=function(t){return void 0===wr(t)&&!Or(t)}(n),o=Object(i.k)(t.node.children,e);r&&o?(delete t.node.children[e],t.node.childCount--,Ar(t)):r||o||(t.node.children[e]=n.node,t.node.childCount++,Ar(t))}(t.parent,t.name,t)}var Tr=/[\[\].#$\/\u0000-\u001F\u007F]/,xr=/[\[\].#$\u0000-\u001F\u007F]/,Dr=10485760,kr=function(t){return"string"==typeof t&&0!==t.length&&!Tr.test(t)},Nr=function(t){return"string"==typeof t&&0!==t.length&&!xr.test(t)},jr=function(t){return null===t||"string"==typeof t||"number"==typeof t&&!A(t)||t&&"object"==typeof t&&Object(i.k)(t,".sv")},Rr=function(t,e,n,r){r&&void 0===e||Mr(Object(i.p)(t,"value"),e,n)},Mr=function(t,e,n){var r=n instanceof ht?new St(n,t):n;if(void 0===e)throw new Error(t+"contains undefined "+At(r));if("function"==typeof e)throw new Error(t+"contains a function "+At(r)+" with contents = "+e.toString());if(A(e))throw new Error(t+"contains "+e.toString()+" "+At(r));if("string"==typeof e&&e.length>Dr/3&&Object(i.J)(e)>Dr)throw new Error(t+"contains a string greater than 10485760 utf8 bytes "+At(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){var o=!1,s=!1;if(M(e,function(e,n){if(".value"===e)o=!0;else if(".priority"!==e&&".sv"!==e&&(s=!0,!kr(e)))throw new Error(t+" contains an invalid key ("+e+") "+At(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');var a,u;!function(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Object(i.J)(e),It(t)}(r,e),Mr(t,n,r),u=(a=r).parts_.pop(),a.byteLength_-=Object(i.J)(u),a.parts_.length>0&&(a.byteLength_-=1)}),o&&s)throw new Error(t+' contains ".value" child '+At(r)+" in addition to actual children.")}},Pr=function(t,e,n,r){if(!r||void 0!==e){var o=Object(i.p)(t,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(o+" must be an object containing the children to replace.");var s=[];M(e,function(t,e){var r=new ht(t);if(Mr(o,e,yt(n,r)),".priority"===mt(r)&&!jr(e))throw new Error(o+"contains an invalid value for '"+r.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(r)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=bt(r=e[n]),o=0;o<i.length;o++)if(".priority"===i[o]&&o===i.length-1);else if(!kr(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(Ct);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&Et(s,r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}},Fr=function(t,e,n){if(!n||void 0!==e){if(A(e))throw new Error(Object(i.p)(t,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!jr(e))throw new Error(Object(i.p)(t,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Lr=function(t,e,n){if(!n||void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(Object(i.p)(t,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},Ur=function(t,e,n,r){if(!(r&&void 0===n||kr(n)))throw new Error(Object(i.p)(t,e)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Vr=function(t,e,n,r){if(!(r&&void 0===n||Nr(n)))throw new Error(Object(i.p)(t,e)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},qr=function(t,e){if(".info"===ft(e))throw new Error(t+" failed = Can't modify data under /.info/")},Br=function(t,e){var n=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!kr(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==n.length&&!function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Nr(t)}(n))throw new Error(Object(i.p)(t,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')},zr=function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(Object(i.p)(t,e)+"must be a boolean.")},Hr=function(){return function(){this.eventLists_=[],this.recursionDepth_=0}}();function Wr(t,e){for(var n=null,r=0;r<e.length;r++){var i=e[r],o=i.getPath();null===n||Ot(o,n.path)||(t.eventLists_.push(n),n=null),null===n&&(n={events:[],path:o}),n.events.push(i)}n&&t.eventLists_.push(n)}function Kr(t,e,n){Wr(t,n),$r(t,function(t){return Ot(t,e)})}function Gr(t,e,n){Wr(t,n),$r(t,function(t){return Et(t,e)||Et(e,t)})}function $r(t,e){t.recursionDepth_++;for(var n=!0,r=0;r<t.eventLists_.length;r++){var i=t.eventLists_[r];i&&(e(i.path)?(Yr(t.eventLists_[r]),t.eventLists_[r]=null):n=!1)}n&&(t.eventLists_=[]),t.recursionDepth_--}function Yr(t){for(var e=0;e<t.events.length;e++){var n=t.events[e];if(null!==n){t.events[e]=null;var r=n.getEventRunner();y&&C("event: "+n.toString()),U(r)}}}var Qr="repo_interrupt",Xr=function(){function t(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Hr,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=xe(),this.transactionQueueTree_=new yr,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}return t.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},t}();function Jr(t){var e=t.infoData_.getNode(new ht(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+e}function Zr(t){return(e=(e={timestamp:Jr(t)})||{}).timestamp=e.timestamp||(new Date).getTime(),e;var e}function ti(t,e,n,r,o){t.dataUpdateCount++;var s=new ht(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;var a=[];if(o)if(r){var u=Object(i.G)(n,function(t){return oe(t)});a=function(t,e,n,r){var i=ar(t,r);if(i){var o=ur(i),s=o.path,a=o.queryId,u=wt(s,e),c=Qe.fromObject(n);return cr(t,s,new qe(Pe(a),u,c))}return[]}(t.serverSyncTree_,s,u,o)}else{var c=oe(n);a=function(t,e,n,r){var i=ar(t,r);if(null!=i){var o=ur(i),s=o.path,a=o.queryId,u=wt(s,e);return cr(t,s,new Ve(Pe(a),u,n))}return[]}(t.serverSyncTree_,s,c,o)}else if(r){var l=Object(i.G)(n,function(t){return oe(t)});a=function(t,e,n){var r=Qe.fromObject(n);return er(t,new qe({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(t.serverSyncTree_,s,l)}else{var h=oe(n);a=Xn(t.serverSyncTree_,s,h)}var d=s;a.length>0&&(d=fi(t,s)),Gr(t.eventQueue_,d,a)}function ei(t,e){ni(t,"connected",e),!1===e&&function(t){ci(t,"onDisconnectEvents");var e=Zr(t),n=xe();Ne(t.onDisconnect_,dt(),function(r,i){var o=mr(r,i,t.serverSyncTree_,e);De(n,r,o)});var r=[];Ne(n,dt(),function(e,n){r=r.concat(Xn(t.serverSyncTree_,e,n));var i=vi(t,e);fi(t,i)}),t.onDisconnect_=xe(),Gr(t.eventQueue_,dt(),r)}(t)}function ni(t,e,n){var r=new ht("/.info/"+e),i=oe(n);t.infoData_.updateSnapshot(r,i);var o=Xn(t.infoSyncTree_,r,i);Gr(t.eventQueue_,r,o)}function ri(t){return t.nextWriteId_++}function ii(t,e,n,r,i){ci(t,"set",{path:e.toString(),value:n,priority:r});var o=Zr(t),s=oe(n,r),a=tr(t.serverSyncTree_,e),u=br(s,a,o),c=ri(t),l=Yn(t.serverSyncTree_,e,u,c,!0);Wr(t.eventQueue_,l),t.server_.put(e.toString(),s.val(!0),function(n,r){var o="ok"===n;o||I("set at "+e+" failed: "+n);var s=Qn(t.serverSyncTree_,c,!o);Gr(t.eventQueue_,e,s),li(0,i,n,r)});var h=vi(t,e);fi(t,h),Gr(t.eventQueue_,h,[])}function oi(t,e,n){t.server_.onDisconnectCancel(e.toString(),function(r,i){"ok"===r&&ke(t.onDisconnect_,e),li(0,n,r,i)})}function si(t,e,n,r){var i=oe(n);t.server_.onDisconnectPut(e.toString(),i.val(!0),function(n,o){"ok"===n&&De(t.onDisconnect_,e,i),li(0,r,n,o)})}function ai(t,e,n){var r;r=".info"===ft(e._path)?Jn(t.infoSyncTree_,e,n):Jn(t.serverSyncTree_,e,n),Kr(t.eventQueue_,e._path,r)}function ui(t){t.persistentConnection_&&t.persistentConnection_.interrupt(Qr)}function ci(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r="";t.persistentConnection_&&(r=t.persistentConnection_.id+":"),C.apply(void 0,Object(o.f)([r],Object(o.e)(e)))}function li(t,e,n,r){e&&U(function(){if("ok"===n)e(null);else{var t=(n||"error").toUpperCase(),i=t;r&&(i+=": "+r);var o=new Error(i);o.code=t,e(o)}})}function hi(t,e,n){return tr(t.serverSyncTree_,e,n)||re.EMPTY_NODE}function di(t,e){if(void 0===e&&(e=t.transactionQueueTree_),e||bi(t,e),wr(e)){var n=gi(t,e);Object(i.f)(n.length>0,"Sending zero length transaction queue"),n.every(function(t){return 0===t.status})&&function(t,e,n){for(var r=n.map(function(t){return t.currentWriteId}),o=hi(t,e,r),s=o,a=o.hash(),u=0;u<n.length;u++){var c=n[u];Object(i.f)(0===c.status,"tryToSendTransactionQueue_: items in queue should all be run."),c.status=1,c.retryCount++;var l=wt(e,c.path);s=s.updateChild(l,c.currentOutputSnapshotRaw)}var h=s.val(!0),d=e;t.server_.put(d.toString(),h,function(r){ci(t,"transaction put response",{path:d.toString(),status:r});var i=[];if("ok"===r){for(var o=[],s=function(e){n[e].status=2,i=i.concat(Qn(t.serverSyncTree_,n[e].currentWriteId)),n[e].onComplete&&o.push(function(){return n[e].onComplete(null,!0,n[e].currentOutputSnapshotResolved)}),n[e].unwatcher()},a=0;a<n.length;a++)s(a);for(bi(t,_r(t.transactionQueueTree_,e)),di(t,t.transactionQueueTree_),Gr(t.eventQueue_,e,i),a=0;a<o.length;a++)U(o[a])}else{if("datastale"===r)for(a=0;a<n.length;a++)n[a].status=3===n[a].status?4:0;else for(I("transaction at "+d.toString()+" failed: "+r),a=0;a<n.length;a++)n[a].status=4,n[a].abortReason=r;fi(t,e)}},a)}(t,Ir(e),n)}else Or(e)&&Er(e,function(e){di(t,e)})}function fi(t,e){var n=pi(t,e),r=Ir(n);return function(t,e,n){if(0!==e.length){for(var r=[],o=[],s=e.filter(function(t){return 0===t.status}).map(function(t){return t.currentWriteId}),a=function(a){var u,c=e[a],l=wt(n,c.path),h=!1;if(Object(i.f)(null!==l,"rerunTransactionsUnderNode_: relativePath should not be null."),4===c.status)h=!0,u=c.abortReason,o=o.concat(Qn(t.serverSyncTree_,c.currentWriteId,!0));else if(0===c.status)if(c.retryCount>=25)h=!0,u="maxretry",o=o.concat(Qn(t.serverSyncTree_,c.currentWriteId,!0));else{var d=hi(t,c.path,s);c.currentInputSnapshot=d;var f=e[a].update(d.val());if(void 0!==f){Mr("transaction failed: Data returned ",f,c.path);var p=oe(f);"object"==typeof f&&null!=f&&Object(i.k)(f,".priority")||(p=p.updatePriority(d.getPriority()));var g=c.currentWriteId,m=Zr(t),b=br(p,d,m);c.currentOutputSnapshotRaw=p,c.currentOutputSnapshotResolved=b,c.currentWriteId=ri(t),s.splice(s.indexOf(g),1),o=(o=o.concat(Yn(t.serverSyncTree_,c.path,b,c.currentWriteId,c.applyLocally))).concat(Qn(t.serverSyncTree_,g,!0))}else h=!0,u="nodata",o=o.concat(Qn(t.serverSyncTree_,c.currentWriteId,!0))}Gr(t.eventQueue_,n,o),o=[],h&&(e[a].status=2,setTimeout(e[a].unwatcher,Math.floor(0)),e[a].onComplete&&r.push("nodata"===u?function(){return e[a].onComplete(null,!1,e[a].currentInputSnapshot)}:function(){return e[a].onComplete(new Error(u),!1,null)}))},u=0;u<e.length;u++)a(u);for(bi(t,t.transactionQueueTree_),u=0;u<r.length;u++)U(r[u]);di(t,t.transactionQueueTree_)}}(t,gi(t,n),r),r}function pi(t,e){var n,r=t.transactionQueueTree_;for(n=ft(e);null!==n&&void 0===wr(r);)r=_r(r,n),n=ft(e=gt(e));return r}function gi(t,e){var n=[];return mi(t,e,n),n.sort(function(t,e){return t.order-e.order}),n}function mi(t,e,n){var r=wr(e);if(r)for(var i=0;i<r.length;i++)n.push(r[i]);Er(e,function(e){mi(t,e,n)})}function bi(t,e){var n=wr(e);if(n){for(var r=0,i=0;i<n.length;i++)2!==n[i].status&&(n[r]=n[i],r++);n.length=r,Cr(e,n.length>0?n:void 0)}Er(e,function(e){bi(t,e)})}function vi(t,e){var n=Ir(pi(t,e)),r=_r(t.transactionQueueTree_,e);return function(t,e,n){for(var r=t.parent;null!==r;){if(e(r))return!0;r=r.parent}}(r,function(e){yi(t,e)}),yi(t,r),Sr(r,function(e){yi(t,e)}),n}function yi(t,e){var n=wr(e);if(n){for(var r=[],o=[],s=-1,a=0;a<n.length;a++)3===n[a].status||(1===n[a].status?(Object(i.f)(s===a-1,"All SENT items should be at beginning of queue."),s=a,n[a].status=3,n[a].abortReason="set"):(Object(i.f)(0===n[a].status,"Unexpected transaction status in abort"),n[a].unwatcher(),o=o.concat(Qn(t.serverSyncTree_,n[a].currentWriteId,!0)),n[a].onComplete&&r.push(n[a].onComplete.bind(null,new Error("set"),!1,null))));for(-1===s?Cr(e,void 0):n.length=s+1,Gr(t.eventQueue_,Ir(e),o),a=0;a<r.length;a++)U(r[a])}}var _i=function(t,e){var n=wi(t),r=n.namespace;return"firebase.com"===n.domain&&S(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||S("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&I("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new G(n.host,n.secure,r,e,"ws"===n.scheme||"wss"===n.scheme,"",r!==n.subdomain),path:new ht(n.pathString)}},wi=function(t){var e="",n="",r="",i="",s="",a=!0,u="https",c=443;if("string"==typeof t){var l=t.indexOf("//");l>=0&&(u=t.substring(0,l-1),t=t.substring(l+2));var h=t.indexOf("/");-1===h&&(h=t.length);var d=t.indexOf("?");-1===d&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(n[r].length>0){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(o){}e+="/"+i}return e}(t.substring(h,d)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=Object(o.g)(t.split("&")),s=i.next();!s.done;s=i.next()){var a=s.value;if(0!==a.length){var u=a.split("=");2===u.length?r[decodeURIComponent(u[0])]=decodeURIComponent(u[1]):I("Invalid query segment '"+a+"' in query '"+t+"'")}}}catch(c){e={error:c}}finally{try{s&&!s.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,d)));(l=e.indexOf(":"))>=0?(a="https"===u||"wss"===u,c=parseInt(e.substring(l+1),10)):l=e.length;var p=e.slice(0,l);if("localhost"===p.toLowerCase())n="localhost";else if(p.split(".").length<=2)n=p;else{var g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:c,domain:n,subdomain:r,secure:a,scheme:u,pathString:i,namespace:s}},Ci=function(){function t(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}return t.prototype.getPath=function(){var t=this.snapshot.ref;return"value"===this.eventType?t._path:t.parent._path},t.prototype.getEventType=function(){return this.eventType},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Object(i.L)(this.snapshot.exportVal())},t}(),Oi=function(){function t(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}return t.prototype.getPath=function(){return this.path},t.prototype.getEventType=function(){return"cancel"},t.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},t.prototype.toString=function(){return this.path.toString()+":cancel"},t}(),Ei=function(){function t(t,e){this.snapshotCallback=t,this.cancelCallback=e}return t.prototype.onValue=function(t,e){this.snapshotCallback.call(null,t,e)},t.prototype.onCancel=function(t){return Object(i.f)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)},Object.defineProperty(t.prototype,"hasCancelCallback",{get:function(){return!!this.cancelCallback},enumerable:!1,configurable:!0}),t.prototype.matches=function(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context},t}(),Si=function(){function t(t,e){this._repo=t,this._path=e}return t.prototype.cancel=function(){var t=new i.a;return oi(this._repo,this._path,t.wrapCallback(function(){})),t.promise},t.prototype.remove=function(){qr("OnDisconnect.remove",this._path);var t=new i.a;return si(this._repo,this._path,null,t.wrapCallback(function(){})),t.promise},t.prototype.set=function(t){qr("OnDisconnect.set",this._path),Rr("OnDisconnect.set",t,this._path,!1);var e=new i.a;return si(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t.prototype.setWithPriority=function(t,e){qr("OnDisconnect.setWithPriority",this._path),Rr("OnDisconnect.setWithPriority",t,this._path,!1),Fr("OnDisconnect.setWithPriority",e,!1);var n=new i.a;return function(t,e,n,r,i){var o=oe(n,r);t.server_.onDisconnectPut(e.toString(),o.val(!0),function(n,r){"ok"===n&&De(t.onDisconnect_,e,o),li(0,i,n,r)})}(this._repo,this._path,t,e,n.wrapCallback(function(){})),n.promise},t.prototype.update=function(t){qr("OnDisconnect.update",this._path),Pr("OnDisconnect.update",t,this._path,!1);var e=new i.a;return function(t,e,n,r){if(Object(i.w)(n))return C("onDisconnect().update() called with empty data.  Don't do anything."),void li(0,r,"ok",void 0);t.server_.onDisconnectMerge(e.toString(),n,function(i,o){"ok"===i&&M(n,function(n,r){var i=oe(r);De(t.onDisconnect_,yt(e,n),i)}),li(0,r,i,o)})}(this._repo,this._path,t,e.wrapCallback(function(){})),e.promise},t}(),Ii=function(){function t(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}return Object.defineProperty(t.prototype,"key",{get:function(){return _t(this._path)?null:mt(this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Di(this._repo,this._path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryIdentifier",{get:function(){var t=Ie(this._queryParams),e=j(t);return"{}"===e?"default":e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_queryObject",{get:function(){return Ie(this._queryParams)},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){if(!((e=Object(i.q)(e))instanceof t))return!1;var n=this._repo===e._repo,r=Ot(this._path,e._path);return n&&r&&this._queryIdentifier===e._queryIdentifier},t.prototype.toJSON=function(){return this.toString()},t.prototype.toString=function(){return this._repo.toString()+function(t){for(var e="",n=t.pieceNum_;n<t.pieces_.length;n++)""!==t.pieces_[n]&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}(this._path)},t}();function Ai(t,e){if(!0===t._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ti(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Pt){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",o="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==T)throw new Error(r);if("string"!=typeof e)throw new Error(o)}if(t.hasEnd()){if(t.getIndexEndName()!==x)throw new Error(r);if("string"!=typeof n)throw new Error(o)}}else if(t.getIndex()===Xt){if(null!=e&&!jr(e)||null!=n&&!jr(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Object(i.f)(t.getIndex()instanceof ue||t.getIndex()===ce,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function xi(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Di=function(t){function e(e,n){return t.call(this,e,n,new we,!1)||this}return Object(o.c)(e,t),Object.defineProperty(e.prototype,"parent",{get:function(){var t=vt(this._path);return null===t?null:new e(this._repo,t)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){for(var t=this;null!==t.parent;)t=t.parent;return t},enumerable:!1,configurable:!0}),e}(Ii),ki=function(){function t(t,e,n){this._node=t,this.ref=e,this._index=n}return Object.defineProperty(t.prototype,"priority",{get:function(){return this._node.getPriority().val()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"key",{get:function(){return this.ref.key},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._node.numChildren()},enumerable:!1,configurable:!0}),t.prototype.child=function(e){var n=new ht(e),r=Ri(this.ref,e);return new t(this._node.getChild(n),r,Xt)},t.prototype.exists=function(){return!this._node.isEmpty()},t.prototype.exportVal=function(){return this._node.val(!0)},t.prototype.forEach=function(e){var n=this;return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,function(r,i){return e(new t(i,Ri(n.ref,r),Xt))})},t.prototype.hasChild=function(t){var e=new ht(t);return!this._node.getChild(e).isEmpty()},t.prototype.hasChildren=function(){return!this._node.isLeafNode()&&!this._node.isEmpty()},t.prototype.toJSON=function(){return this.exportVal()},t.prototype.val=function(){return this._node.val()},t}();function Ni(t,e){return(t=Object(i.q)(t))._checkNotDeleted("ref"),void 0!==e?Ri(t._root,e):t._root}function ji(t,e){(t=Object(i.q)(t))._checkNotDeleted("refFromURL");var n=_i(e,t._repo.repoInfo_.nodeAdmin);Br("refFromURL",n);var r=n.repoInfo;return t._repo.repoInfo_.isCustomHost()||r.host===t._repo.repoInfo_.host||S("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+t._repo.repoInfo_.host+")"),Ni(t,n.path.toString())}function Ri(t,e){var n;return null===ft((t=Object(i.q)(t))._path)?((n=e)&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Vr("child","path",n,!1)):Vr("child","path",e,!1),new Di(t._repo,yt(t._path,e))}function Mi(t,e){t=Object(i.q)(t),qr("push",t._path),Rr("push",e,t._path,!0);var n,r=Jr(t._repo),o=he(r),s=Ri(t,o),a=Ri(t,o);return n=null!=e?Fi(a,e).then(function(){return a}):Promise.resolve(a),s.then=n.then.bind(n),s.catch=n.then.bind(n,void 0),s}function Pi(t){return qr("remove",t._path),Fi(t,null)}function Fi(t,e){t=Object(i.q)(t),qr("set",t._path),Rr("set",e,t._path,!1);var n=new i.a;return ii(t._repo,t._path,e,null,n.wrapCallback(function(){})),n.promise}function Li(t,e){t=Object(i.q)(t),qr("setPriority",t._path),Fr("setPriority",e,!1);var n=new i.a;return ii(t._repo,yt(t._path,".priority"),e,null,n.wrapCallback(function(){})),n.promise}function Ui(t,e,n){if(qr("setWithPriority",t._path),Rr("setWithPriority",e,t._path,!1),Fr("setWithPriority",n,!1),".length"===t.key||".keys"===t.key)throw"setWithPriority failed: "+t.key+" is a read-only object.";var r=new i.a;return ii(t._repo,t._path,e,n,r.wrapCallback(function(){})),r.promise}function Vi(t,e){Pr("update",e,t._path,!1);var n=new i.a;return function(t,e,n,r){ci(t,"update",{path:e.toString(),value:n});var o=!0,s=Zr(t),a={};if(M(n,function(n,r){o=!1,a[n]=mr(yt(e,n),oe(r),t.serverSyncTree_,s)}),o)C("update() called with empty data.  Don't do anything."),li(0,r,"ok",void 0);else{var u=ri(t),c=function(t,e,n,r){!function(t,e,n,r){Object(i.f)(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=Ze(t.visibleWrites,e,n),t.lastWriteId=r}(t.pendingWriteTree_,e,n,r);var o=Qe.fromObject(n);return er(t,new qe({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,o))}(t.serverSyncTree_,e,a,u);Wr(t.eventQueue_,c),t.server_.merge(e.toString(),n,function(n,i){var o="ok"===n;o||I("update at "+e+" failed: "+n);var s=Qn(t.serverSyncTree_,u,!o),a=s.length>0?fi(t,e):e;Gr(t.eventQueue_,a,s),li(0,r,n,i)}),M(n,function(n){var r=vi(t,yt(e,n));fi(t,r)}),Gr(t.eventQueue_,e,[])}}(t._repo,t._path,e,n.wrapCallback(function(){})),n.promise}var qi=function(){function t(t){this.callbackContext=t}return t.prototype.respondsTo=function(t){return"value"===t},t.prototype.createEvent=function(t,e){var n=e._queryParams.getIndex();return new Ci("value",this,new ki(t.snapshotNode,new Di(e._repo,e._path),n))},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,null)}},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Oi(this,t,e):null},t.prototype.matches=function(e){return e instanceof t&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))},t.prototype.hasAnyCallback=function(){return null!==this.callbackContext},t}(),Bi=function(){function t(t,e){this.eventType=t,this.callbackContext=e}return t.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return this.eventType===("children_removed"===e?"child_removed":e)},t.prototype.createCancelEvent=function(t,e){return this.callbackContext.hasCancelCallback?new Oi(this,t,e):null},t.prototype.createEvent=function(t,e){Object(i.f)(null!=t.childName,"Child events should have a childName.");var n=Ri(new Di(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Ci(t.type,this,new ki(t.snapshotNode,n,r),t.prevName)},t.prototype.getEventRunner=function(t){var e=this;return"cancel"===t.getEventType()?function(){return e.callbackContext.onCancel(t.error)}:function(){return e.callbackContext.onValue(t.snapshot,t.prevName)}},t.prototype.matches=function(e){return e instanceof t&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))},t.prototype.hasAnyCallback=function(){return!!this.callbackContext},t}();function zi(t,e,n,r,i){var o;if("object"==typeof r&&(o=void 0,i=r),"function"==typeof r&&(o=r),i&&i.onlyOnce){var s=n,a=function(e,n){s(e,n),ai(t._repo,t,c)};a.userCallback=n.userCallback,a.context=n.context,n=a}var u=new Ei(n,o||void 0),c="value"===e?new qi(u):new Bi(e,u);return function(t,e,n){var r;r=".info"===ft(e._path)?Zn(t.infoSyncTree_,e,n):Zn(t.serverSyncTree_,e,n),Kr(t.eventQueue_,e._path,r)}(t._repo,t,c),function(){return ai(t._repo,t,c)}}function Hi(t,e,n,r){return zi(t,"value",e,n,r)}function Wi(t,e,n,r){return zi(t,"child_added",e,n,r)}function Ki(t,e,n,r){return zi(t,"child_changed",e,n,r)}function Gi(t,e,n,r){return zi(t,"child_moved",e,n,r)}function $i(t,e,n,r){return zi(t,"child_removed",e,n,r)}function Yi(t,e,n){var r=null,i=n?new Ei(n):null;"value"===e?r=new qi(i):e&&(r=new Bi(e,i)),ai(t._repo,t,r)}var Qi=function(){return function(){}}(),Xi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Rr("endAt",this._value,t._path,!0);var e=Oe(t._queryParams,this._value,this._key);if(xi(e),Ti(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ii(t._repo,t._path,e,t._orderByCalled)},e}(Qi);function Ji(t,e){return Ur("endAt","key",e,!0),new Xi(t,e)}var Zi=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Rr("endBefore",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Pt?("string"==typeof n&&(n=fe(n)),i=Oe(e,n,r)):i=Oe(e,n,null==r?T:fe(r)),i.endBeforeSet_=!0,i);if(xi(o),Ti(o),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Ii(t._repo,t._path,o,t._orderByCalled)},e}(Qi);function to(t,e){return Ur("endBefore","key",e,!0),new Zi(t,e)}var eo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Rr("startAt",this._value,t._path,!0);var e=Ce(t._queryParams,this._value,this._key);if(xi(e),Ti(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Ii(t._repo,t._path,e,t._orderByCalled)},e}(Qi);function no(t,e){return void 0===t&&(t=null),Ur("startAt","key",e,!0),new eo(t,e)}var ro=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){Rr("startAfter",this._value,t._path,!1);var e,n,r,i,o=(n=this._value,r=this._key,(e=t._queryParams).index_===Pt?("string"==typeof n&&(n=de(n)),i=Ce(e,n,r)):i=Ce(e,n,null==r?x:de(r)),i.startAfterSet_=!0,i);if(xi(o),Ti(o),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Ii(t._repo,t._path,o,t._orderByCalled)},e}(Qi);function io(t,e){return Ur("startAfter","key",e,!0),new ro(t,e)}var oo=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ii(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="l",n),t._orderByCalled);var e,n},e}(Qi);function so(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new oo(t)}var ao=function(t){function e(e){var n=t.call(this)||this;return n._limit=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Ii(t._repo,t._path,(e=this._limit,(n=t._queryParams.copy()).limitSet_=!0,n.limit_=e,n.viewFrom_="r",n),t._orderByCalled);var e,n},e}(Qi);function uo(t){if("number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new ao(t)}var co=function(t){function e(e){var n=t.call(this)||this;return n._path=e,n}return Object(o.c)(e,t),e.prototype._apply=function(t){Ai(t,"orderByChild");var e=new ht(this._path);if(_t(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");var n=new ue(e),r=Ee(t._queryParams,n);return Ti(r),new Ii(t._repo,t._path,r,!0)},e}(Qi);function lo(t){if("$key"===t)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===t)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===t)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Vr("orderByChild","path",t,!1),new co(t)}var ho=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){Ai(t,"orderByKey");var e=Ee(t._queryParams,Pt);return Ti(e),new Ii(t._repo,t._path,e,!0)},e}(Qi);function fo(){return new ho}var po=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){Ai(t,"orderByPriority");var e=Ee(t._queryParams,Xt);return Ti(e),new Ii(t._repo,t._path,e,!0)},e}(Qi);function go(){return new po}var mo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(o.c)(e,t),e.prototype._apply=function(t){Ai(t,"orderByValue");var e=Ee(t._queryParams,ce);return Ti(e),new Ii(t._repo,t._path,e,!0)},e}(Qi);function bo(){return new mo}var vo=function(t){function e(e,n){var r=t.call(this)||this;return r._value=e,r._key=n,r}return Object(o.c)(e,t),e.prototype._apply=function(t){if(Rr("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Xi(this._value,this._key)._apply(new eo(this._value,this._key)._apply(t))},e}(Qi);function yo(t,e){return Ur("equalTo","key",e,!0),new vo(t,e)}function _o(t){for(var e,n,r=[],s=1;s<arguments.length;s++)r[s-1]=arguments[s];var a=Object(i.q)(t);try{for(var u=Object(o.g)(r),c=u.next();!c.done;c=u.next()){var l=c.value;a=l._apply(a)}}catch(h){e={error:h}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a}!function(t){Object(i.f)(!Dn,"__referenceConstructor has already been defined"),Dn=t}(Di),function(t){Object(i.f)(!Fn,"__referenceConstructor has already been defined"),Fn=t}(Di);var wo={},Co=!1;function Oo(t,e,n,r,i){var o=r||t.options.databaseURL;void 0===o&&(t.options.projectId||S("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),C("Using default host for project ",t.options.projectId),o=t.options.projectId+"-default-rtdb.firebaseio.com");var s,a=_i(o,i),u=a.repoInfo,c=void 0;"undefined"!=typeof process&&(c=process.env.FIREBASE_DATABASE_EMULATOR_HOST),c?(s=!0,u=(a=_i(o="http://"+c+"?ns="+u.namespace,i)).repoInfo):s=!a.repoInfo.secure;var l=i&&s?new z(z.OWNER):new B(t.name,t.options,e);Br("Invalid Firebase Database URL",a),_t(a.path)||S("Database URL must point to the root of a Firebase Database (not including a child path).");var h=function(t,e,n,r){var i=wo[e.name];i||(wo[e.name]=i={});var o=i[t.toURLString()];return o&&S("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),o=new Xr(t,Co,n,r),i[t.toURLString()]=o,o}(u,t,l,new q(t.name,n));return new Eo(h,t)}var Eo=function(){function t(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}return Object.defineProperty(t.prototype,"_repo",{get:function(){return this._instanceStarted||(function(t,e,n){if(t.stats_=J(t.repoInfo_),t.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)t.server_=new Ae(t.repoInfo_,function(e,n,r,i){ti(t,e,n,r,i)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(function(){return ei(t,!0)},0);else{if(null!=n){if("object"!=typeof n)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Object(i.L)(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}t.persistentConnection_=new Nt(t.repoInfo_,e,function(e,n,r,i){ti(t,e,n,r,i)},function(e){ei(t,e)},function(e){!function(t,e){M(e,function(e,n){ni(t,e,n)})}(t,e)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}var r,o;t.authTokenProvider_.addTokenChangeListener(function(e){t.server_.refreshAuthToken(e)}),t.appCheckProvider_.addTokenChangeListener(function(e){t.server_.refreshAppCheckToken(e.token)}),t.statsReporter_=(r=function(){return new Re(t.stats_,t.server_)},o=t.repoInfo_.toString(),X[o]||(X[o]=r()),X[o]),t.infoData_=new Te,t.infoSyncTree_=new $n({startListening:function(e,n,r,i){var o=[],s=t.infoData_.getNode(e._path);return s.isEmpty()||(o=Xn(t.infoSyncTree_,e._path,s),setTimeout(function(){i("ok")},0)),o},stopListening:function(){}}),ni(t,"connected",!1),t.serverSyncTree_=new $n({startListening:function(e,n,r,i){return t.server_.listen(e,r,n,function(n,r){var o=i(n,r);Gr(t.eventQueue_,e._path,o)}),[]},stopListening:function(e,n){t.server_.unlisten(e,n)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_root",{get:function(){return this._rootInternal||(this._rootInternal=new Di(this._repo,dt())),this._rootInternal},enumerable:!1,configurable:!0}),t.prototype._delete=function(){var t,e,n;return this._checkNotDeleted("delete"),t=this._repo,(n=wo[e=this.app.name])&&n[t.key]===t||S("Database "+e+"("+t.repoInfo_+") has already been deleted."),ui(t),delete n[t.key],this._repoInternal=null,this._rootInternal=null,Promise.resolve()},t.prototype._checkNotDeleted=function(t){null===this._rootInternal&&S("Cannot call "+t+" on a deleted database.")},t}();function So(t){(t=Object(i.q)(t))._checkNotDeleted("goOffline"),ui(t._repo)}function Io(t){var e;(t=Object(i.q)(t))._checkNotDeleted("goOnline"),(e=t._repo).persistentConnection_&&e.persistentConnection_.resume(Qr)}var Ao={".sv":"timestamp"},To=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}();function xo(t,e,n){var r;if(t=Object(i.q)(t),qr("Reference.transaction",t._path),".length"===t.key||".keys"===t.key)throw"Reference.transaction failed: "+t.key+" is a read-only object.";var o=null===(r=null==n?void 0:n.applyLocally)||void 0===r||r,s=new i.a,a=Hi(t,function(){});return function(e,n,r,o,a,u){ci(e,"transaction on "+n);var c={path:n,update:r,onComplete:function(e,n,r){var i=null;e?s.reject(e):(i=new ki(r,new Di(t._repo,t._path),Xt),s.resolve(new To(n,i)))},status:null,order:m(),applyLocally:u,retryCount:0,unwatcher:a,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},l=hi(e,n,void 0);c.currentInputSnapshot=l;var h=c.update(l.val());if(void 0===h)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{Mr("transaction failed: Data returned ",h,c.path),c.status=0;var d=_r(e.transactionQueueTree_,n),f=wr(d)||[];f.push(c),Cr(d,f);var p=void 0;"object"==typeof h&&null!==h&&Object(i.k)(h,".priority")?(p=Object(i.I)(h,".priority"),Object(i.f)(jr(p),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):p=(tr(e.serverSyncTree_,n)||re.EMPTY_NODE).getPriority().val();var g=Zr(e),b=oe(h,p),v=br(b,l,g);c.currentOutputSnapshotRaw=b,c.currentOutputSnapshotResolved=v,c.currentWriteId=ri(e);var y=Yn(e.serverSyncTree_,n,v,c.currentWriteId,c.applyLocally);Gr(e.eventQueue_,n,y),di(e,e.transactionQueueTree_)}}(t._repo,t._path,e,0,a,o),s.promise}var Do=function(){function t(t){this._delegate=t}return t.prototype.cancel=function(t){Object(i.M)("OnDisconnect.cancel",0,1,arguments.length),Object(i.N)("OnDisconnect.cancel","onComplete",t,!0);var e=this._delegate.cancel();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.remove=function(t){Object(i.M)("OnDisconnect.remove",0,1,arguments.length),Object(i.N)("OnDisconnect.remove","onComplete",t,!0);var e=this._delegate.remove();return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},t.prototype.set=function(t,e){Object(i.M)("OnDisconnect.set",1,2,arguments.length),Object(i.N)("OnDisconnect.set","onComplete",e,!0);var n=this._delegate.set(t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},t.prototype.setWithPriority=function(t,e,n){Object(i.M)("OnDisconnect.setWithPriority",2,3,arguments.length),Object(i.N)("OnDisconnect.setWithPriority","onComplete",n,!0);var r=this._delegate.setWithPriority(t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},t.prototype.update=function(t,e){if(Object(i.M)("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,I("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Object(i.N)("OnDisconnect.update","onComplete",e,!0);var o=this._delegate.update(t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},t}(),ko=function(){function t(t,e){this.committed=t,this.snapshot=e}return t.prototype.toJSON=function(){return Object(i.M)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},t}(),No=function(){function t(t,e){this._database=t,this._delegate=e}return t.prototype.val=function(){return Object(i.M)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()},t.prototype.exportVal=function(){return Object(i.M)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()},t.prototype.toJSON=function(){return Object(i.M)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.exists=function(){return Object(i.M)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()},t.prototype.child=function(e){return Object(i.M)("DataSnapshot.child",0,1,arguments.length),e=String(e),Vr("DataSnapshot.child","path",e,!1),new t(this._database,this._delegate.child(e))},t.prototype.hasChild=function(t){return Object(i.M)("DataSnapshot.hasChild",1,1,arguments.length),Vr("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)},t.prototype.getPriority=function(){return Object(i.M)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority},t.prototype.forEach=function(e){var n=this;return Object(i.M)("DataSnapshot.forEach",1,1,arguments.length),Object(i.N)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(function(r){return e(new t(n._database,r))})},t.prototype.hasChildren=function(){return Object(i.M)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()},Object.defineProperty(t.prototype,"key",{get:function(){return this._delegate.key},enumerable:!1,configurable:!0}),t.prototype.numChildren=function(){return Object(i.M)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size},t.prototype.getRef=function(){return Object(i.M)("DataSnapshot.ref",0,0,arguments.length),new Ro(this._database,this._delegate.ref)},Object.defineProperty(t.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),t}(),jo=function(){function t(t,e){this.database=t,this._delegate=e}return t.prototype.on=function(e,n,r,o){var s,a=this;Object(i.M)("Query.on",2,4,arguments.length),Object(i.N)("Query.on","callback",n,!1);var u=t.getCancelAndContextArgs_("Query.on",r,o),c=function(t,e){n.call(u.context,new No(a.database,t),e)};c.userCallback=n,c.context=u.context;var l=null===(s=u.cancel)||void 0===s?void 0:s.bind(u.context);switch(e){case"value":return Hi(this._delegate,c,l),n;case"child_added":return Wi(this._delegate,c,l),n;case"child_removed":return $i(this._delegate,c,l),n;case"child_changed":return Ki(this._delegate,c,l),n;case"child_moved":return Gi(this._delegate,c,l),n;default:throw new Error(Object(i.p)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}},t.prototype.off=function(t,e,n){if(Object(i.M)("Query.off",0,3,arguments.length),Lr("Query.off",t,!0),Object(i.N)("Query.off","callback",e,!0),Object(i.O)("Query.off","context",n,!0),e){var r=function(){};r.userCallback=e,r.context=n,Yi(this._delegate,t,r)}else Yi(this._delegate,t)},t.prototype.get=function(){var t=this;return function(t){return function(t,e){var n=function(t,e){var n=e._path,r=null;t.syncPointTree_.foreachOnPath(n,function(t,e){var i=wt(t,n);r=r||Bn(e,i)});var i=t.syncPointTree_.get(n);i?r=r||Bn(i,dt()):(i=new Ln,t.syncPointTree_=t.syncPointTree_.set(n,i));var o=null!=r,s=o?new Be(r,!0,!1):null;return $e(Vn(i,e,cn(t.pendingWriteTree_,e._path),o?s.getNode():re.EMPTY_NODE,o).viewCache_)}(t.serverSyncTree_,e);return null!=n?Promise.resolve(n):t.server_.get(e).then(function(n){var r=oe(n),i=Xn(t.serverSyncTree_,e._path,r);return Kr(t.eventQueue_,e._path,i),Promise.resolve(r)},function(n){return ci(t,"get for query "+Object(i.L)(e)+" failed: "+n),Promise.reject(new Error(n))})}((t=Object(i.q)(t))._repo,t).then(function(e){return new ki(e,new Di(t._repo,t._path),t._queryParams.getIndex())})}(this._delegate).then(function(e){return new No(t.database,e)})},t.prototype.once=function(e,n,r,o){var s=this;Object(i.M)("Query.once",1,4,arguments.length),Object(i.N)("Query.once","callback",n,!0);var a=t.getCancelAndContextArgs_("Query.on",r,o),u=new i.a,c=function(t,e){var r=new No(s.database,t);n&&n.call(a.context,r,e),u.resolve(r)};c.userCallback=n,c.context=a.context;var l=function(t){a.cancel&&a.cancel.call(a.context,t),u.reject(t)};switch(e){case"value":Hi(this._delegate,c,l,{onlyOnce:!0});break;case"child_added":Wi(this._delegate,c,l,{onlyOnce:!0});break;case"child_removed":$i(this._delegate,c,l,{onlyOnce:!0});break;case"child_changed":Ki(this._delegate,c,l,{onlyOnce:!0});break;case"child_moved":Gi(this._delegate,c,l,{onlyOnce:!0});break;default:throw new Error(Object(i.p)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return u.promise},t.prototype.limitToFirst=function(e){return Object(i.M)("Query.limitToFirst",1,1,arguments.length),new t(this.database,_o(this._delegate,so(e)))},t.prototype.limitToLast=function(e){return Object(i.M)("Query.limitToLast",1,1,arguments.length),new t(this.database,_o(this._delegate,uo(e)))},t.prototype.orderByChild=function(e){return Object(i.M)("Query.orderByChild",1,1,arguments.length),new t(this.database,_o(this._delegate,lo(e)))},t.prototype.orderByKey=function(){return Object(i.M)("Query.orderByKey",0,0,arguments.length),new t(this.database,_o(this._delegate,fo()))},t.prototype.orderByPriority=function(){return Object(i.M)("Query.orderByPriority",0,0,arguments.length),new t(this.database,_o(this._delegate,go()))},t.prototype.orderByValue=function(){return Object(i.M)("Query.orderByValue",0,0,arguments.length),new t(this.database,_o(this._delegate,bo()))},t.prototype.startAt=function(e,n){return void 0===e&&(e=null),Object(i.M)("Query.startAt",0,2,arguments.length),new t(this.database,_o(this._delegate,no(e,n)))},t.prototype.startAfter=function(e,n){return void 0===e&&(e=null),Object(i.M)("Query.startAfter",0,2,arguments.length),new t(this.database,_o(this._delegate,io(e,n)))},t.prototype.endAt=function(e,n){return void 0===e&&(e=null),Object(i.M)("Query.endAt",0,2,arguments.length),new t(this.database,_o(this._delegate,Ji(e,n)))},t.prototype.endBefore=function(e,n){return void 0===e&&(e=null),Object(i.M)("Query.endBefore",0,2,arguments.length),new t(this.database,_o(this._delegate,to(e,n)))},t.prototype.equalTo=function(e,n){return Object(i.M)("Query.equalTo",1,2,arguments.length),new t(this.database,_o(this._delegate,yo(e,n)))},t.prototype.toString=function(){return Object(i.M)("Query.toString",0,0,arguments.length),this._delegate.toString()},t.prototype.toJSON=function(){return Object(i.M)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()},t.prototype.isEqual=function(e){if(Object(i.M)("Query.isEqual",1,1,arguments.length),!(e instanceof t)){var n="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(n)}return this._delegate.isEqual(e._delegate)},t.getCancelAndContextArgs_=function(t,e,n){var r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Object(i.N)(t,"cancel",r.cancel,!0),r.context=n,Object(i.O)(t,"context",r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(Object(i.p)(t,"cancelOrContext")+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(t.prototype,"ref",{get:function(){return new Ro(this.database,new Di(this._delegate._repo,this._delegate._path))},enumerable:!1,configurable:!0}),t}(),Ro=function(t){function e(e,n){var r=t.call(this,e,new Ii(n._repo,n._path,new we,!1))||this;return r.database=e,r._delegate=n,r}return Object(o.c)(e,t),e.prototype.getKey=function(){return Object(i.M)("Reference.key",0,0,arguments.length),this._delegate.key},e.prototype.child=function(t){return Object(i.M)("Reference.child",1,1,arguments.length),"number"==typeof t&&(t=String(t)),new e(this.database,Ri(this._delegate,t))},e.prototype.getParent=function(){Object(i.M)("Reference.parent",0,0,arguments.length);var t=this._delegate.parent;return t?new e(this.database,t):null},e.prototype.getRoot=function(){return Object(i.M)("Reference.root",0,0,arguments.length),new e(this.database,this._delegate.root)},e.prototype.set=function(t,e){Object(i.M)("Reference.set",1,2,arguments.length),Object(i.N)("Reference.set","onComplete",e,!0);var n=Fi(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.update=function(t,e){if(Object(i.M)("Reference.update",1,2,arguments.length),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,I("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}qr("Reference.update",this._delegate._path),Object(i.N)("Reference.update","onComplete",e,!0);var o=Vi(this._delegate,t);return e&&o.then(function(){return e(null)},function(t){return e(t)}),o},e.prototype.setWithPriority=function(t,e,n){Object(i.M)("Reference.setWithPriority",2,3,arguments.length),Object(i.N)("Reference.setWithPriority","onComplete",n,!0);var r=Ui(this._delegate,t,e);return n&&r.then(function(){return n(null)},function(t){return n(t)}),r},e.prototype.remove=function(t){Object(i.M)("Reference.remove",0,1,arguments.length),Object(i.N)("Reference.remove","onComplete",t,!0);var e=Pi(this._delegate);return t&&e.then(function(){return t(null)},function(e){return t(e)}),e},e.prototype.transaction=function(t,e,n){var r=this;Object(i.M)("Reference.transaction",1,3,arguments.length),Object(i.N)("Reference.transaction","transactionUpdate",t,!1),Object(i.N)("Reference.transaction","onComplete",e,!0),zr("Reference.transaction","applyLocally",n,!0);var o=xo(this._delegate,t,{applyLocally:n}).then(function(t){return new ko(t.committed,new No(r.database,t.snapshot))});return e&&o.then(function(t){return e(null,t.committed,t.snapshot)},function(t){return e(t,!1,null)}),o},e.prototype.setPriority=function(t,e){Object(i.M)("Reference.setPriority",1,2,arguments.length),Object(i.N)("Reference.setPriority","onComplete",e,!0);var n=Li(this._delegate,t);return e&&n.then(function(){return e(null)},function(t){return e(t)}),n},e.prototype.push=function(t,n){var r=this;Object(i.M)("Reference.push",0,2,arguments.length),Object(i.N)("Reference.push","onComplete",n,!0);var o=Mi(this._delegate,t),s=o.then(function(t){return new e(r.database,t)});n&&s.then(function(){return n(null)},function(t){return n(t)});var a=new e(this.database,o);return a.then=s.then.bind(s),a.catch=s.catch.bind(s,void 0),a},e.prototype.onDisconnect=function(){return qr("Reference.onDisconnect",this._delegate._path),new Do(new Si(this._delegate._repo,this._delegate._path))},Object.defineProperty(e.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),e}(jo),Mo=function(){function t(t,e){var n=this;this._delegate=t,this.app=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),(t=Object(i.q)(t))._checkNotDeleted("useEmulator"),t._instanceStarted&&S("Cannot call useEmulator() after instance has already been initialized.");var o=t._repoInternal,s=void 0;if(o.repoInfo_.nodeAdmin)r.mockUserToken&&S('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new z(z.OWNER);else if(r.mockUserToken){var a=Object(i.l)(r.mockUserToken,t.app.options.projectId);s=new z(a)}!function(t,e,n,r){t.repoInfo_=new G(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),r&&(t.authTokenProvider_=r)}(o,e,n,s)}(this._delegate,t,e,n)},t.prototype.ref=function(t){if(Object(i.M)("database.ref",0,1,arguments.length),t instanceof Ro){var e=ji(this._delegate,t.toString());return new Ro(this,e)}return e=Ni(this._delegate,t),new Ro(this,e)},t.prototype.refFromURL=function(t){var e="database.refFromURL";Object(i.M)(e,1,1,arguments.length);var n=ji(this._delegate,t);return new Ro(this,n)},t.prototype.goOffline=function(){return Object(i.M)("database.goOffline",0,0,arguments.length),So(this._delegate)},t.prototype.goOnline=function(){return Object(i.M)("database.goOnline",0,0,arguments.length),Io(this._delegate)},t.ServerValue={TIMESTAMP:Ao,increment:function(t){return function(t){return{".sv":{increment:t}}}(t)}},t}(),Po=Object.freeze({__proto__:null,forceLongPolling:function(){ot.forceDisallow(),nt.forceAllow()},forceWebSockets:function(){nt.forceDisallow()},isWebSocketsAvailable:function(){return ot.isAvailable()},setSecurityDebugCallback:function(t,e){t._delegate._repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){!function(t,e){if(void 0===e&&(e=!1),"undefined"!=typeof console){var n;e?(t.statsListener_||(t.statsListener_=new je(t.stats_)),n=t.statsListener_.get()):n=t.stats_.get();var r=Object.keys(n).reduce(function(t,e){return Math.max(e.length,t)},0);M(n,function(t,e){for(var n=t,i=t.length;i<r+2;i++)n+=" ";console.log(n+e)})}}(t._delegate._repo,e)},statsIncrementCounter:function(t,e){!function(t,e){t.stats_.incrementCounter(e),t.statsReporter_.statsToReport_[e]=!0}(t._delegate._repo,e)},dataUpdateCount:function(t){return t._delegate._repo.dataUpdateCount},interceptServerData:function(t,e){return function(t,e){t.interceptServerDataCallback_=e}(t._delegate._repo,e)},initStandalone:function(t){var e=t.app,n=t.url,i=t.customAuthImpl,o=t.namespace,s=t.nodeAdmin,a=void 0!==s&&s;u(t.version);var c=new r.c("auth-internal",new r.b("database-standalone"));return c.setComponent(new r.a("auth-internal",function(){return i},"PRIVATE")),{instance:new Mo(Oo(e,c,void 0,n,a),e),namespace:o}}}),Fo=Nt;Nt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},Nt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Lo=Object.freeze({__proto__:null,DataConnection:Fo,RealTimeConnection:at,hijackHash:function(t){var e=Nt.prototype.put;return Nt.prototype.put=function(n,r,i,o){void 0!==o&&(o=t()),e.call(this,n,r,i,o)},function(){Nt.prototype.put=e}},ConnectionTarget:G,queryIdentifier:function(t){return t._delegate._queryIdentifier},forceRestClient:function(t){!function(t){Co=t}(t)}}),Uo=Mo.ServerValue;!function(e){u(e.SDK_VERSION);var n=e.INTERNAL.registerComponent(new r.a("database",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new Mo(Oo(r,i,o,n),r)},"PUBLIC").setServiceProps({Reference:Ro,Query:jo,Database:Mo,DataSnapshot:No,enableLogging:w,INTERNAL:Po,ServerValue:Uo,TEST_ACCESS:Lo}).setMultipleInstances(!0));e.registerVersion("@firebase/database","0.10.0"),Object(i.B)()&&(t.exports=n)}(e.a)}).call(this,n("3UD+")(t))},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"b",function(){return i}),n.d(e,"a",function(){return o});var r=n("3N8a");const i=new(n("IjjT").a)(r.a),o=i},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.5.0","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return un}),n.d(e,"b",function(){return Au}),n.d(e,"c",function(){return Cu}),n.d(e,"d",function(){return _u}),n.d(e,"e",function(){return wu}),n.d(e,"f",function(){return _c}),n.d(e,"g",function(){return lc}),n.d(e,"h",function(){return _a}),n.d(e,"i",function(){return Lu}),n.d(e,"j",function(){return Hs}),n.d(e,"k",function(){return Du}),n.d(e,"l",function(){return $s}),n.d(e,"m",function(){return wr}),n.d(e,"n",function(){return tu}),n.d(e,"o",function(){return uo}),n.d(e,"p",function(){return Tn}),n.d(e,"q",function(){return x}),n.d(e,"r",function(){return an}),n.d(e,"s",function(){return So}),n.d(e,"t",function(){return fa}),n.d(e,"u",function(){return ga}),n.d(e,"v",function(){return xu}),n.d(e,"w",function(){return ka}),n.d(e,"x",function(){return dc}),n.d(e,"y",function(){return Da}),n.d(e,"z",function(){return oc}),n.d(e,"A",function(){return qu}),n.d(e,"B",function(){return xn}),n.d(e,"C",function(){return Iu}),n.d(e,"D",function(){return Su}),n.d(e,"E",function(){return Xs}),n.d(e,"F",function(){return Qs}),n.d(e,"G",function(){return Ir}),n.d(e,"H",function(){return Zs}),n.d(e,"I",function(){return mr}),n.d(e,"J",function(){return Dn}),n.d(e,"K",function(){return gc}),n.d(e,"L",function(){return Ia}),n.d(e,"M",function(){return $u}),n.d(e,"N",function(){return cn}),n.d(e,"O",function(){return ea}),n.d(e,"P",function(){return ta}),n.d(e,"Q",function(){return ja}),n.d(e,"R",function(){return M}),n.d(e,"S",function(){return sc}),n.d(e,"T",function(){return rc}),n.d(e,"U",function(){return f}),n.d(e,"V",function(){return nc}),n.d(e,"W",function(){return vc}),n.d(e,"X",function(){return Xu}),n.d(e,"Y",function(){return Tu}),n.d(e,"Z",function(){return lo}),n.d(e,"ab",function(){return Ds}),n.d(e,"bb",function(){return pr}),n.d(e,"cb",function(){return Xn}),n.d(e,"db",function(){return Vn}),n.d(e,"eb",function(){return Bn}),n.d(e,"fb",function(){return Kn}),n.d(e,"gb",function(){return Hn}),n.d(e,"hb",function(){return zn}),n.d(e,"ib",function(){return Wn}),n.d(e,"jb",function(){return Is}),n.d(e,"kb",function(){return bc}),n.d(e,"lb",function(){return As}),n.d(e,"mb",function(){return Ts}),n.d(e,"nb",function(){return qn}),n.d(e,"ob",function(){return V}),n.d(e,"pb",function(){return Mo}),n.d(e,"qb",function(){return Zo}),n.d(e,"rb",function(){return Xo}),n.d(e,"sb",function(){return Jo}),n.d(e,"tb",function(){return Ss}),n.d(e,"ub",function(){return It}),n.d(e,"vb",function(){return l}),n.d(e,"wb",function(){return Un}),n.d(e,"xb",function(){return Ao}),n.d(e,"yb",function(){return yt}),n.d(e,"zb",function(){return qs}),n.d(e,"Ab",function(){return fi}),n.d(e,"Bb",function(){return Vo}),n.d(e,"Cb",function(){return hs}),n.d(e,"Db",function(){return pu}),n.d(e,"Eb",function(){return J}),n.d(e,"Fb",function(){return ot}),n.d(e,"Gb",function(){return _}),n.d(e,"Hb",function(){return w}),n.d(e,"Ib",function(){return nt}),n.d(e,"Jb",function(){return st}),n.d(e,"Kb",function(){return Ho}),n.d(e,"Lb",function(){return Yo}),n.d(e,"Mb",function(){return $o}),n.d(e,"Nb",function(){return Go}),n.d(e,"Ob",function(){return Qo}),n.d(e,"Pb",function(){return en}),n.d(e,"Qb",function(){return ws}),n.d(e,"Rb",function(){return Sn}),n.d(e,"Sb",function(){return rn}),n.d(e,"Tb",function(){return yu}),n.d(e,"Ub",function(){return ts}),n.d(e,"Vb",function(){return gu}),n.d(e,"Wb",function(){return ye}),n.d(e,"Xb",function(){return ve}),n.d(e,"Yb",function(){return rs}),n.d(e,"Zb",function(){return Xa}),n.d(e,"ac",function(){return Ja}),n.d(e,"bc",function(){return ss}),n.d(e,"cc",function(){return os}),n.d(e,"dc",function(){return Wo}),n.d(e,"ec",function(){return as}),n.d(e,"fc",function(){return $a}),n.d(e,"gc",function(){return Ya}),n.d(e,"hc",function(){return du}),n.d(e,"ic",function(){return zo}),n.d(e,"jc",function(){return Er}),n.d(e,"kc",function(){return Wt}),n.d(e,"lc",function(){return br}),n.d(e,"mc",function(){return rt}),n.d(e,"nc",function(){return Bo}),n.d(e,"oc",function(){return ms}),n.d(e,"pc",function(){return bs}),n.d(e,"qc",function(){return vs}),n.d(e,"rc",function(){return ys}),n.d(e,"sc",function(){return _s}),n.d(e,"tc",function(){return fu});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("w1tV");function u(t){for(let e in t)if(t[e]===u)return e;throw Error("Could not find renamed property on target object.")}function c(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function l(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(l).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function h(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=u({__forward_ref__:u});function f(t){return t.__forward_ref__=f,t.toString=function(){return l(this())},t}function p(t){return g(t)?t():t}function g(t){return"function"==typeof t&&t.hasOwnProperty(d)&&t.__forward_ref__===f}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function b(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():b(t)}function y(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function _(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function w(t){return{providers:t.providers||[],imports:t.imports||[]}}function C(t){return O(t,S)||O(t,A)}function O(t,e){return t.hasOwnProperty(e)?t[e]:null}function E(t){return t&&(t.hasOwnProperty(I)||t.hasOwnProperty(T))?t[I]:null}const S=u({"\u0275prov":u}),I=u({"\u0275inj":u}),A=u({ngInjectableDef:u}),T=u({ngInjectorDef:u});var x=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let D;function k(t){const e=D;return D=t,e}function N(t,e,n){const r=C(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&x.Optional?null:void 0!==e?e:void y(l(t),"Injector")}function j(t){return{toString:t}.toString()}var R=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),M=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const P="undefined"!=typeof globalThis&&globalThis,F="undefined"!=typeof window&&window,L="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,U="undefined"!=typeof global&&global,V=P||U||F||L,q={},B=[],z=[],H=u({"\u0275cmp":u}),W=u({"\u0275dir":u}),K=u({"\u0275pipe":u}),G=u({"\u0275mod":u}),$=u({"\u0275loc":u}),Y=u({"\u0275fac":u}),Q=u({__NG_ELEMENT_ID__:u});let X=0;function J(t){return j(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===R.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||z,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||M.Emulated,id:"c",styles:t.styles||z,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=X++,n.inputs=it(t.inputs,e),n.outputs=it(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(Z):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(tt):null,n})}function Z(t){return at(t)||function(t){return t[W]||null}(t)}function tt(t){return function(t){return t[K]||null}(t)}const et={};function nt(t){const e={type:t.type,bootstrap:t.bootstrap||z,declarations:t.declarations||z,imports:t.imports||z,exports:t.exports||z,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&j(()=>{et[t.id]=t.type}),e}function rt(t,e){return j(()=>{const n=ut(t,!0);n.declarations=e.declarations||z,n.imports=e.imports||z,n.exports=e.exports||z})}function it(t,e){if(null==t)return q;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const ot=J;function st(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function at(t){return t[H]||null}function ut(t,e){const n=t[G]||null;if(!n&&!0===e)throw new Error(`Type ${l(t)} does not have '\u0275mod' property.`);return n}const ct=20,lt=10;function ht(t){return Array.isArray(t)&&"object"==typeof t[1]}function dt(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function pt(t){return 2==(2&t.flags)}function gt(t){return 1==(1&t.flags)}function mt(t){return null!==t.template}function bt(t,e){return t.hasOwnProperty(Y)?t[Y]:null}class vt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function yt(){return _t}function _t(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ct),wt}function wt(){const t=Ot(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===q)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function Ct(t,e,n,r){const i=Ot(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:q,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new vt(u&&u.currentValue,e,s===q),t[r]=e}function Ot(t){return t.__ngSimpleChanges__||null}yt.ngInherit=!0;const Et="http://www.w3.org/2000/svg";let St;function It(t){St=t}function At(t){return!!t.listen}const Tt={createRenderer:(t,e)=>void 0!==St?St:"undefined"!=typeof document?document:void 0};function xt(t){for(;Array.isArray(t);)t=t[0];return t}function Dt(t,e){return xt(e[t])}function kt(t,e){return xt(e[t.index])}function Nt(t,e){return t.data[e]}function jt(t,e){return t[e]}function Rt(t,e){const n=e[t];return ht(n)?n:n[0]}function Mt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Pt(t){return 4==(4&t[2])}function Ft(t){return 128==(128&t[2])}function Lt(t,e){return null==e?null:t[e]}function Ut(t){t[18]=0}function Vt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const qt={lFrame:he(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Bt(){return qt.bindingsEnabled}function zt(){return qt.lFrame.lView}function Ht(){return qt.lFrame.tView}function Wt(t){qt.lFrame.contextLView=t}function Kt(){let t=Gt();for(;null!==t&&64===t.type;)t=t.parent;return t}function Gt(){return qt.lFrame.currentTNode}function $t(t,e){const n=qt.lFrame;n.currentTNode=t,n.isParent=e}function Yt(){return qt.lFrame.isParent}function Qt(){qt.lFrame.isParent=!1}function Xt(){return qt.isInCheckNoChangesMode}function Jt(t){qt.isInCheckNoChangesMode=t}function Zt(){const t=qt.lFrame;let e=t.bindingRootIndex;return-1===e&&(e=t.bindingRootIndex=t.tView.bindingStartIndex),e}function te(){return qt.lFrame.bindingIndex}function ee(){return qt.lFrame.bindingIndex++}function ne(t){const e=qt.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}function re(t,e){const n=qt.lFrame;n.bindingIndex=n.bindingRootIndex=t,ie(e)}function ie(t){qt.lFrame.currentDirectiveIndex=t}function oe(){return qt.lFrame.currentQueryIndex}function se(t){qt.lFrame.currentQueryIndex=t}function ae(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function ue(t,e,n){if(n&x.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&x.Host||(r=ae(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=qt.lFrame=le();return r.currentTNode=e,r.lView=t,!0}function ce(t){const e=le(),n=t[1];qt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function le(){const t=qt.lFrame,e=null===t?null:t.child;return null===e?he(t):e}function he(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function de(){const t=qt.lFrame;return qt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const fe=de;function pe(){const t=de();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ge(){return qt.lFrame.selectedIndex}function me(t){qt.lFrame.selectedIndex=t}function be(){const t=qt.lFrame;return Nt(t.tView,t.selectedIndex)}function ve(){qt.lFrame.currentNamespace=Et}function ye(){qt.lFrame.currentNamespace=null}function _e(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function we(t,e,n){Ee(t,e,3,n)}function Ce(t,e,n,r){(3&t[2])===n&&Ee(t,e,n,r)}function Oe(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function Ee(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(Se(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function Se(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];if(i){if(t[2]>>11<t[18]>>16&&(3&t[2])===e){t[2]+=2048;try{o.call(s)}finally{}}}else try{o.call(s)}finally{}}const Ie=-1;class Ae{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function Te(t,e,n){const r=At(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];De(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function xe(t){return 3===t||4===t||6===t}function De(t){return 64===t.charCodeAt(0)}function ke(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ne(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ne(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function je(t){return t!==Ie}function Re(t){return 32767&t}function Me(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Pe=!0;function Fe(t){const e=Pe;return Pe=t,e}let Le=0;function Ue(t,e){const n=qe(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,Ve(r.data,t),Ve(e,null),Ve(r.blueprint,null));const i=Be(t,e),o=t.injectorIndex;if(je(i)){const t=Re(i),n=Me(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function Ve(t,e){t.push(0,0,0,0,0,0,0,0,e)}function qe(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Be(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return Ie;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return Ie}function ze(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(Q)&&(r=n[Q]),null==r&&(r=n[Q]=Le++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function He(t,e,n){if(n&x.Optional)return t;y(e,"NodeInjector")}function We(t,e,n,r){if(n&x.Optional&&void 0===r&&(r=null),0==(n&(x.Self|x.Host))){const i=t[9],o=k(void 0);try{return i?i.get(e,r,n&x.Optional):N(e,r,n&x.Optional)}finally{k(o)}}return He(r,e,n)}function Ke(t,e,n,r=x.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(Q)?t[Q]:void 0;return"number"==typeof e?e>=0?255&e:$e:e}(n);if("function"==typeof o){if(!ue(e,t,r))return r&x.Host?He(i,n,r):We(e,n,r,i);try{const t=o();if(null!=t||r&x.Optional)return t;y(n)}finally{fe()}}else if("number"==typeof o){let i=null,s=qe(t,e),a=Ie,u=r&x.Host?e[16][6]:null;for((-1===s||r&x.SkipSelf)&&(a=-1===s?Be(t,e):e[s+8],a!==Ie&&Ze(r,!1)?(i=e[1],s=Re(a),e=Me(a,e)):s=-1);-1!==s;){const t=e[1];if(Je(o,s,t.data)){const t=Ye(s,e,n,i,r,u);if(t!==Ge)return t}a=e[s+8],a!==Ie&&Ze(r,e[1].data[s+8]===u)&&Je(o,s,e)?(i=t,s=Re(a),e=Me(a,e)):s=-1}}}return We(e,n,r,i)}const Ge={};function $e(){return new tn(Kt(),zt())}function Ye(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Qe(a,s,n,null==r?pt(a)&&Pe:r!=s&&0!=(3&a.type),i&x.Host&&o===a);return null!==u?Xe(e,s,u,a):Ge}function Qe(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&mt(t)&&t.type===n)return u}return null}function Xe(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof Ae){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Fe(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?k(s.injectImpl):null;ue(t,r,x.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=_t(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&k(u),Fe(a),s.resolving=!1,fe()}}return i}function Je(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function Ze(t,e){return!(t&x.Self||t&x.Host&&e)}class tn{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Ke(this._tNode,this._lView,t,void 0,e)}}function en(t){return j(()=>{const e=t.prototype.constructor,n=e[Y]||nn(e),r=Object.prototype;let i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==r;){const t=i[Y]||nn(i);if(t&&t!==n)return t;i=Object.getPrototypeOf(i)}return t=>new t})}function nn(t){return g(t)?()=>{const e=nn(p(t));return e&&e()}:bt(t)}function rn(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(xe(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Kt(),t)}const on="__parameters__";function sn(t,e,n){return j(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(on)?t[on]:Object.defineProperty(t,on,{value:[]})[on];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class an{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=_({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const un=new an("AnalyzeForEntryComponents"),cn=Function;function ln(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),ln(r,e)):e!==t&&e.push(r)}return e}function hn(t,e){t.forEach(t=>Array.isArray(t)?hn(t,e):e(t))}function dn(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function fn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function pn(t,e){const n=[];for(let r=0;r<t;r++)n.push(e);return n}function gn(t,e,n){let r=bn(t,e);return r>=0?t[1|r]=n:(r=~r,function(t,e,n,r){let i=t.length;if(i==e)t.push(n,r);else if(1===i)t.push(r,t[0]),t[0]=n;else{for(i--,t.push(t[i-1],t[i]);i>e;)t[i]=t[i-2],i--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function mn(t,e){const n=bn(t,e);if(n>=0)return t[1|n]}function bn(t,e){return function(t,e,n){let r=0,i=t.length>>1;for(;i!==r;){const n=r+(i-r>>1),o=t[n<<1];if(e===o)return n<<1;o>e?i=n:r=n+1}return~(i<<1)}(t,e)}const vn={},yn=/\n/gm,_n="__source",wn=u({provide:String,useValue:u});let Cn;function On(t){const e=Cn;return Cn=t,e}function En(t,e=x.Default){if(void 0===Cn)throw new Error("inject() must be called from an injection context");return null===Cn?N(t,void 0,e):Cn.get(t,e&x.Optional?null:void 0,e)}function Sn(t,e=x.Default){return(D||En)(p(t),e)}function In(t){const e=[];for(let n=0;n<t.length;n++){const r=p(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=x.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(Sn(t,n))}else e.push(Sn(r))}return e}function An(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const Tn=An(sn("Inject",t=>({token:t})),-1),xn=An(sn("Optional"),8),Dn=An(sn("SkipSelf"),4);let kn;function Nn(t){var e;return(null===(e=function(){if(void 0===kn&&(kn=null,V.trustedTypes))try{kn=V.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return kn}())||void 0===e?void 0:e.createHTML(t))||t}class jn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class Rn extends jn{getTypeName(){return"HTML"}}class Mn extends jn{getTypeName(){return"Style"}}class Pn extends jn{getTypeName(){return"Script"}}class Fn extends jn{getTypeName(){return"URL"}}class Ln extends jn{getTypeName(){return"ResourceURL"}}function Un(t){return t instanceof jn?t.changingThisBreaksApplicationSecurity:t}function Vn(t,e){const n=qn(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function qn(t){return t instanceof jn&&t.getTypeName()||null}function Bn(t){return new Rn(t)}function zn(t){return new Mn(t)}function Hn(t){return new Pn(t)}function Wn(t){return new Fn(t)}function Kn(t){return new Ln(t)}class Gn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(Nn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class $n{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=Nn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=Nn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Yn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Qn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Xn(t){return(t=String(t)).match(Yn)||t.match(Qn)?t:"unsafe:"+t}function Jn(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Zn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const tr=Jn("area,br,col,hr,img,wbr"),er=Jn("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),nr=Jn("rp,rt"),rr=Zn(nr,er),ir=Zn(tr,Zn(er,Jn("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Zn(nr,Jn("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),rr),or=Jn("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),sr=Jn("srcset"),ar=Zn(or,sr,Jn("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Jn("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),ur=Jn("script,style,template");class cr{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!ir.hasOwnProperty(e))return this.sanitizedSomething=!0,!ur.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!ar.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;or[o]&&(s=Xn(s)),sr[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Xn(t.trim())).join(", ")),this.buf.push(" ",e,'="',dr(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();ir.hasOwnProperty(e)&&!tr.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(dr(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const lr=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,hr=/([^\#-~ |!])/g;function dr(t){return t.replace(/&/g,"&amp;").replace(lr,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(hr,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let fr;function pr(t,e){let n=null;try{fr=fr||function(t){const e=new $n(t);return function(){try{return!!(new window.DOMParser).parseFromString(Nn(""),"text/html")}catch(t){return!1}}()?new Gn(e):e}(t);let r=e?String(e):"";n=fr.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=fr.getInertBodyElement(r)}while(r!==o);return Nn((new cr).sanitizeChildren(gr(n)||n))}finally{if(n){const t=gr(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function gr(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var mr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function br(t){const e=function(){const t=zt();return t&&t[12]}();return e?e.sanitize(mr.URL,t)||"":Vn(t,"URL")?Un(t):Xn(b(t))}function vr(t){return t.ngDebugContext}function yr(t){return t.ngOriginalError}function _r(t,...e){t.error(...e)}class wr{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||_r}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?vr(t)?vr(t):this._findContext(yr(t)):null}_findOriginalError(t){let e=yr(t);for(;e&&yr(e);)e=yr(e);return e}}function Cr(t,e){t.__ngContext__=e}const Or=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function Er(t){return{name:"window",target:t.ownerDocument.defaultView}}function Sr(t){return t instanceof Function?t():t}var Ir=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function Ar(t,e){return(void 0)(t,e)}function Tr(t){const e=t[3];return dt(e)?e[3]:e}function xr(t){return kr(t[13])}function Dr(t){return kr(t[4])}function kr(t){for(;null!==t&&!dt(t);)t=t[4];return t}function Nr(t,e,n,r,i){if(null!=r){let o,s=!1;dt(r)?o=r:ht(r)&&(s=!0,r=r[0]);const a=xt(r);0===t&&null!==n?null==i?Vr(e,n,a):Ur(e,n,a,i||null,!0):1===t&&null!==n?Ur(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Br(t,e);r&&function(t,e,n,r){At(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==xt(n)&&Nr(e,t,r,o,i);for(let s=lt;s<n.length;s++){const i=n[s];Qr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function jr(t,e,n){return At(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function Rr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Vt(i,-1)),n.splice(r,1)}function Mr(t,e){if(t.length<=lt)return;const n=lt+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&Rr(o,r),e>0&&(t[n-1][4]=r[4]);const s=fn(t,lt+e);Qr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function Pr(t,e){if(!(256&e[2])){const n=e[11];At(n)&&n.destroyNode&&Qr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return Fr(t[1],t);for(;e;){let n=null;if(ht(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)ht(e)&&Fr(e[1],e),e=e[3];null===e&&(e=t),ht(e)&&Fr(e[1],e),n=e&&e[4]}e=n}}(e)}}function Fr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof Ae)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):xt(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&At(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&dt(e[3])){n!==e[3]&&Rr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function Lr(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===M.None||e===M.Emulated)return null}return kt(r,n)}(t,e.parent,n)}function Ur(t,e,n,r,i){At(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Vr(t,e,n){At(t)?t.appendChild(e,n):e.appendChild(n)}function qr(t,e,n,r,i){null!==r?Ur(t,e,n,r,i):Vr(t,e,n)}function Br(t,e){return At(t)?t.parentNode(e):e.parentNode}function zr(t,e,n){return Hr(t,e,n)}let Hr=function(t,e,n){return 40&t.type?kt(t,n):null};function Wr(t,e,n,r){const i=Lr(t,r,e),o=e[11],s=zr(r.parent||e[6],r,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)qr(o,i,n[a],s,!1);else qr(o,i,n,s,!1)}function Kr(t,e){if(null!==e){const n=e.type;if(3&n)return kt(e,t);if(4&n)return $r(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Kr(t,n);{const n=t[e.index];return dt(n)?$r(-1,n):xt(n)}}if(32&n)return Ar(e,t)()||xt(t[e.index]);{const n=Gr(t,e);return null!==n?Array.isArray(n)?n[0]:Kr(Tr(t[16]),n):Kr(t,e.next)}}return null}function Gr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function $r(t,e){const n=lt+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Kr(t,r)}return e[7]}function Yr(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&Cr(xt(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Yr(t,e,n.child,r,i,o,!1),Nr(e,t,i,a,o);else if(32&u){const s=Ar(n,r);let u;for(;u=s();)Nr(e,t,i,u,o);Nr(e,t,i,a,o)}else 16&u?Xr(t,e,r,n,i,o):Nr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function Qr(t,e,n,r,i,o){Yr(n,r,t.firstChild,e,i,o,!1)}function Xr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)Nr(e,t,i,a[u],o);else Yr(t,e,a,s[3],i,o,!0)}function Jr(t,e,n){At(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Zr(t,e,n){At(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function ti(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const ei="ng-template";function ni(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==ti(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function ri(t){return 4===t.type&&t.value!==ei}function ii(t,e,n){return e===(4!==t.type||n?t.value:ei)}function oi(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(xe(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!ii(t,u,n)||""===u&&1===e.length){if(si(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!ni(t.attrs,c,n)){if(si(r))return!1;s=!0}continue}const l=ai(8&r?"class":u,i,ri(t),n);if(-1===l){if(si(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==ti(e,c,0)||2&r&&c!==t){if(si(r))return!1;s=!0}}}}else{if(!s&&!si(r)&&!si(u))return!1;if(s&&si(u))continue;s=!1,r=u|1&r}}return si(r)||s}function si(t){return 0==(1&t)}function ai(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function ui(t,e,n=!1){for(let r=0;r<e.length;r++)if(oi(t,e[r],n))return!0;return!1}function ci(t,e){t:for(let n=0;n<e.length;n++){const r=e[n];if(t.length===r.length){for(let e=0;e<t.length;e++)if(t[e]!==r[e])continue t;return!0}}return!1}function li(t,e){return t?":not("+e.trim()+")":e}function hi(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||si(s)||(e+=li(o,i),i=""),r=s,o=o||!si(r);n++}return""!==i&&(e+=li(o,i)),e}const di={};function fi(t){pi(Ht(),zt(),ge()+t,Xt())}function pi(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&we(e,r,n)}else{const r=t.preOrderHooks;null!==r&&Ce(e,r,0,n)}me(n)}function gi(t,e){return t<<17|e<<2}function mi(t){return t>>17&32767}function bi(t){return 2|t}function vi(t){return(131068&t)>>2}function yi(t,e){return-131069&t|e<<2}function _i(t){return 1|t}function wi(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];se(i),n.contentQueries(2,e[o],o)}}}function Ci(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Ut(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Oi(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Gt(),s=Yt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),qt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=qt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return $t(o,!0),o}function Ei(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Si(t,e,n){ce(e);try{const r=t.viewQuery;null!==r&&to(1,r,n);const i=t.template;null!==i&&Ti(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&wi(t,e),t.staticViewQueries&&to(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Yi(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,pe()}}function Ii(t,e,n,r){const i=e[2];if(256==(256&i))return;ce(e);const o=Xt();try{Ut(e),qt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&Ti(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&we(e,n,null)}else{const n=t.preOrderHooks;null!==n&&Ce(e,n,0,null),Oe(e,0)}if(function(t){for(let e=xr(t);null!==e;e=Dr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Vt(r,1),n[2]|=1024}}}(e),function(t){for(let e=xr(t);null!==e;e=Dr(e))for(let t=lt;t<e.length;t++){const n=e[t],r=n[1];Ft(n)&&Ii(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&wi(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&we(e,n)}else{const n=t.contentHooks;null!==n&&Ce(e,n,1),Oe(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)me(~r);else{const i=r,o=n[++t],s=n[++t];re(o,i),s(2,e[i])}}}finally{me(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)Gi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&to(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&we(e,n)}else{const n=t.viewHooks;null!==n&&Ce(e,n,2),Oe(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Vt(e[3],-1))}finally{pe()}}function Ai(t,e,n,r){const i=e[10],o=!Xt(),s=Pt(e);try{o&&!s&&i.begin&&i.begin(),s&&Si(t,e,r),Ii(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function Ti(t,e,n,r,i){const o=ge(),s=2&r;try{me(-1),s&&e.length>ct&&pi(t,e,ct,Xt()),n(r,i)}finally{me(o)}}function xi(t,e,n){Bt()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ue(n,e),Cr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=mt(r);o&&zi(e,n,r);const u=Xe(e,t,a,n);Cr(u,e),null!==s&&Hi(0,a-i,u,r,0,s),o&&(Rt(n.index,e)[8]=u)}}(t,e,n,kt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=qt.lFrame.currentDirectiveIndex;try{me(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];ie(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||Li(r,i)}}finally{me(-1),ie(s)}}(t,e,n))}function Di(t,e,n=kt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function ki(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Ni(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function Ni(t,e,n,r,i,o,s,a,u,c){const l=ct+r,h=l+i,d=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:di);return n}(l,h),f="function"==typeof c?c():c;return d[1]={type:t,blueprint:d,template:n,queries:null,viewQuery:a,declTNode:e,data:d.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:f,incompleteFirstPass:!1}}function ji(t,e,n,r){const i=no(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&ro(t).push(r,i.length-1))}function Ri(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function Mi(t,e,n,r,i,o,s,a){const u=kt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(oo(t,n,c,r,i),pt(e)&&function(t,e){const n=Rt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,At(o)?o.setProperty(u,r,i):De(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function Pi(t,e,n,r){let i=!1;if(Bt()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];ui(n,s.selectors,!1)&&(i||(i=[]),ze(Ue(n,e),t,s.type),mt(s)?(Ui(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,qi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Ei(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=ke(n.mergedAttrs,c.hostAttrs),Bi(t,n,e,u,c),Vi(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||ri(e)?null:Wi(n,i);o.push(c),s=Ri(n,u,s),a=Ri(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=ke(n.mergedAttrs,n.attrs),i}function Fi(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function Li(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Ui(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function Vi(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;mt(e)&&(n[""]=t)}}function qi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function Bi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=bt(i.type)),s=new Ae(o,mt(i),null);t.blueprint[r]=s,n[r]=s,Fi(t,e,0,r,Ei(t,n,i.hostVars,di),i)}function zi(t,e,n){const r=kt(e,t),i=ki(n),o=t[10],s=Qi(t,Ci(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function Hi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function Wi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function Ki(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function Gi(t,e){const n=Rt(e,t);if(Ft(n)){const t=n[1];80&n[2]?Ii(t,n,t.template,n[8]):n[5]>0&&$i(n)}}function $i(t){for(let n=xr(t);null!==n;n=Dr(n))for(let t=lt;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Ii(t,e,t.template,e[8])}else e[5]>0&&$i(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=Rt(e[n],t);Ft(r)&&r[5]>0&&$i(r)}}function Yi(t,e){const n=Rt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Si(r,n,n[8])}function Qi(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Xi(t){for(;t;){t[2]|=64;const e=Tr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Ji(t,e,n){const r=e[10];r.begin&&r.begin();try{Ii(t,e,t.template,n)}catch(i){throw io(e,i),i}finally{r.end&&r.end()}}function Zi(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=Mt(n),i=r[1];Ai(i,r,i.template,n)}}(t[8])}function to(t,e,n){se(0),e(t,n)}const eo=(()=>Promise.resolve(null))();function no(t){return t[7]||(t[7]=[])}function ro(t){return t.cleanup||(t.cleanup=[])}function io(t,e){const n=t[9],r=n?n.get(wr,null):null;r&&r.handleError(e)}function oo(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function so(t,e,n){const r=Dt(e,t);!function(t,e,n){At(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}function ao(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=h(i,t):2==o&&(r=h(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const uo=new an("INJECTOR",-1);class co{get(t,e=vn){if(e===vn){const e=new Error(`NullInjectorError: No provider for ${l(t)}!`);throw e.name="NullInjectorError",e}return e}}const lo=new an("Set Injector scope."),ho={},fo={},po=[];let go;function mo(){return void 0===go&&(go=new co),go}function bo(t,e=null,n=null,r){return new vo(t,n,e||mo(),r)}class vo{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&hn(e,n=>this.processProvider(n,t,e)),hn([t],t=>this.processInjectorType(t,[],i)),this.records.set(uo,wo(void 0,this));const o=this.records.get(lo);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:l(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=vn,n=x.Default){this.assertNotDestroyed();const r=On(this);try{if(!(n&x.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof an)&&C(t);e=n&&this.injectableDefInScope(n)?wo(yo(t),ho):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&x.Self?mo():this.parent).get(t,e=n&x.Optional&&e===vn?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(l(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[_n]&&i.unshift(e[_n]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=l(e);if(Array.isArray(e))i=e.map(l).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):l(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(yn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{On(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(l(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=p(t)))return!1;let r=E(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=E(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{hn(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];hn(r,t=>this.processProvider(t,n,r||po))}}this.injectorDefTypes.add(o);const a=bt(o)||(()=>new o);this.records.set(o,wo(a,ho));const u=r.providers;if(null!=u&&!s){const e=t;hn(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Oo(t=p(t))?t:p(t&&t.provide);const i=function(t,e,n){return Co(t)?wo(void 0,t.useValue):wo(_o(t),ho)}(t);if(Oo(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=wo(void 0,ho,!0),e.factory=()=>In(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===ho&&(e.value=fo,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function yo(t){const e=C(t),n=null!==e?e.factory:bt(t);if(null!==n)return n;if(t instanceof an)throw new Error(`Token ${l(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=pn(e,"?");throw new Error(`Can't resolve all parameters for ${l(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[S]||t[A]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function _o(t,e,n){let r;if(Oo(t)){const e=p(t);return bt(e)||yo(e)}if(Co(t))r=()=>p(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...In(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>Sn(p(t.useExisting));else{const e=p(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return bt(e)||yo(e);r=()=>new e(...In(t.deps))}var i;return r}function wo(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Co(t){return null!==t&&"object"==typeof t&&wn in t}function Oo(t){return"function"==typeof t}const Eo=function(t,e,n){return function(t,e=null,n=null,r){const i=bo(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let So=(()=>{class t{static create(t,e){return Array.isArray(t)?Eo(t,e,""):Eo(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=vn,t.NULL=new co,t.\u0275prov=_({token:t,providedIn:"any",factory:()=>Sn(uo)}),t.__NG_ELEMENT_ID__=-1,t})();function Io(t,e){_e(Mt(t)[1],Kt())}function Ao(t){let e=Object.getPrototypeOf(t.type.prototype).constructor,n=!0;const r=[t];for(;e;){let i;if(mt(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new Error("Directives cannot inherit Components");i=e.\u0275dir}if(i){if(n){r.push(i);const e=t;e.inputs=To(t.inputs),e.declaredInputs=To(t.declaredInputs),e.outputs=To(t.outputs);const n=i.hostBindings;n&&ko(t,n);const o=i.viewQuery,s=i.contentQueries;if(o&&xo(t,o),s&&Do(t,s),c(t.inputs,i.inputs),c(t.declaredInputs,i.declaredInputs),c(t.outputs,i.outputs),mt(i)&&i.data.animation){const e=t.data;e.animation=(e.animation||[]).concat(i.data.animation)}}const e=i.features;if(e)for(let r=0;r<e.length;r++){const i=e[r];i&&i.ngInherit&&i(t),i===Ao&&(n=!1)}}e=Object.getPrototypeOf(e)}!function(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const i=t[r];i.hostVars=e+=i.hostVars,i.hostAttrs=ke(i.hostAttrs,n=ke(n,i.hostAttrs))}}(r)}function To(t){return t===q?{}:t===z?[]:t}function xo(t,e){const n=t.viewQuery;t.viewQuery=n?(t,r)=>{e(t,r),n(t,r)}:e}function Do(t,e){const n=t.contentQueries;t.contentQueries=n?(t,r,i)=>{e(t,r,i),n(t,r,i)}:e}function ko(t,e){const n=t.hostBindings;t.hostBindings=n?(t,r)=>{e(t,r),n(t,r)}:e}let No=null;function jo(){if(!No){const t=V.Symbol;if(t&&t.iterator)No=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(No=n)}}}return No}class Ro{constructor(t){this.wrapped=t}static wrap(t){return new Ro(t)}static unwrap(t){return Ro.isWrapped(t)?t.wrapped:t}static isWrapped(t){return t instanceof Ro}}function Mo(t){return!!Po(t)&&(Array.isArray(t)||!(t instanceof Map)&&jo()in t)}function Po(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function Fo(t,e,n){return t[e]=n}function Lo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function Uo(t,e,n,r){const i=Lo(t,e,n);return Lo(t,e+1,r)||i}function Vo(t,e,n,r){const i=zt();return Lo(i,ee(),e)&&(Ht(),function(t,e,n,r,i,o){const s=kt(t,e);!function(t,e,n,r,i,o,s){if(null==o)At(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?b(o):s(o,r||"",i);At(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(be(),i,t,e,n,r)),Vo}function qo(t,e,n,r){return Lo(t,ee(),n)?e+b(n)+r:di}function Bo(t,e,n,r,i,o,s,a){const u=zt(),c=Ht(),l=t+ct,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Oi(e,t,4,s||null,Lt(c,a));Pi(e,n,l,Lt(c,u)),_e(e,l);const h=l.tViews=Ni(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];$t(h,!1);const d=u[11].createComment("");Wr(c,u,d,h),Cr(d,u),Qi(u,u[l]=Ki(d,u,d,h)),gt(h)&&xi(c,u,h),null!=s&&Di(u,h,a)}function zo(t){return jt(qt.lFrame.contextLView,ct+t)}function Ho(t,e=x.Default){const n=zt();return null===n?Sn(t,e):Ke(Kt(),n,p(t),e)}function Wo(t,e,n){const r=zt();return Lo(r,ee(),e)&&Mi(Ht(),be(),r,t,e,r[11],n,!1),Wo}function Ko(t,e,n,r,i){const o=i?"class":"style";oo(t,n,e.inputs[o],o,r)}function Go(t,e,n,r){const i=zt(),o=Ht(),s=ct+t,a=i[11],u=i[s]=jr(a,e,qt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Oi(e,t,2,i,Lt(a,o));return Pi(e,n,u,Lt(a,s)),null!==u.attrs&&ao(u,u.attrs,!1),null!==u.mergedAttrs&&ao(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];$t(c,!0);const l=c.mergedAttrs;null!==l&&Te(a,u,l);const h=c.classes;null!==h&&Zr(a,u,h);const d=c.styles;null!==d&&Jr(a,u,d),64!=(64&c.flags)&&Wr(o,i,u,c),0===qt.lFrame.elementDepthCount&&Cr(u,i),qt.lFrame.elementDepthCount++,gt(c)&&(xi(o,i,c),function(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&Di(i,c)}function $o(){let t=Kt();Yt()?Qt():(t=t.parent,$t(t,!1));const e=t;qt.lFrame.elementDepthCount--;const n=Ht();n.firstCreatePass&&(_e(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&Ko(n,e,zt(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&Ko(n,e,zt(),e.stylesWithoutHost,!1)}function Yo(t,e,n,r){Go(t,e,n,r),$o()}function Qo(){return zt()}function Xo(t){return!!t&&"function"==typeof t.then}function Jo(t){return!!t&&"function"==typeof t.subscribe}const Zo=Jo;function ts(t,e,n=!1,r){const i=zt(),o=Ht(),s=Kt();return function(t,e,n,r,i,o,s=!1,a){const u=gt(r),c=t.firstCreatePass&&ro(t),l=no(e);let h=!0;if(3&r.type){const d=kt(r,e),f=a?a(d):q,p=f.target||d,g=l.length,m=a?t=>a(xt(t[r.index])).target:r.index;if(At(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=ns(r,e,0,o,!1);const t=n.listen(f.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=ns(r,e,0,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}else o=ns(r,e,0,o,!1);const d=r.outputs;let f;if(h&&null!==d&&(f=d[i])){const t=f.length;if(t)for(let n=0;n<t;n+=2){const t=e[f[n]][f[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),ts}function es(t,e,n,r){try{return!1!==n(r)}catch(i){return io(t,i),!1}}function ns(t,e,n,r,i){return function n(o){if(o===Function)return r;const s=2&t.flags?Rt(t.index,e):e;0==(32&e[2])&&Xi(s);let a=es(e,0,r,o),u=n.__ngNextListenerFn__;for(;u;)a=es(e,0,u,o)&&a,u=u.__ngNextListenerFn__;return i&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function rs(t=1){return function(t){return(qt.lFrame.contextLView=function(t,e){for(;t>0;)e=e[15],t--;return e}(t,qt.lFrame.contextLView))[8]}(t)}function is(t,e){let n=null;const r=function(t){const e=t.attrs;if(null!=e){const t=e.indexOf(5);if(0==(1&t))return e[t+1]}return null}(t);for(let i=0;i<e.length;i++){const o=e[i];if("*"!==o){if(null===r?ui(t,o,!0):ci(r,o))return i}else n=i}return n}function os(t){const e=zt()[16][6];if(!e.projection){const n=e.projection=pn(t?t.length:1,null),r=n.slice();let i=e.child;for(;null!==i;){const e=t?is(i,t):0;null!==e&&(r[e]?r[e].projectionNext=i:n[e]=i,r[e]=i),i=i.next}}}function ss(t,e=0,n){const r=zt(),i=Ht(),o=Oi(i,ct+t,16,null,n||null);null===o.projection&&(o.projection=e),Qt(),64!=(64&o.flags)&&function(t,e,n){Xr(e[11],0,e,n,Lr(t,n,e),zr(n.parent||e[6],n,e))}(i,r,o)}function as(t,e,n){return us(t,"",e,"",n),as}function us(t,e,n,r,i){const o=zt(),s=qo(o,e,n,r);return s!==di&&Mi(Ht(),be(),o,t,s,o[11],i,!1),us}function cs(t,e,n,r,i){const o=t[n+1],s=null===e;let a=r?mi(o):vi(o),u=!1;for(;0!==a&&(!1===u||s);){const n=t[a+1];ls(t[a],e)&&(u=!0,t[a+1]=r?_i(n):bi(n)),a=r?mi(n):vi(n)}u&&(t[n+1]=r?bi(o):_i(o))}function ls(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&bn(t,e)>=0}function hs(t,e){return function(t,e,n,r){const i=zt(),o=Ht(),s=ne(2);o.firstUpdatePass&&function(t,e,n,r){const i=t.data;if(null===i[n+1]){const o=i[ge()],s=function(t,e){return e>=t.expandoStartIndex}(t,n);(function(t,e){return 0!=(16&t.flags)})(o)&&null===e&&!s&&(e=!1),e=function(t,e,n,r){const i=function(t){const e=qt.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let o=e.residualClasses;if(null===i)0===e.classBindings&&(n=fs(n=ds(null,t,e,n,r),e.attrs,r),o=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==i)if(n=ds(i,t,e,n,r),null===o){let n=function(t,e,n){const r=e.classBindings;if(0!==vi(r))return t[mi(r)]}(t,e);void 0!==n&&Array.isArray(n)&&(n=ds(null,t,e,n[1],r),n=fs(n,e.attrs,r),function(t,e,n,r){t[mi(e.classBindings)]=r}(t,e,0,n))}else o=function(t,e,n){let r;const i=e.directiveEnd;for(let o=1+e.directiveStylingLast;o<i;o++)r=fs(r,t[o].hostAttrs,true);return fs(r,e.attrs,true)}(t,e)}return void 0!==o&&(e.residualClasses=o),n}(i,o,e,r),function(t,e,n,r,i,o){let s=e.classBindings,a=mi(s),u=vi(s);t[r]=n;let c,l=!1;if(Array.isArray(n)){const t=n;c=t[1],(null===c||bn(t,c)>0)&&(l=!0)}else c=n;if(i)if(0!==u){const e=mi(t[a+1]);t[r+1]=gi(e,a),0!==e&&(t[e+1]=yi(t[e+1],r)),t[a+1]=131071&t[a+1]|r<<17}else t[r+1]=gi(a,0),0!==a&&(t[a+1]=yi(t[a+1],r)),a=r;else t[r+1]=gi(u,0),0===a?a=r:t[u+1]=yi(t[u+1],r),u=r;l&&(t[r+1]=bi(t[r+1])),cs(t,c,r,!0),cs(t,c,r,!1),function(t,e,n,r,i){const o=t.residualClasses;null!=o&&"string"==typeof e&&bn(o,e)>=0&&(n[r+1]=_i(n[r+1]))}(e,c,t,r),s=gi(a,u),e.classBindings=s}(i,o,e,n,s)}}(o,t,s,true),e!==di&&Lo(i,s,e)&&function(t,e,n,r,i,o,s,a){if(!(3&e.type))return;const u=t.data,c=u[a+1];gs(1==(1&c)?ps(u,e,n,i,vi(c),s):void 0)||(gs(o)||function(t){return 2==(2&t)}(c)&&(o=ps(u,null,n,i,a,s)),function(t,e,n,r,i){const o=At(t);i?o?t.addClass(n,r):n.classList.add(r):o?t.removeClass(n,r):n.classList.remove(r)}(r,0,Dt(ge(),n),i,o))}(o,o.data[ge()],i,i[11],t,i[s+1]=function(t,e){return null==t||"object"==typeof t&&(t=l(Un(t))),t}(e),true,s)}(t,e),hs}function ds(t,e,n,r,i){let o=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(o=e[a],r=fs(r,o.hostAttrs,i),o!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function fs(t,e,n){const r=n?1:2;let i=-1;if(null!==e)for(let o=0;o<e.length;o++){const s=e[o];"number"==typeof s?i=s:i===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),gn(t,s,!!n||e[++o]))}return void 0===t?null:t}function ps(t,e,n,r,i,o){const s=null===e;let a;for(;i>0;){const e=t[i],o=Array.isArray(e),u=o?e[1]:e,c=null===u;let l=n[i+1];l===di&&(l=c?B:void 0);let h=c?mn(l,r):u===r?l:void 0;if(o&&!gs(h)&&(h=mn(e,r)),gs(h)&&(a=h,s))return a;const d=t[i+1];i=s?mi(d):vi(d)}if(null!==e){let t=o?e.residualClasses:e.residualStyles;null!=t&&(a=mn(t,r))}return a}function gs(t){return void 0!==t}function ms(t,e=""){const n=zt(),r=Ht(),i=t+ct,o=r.firstCreatePass?Oi(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return At(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Wr(r,n,s,o),$t(o,!1)}function bs(t){return vs("",t,""),bs}function vs(t,e,n){const r=zt(),i=qo(r,t,e,n);return i!==di&&so(r,ge(),i),vs}function ys(t,e,n,r,i,o,s){const a=zt(),u=function(t,e,n,r,i,o,s,a){const u=function(t,e,n,r,i){const o=Uo(t,e,n,r);return Lo(t,e+2,i)||o}(t,te(),n,i,s);return ne(3),u?e+b(n)+r+b(i)+o+b(s)+a:di}(a,t,e,n,r,i,o,s);return u!==di&&so(a,ge(),u),ys}function _s(t,e,n,r,i,o,s,a,u){const c=zt(),l=function(t,e,n,r,i,o,s,a,u,c){const l=function(t,e,n,r,i,o){const s=Uo(t,e,n,r);return Uo(t,e+2,i,o)||s}(t,te(),n,i,s,u);return ne(4),l?e+b(n)+r+b(i)+o+b(s)+a+b(u)+c:di}(c,t,e,n,r,i,o,s,a,u);return l!==di&&so(c,ge(),l),_s}function ws(t,e,n){const r=zt();return Lo(r,ee(),e)&&Mi(Ht(),be(),r,t,e,r[11],n,!0),ws}const Cs=void 0;var Os=["en",[["a","p"],["AM","PM"],Cs],[["AM","PM"],Cs,Cs],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Cs,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Cs,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Cs,"{1} 'at' {0}",Cs],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Es={};function Ss(t,e,n){"string"!=typeof e&&(n=e,e=t[Ds.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Es[e]=t,n&&(Es[e][Ds.ExtraData]=n)}function Is(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=xs(e);if(n)return n;const r=e.split("-")[0];if(n=xs(r),n)return n;if("en"===r)return Os;throw new Error(`Missing locale data for the locale "${t}".`)}function As(t){return Is(t)[Ds.CurrencyCode]||null}function Ts(t){return Is(t)[Ds.PluralCase]}function xs(t){return t in Es||(Es[t]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[t]),Es[t]}var Ds=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const ks="en-US";let Ns=ks;function js(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Ns=t.toLowerCase().replace(/_/g,"-"))}function Rs(t,e,n,r,i){if(t=p(t),Array.isArray(t))for(let o=0;o<t.length;o++)Rs(t[o],e,n,r,i);else{const o=Ht(),s=zt();let a=Oo(t)?t:p(t.provide),u=_o(t);const c=Kt(),l=1048575&c.providerIndexes,h=c.directiveStart,d=c.providerIndexes>>20;if(Oo(t)||!t.multi){const r=new Ae(u,i,Ho),f=Fs(a,e,i?l:l+d,h);-1===f?(ze(Ue(c,s),o,a),Ms(o,t,e.length),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(r),s.push(r)):(n[f]=r,s[f]=r)}else{const f=Fs(a,e,l+d,h),p=Fs(a,e,l,l+d),g=f>=0&&n[f],m=p>=0&&n[p];if(i&&!m||!i&&!g){ze(Ue(c,s),o,a);const l=function(t,e,n,r,i){const o=new Ae(t,n,Ho);return o.multi=[],o.index=e,o.componentProviders=0,Ps(o,i,r&&!n),o}(i?Us:Ls,n.length,i,r,u);!i&&m&&(n[p].providerFactory=l),Ms(o,t,e.length,0),e.push(a),c.directiveStart++,c.directiveEnd++,i&&(c.providerIndexes+=1048576),n.push(l),s.push(l)}else Ms(o,t,f>-1?f:p,Ps(n[i?p:f],u,!i&&r));!i&&r&&m&&n[p].componentProviders++}}}function Ms(t,e,n,r){const i=Oo(e);if(i||e.useClass){const o=(e.useClass||e).prototype.ngOnDestroy;if(o){const s=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){const t=s.indexOf(n);-1===t?s.push(n,[r,o]):s[t+1].push(r,o)}else s.push(n,o)}}}function Ps(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function Fs(t,e,n,r){for(let i=n;i<r;i++)if(e[i]===t)return i;return-1}function Ls(t,e,n,r){return Vs(this.multi,[])}function Us(t,e,n,r){const i=this.multi;let o;if(this.providerFactory){const t=this.providerFactory.componentProviders,e=Xe(n,n[1],this.providerFactory.index,r);o=e.slice(0,t),Vs(i,o);for(let n=t;n<e.length;n++)o.push(e[n])}else o=[],Vs(i,o);return o}function Vs(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function qs(t,e=[]){return n=>{n.providersResolver=(n,r)=>function(t,e,n){const r=Ht();if(r.firstCreatePass){const i=mt(t);Rs(n,r.data,r.blueprint,i,!0),Rs(e,r.data,r.blueprint,i,!1)}}(n,r?r(t):t,e)}}class Bs{}class zs{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${l(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Hs=(()=>{class t{}return t.NULL=new zs,t})();function Ws(...t){}function Ks(t,e){return new $s(kt(t,e))}const Gs=function(){return Ks(Kt(),zt())};let $s=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Gs,t})();function Ys(t){return t instanceof $s?t.nativeElement:t}class Qs{}let Xs=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Js(),t})();const Js=function(){const t=zt(),e=Rt(Kt().index,t);return function(t){return t[11]}(ht(e)?e:t)};let Zs=(()=>{class t{}return t.\u0275prov=_({token:t,providedIn:"root",factory:()=>null}),t})();class ta{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const ea=new ta("11.2.12");class na{constructor(){}supports(t){return Mo(t)}create(t){return new ia(t)}}const ra=(t,e)=>e;class ia{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||ra}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<ua(n,r,i)?e:n,s=ua(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Mo(t))throw new Error(`Error trying to diff '${l(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[jo()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new oa(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new aa),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new aa),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class oa{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class sa{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class aa{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new sa,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function ua(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ca{constructor(){}supports(t){return t instanceof Map||Po(t)}create(){return new la}}class la{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||Po(t)))throw new Error(`Error trying to diff '${l(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new ha(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class ha{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function da(){return new fa([new na])}let fa=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||da()),deps:[[t,new Dn,new xn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=_({token:t,providedIn:"root",factory:da}),t})();function pa(){return new ga([new ca])}let ga=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||pa()),deps:[[t,new Dn,new xn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=_({token:t,providedIn:"root",factory:pa}),t})();function ma(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(xt(o)),dt(o))for(let t=lt;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&ma(e[1],e,n,r)}const s=n.type;if(8&s)ma(t,e,n.child,r);else if(32&s){const t=Ar(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Gr(e,n);if(Array.isArray(t))r.push(...t);else{const n=Tr(e[16]);ma(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class ba{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return ma(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(dt(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(Mr(t,n),fn(e,n))}this._attachedToViewContainer=!1}Pr(this._lView[1],this._lView)}onDestroy(t){ji(this._lView[1],this._lView,null,t)}markForCheck(){Xi(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Ji(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Jt(!0);try{Ji(t,e,n)}finally{Jt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,Qr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class va extends ba{constructor(t){super(t),this._view=t}detectChanges(){Zi(this._view)}checkNoChanges(){!function(t){Jt(!0);try{Zi(t)}finally{Jt(!1)}}(this._view)}get context(){return null}}const ya=wa;let _a=(()=>{class t{}return t.__NG_ELEMENT_ID__=ya,t.__ChangeDetectorRef__=!0,t})();function wa(t=!1){return function(t,e,n){if(!n&&pt(t)){const n=Rt(t.index,e);return new ba(n,n)}return 47&t.type?new ba(e[16],e):null}(Kt(),zt(),t)}const Ca=[new ca],Oa=new fa([new na]),Ea=new ga(Ca),Sa=function(){return xa(Kt(),zt())};let Ia=(()=>{class t{}return t.__NG_ELEMENT_ID__=Sa,t})();const Aa=Ia,Ta=class extends Aa{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Ci(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Si(e,n,t),new ba(n)}};function xa(t,e){return 4&t.type?new Ta(e,t,Ks(t,e)):null}class Da{}class ka{}const Na=function(){return La(Kt(),zt())};let ja=(()=>{class t{}return t.__NG_ELEMENT_ID__=Na,t})();const Ra=ja,Ma=class extends Ra{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Ks(this._hostTNode,this._hostLView)}get injector(){return new tn(this._hostTNode,this._hostLView)}get parentInjector(){const t=Be(this._hostTNode,this._hostLView);if(je(t)){const e=Me(t,this._hostLView),n=Re(t);return new tn(e[1].data[n+8],e)}return new tn(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=Pa(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-lt}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Da,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(dt(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new Ma(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=lt+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-lt?(e[4]=n[i],dn(n,lt+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=$r(i,o),a=n[11],u=Br(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,Qr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),dn(Fa(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=Pa(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=Mr(this._lContainer,e);n&&(fn(Fa(this._lContainer),e),Pr(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=Mr(this._lContainer,e);return n&&null!=fn(Fa(this._lContainer),e)?new ba(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function Pa(t){return t[8]}function Fa(t){return t[8]||(t[8]=[])}function La(t,e){let n;const r=e[t.index];if(dt(r))n=r;else{let i;if(8&t.type)i=xt(r);else{const n=e[11];i=n.createComment("");const r=kt(t,e);Ur(n,Br(n,r),i,function(t,e){return At(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=Ki(r,e,i,t),Qi(e,n)}return new Ma(n,t,e)}const Ua={};class Va extends Hs{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=at(t);return new za(e,this.ngModule)}}function qa(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ba=new an("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>Or});class za extends Bs{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(hi).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return qa(this.componentDef.inputs)}get outputs(){return qa(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ua,i);return o!==Ua||r===Ua?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Qs,Tt),s=i.get(Zs,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(At(t))return t.selectRootElement(e,n===M.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):jr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?Et:"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:Or,clean:eo,playerHandler:null,flags:0},d=Ni(0,null,null,1,0,null,null,null,null,null),f=Ci(null,d,h,l,null,null,o,a,s,i);let p,g;ce(f);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Oi(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(ao(a,u,!0),null!==t&&(Te(i,t,u),null!==a.classes&&Zr(i,t,a.classes),null!==a.styles&&Jr(i,t,a.styles)));const c=r.createRenderer(t,e),l=Ci(n,ki(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(ze(Ue(a,n),s,e.type),Ui(s,a),qi(a,n.length,1)),Qi(n,l),n[20]=l}(c,this.componentDef,f,o,a);if(c)if(n)Te(a,c,["ng-version",ea.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!si(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&Te(a,c,t),e&&e.length>0&&Zr(a,c,e.join(" "))}if(g=Nt(d,ct),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Kt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),Bi(t,r,e,Ei(t,e,1,null),n));const i=Xe(e,t,r.directiveStart,r);Cr(i,e);const o=kt(r,e);return o&&Cr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Kt();e.contentQueries(1,s,t.directiveStart)}const a=Kt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(me(a.index),Fi(n[1],a,0,a.directiveStart,a.directiveEnd,e),Li(e,s)),s}(t,this.componentDef,f,h,[Io]),Si(d,f,null)}finally{pe()}return new Ha(this.componentType,p,Ks(g,f),f,g)}}class Ha extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new va(r),this.componentType=t}get injector(){return new tn(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Wa=new Map;class Ka extends Da{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Va(this);const n=ut(t),r=t[$]||null;r&&js(r),this._bootstrapComponents=Sr(n.bootstrap),this._r3Injector=bo(t,e,[{provide:Da,useValue:this},{provide:Hs,useValue:this.componentFactoryResolver}],l(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=So.THROW_IF_NOT_FOUND,n=x.Default){return t===So||t===Da||t===uo?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Ga extends ka{constructor(t){super(),this.moduleType=t,null!==ut(t)&&function(t){const e=new Set;!function t(n){const r=ut(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${l(e)} vs ${l(e.name)}`)}(i,Wa.get(i),n),Wa.set(i,n));const o=Sr(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Ka(this.moduleType,t)}}function $a(t,e,n){const r=Zt()+t,i=zt();return i[r]===di?Fo(i,r,n?e.call(n):e()):function(t,e){return t[e]}(i,r)}function Ya(t,e,n,r){return Qa(zt(),Zt(),t,e,n,r)}function Qa(t,e,n,r,i,o){const s=e+n;return Lo(t,s,i)?Fo(t,s+1,o?r.call(o,i):r(i)):function(t,e){const n=t[e];return n===di?void 0:n}(t,s+1)}function Xa(t,e){const n=Ht();let r;const i=t+ct;n.firstCreatePass?(r=function(t,e){if(e)for(let n=e.length-1;n>=0;n--){const r=e[n];if(t===r.name)return r}throw new m("302",`The pipe '${t}' could not be found!`)}(e,n.pipeRegistry),n.data[i]=r,r.onDestroy&&(n.destroyHooks||(n.destroyHooks=[])).push(i,r.onDestroy)):r=n.data[i];const o=r.factory||(r.factory=bt(r.type)),s=k(Ho);try{const t=Fe(!1),e=o();return Fe(t),function(t,e,n,r){n>=t.data.length&&(t.data[n]=null,t.blueprint[n]=null),e[n]=r}(n,zt(),i,e),e}finally{k(s)}}function Ja(t,e,n){const r=t+ct,i=zt(),o=jt(i,r);return function(t,e){return Ro.isWrapped(e)&&(e=Ro.unwrap(e),t[te()]=di),e}(i,function(t,e){return t[1].data[e].pure}(i,r)?Qa(i,Zt(),e,o.transform,n,o):o.transform(n))}function Za(t){return e=>{setTimeout(t,void 0,e)}}const tu=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){var r,o,s;let a=t,u=e||(()=>null),c=n;if(t&&"object"==typeof t){const e=t;a=null===(r=e.next)||void 0===r?void 0:r.bind(e),u=null===(o=e.error)||void 0===o?void 0:o.bind(e),c=null===(s=e.complete)||void 0===s?void 0:s.bind(e)}this.__isAsync&&(u=Za(u),a&&(a=Za(a)),c&&(c=Za(c)));const l=super.subscribe({next:a,error:u,complete:c});return t instanceof i.a&&t.add(l),l}};function eu(){return this._results[jo()]()}class nu{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=jo(),n=nu.prototype;n[e]||(n[e]=eu)}get changes(){return this._changes||(this._changes=new tu)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=ln(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class ru{constructor(t){this.queryList=t,this.matches=null}clone(){return new ru(this.queryList)}setDirty(){this.queryList.setDirty()}}class iu{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new iu(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==vu(t,e).matches&&this.queries[e].setDirty()}}class ou{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class su{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new su(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class au{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new au(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,uu(e,i)),this.matchTNodeWithReadOption(t,e,Qe(e,t,i,!1,!1))}else n===Ia?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Qe(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===$s||r===ja||r===Ia&&4&e.type)this.addMatch(e.index,-2);else{const n=Qe(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function uu(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function cu(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Ks(t,e):4&t.type?xa(t,e):null}(e,t):-2===n?function(t,e,n){return n===$s?Ks(e,t):n===Ia?xa(e,t):n===ja?La(e,t):void 0}(t,e,r):Xe(t,t[1],n,e)}function lu(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:cu(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function hu(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=lu(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=lt;t<s.length;t++){const e=s[t];e[17]===e[3]&&hu(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];hu(n[1],n,i,r)}}}}}return r}function du(t){const e=zt(),n=Ht(),r=oe();se(r+1);const i=vu(n,r);if(t.dirty&&Pt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?hu(n,e,r,[]):lu(n,e,i,r);t.reset(o,Ys),t.notifyOnChanges()}return!0}return!1}function fu(t,e,n){const r=Ht();r.firstCreatePass&&(bu(r,new ou(t,e,n),-1),2==(2&e)&&(r.staticViewQueries=!0)),mu(r,zt(),e)}function pu(t,e,n,r){const i=Ht();if(i.firstCreatePass){const o=Kt();bu(i,new ou(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}mu(i,zt(),n)}function gu(){return t=zt(),e=oe(),t[19].queries[e].queryList;var t,e}function mu(t,e,n){const r=new nu(4==(4&n));ji(t,e,r,r.destroy),null===e[19]&&(e[19]=new iu),e[19].queries.push(new ru(r))}function bu(t,e,n){null===t.queries&&(t.queries=new su),t.queries.track(new au(e,n))}function vu(t,e){return t.queries.getByIndex(e)}function yu(t=x.Default){const e=wa(!0);if(null!=e||t&x.Optional)return e;y("ChangeDetectorRef")}const _u=new an("Application Initializer");let wu=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Ws,this.reject=Ws,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();Xo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(Sn(_u,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Cu=new an("AppId"),Ou={provide:Cu,useFactory:function(){return`${Eu()}${Eu()}${Eu()}`},deps:[]};function Eu(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Su=new an("Platform Initializer"),Iu=new an("Platform ID"),Au=new an("appBootstrapListener");let Tu=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const xu=new an("LocaleId"),Du=new an("DefaultCurrencyCode");class ku{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const Nu=function(t){return new Ga(t)},ju=Nu,Ru=function(t){return Promise.resolve(Nu(t))},Mu=function(t){const e=Nu(t),n=Sr(ut(t).declarations).reduce((t,e)=>{const n=at(e);return n&&t.push(new za(n)),t},[]);return new ku(e,n)},Pu=Mu,Fu=function(t){return Promise.resolve(Mu(t))};let Lu=(()=>{class t{constructor(){this.compileModuleSync=ju,this.compileModuleAsync=Ru,this.compileModuleAndAllComponentsSync=Pu,this.compileModuleAndAllComponentsAsync=Fu}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();const Uu=(()=>Promise.resolve(0))();function Vu(t){"undefined"==typeof Zone?Uu.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class qu{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new tu(!1),this.onMicrotaskEmpty=new tu(!1),this.onStable=new tu(!1),this.onError=new tu(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=V.requestAnimationFrame,e=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(V,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,Hu(t),zu(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),Hu(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Wu(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),Ku(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Wu(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),Ku(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,Hu(t),zu(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!qu.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(qu.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Bu,Ws,Ws);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Bu={};function zu(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function Hu(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Wu(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Ku(t){t._nesting--,zu(t)}class Gu{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new tu,this.onMicrotaskEmpty=new tu,this.onStable=new tu,this.onError=new tu}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let $u=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{qu.assertNotInAngularZone(),Vu(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Vu(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(Sn(qu))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})(),Yu=(()=>{class t{constructor(){this._applications=new Map,Zu.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Zu.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();class Qu{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Xu(t){Zu=t}let Ju,Zu=new Qu,tc=!0,ec=!1;function nc(){return ec=!0,tc}function rc(){if(ec)throw new Error("Cannot enable prod mode after platform setup.");tc=!1}const ic=new an("AllowMultipleToken");class oc{constructor(t,e){this.name=t,this.token=e}}function sc(t,e,n=[]){const r=`Platform: ${e}`,i=new an(r);return(e=[])=>{let o=ac();if(!o||o.injector.get(ic,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:lo,useValue:"platform"});!function(t){if(Ju&&!Ju.destroyed&&!Ju.injector.get(ic,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");Ju=t.get(uc);const e=t.get(Su,null);e&&e.forEach(t=>t())}(So.create({providers:t,name:r}))}return function(t){const e=ac();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function ac(){return Ju&&!Ju.destroyed?Ju:null}let uc=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new Gu:("zone.js"===t?void 0:t)||new qu({enableLongStackTrace:nc(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:qu,useValue:n}];return n.run(()=>{const e=So.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(wr,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{hc(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return Xo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(wu);return t.runInitializers(),t.donePromise.then(()=>(js(i.injector.get(xu,ks)||ks),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=cc({},e);return function(t,e,n){const r=new Ga(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get(lc);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${l(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(Sn(So))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function cc(t,e){return Array.isArray(e)?e.reduce(cc,t):Object.assign(Object.assign({},t),e)}let lc=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const u=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),c=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{qu.assertNotInAngularZone(),Vu(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{qu.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(u,c.pipe(Object(a.a)()))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Bs?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Da),i=n.create(So.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get($u,null),a=s&&i.injector.get(Yu);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),hc(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;hc(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(Au,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(Sn(qu),Sn(So),Sn(wr),Sn(Hs),Sn(wu))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function hc(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class dc{}class fc{}const pc={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let gc=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||pc}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>mc(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>mc(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(Sn(Lu),Sn(fc,8))},t.\u0275prov=_({token:t,factory:t.\u0275fac}),t})();function mc(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const bc=function(t){return null},vc=sc(null,"core",[{provide:Iu,useValue:"unknown"},{provide:uc,deps:[So]},{provide:Yu,deps:[]},{provide:Tu,deps:[]}]),yc=[{provide:lc,useClass:lc,deps:[qu,So,wr,Hs,wu]},{provide:Ba,deps:[qu],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:wu,useClass:wu,deps:[[new xn,_u]]},{provide:Lu,useClass:Lu,deps:[]},Ou,{provide:fa,useFactory:function(){return Oa},deps:[]},{provide:ga,useFactory:function(){return Ea},deps:[]},{provide:xu,useFactory:function(t){return js(t=t||"undefined"!=typeof $localize&&$localize.locale||ks),t},deps:[[new Tn(xu),new xn,new Dn]]},{provide:Du,useValue:"USD"}];let _c=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(Sn(lc))},t.\u0275mod=nt({type:t}),t.\u0275inj=w({providers:yc}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return d}),n.d(e,"d",function(){return f});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function d(t){o.forEach(function(e){e.setLogLevel(t)})}function f(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return d}),n.d(e,"b",function(){return T}),n.d(e,"c",function(){return A}),n.d(e,"d",function(){return q}),n.d(e,"e",function(){return I}),n.d(e,"f",function(){return i}),n.d(e,"g",function(){return o}),n.d(e,"h",function(){return a}),n.d(e,"i",function(){return u}),n.d(e,"j",function(){return X}),n.d(e,"k",function(){return P}),n.d(e,"l",function(){return f}),n.d(e,"m",function(){return B}),n.d(e,"n",function(){return l}),n.d(e,"o",function(){return h}),n.d(e,"p",function(){return K}),n.d(e,"q",function(){return J}),n.d(e,"r",function(){return p}),n.d(e,"s",function(){return M}),n.d(e,"t",function(){return b}),n.d(e,"u",function(){return v}),n.d(e,"v",function(){return _}),n.d(e,"w",function(){return L}),n.d(e,"x",function(){return w}),n.d(e,"y",function(){return E}),n.d(e,"z",function(){return g}),n.d(e,"A",function(){return m}),n.d(e,"B",function(){return O}),n.d(e,"C",function(){return y}),n.d(e,"D",function(){return C}),n.d(e,"E",function(){return R}),n.d(e,"F",function(){return k}),n.d(e,"G",function(){return U}),n.d(e,"H",function(){return V}),n.d(e,"I",function(){return F}),n.d(e,"J",function(){return Q}),n.d(e,"K",function(){return Y}),n.d(e,"L",function(){return N}),n.d(e,"M",function(){return W}),n.d(e,"N",function(){return G}),n.d(e,"O",function(){return $}),n.d(e,"P",function(){return S});var r=n("mrSG"),i=function(t,e){if(!t)throw o(e)},o=function(t){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+t)},s=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},a={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,l=(15&a)<<2|c>>6,h=63&c;u||(h=64,s||(l=64)),r.push(n[o>>2],n[(3&o)<<4|a>>4],n[l],n[h])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(s(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();r.push(o<<2|s>>4),64!==a&&(r.push(s<<4&240|a>>2),64!==u&&r.push(a<<6&192|u))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},u=function(t){var e=s(t);return a.encodeByteArray(e,!0)},c=function(t){try{return a.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function l(t){return h(void 0,t)}function h(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=h(t[n],e[n]));return t}var d=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function f(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var s=Object(r.a)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[a.encodeString(JSON.stringify({alg:"none",type:"JWT"}),!1),a.encodeString(JSON.stringify(s),!1),""].join(".")}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function g(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())}function m(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function b(){return"object"==typeof self&&self.self===self}function v(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function y(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function _(){return p().indexOf("Electron/")>=0}function w(){var t=p();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function C(){return p().indexOf("MSAppHost/")>=0}function O(){return!1}function E(){return"indexedDB"in self&&null!=indexedDB}function S(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(o){e(o)}})}function I(){return!(!navigator||!navigator.cookieEnabled)}var A=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,T.prototype.create),o}return Object(r.c)(e,t),e}(Error),T=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?x(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new A(i,a,r);return u},t}();function x(t,e){return t.replace(D,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var D=/\{\$([^}]+)}/g;function k(t){return JSON.parse(t)}function N(t){return JSON.stringify(t)}var j=function(t){var e={},n={},r={},i="";try{var o=t.split(".");e=k(c(o[0])||""),n=k(c(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(s){}return{header:e,claims:n,data:r,signature:i}},R=function(t){var e=j(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},M=function(t){var e=j(t).claims;return"object"==typeof e&&!0===e.admin};function P(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function F(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function L(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function U(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function V(t){for(var e=[],n=function(t,n){Array.isArray(n)?n.forEach(function(n){e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(n))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];n(o[0],o[1])}return e.length?"&"+e.join("&"):""}var q=function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}return t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++)n[r]=4294967295&((h=n[r-3]^n[r-8]^n[r-14]^n[r-16])<<1|h>>>31);var i,o,s=this.chain_[0],a=this.chain_[1],u=this.chain_[2],c=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++){r<40?r<20?(i=c^a&(u^c),o=1518500249):(i=a^u^c,o=1859775393):r<60?(i=a&u|c&(a|u),o=2400959708):(i=a^u^c,o=3395469782);var h=(s<<5|s>>>27)+i+l+o+n[r]&4294967295;l=c,c=u,u=4294967295&(a<<30|a>>>2),a=s,s=h}this.chain_[0]=this.chain_[0]+s&4294967295,this.chain_[1]=this.chain_[1]+a&4294967295,this.chain_[2]=this.chain_[2]+u&4294967295,this.chain_[3]=this.chain_[3]+c&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},t}();function B(t,e){var n=new z(t,e);return n.subscribe.bind(n)}var z=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=H),void 0===r.error&&(r.error=H),void 0===r.complete&&(r.complete=H);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function H(){}var W=function(t,e,n,r){var i;if(r<e?i="at least "+e:r>n&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")};function K(t,e){return t+" failed: "+e+" argument "}function G(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(K(t,e)+"must be a valid function.")}function $(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(K(t,e)+"must be a valid context object.")}var Y=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var o=t.charCodeAt(r);if(o>=55296&&o<=56319){var s=o-55296;r++,i(r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(s<<10)+(t.charCodeAt(r)-56320)}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=63&o|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=63&o|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=63&o|128)}return e},Q=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};function X(t,e,n){void 0===e&&(e=1e3),void 0===n&&(n=2);var r=e*Math.pow(n,t),i=Math.round(.5*r*(Math.random()-.5)*2);return Math.min(144e5,r+i)}function J(t){return t&&t._delegate?t._delegate:t}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return A}),n.d(e,"b",function(){return y}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return _}),n.d(e,"e",function(){return f}),n.d(e,"f",function(){return b}),n.d(e,"g",function(){return S}),n.d(e,"h",function(){return C}),n.d(e,"i",function(){return p}),n.d(e,"j",function(){return m}),n.d(e,"k",function(){return O});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class d{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class f{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.b))}}function p(t){return function(e){return(e=e.lift(new d(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),b=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),y=new u.r("angularfire2.app.nameOrConfig");class _{}const w=new u.P("6.1.4");function C(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&E("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const O=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{Object(u.V)()&&"undefined"!=typeof console&&console[t](...e)};function S(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const I={provide:_,useFactory:C,deps:[v,u.A,[new u.B,y]]};let A=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",w.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:y,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Rb(u.C))},t.\u0275mod=u.Ib({type:t}),t.\u0275inj=u.Hb({providers:[I]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class d extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const f=new d(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=f){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=f)}static create(t,e=0,n=f){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new b(t,e))}}class b{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},w1tV:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("EQ5u"),i=n("x+ZX"),o=n("XNiG");function s(){return new o.a}function a(){return t=>{return Object(i.a)()((e=s,function(t){let n;n="function"==typeof e?e:function(){return e};const i=Object.create(t,r.b);return i.source=t,i.subjectFactory=n,i})(t));var e}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",d="[DEFAULT]",f=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.n)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=d),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=d),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=d);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.k)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=f[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.5.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||d,!Object(s.k)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.o)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.o)(e,t)},createSubscribe:s.m,ErrorFactory:s.b,deepExtend:s.o}),e}(),b=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.t)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var y=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.A)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),y.apply(void 0,t)};var _=m;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new b(t)},"PRIVATE")),t.registerVersion(h,"0.6.21",void 0),t.registerVersion("fire-js","")}(_),e.a=_},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Rb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=Object(r.Gb)({factory:d,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function d(){return new l(Object(r.Rb)(s))}function f(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:b,token:t,providedIn:"root"}),t})();function b(t){const e=Object(r.Rb)(s).location;return new y(Object(r.Rb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let y=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return f(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a),r.Rb(v,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=f(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(a),r.Rb(v,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(O(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,O(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(m),r.Rb(a))},t.normalizeQueryParams=g,t.joinWithSlash=f,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Gb)({factory:C,token:t,providedIn:"root"}),t})();function C(){return new w(Object(r.Rb)(m),Object(r.Rb)(a))}function O(t){return t.replace(/\/index.html$/,"")}var E=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const S=r.mb;class I{}let A=(()=>{class t extends I{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(S(e||this.locale)(t)){case E.Zero:return"zero";case E.One:return"one";case E.Two:return"two";case E.Few:return"few";case E.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.v))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function T(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}let x=(()=>{class t{constructor(t,e,n,r){this._iterableDiffers=t,this._keyValueDiffers=e,this._ngEl=n,this._renderer=r,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(t){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof t?t.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(t){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof t?t.split(/\s+/):t,this._rawClass&&(Object(r.pb)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const t=this._iterableDiffer.diff(this._rawClass);t&&this._applyIterableChanges(t)}else if(this._keyValueDiffer){const t=this._keyValueDiffer.diff(this._rawClass);t&&this._applyKeyValueChanges(t)}}_applyKeyValueChanges(t){t.forEachAddedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachChangedItem(t=>this._toggleClass(t.key,t.currentValue)),t.forEachRemovedItem(t=>{t.previousValue&&this._toggleClass(t.key,!1)})}_applyIterableChanges(t){t.forEachAddedItem(t=>{if("string"!=typeof t.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${Object(r.vb)(t.item)}`);this._toggleClass(t.item,!0)}),t.forEachRemovedItem(t=>this._toggleClass(t.item,!1))}_applyClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!0)):Object.keys(t).forEach(e=>this._toggleClass(e,!!t[e])))}_removeClasses(t){t&&(Array.isArray(t)||t instanceof Set?t.forEach(t=>this._toggleClass(t,!1)):Object.keys(t).forEach(t=>this._toggleClass(t,!1)))}_toggleClass(t,e){(t=t.trim())&&t.split(/\s+/g).forEach(t=>{e?this._renderer.addClass(this._ngEl.nativeElement,t):this._renderer.removeClass(this._ngEl.nativeElement,t)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.t),r.Kb(r.u),r.Kb(r.l),r.Kb(r.E))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"}}),t})();class D{constructor(t,e,n,r){this.$implicit=t,this.ngForOf=e,this.index=n,this.count=r}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let k=(()=>{class t{constructor(t,e,n){this._viewContainer=t,this._template=e,this._differs=n,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;if(!this._differ&&n)try{this._differ=this._differs.find(n).create(this.ngForTrackBy)}catch(e){throw new Error(`Cannot find a differ supporting object '${n}' of type '${t=n,t.name||typeof t}'. NgFor only supports binding to Iterables such as Arrays.`)}}var t;if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const e=[];t.forEachOperation((t,n,r)=>{if(null==t.previousIndex){const n=this._viewContainer.createEmbeddedView(this._template,new D(null,this._ngForOf,-1,-1),null===r?void 0:r),i=new N(t,n);e.push(i)}else if(null==r)this._viewContainer.remove(null===n?void 0:n);else if(null!==n){const i=this._viewContainer.get(n);this._viewContainer.move(i,r);const o=new N(t,i);e.push(o)}});for(let n=0;n<e.length;n++)this._perViewChange(e[n].view,e[n].record);for(let n=0,r=this._viewContainer.length;n<r;n++){const t=this._viewContainer.get(n);t.context.index=n,t.context.count=r,t.context.ngForOf=this._ngForOf}t.forEachIdentityChange(t=>{this._viewContainer.get(t.currentIndex).context.$implicit=t.item})}_perViewChange(t,e){t.context.$implicit=e.item}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L),r.Kb(r.t))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),t})();class N{constructor(t,e){this.record=t,this.view=e}}let j=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new R,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){M("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){M("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.Q),r.Kb(r.L))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class R{constructor(){this.$implicit=null,this.ngIf=null}}function M(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.vb)(e)}'.`)}let P=(()=>{class t{constructor(t,e,n){this._ngEl=t,this._differs=e,this._renderer=n,this._ngStyle=null,this._differ=null}set ngStyle(t){this._ngStyle=t,!this._differ&&t&&(this._differ=this._differs.find(t).create())}ngDoCheck(){if(this._differ){const t=this._differ.diff(this._ngStyle);t&&this._applyChanges(t)}}_setStyle(t,e){const[n,r]=t.split(".");null!=(e=null!=e&&r?`${e}${r}`:e)?this._renderer.setStyle(this._ngEl.nativeElement,n,e):this._renderer.removeStyle(this._ngEl.nativeElement,n)}_applyChanges(t){t.forEachRemovedItem(t=>this._setStyle(t.key,null)),t.forEachAddedItem(t=>this._setStyle(t.key,t.currentValue)),t.forEachChangedItem(t=>this._setStyle(t.key,t.currentValue))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.u),r.Kb(r.E))},t.\u0275dir=r.Fb({type:t,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"}}),t})();const F=/(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u08A0-\u08B4\u08B6-\u08BD\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312E\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FEA\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AE\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE83\uDE86-\uDE89\uDEC0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|[\uD80C\uD81C-\uD820\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F\uDFE0\uDFE1]|\uD821[\uDC00-\uDFEC]|\uD822[\uDC00-\uDEF2]|\uD82C[\uDC00-\uDD1E\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0]|\uD87E[\uDC00-\uDE1D])\S*/g;let L=(()=>{class t{transform(e){if(null==e)return null;if("string"!=typeof e)throw function(t,e){return Error(`InvalidPipeArgument: '${e}' for pipe '${Object(r.vb)(t)}'`)}(t,e);return e.replace(F,t=>t[0].toUpperCase()+t.substr(1).toLowerCase())}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=r.Jb({name:"titlecase",type:t,pure:!0}),t})(),U=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[{provide:I,useClass:A}]}),t})();function V(t){return"browser"===t}function q(t){return"server"===t}let B=(()=>{class t{}return t.\u0275prov=Object(r.Gb)({token:t,providedIn:"root",factory:()=>new z(Object(r.Rb)(s),window)}),t})();class z{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){if(!this.supportsScrolling())return;const e=function(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&(t.body.createShadowRoot||t.body.attachShadow)){const n=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let r=n.currentNode;for(;r;){const t=r.shadowRoot;if(t){const n=t.getElementById(e)||t.querySelector(`[name="${e}"]`);if(n)return n}r=n.nextNode()}}return null}(this.document,t);e&&(this.scrollToElement(e),this.attemptFocus(e))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=H(this.window.history)||H(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function H(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class W extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new W,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=G||(G=document.querySelector("base"),G)?G.getAttribute("href"):null;return null==e?null:(n=e,K||(K=document.createElement("a")),K.setAttribute("href",n),"/"===K.pathname.charAt(0)?K.pathname:"/"+K.pathname);var n}resetBaseElement(){G=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return T(document.cookie,t)}}let K,G=null;const $=new r.r("TRANSITION_ID"),Y=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[$,s,r.s],multi:!0}];class Q{static init(){Object(r.X)(new Q)}addToWindow(t){r.ob.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.ob.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.ob.getAllAngularRootElements=()=>t.getAllRootElements(),r.ob.frameworkStabilizers||(r.ob.frameworkStabilizers=[]),r.ob.frameworkStabilizers.push(t=>{const e=r.ob.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const X=new r.r("EventManagerPlugins");let J=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(X),r.Rb(r.A))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class Z{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let tt=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),et=(()=>{class t extends tt{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const nt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},rt=/%COMP%/g;function it(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?it(t,i,n):(i=i.replace(rt,t),n.push(i))}return n}function ot(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let st=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new at(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new ut(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new ct(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=it(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(J),r.Rb(et),r.Rb(r.c))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class at{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(nt[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=nt[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=nt[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,ot(n)):this.eventManager.addEventListener(t,e,ot(n))}}class ut extends at{constructor(t,e,n,r){super(t),this.component=n;const i=it(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace(rt,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace(rt,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class ct extends at{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=it(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let lt=(()=>{class t extends Z{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const ht=["alt","control","meta","shift"],dt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},ft={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},pt={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let gt=(()=>{class t extends Z{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(ht.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&ft.hasOwnProperty(e)&&(e=ft[e]))}return dt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),ht.forEach(r=>{r!=n&&(0,pt[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const mt=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){W.makeCurrent(),Q.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.ub)(document),document},deps:[]}],bt=Object(r.S)(r.W,"browser",mt),vt=[[],{provide:r.Z,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:X,useClass:lt,multi:!0,deps:[s,r.A,r.C]},{provide:X,useClass:gt,multi:!0,deps:[s]},[],{provide:st,useClass:st,deps:[J,et,r.c]},{provide:r.F,useExisting:st},{provide:tt,useExisting:et},{provide:et,useClass:et,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:J,useClass:J,deps:[X,r.A]},[]];let yt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:$,useExisting:r.c},Y]}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(t,12))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:vt,imports:[U,r.f]}),t})();function _t(){return new wt(Object(r.Rb)(s))}let wt=(()=>{class t{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s))},t.\u0275prov=Object(r.Gb)({factory:_t,token:t,providedIn:"root"}),t})();"undefined"!=typeof window&&window;var Ct=n("Cfvw"),Ot=n("HDdC"),Et=n("DH7j"),St=n("lJxs"),It=n("XoHu");function At(t,e){return new Ot.a(n=>{const r=t.length;if(0===r)return void n.complete();const i=new Array(r);let o=0,s=0;for(let a=0;a<r;a++){const u=Object(Ct.a)(t[a]);let c=!1;n.add(u.subscribe({next:t=>{c||(c=!0,s++),i[a]=t},error:t=>n.error(t),complete:()=>{o++,o!==r&&c||(s===r&&n.next(e?e.reduce((t,e,n)=>(t[e]=i[n],t),{}):i),n.complete())}}))}})}class Tt{}const xt=new r.r("NgValueAccessor"),Dt={provide:xt,useExisting:Object(r.U)(()=>Nt),multi:!0},kt=new r.r("CompositionEventMode");let Nt=(()=>{class t{constructor(t,e,n){this._renderer=t,this._elementRef=e,this._compositionMode=n,this.onChange=t=>{},this.onTouched=()=>{},this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function(){const t=o()?o().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(t){this._renderer.setProperty(this._elementRef.nativeElement,"value",null==t?"":t)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l),r.Kb(kt,8))},t.\u0275dir=r.Fb({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,e){1&t&&r.Ub("input",function(t){return e._handleInput(t.target.value)})("blur",function(){return e.onTouched()})("compositionstart",function(){return e._compositionStart()})("compositionend",function(t){return e._compositionEnd(t.target.value)})},features:[r.zb([Dt])]}),t})();function jt(t){return null==t||0===t.length}function Rt(t){return null!=t&&"number"==typeof t.length}const Mt=new r.r("NgValidators"),Pt=new r.r("NgAsyncValidators"),Ft=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Lt{static min(t){return function(t){return e=>{if(jt(e.value)||jt(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n<t?{min:{min:t,actual:e.value}}:null}}(t)}static max(t){return function(t){return e=>{if(jt(e.value)||jt(t))return null;const n=parseFloat(e.value);return!isNaN(n)&&n>t?{max:{max:t,actual:e.value}}:null}}(t)}static required(t){return function(t){return jt(t.value)?{required:!0}:null}(t)}static requiredTrue(t){return function(t){return!0===t.value?null:{required:!0}}(t)}static email(t){return function(t){return jt(t.value)||Ft.test(t.value)?null:{email:!0}}(t)}static minLength(t){return function(t){return e=>jt(e.value)||!Rt(e.value)?null:e.value.length<t?{minlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static maxLength(t){return function(t){return e=>Rt(e.value)&&e.value.length>t?{maxlength:{requiredLength:t,actualLength:e.value.length}}:null}(t)}static pattern(t){return function(t){if(!t)return Ut;let e,n;return"string"==typeof t?(n="","^"!==t.charAt(0)&&(n+="^"),n+=t,"$"!==t.charAt(t.length-1)&&(n+="$"),e=new RegExp(n)):(n=t.toString(),e=t),t=>{if(jt(t.value))return null;const r=t.value;return e.test(r)?null:{pattern:{requiredPattern:n,actualValue:r}}}}(t)}static nullValidator(t){return null}static compose(t){return Wt(t)}static composeAsync(t){return Gt(t)}}function Ut(t){return null}function Vt(t){return null!=t}function qt(t){const e=Object(r.rb)(t)?Object(Ct.a)(t):t;return Object(r.qb)(e),e}function Bt(t){let e={};return t.forEach(t=>{e=null!=t?Object.assign(Object.assign({},e),t):e}),0===Object.keys(e).length?null:e}function zt(t,e){return e.map(e=>e(t))}function Ht(t){return t.map(t=>function(t){return!t.validate}(t)?t:e=>t.validate(e))}function Wt(t){if(!t)return null;const e=t.filter(Vt);return 0==e.length?null:function(t){return Bt(zt(t,e))}}function Kt(t){return null!=t?Wt(Ht(t)):null}function Gt(t){if(!t)return null;const e=t.filter(Vt);return 0==e.length?null:function(t){return function(...t){if(1===t.length){const e=t[0];if(Object(Et.a)(e))return At(e,null);if(Object(It.a)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return At(t.map(t=>e[t]),t)}}if("function"==typeof t[t.length-1]){const e=t.pop();return At(t=1===t.length&&Object(Et.a)(t[0])?t[0]:t,null).pipe(Object(St.a)(t=>e(...t)))}return At(t,null)}(zt(t,e).map(qt)).pipe(Object(St.a)(Bt))}}function $t(t){return null!=t?Gt(Ht(t)):null}function Yt(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function Qt(t){return t._rawValidators}function Xt(t){return t._rawAsyncValidators}let Jt=(()=>{class t{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Kt(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=$t(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t){this.control&&this.control.reset(t)}hasError(t,e){return!!this.control&&this.control.hasError(t,e)}getError(t,e){return this.control?this.control.getError(t,e):null}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t}),t})(),Zt=(()=>{class t extends Jt{get formDirective(){return null}get path(){return null}}return t.\u0275fac=function(e){return te(e||t)},t.\u0275dir=r.Fb({type:t,features:[r.xb]}),t})();const te=r.Pb(Zt);class ee extends Jt{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class ne{constructor(t){this._cd=t}is(t){var e,n;return!!(null===(n=null===(e=this._cd)||void 0===e?void 0:e.control)||void 0===n?void 0:n[t])}}let re=(()=>{class t extends ne{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(ee,2))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})(),ie=(()=>{class t extends ne{constructor(t){super(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Zt,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:14,hostBindings:function(t,e){2&t&&r.Cb("ng-untouched",e.is("untouched"))("ng-touched",e.is("touched"))("ng-pristine",e.is("pristine"))("ng-dirty",e.is("dirty"))("ng-valid",e.is("valid"))("ng-invalid",e.is("invalid"))("ng-pending",e.is("pending"))},features:[r.xb]}),t})();function oe(t,e){ue(t,e,!0),e.valueAccessor.writeValue(t.value),function(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&le(t,e)})}(t,e),function(t,e){const n=(t,n)=>{e.valueAccessor.writeValue(t),n&&e.viewToModelUpdate(t)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&le(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function(t,e){if(e.valueAccessor.setDisabledState){const n=t=>{e.valueAccessor.setDisabledState(t)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function se(t,e,n=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),ce(t,e,!0),t&&(e._invokeOnDestroyCallbacks(),t._registerOnCollectionChange(()=>{}))}function ae(t,e){t.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ue(t,e,n){const r=Qt(t);null!==e.validator?t.setValidators(Yt(r,e.validator)):"function"==typeof r&&t.setValidators([r]);const i=Xt(t);if(null!==e.asyncValidator?t.setAsyncValidators(Yt(i,e.asyncValidator)):"function"==typeof i&&t.setAsyncValidators([i]),n){const n=()=>t.updateValueAndValidity();ae(e._rawValidators,n),ae(e._rawAsyncValidators,n)}}function ce(t,e,n){let r=!1;if(null!==t){if(null!==e.validator){const n=Qt(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.validator);i.length!==n.length&&(r=!0,t.setValidators(i))}}if(null!==e.asyncValidator){const n=Xt(t);if(Array.isArray(n)&&n.length>0){const i=n.filter(t=>t!==e.asyncValidator);i.length!==n.length&&(r=!0,t.setAsyncValidators(i))}}}if(n){const t=()=>{};ae(e._rawValidators,t),ae(e._rawAsyncValidators,t)}return r}function le(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function he(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}const de="VALID",fe="INVALID",pe="PENDING",ge="DISABLED";function me(t){return(_e(t)?t.validators:t)||null}function be(t){return Array.isArray(t)?Kt(t):t||null}function ve(t,e){return(_e(e)?e.asyncValidators:t)||null}function ye(t){return Array.isArray(t)?$t(t):t||null}function _e(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class we{constructor(t,e){this._hasOwnPendingAsyncValidator=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=t,this._rawAsyncValidators=e,this._composedValidatorFn=be(this._rawValidators),this._composedAsyncValidatorFn=ye(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===de}get invalid(){return this.status===fe}get pending(){return this.status==pe}get disabled(){return this.status===ge}get enabled(){return this.status!==ge}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._rawValidators=t,this._composedValidatorFn=be(t)}setAsyncValidators(t){this._rawAsyncValidators=t,this._composedAsyncValidatorFn=ye(t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=pe,!1!==t.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=ge,this.errors=null,this._forEachChild(e=>{e.disable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this._updateValue(),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!0))}enable(t={}){const e=this._parentMarkedDirty(t.onlySelf);this.status=de,this._forEachChild(e=>{e.enable(Object.assign(Object.assign({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(t=>t(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),this.status!==de&&this.status!==pe||this._runAsyncValidator(t.emitEvent)),!1!==t.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?ge:de}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=pe,this._hasOwnPendingAsyncValidator=!0;const e=qt(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(e=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(e,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(!1!==e.emitEvent)}get(t){return function(t,e,n){if(null==e)return null;if(Array.isArray(e)||(e=e.split(".")),Array.isArray(e)&&0===e.length)return null;let r=t;return e.forEach(t=>{r=r instanceof Oe?r.controls.hasOwnProperty(t)?r.controls[t]:null:r instanceof Ee&&r.at(t)||null}),r}(this,t)}getError(t,e){const n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new r.n,this.statusChanges=new r.n}_calculateStatus(){return this._allControlsDisabled()?ge:this.errors?fe:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(pe)?pe:this._anyControlsHaveStatus(fe)?fe:de}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_isBoxedValue(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){_e(t)&&null!=t.updateOn&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){return!t&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class Ce extends we{constructor(t=null,e,n){super(me(e),ve(n,e)),this._onChange=[],this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&!1!==e.emitModelToViewChange&&this._onChange.forEach(t=>t(this.value,!1!==e.emitViewToModelChange)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=null,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){he(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){he(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(t){this._isBoxedValue(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}}class Oe extends we{constructor(t,e,n){super(me(e),ve(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e){this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}removeControl(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity(),this._onCollectionChange()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity(),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){this._checkAllValuesPresent(t),Object.keys(t).forEach(n=>{this._throwIfControlMissing(n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(Object.keys(t).forEach(n=>{this.controls[n]&&this.controls[n].patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e instanceof Ce?e.value:e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(t,e)=>!!e._syncPendingControls()||t);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!Object.keys(this.controls).length)throw new Error("\n        There are no form controls registered with this group yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.controls[t])throw new Error(`Cannot find form control with name: ${t}.`)}_forEachChild(t){Object.keys(this.controls).forEach(e=>{const n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(const e of Object.keys(this.controls)){const n=this.controls[e];if(this.contains(e)&&t(n))return!0}return!1}_reduceValue(){return this._reduceChildren({},(t,e,n)=>((e.enabled||this.disabled)&&(t[n]=e.value),t))}_reduceChildren(t,e){let n=t;return this._forEachChild((t,r)=>{n=e(n,t,r)}),n}_allControlsDisabled(){for(const t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control with name: '${n}'.`)})}}class Ee extends we{constructor(t,e,n){super(me(e),ve(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!n})}at(t){return this.controls[t]}push(t){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity(),this._onCollectionChange()}insert(t,e){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity()}removeAt(t){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),this.updateValueAndValidity()}setControl(t,e){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),this.controls.splice(t,1),e&&(this.controls.splice(t,0,e),this._registerControl(e)),this.updateValueAndValidity(),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){this._checkAllValuesPresent(t),t.forEach((t,n)=>{this._throwIfControlMissing(n),this.at(n).setValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){null!=t&&(t.forEach((t,n)=>{this.at(n)&&this.at(n).patchValue(t,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t instanceof Ce?t.value:t.getRawValue())}clear(){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity())}_syncPendingControls(){let t=this.controls.reduce((t,e)=>!!e._syncPendingControls()||t,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_throwIfControlMissing(t){if(!this.controls.length)throw new Error("\n        There are no form controls registered with this array yet. If you're using ngModel,\n        you may want to check next tick (e.g. use setTimeout).\n      ");if(!this.at(t))throw new Error(`Cannot find form control at index ${t}`)}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_checkAllValuesPresent(t){this._forEachChild((e,n)=>{if(void 0===t[n])throw new Error(`Must supply a value for form control at index: ${n}.`)})}_allControlsDisabled(){for(const t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}}let Se=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275dir=r.Fb({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),t})(),Ie=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})();const Ae=new r.r("NgModelWithFormControlWarning"),Te={provide:Zt,useExisting:Object(r.U)(()=>xe)};let xe=(()=>{class t extends Zt{constructor(t,e){super(),this.validators=t,this.asyncValidators=e,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new r.n,this._setValidators(t),this._setAsyncValidators(e)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ce(this.form,this,!1),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const e=this.form.get(t.path);return oe(e,t),e.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),e}getControl(t){return this.form.get(t.path)}removeControl(t){se(t.control||null,t,!1),he(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,e){this.form.get(t.path).setValue(e)}onSubmit(t){return this.submitted=!0,e=this.directives,this.form._syncPendingControls(),e.forEach(t=>{const e=t.control;"submit"===e.updateOn&&e._pendingChange&&(t.viewToModelUpdate(e._pendingValue),e._pendingChange=!1)}),this.ngSubmit.emit(t),!1;var e}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const e=t.control,n=this.form.get(t.path);e!==n&&(se(e||null,t),n instanceof Ce&&(oe(n,t),t.control=n))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const e=this.form.get(t.path);(function(t,e){ue(t,e,!1)})(e,t),e.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const e=this.form.get(t.path);e&&function(t,e){return ce(t,e,!1)}(e,t)&&e.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){ue(this.form,this,!1),this._oldForm&&ce(this._oldForm,this,!1)}_checkFormPresent(){}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Mt,10),r.Kb(Pt,10))},t.\u0275dir=r.Fb({type:t,selectors:[["","formGroup",""]],hostBindings:function(t,e){1&t&&r.Ub("submit",function(t){return e.onSubmit(t)})("reset",function(){return e.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[r.zb([Te]),r.xb,r.yb]}),t})();const De={provide:ee,useExisting:Object(r.U)(()=>ke)};let ke=(()=>{class t extends ee{constructor(t,e,n,i,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.update=new r.n,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=function(t,e){if(!e)return null;let n,r,i;return Array.isArray(e),e.forEach(t=>{t.constructor===Nt?n=t:Object.getPrototypeOf(t.constructor)===Tt?r=t:i=t}),i||r||n||null}(0,i)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),function(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return t=null==this.name?this.name:this.name.toString(),[...this._parent.path,t];var t}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Zt,13),r.Kb(Mt,10),r.Kb(Pt,10),r.Kb(xt,10),r.Kb(Ae,8))},t.\u0275dir=r.Fb({type:t,selectors:[["","formControlName",""]],inputs:{isDisabled:["disabled","isDisabled"],name:["formControlName","name"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[r.zb([De]),r.xb,r.yb]}),t._ngModelWarningSentOnce=!1,t})();const Ne={provide:xt,useExisting:Object(r.U)(()=>Re),multi:!0};function je(t,e){return null==t?`${e}`:(e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Re=(()=>{class t extends Tt{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){this.value=t;const e=this._getOptionId(t);null==e&&this._renderer.setProperty(this._elementRef.nativeElement,"selectedIndex",-1);const n=je(e,t);this._renderer.setProperty(this._elementRef.nativeElement,"value",n)}registerOnChange(t){this.onChange=e=>{this.value=this._getOptionValue(e),t(this.value)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e),t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e):t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target.value)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([Ne]),r.xb]}),t})(),Me=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption())}set ngValue(t){null!=this._select&&(this._select._optionMap.set(this.id,t),this._setElementValue(je(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._setElementValue(t),this._select&&this._select.writeValue(this._select.value)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.E),r.Kb(Re,9))},t.\u0275dir=r.Fb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})();const Pe={provide:xt,useExisting:Object(r.U)(()=>Le),multi:!0};function Fe(t,e){return null==t?`${e}`:("string"==typeof e&&(e=`'${e}'`),e&&"object"==typeof e&&(e="Object"),`${t}: ${e}`.slice(0,50))}let Le=(()=>{class t extends Tt{constructor(t,e){super(),this._renderer=t,this._elementRef=e,this._optionMap=new Map,this._idCounter=0,this.onChange=t=>{},this.onTouched=()=>{},this._compareWith=Object.is}set compareWith(t){this._compareWith=t}writeValue(t){let e;if(this.value=t,Array.isArray(t)){const n=t.map(t=>this._getOptionId(t));e=(t,e)=>{t._setSelected(n.indexOf(e.toString())>-1)}}else e=(t,e)=>{t._setSelected(!1)};this._optionMap.forEach(e)}registerOnChange(t){this.onChange=e=>{const n=[];if(void 0!==e.selectedOptions){const t=e.selectedOptions;for(let e=0;e<t.length;e++){const r=t.item(e),i=this._getOptionValue(r.value);n.push(i)}}else{const t=e.options;for(let e=0;e<t.length;e++){const r=t.item(e);if(r.selected){const t=this._getOptionValue(r.value);n.push(t)}}}this.value=n,t(n)}}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._renderer.setProperty(this._elementRef.nativeElement,"disabled",t)}_registerOption(t){const e=(this._idCounter++).toString();return this._optionMap.set(e,t),e}_getOptionId(t){for(const e of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(e)._value,t))return e;return null}_getOptionValue(t){const e=function(t){return t.split(":")[0]}(t);return this._optionMap.has(e)?this._optionMap.get(e)._value:t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(t,e){1&t&&r.Ub("change",function(t){return e.onChange(t.target)})("blur",function(){return e.onTouched()})},inputs:{compareWith:"compareWith"},features:[r.zb([Pe]),r.xb]}),t})(),Ue=(()=>{class t{constructor(t,e,n){this._element=t,this._renderer=e,this._select=n,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){null!=this._select&&(this._value=t,this._setElementValue(Fe(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(Fe(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(r.l),r.Kb(r.E),r.Kb(Le,9))},t.\u0275dir=r.Fb({type:t,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),t})(),Ve=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[[Ie]]}),t})(),qe=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[Ve]}),t})(),Be=(()=>{class t{static withConfig(e){return{ngModule:t,providers:[{provide:Ae,useValue:e.warnOnNgModelWithFormControl}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[Ve]}),t})();var ze=n("LRne"),He=n("XNiG"),We=n("9ppp");class Ke extends He.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new We.a;return this._value}next(t){super.next(this._value=t)}}var Ge=n("z+Ro"),$e=n("7o/Q");class Ye extends $e.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class Qe extends $e.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Xe=n("SeVD");function Je(t,e,n,r,i=new Qe(t,n,r)){if(!i.closed)return e instanceof Ot.a?e.subscribe(i):Object(Xe.a)(e)(i)}var Ze=n("yCtX");const tn={};class en{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new nn(t,this.resultSelector))}}class nn extends Ye{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(tn),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Je(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===tn?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const rn=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var on=n("bHdf");function sn(...t){return Object(on.a)(1)(Object(ze.a)(...t))}var an=n("EY2u");function un(t){return new Ot.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(Ct.a)(n):Object(an.b)()).subscribe(e)})}var cn=n("EQ5u"),ln=n("zx2A");function hn(t,e){return"function"==typeof e?n=>n.pipe(hn((n,r)=>Object(Ct.a)(t(n,r)).pipe(Object(St.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new dn(t))}class dn{constructor(t){this.project=t}call(t,e){return e.subscribe(new fn(t,this.project))}}class fn extends ln.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new ln.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(ln.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const pn=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function gn(t){return e=>0===t?Object(an.b)():e.lift(new mn(t))}class mn{constructor(t){if(this.total=t,this.total<0)throw new pn}call(t,e){return e.subscribe(new bn(t,this.total))}}class bn extends $e.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function vn(...t){const e=t[t.length-1];return Object(Ge.a)(e)?(t.pop(),n=>sn(t,n,e)):e=>sn(t,e)}function yn(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new _n(t,e,n))}}class _n{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new wn(t,this.accumulator,this.seed,this.hasSeed))}}class wn extends $e.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Cn(t,e){return function(n){return n.lift(new On(t,e))}}class On{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new En(t,this.predicate,this.thisArg))}}class En extends $e.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function Sn(t){return function(e){const n=new In(t),r=e.lift(n);return n.caught=r}}class In{constructor(t){this.selector=t}call(t,e){return e.subscribe(new An(t,this.selector,this.caught))}}class An extends ln.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new ln.a(this);this.add(r);const i=Object(ln.c)(n,r);i!==r&&this.add(i)}}}var Tn=n("5+tZ");function xn(t,e){return Object(Tn.a)(t,e,1)}function Dn(t){return function(e){return 0===t?Object(an.b)():e.lift(new kn(t))}}class kn{constructor(t){if(this.total=t,this.total<0)throw new pn}call(t,e){return e.subscribe(new Nn(t,this.total))}}class Nn extends $e.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function jn(t=Pn){return e=>e.lift(new Rn(t))}class Rn{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new Mn(t,this.errorFactory))}}class Mn extends $e.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Y_){t=Y_}this.destination.error(t)}}}function Pn(){return new rn}function Fn(t=null){return e=>e.lift(new Ln(t))}class Ln{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new Un(t,this.defaultValue))}}class Un extends $e.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var Vn=n("SpAZ");function qn(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Cn((e,n)=>t(e,n,r)):Vn.a,gn(1),n?Fn(e):jn(()=>new rn))}var Bn=n("vkgz"),zn=n("x+ZX"),Hn=n("quSY");function Wn(t){return e=>e.lift(new Kn(t))}class Kn{constructor(t){this.callback=t}call(t,e){return e.subscribe(new Gn(t,this.callback))}}class Gn extends $e.a{constructor(t,e){super(t),this.add(new Hn.a(e))}}class $n{constructor(t,e){this.id=t,this.url=e}}class Yn extends $n{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Qn extends $n{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Xn extends $n{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Jn extends $n{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Zn extends $n{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tr extends $n{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class er extends $n{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class nr extends $n{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class rr extends $n{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ir{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class or{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class sr{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ar{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ur{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class cr{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class lr{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const hr="primary";class dr{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function fr(t){return new dr(t)}function pr(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function gr(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function mr(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!br(t[i],e[i]))return!1;return!0}function br(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function vr(t){return Array.prototype.concat.apply([],t)}function yr(t){return t.length>0?t[t.length-1]:null}function _r(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function wr(t){return Object(r.qb)(t)?t:Object(r.rb)(t)?Object(Ct.a)(Promise.resolve(t)):Object(ze.a)(t)}function Cr(t,e,n){return n?function(t,e){return mr(t,e)}(t.queryParams,e.queryParams)&&Or(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>br(t[n],e[n]))}(t.queryParams,e.queryParams)&&Er(t.root,e.root)}function Or(t,e){if(!xr(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Or(t.children[n],e.children[n]))return!1}return!0}function Er(t,e){return Sr(t,e,e.segments)}function Sr(t,e,n){if(t.segments.length>n.length)return!!xr(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!xr(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Er(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!xr(t.segments,r)&&!!t.children.primary&&Sr(t.children.primary,e,i)}}class Ir{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fr(this.queryParams)),this._queryParamMap}toString(){return Nr.serialize(this)}}class Ar{constructor(t,e){this.segments=t,this.children=e,this.parent=null,_r(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jr(this)}}class Tr{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=fr(this.parameters)),this._parameterMap}toString(){return Vr(this)}}function xr(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class Dr{}class kr{parse(t){const e=new Wr(t);return new Ir(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${Rr(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${Pr(e)}=${Pr(t)}`).join("&"):`${Pr(e)}=${Pr(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const Nr=new kr;function jr(t){return t.segments.map(t=>Vr(t)).join("/")}function Rr(t,e){if(!t.hasChildren())return jr(t);if(e){const e=t.children.primary?Rr(t.children.primary,!1):"",n=[];return _r(t.children,(t,e)=>{e!==hr&&n.push(`${e}:${Rr(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return _r(t.children,(t,r)=>{r===hr&&(n=n.concat(e(t,r)))}),_r(t.children,(t,r)=>{r!==hr&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===hr?[Rr(t.children.primary,!1)]:[`${n}:${Rr(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${jr(t)}/${e[0]}`:`${jr(t)}/(${e.join("//")})`}}function Mr(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Pr(t){return Mr(t).replace(/%3B/gi,";")}function Fr(t){return Mr(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Lr(t){return decodeURIComponent(t)}function Ur(t){return Lr(t.replace(/\+/g,"%20"))}function Vr(t){return`${Fr(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${Fr(t)}=${Fr(e[t])}`).join("")}`;var e}const qr=/^[^\/()?;=#]+/;function Br(t){const e=t.match(qr);return e?e[0]:""}const zr=/^[^=?&#]+/,Hr=/^[^?&#]+/;class Wr{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ar([],{}):new Ar([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Ar(t,e)),n}parseSegment(){const t=Br(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Tr(Lr(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=Br(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=Br(this.remaining);t&&(n=t,this.capture(n))}t[Lr(e)]=Lr(n)}parseQueryParam(t){const e=function(t){const e=t.match(zr);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(Hr);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=Ur(e),i=Ur(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=Br(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=hr);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Ar([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class Kr{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=Gr(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=Gr(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=$r(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return $r(t,this._root).map(t=>t.value)}}function Gr(t,e){if(t===e.value)return e;for(const n of e.children){const e=Gr(t,n);if(e)return e}return null}function $r(t,e){if(t===e.value)return[e];for(const n of e.children){const r=$r(t,n);if(r.length)return r.unshift(e),r}return[]}class Yr{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function Qr(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class Xr extends Kr{constructor(t,e){super(t),this.snapshot=e,ri(this,t)}toString(){return this.snapshot.toString()}}function Jr(t,e){const n=function(t,e){const n=new ei([],{},{},"",{},hr,e,null,t.root,-1,{});return new ni("",new Yr(n,[]))}(t,e),r=new Ke([new Tr("",{})]),i=new Ke({}),o=new Ke({}),s=new Ke({}),a=new Ke(""),u=new Zr(r,i,s,a,o,hr,e,n.root);return u.snapshot=n.root,new Xr(new Yr(u,[]),n)}class Zr{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(St.a)(t=>fr(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(St.a)(t=>fr(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function ti(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class ei{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=fr(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=fr(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class ni extends Kr{constructor(t,e){super(e),this.url=t,ri(this,e)}toString(){return ii(this._root)}}function ri(t,e){e.value._routerState=t,e.children.forEach(e=>ri(t,e))}function ii(t){const e=t.children.length>0?` { ${t.children.map(ii).join(", ")} } `:"";return`${t.value}${e}`}function oi(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,mr(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),mr(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!mr(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),mr(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function si(t,e){return mr(t.params,e.params)&&function(t,e){return xr(t,e)&&t.every((t,n)=>mr(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||si(t.parent,e.parent))}function ai(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return ai(t,e,r);return ai(t,e)})}(t,e,n);return new Yr(r,i)}{if(t.shouldAttach(e.value)){const n=t.retrieve(e.value);if(null!==n){const t=n.route;return ui(e,t),t}}const n=new Zr(new Ke((r=e.value).url),new Ke(r.params),new Ke(r.queryParams),new Ke(r.fragment),new Ke(r.data),r.outlet,r.component,r),i=e.children.map(e=>ai(t,e));return new Yr(n,i)}var r}function ui(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)ui(t.children[n],e.children[n])}function ci(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function li(t){return"object"==typeof t&&null!=t&&t.outlets}function hi(t,e,n,r,i){let o={};return r&&_r(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Ir(n.root===t?e:di(n.root,t,e),o,i)}function di(t,e,n){const r={};return _r(t.children,(t,i)=>{r[i]=t===e?n:di(t,e,n)}),new Ar(t.segments,r)}class fi{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&ci(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(li);if(r&&r!==yr(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class pi{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function gi(t,e,n){if(t||(t=new Ar([],{})),0===t.segments.length&&t.hasChildren())return mi(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(li(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!_i(a,u,e))return o;r+=2}else{if(!_i(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Ar(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Ar(t.segments.slice(r.pathIndex),t.children),mi(e,0,i)}return r.match&&0===i.length?new Ar(t.segments,{}):r.match&&!t.hasChildren()?bi(t,e,n):r.match?mi(t,0,i):bi(t,e,n)}function mi(t,e,n){if(0===n.length)return new Ar(t.segments,{});{const r=function(t){return li(t[0])?t[0].outlets:{[hr]:t}}(n),i={};return _r(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=gi(t.children[r],e,n))}),_r(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Ar(t.segments,i)}}function bi(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(li(o)){const t=vi(o.outlets);return new Ar(r,t)}if(0===i&&ci(n[0])){r.push(new Tr(t.segments[e].path,yi(n[0]))),i++;continue}const s=li(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&ci(a)?(r.push(new Tr(s,yi(a))),i+=2):(r.push(new Tr(s,{})),i++)}return new Ar(r,{})}function vi(t){const e={};return _r(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=bi(new Ar([],{}),0,t))}),e}function yi(t){const e={};return _r(t,(t,n)=>e[n]=`${t}`),e}function _i(t,e,n){return t==n.path&&mr(e,n.parameters)}class wi{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),oi(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=Qr(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),_r(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=Qr(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated(),n.attachRef=null,n.resolver=null,n.route=null)}activateChildRoutes(t,e,n){const r=Qr(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new cr(t.value.snapshot))}),t.children.length&&this.forwardEvent(new ar(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(oi(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Ci(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Ci(t){oi(t.value),t.children.forEach(Ci)}class Oi{constructor(t,e){this.routes=t,this.module=e}}function Ei(t){return"function"==typeof t}function Si(t){return t instanceof Ir}const Ii=Symbol("INITIAL_VALUE");function Ai(){return hn(t=>function(...t){let e,n;return Object(Ge.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(Et.a)(t[0])&&(t=t[0]),Object(Ze.a)(t,n).lift(new en(e))}(t.map(t=>t.pipe(gn(1),vn(Ii)))).pipe(yn((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Ii)return t;if(r===Ii&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Si(r))return r}return t},t)},Ii),Cn(t=>t!==Ii),Object(St.a)(t=>Si(t)?t:!0===t),gn(1)))}let Ti=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Lb(0,"router-outlet")},directives:function(){return[Eo]},encapsulation:2}),t})();function xi(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];Di(r,ki(e,r))}}function Di(t,e){t.children&&xi(t.children,e)}function ki(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function Ni(t){const e=t.children&&t.children.map(Ni),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==hr&&(n.component=Ti),n}function ji(t){return t.outlet||hr}function Ri(t,e){const n=t.filter(t=>ji(t)===e);return n.push(...t.filter(t=>ji(t)!==e)),n}const Mi={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function Pi(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},Mi):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||gr)(n,t,e);if(!i)return Object.assign({},Mi);const o={};_r(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function Fi(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>Li(t,e,n)&&ji(n)!==hr)}(t,n,r)){const i=new Ar(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&ji(o)!==hr){const n=new Ar([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[ji(o)]=n}return i}(t,e,r,new Ar(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>Li(t,e,n))}(t,n,r)){const o=new Ar(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(Li(t,n,a)&&!i[ji(a)]){const n=new Ar([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[ji(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Ar(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function Li(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function Ui(t,e,n,r){return!!(ji(t)===r||r!==hr&&Li(e,n,t))&&("**"===t.path||Pi(e,t,n).matched)}function Vi(t,e,n){return 0===e.length&&!t.children[n]}class qi{constructor(t){this.segmentGroup=t||null}}class Bi{constructor(t){this.urlTree=t}}function zi(t){return new Ot.a(e=>e.error(new qi(t)))}function Hi(t){return new Ot.a(e=>e.error(new Bi(t)))}function Wi(t){return new Ot.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class Ki{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=Fi(this.urlTree.root,[],[],this.config).segmentGroup,e=new Ar(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,hr).pipe(Object(St.a)(t=>this.createUrlTree(Gi(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Sn(t=>{if(t instanceof Bi)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof qi)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,hr).pipe(Object(St.a)(e=>this.createUrlTree(Gi(e),t.queryParams,t.fragment))).pipe(Sn(t=>{if(t instanceof qi)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Ar([],{[hr]:t}):t;return new Ir(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(St.a)(t=>new Ar([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(Ct.a)(r).pipe(xn(r=>{const i=n.children[r],o=Ri(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(St.a)(t=>({segment:t,outlet:r})))}),yn((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Cn((e,n)=>t(e,n,r)):Vn.a,Dn(1),n?Fn(e):jn(()=>new rn))}())}expandSegment(t,e,n,r,i,o){return Object(Ct.a)(n).pipe(xn(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Sn(t=>{if(t instanceof qi)return Object(ze.a)(null);throw t}))),qn(t=>!!t),Sn((t,n)=>{if(t instanceof rn||"EmptyError"===t.name){if(Vi(e,r,i))return Object(ze.a)(new Ar([],{}));throw new qi(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return Ui(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):zi(e):zi(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?Hi(i):this.lineralizeSegments(n,i).pipe(Object(Tn.a)(n=>{const i=new Ar(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=Pi(e,r,i);if(!s)return zi(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?Hi(l):this.lineralizeSegments(r,l).pipe(Object(Tn.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(ze.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(St.a)(t=>(n._loadedConfig=t,new Ar(r,{})))):Object(ze.a)(new Ar(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=Pi(e,n,r);if(!o)return zi(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(Tn.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=Fi(e,s,u,o),l=new Ar(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(St.a)(t=>new Ar(s,t)));if(0===o.length&&0===c.length)return Object(ze.a)(new Ar(s,{}));const h=ji(n)===i;return this.expandSegment(r,l,o,c,h?hr:i,!0).pipe(Object(St.a)(t=>new Ar(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(ze.a)(new Oi(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(ze.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Tn.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(St.a)(t=>(e._loadedConfig=t,t))):function(t){return new Ot.a(e=>e.error(pr(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(ze.a)(new Oi([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(ze.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Ei(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Ei(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return wr(o)});return Object(ze.a)(i).pipe(Ai(),Object(Bn.a)(t=>{if(!Si(t))return;const e=pr(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(St.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(ze.a)(n);if(r.numberOfChildren>1||!r.children.primary)return Wi(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Ir(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return _r(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return _r(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Ar(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function Gi(t){const e={};for(const n of Object.keys(t.children)){const r=Gi(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Ar(t.segments.concat(e.segments),e.children)}return t}(new Ar(t.segments,e))}class $i{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class Yi{constructor(t,e){this.component=t,this.route=e}}function Qi(t,e,n){const r=t._root;return Ji(r,e?e._root:null,n,[r.value])}function Xi(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Ji(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=Qr(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!xr(t.url,e.url);case"pathParamsOrQueryParamsChange":return!xr(t.url,e.url)||!mr(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!si(t,e)||!mr(t.queryParams,e.queryParams);case"paramsChange":default:return!si(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new $i(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Ji(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new Yi(a.outlet.component,s))}else s&&Zi(e,a,i),i.canActivateChecks.push(new $i(r)),Ji(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),_r(o,(t,e)=>Zi(t,n.getContext(e),i)),i}function Zi(t,e,n){const r=Qr(t),i=t.value;_r(r,(t,r)=>{Zi(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new Yi(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class to{}function eo(t){return new Ot.a(e=>e.error(t))}class no{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=Fi(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,hr);if(null===e)return null;const n=new ei([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},hr,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new Yr(n,e),i=new ni(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=ti(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=Ri(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=io(n);return r.sort((t,e)=>t.value.outlet===hr?-1:e.value.outlet===hr?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return Vi(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!Ui(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?yr(n).parameters:{};i=new ei(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ao(t),ji(t),t.component,t,oo(e),so(e)+n.length,uo(t))}else{const r=Pi(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new ei(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,ao(t),ji(t),t.component,t,oo(e),so(e)+o.length,uo(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=Fi(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new Yr(i,t)]}if(0===a.length&&0===c.length)return[new Yr(i,[])];const l=ji(t)===r,h=this.processSegment(a,u,c,l?hr:r);return null===h?null:[new Yr(i,h)]}}function ro(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function io(t){const e=[],n=new Set;for(const r of t){if(!ro(r)){e.push(r);continue}const t=e.find(t=>r.value.routeConfig===t.value.routeConfig);void 0!==t?(t.children.push(...r.children),n.add(t)):e.push(r)}for(const r of n){const t=io(r.children);e.push(new Yr(r.value,t))}return e.filter(t=>!n.has(t))}function oo(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function so(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function ao(t){return t.data||{}}function uo(t){return t.resolve||{}}function co(t){return hn(e=>{const n=t(e);return n?Object(Ct.a)(n).pipe(Object(St.a)(()=>e)):Object(ze.a)(e)})}class lo extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const ho=new r.r("ROUTES");class fo{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(St.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new Oi(vr(i.injector.get(ho,void 0,r.q.Self|r.q.Optional)).map(Ni),i)}),Sn(t=>{throw e._loader$=void 0,t}));return e._loader$=new cn.a(n,()=>new He.a).pipe(Object(zn.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(Ct.a)(this.loader.load(t)):wr(t()).pipe(Object(Tn.a)(t=>t instanceof r.w?Object(ze.a)(t):Object(Ct.a)(this.compiler.compileModuleAsync(t))))}}class po{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new go,this.attachRef=null}}class go{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new po,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class mo{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function bo(t){throw t}function vo(t,e,n){return e.parse("/")}function yo(t,e){return Object(ze.a)(null)}let _o=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new He.a,this.errorHandler=bo,this.malformedUriErrorHandler=vo,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:yo,afterPreactivation:yo},this.urlHandlingStrategy=new mo,this.routeReuseStrategy=new lo,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.Y);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Ir(new Ar([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new fo(s,a,t=>this.triggerEvent(new ir(t)),t=>this.triggerEvent(new or(t))),this.routerState=Jr(this.currentUrlTree,this.rootComponentType),this.transitions=new Ke({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Cn(t=>0!==t.id),Object(St.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),hn(t=>{let n=!1,r=!1;return Object(ze.a)(t).pipe(Object(Bn.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),hn(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(ze.a)(t).pipe(hn(t=>{const n=this.transitions.getValue();return e.next(new Yn(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?an.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,hn(t=>function(t,e,n,r,i){return new Ki(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(St.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(Bn.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(Tn.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new no(t,e,n,r,i,o).recognize();return null===s?eo(new to):Object(ze.a)(s)}catch(Y_){return eo(Y_)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(St.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(Bn.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Zn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new Yn(n,this.serializeUrl(r),i,o);e.next(a);const u=Jr(r,this.rootComponentType).snapshot;return Object(ze.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),an.a}),co(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Bn.a)(t=>{const e=new tr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(St.a)(t=>Object.assign(Object.assign({},t),{guards:Qi(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(Tn.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(ze.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(Ct.a)(t).pipe(Object(Tn.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(ze.a)(!0);const s=o.map(o=>{const s=Xi(o,e,i);let a;if(function(t){return t&&Ei(t.canDeactivate)}(s))a=wr(s.canDeactivate(t,e,n,r));else{if(!Ei(s))throw new Error("Invalid CanDeactivate guard");a=wr(s(t,e,n,r))}return a.pipe(qn())});return Object(ze.a)(s).pipe(Ai())}(t.component,t.route,n,e,r)),qn(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Tn.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(Ct.a)(e).pipe(xn(e=>sn(function(t,e){return null!==t&&e&&e(new sr(t)),Object(ze.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new ur(t)),Object(ze.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>un(()=>{const i=e.guards.map(i=>{const o=Xi(i,e.node,n);let s;if(function(t){return t&&Ei(t.canActivateChild)}(o))s=wr(o.canActivateChild(r,t));else{if(!Ei(o))throw new Error("Invalid CanActivateChild guard");s=wr(o(r,t))}return s.pipe(qn())});return Object(ze.a)(i).pipe(Ai())}));return Object(ze.a)(i).pipe(Ai())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(ze.a)(!0);const i=r.map(r=>un(()=>{const i=Xi(r,e,n);let o;if(function(t){return t&&Ei(t.canActivate)}(i))o=wr(i.canActivate(e,t));else{if(!Ei(i))throw new Error("Invalid CanActivate guard");o=wr(i(e,t))}return o.pipe(qn())}));return Object(ze.a)(i).pipe(Ai())}(t,e.route,n))),qn(t=>!0!==t,!0))}(r,o,t,e):Object(ze.a)(n)),Object(St.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(Bn.a)(t=>{if(Si(t.guardsResult)){const e=pr(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new er(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Cn(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new Xn(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),co(t=>{if(t.guards.canActivateChecks.length)return Object(ze.a)(t).pipe(Object(Bn.a)(t=>{const e=new nr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),hn(t=>{let n=!1;return Object(ze.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(Tn.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(ze.a)(t);let o=0;return Object(Ct.a)(n).pipe(xn(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(ze.a)({});const o={};return Object(Ct.a)(i).pipe(Object(Tn.a)(i=>function(t,e,n,r){const i=Xi(t,e,r);return wr(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(Bn.a)(t=>{o[i]=t}))),Dn(1),Object(Tn.a)(()=>Object.keys(o).length===i.length?Object(ze.a)(o):an.a))}(t._resolve,t,e,r).pipe(Object(St.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),ti(t,n).resolve),null)))}(t.route,e,r,i)),Object(Bn.a)(()=>o++),Dn(1),Object(Tn.a)(e=>o===n.length?Object(ze.a)(t):an.a))})),Object(Bn.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new Xn(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(Bn.a)(t=>{const e=new rr(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),co(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(St.a)(t=>{const e=function(t,e,n){const r=ai(t,e._root,n?n._root:void 0);return new Xr(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(Bn.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(i=this.rootContexts,o=this.routeReuseStrategy,s=t=>this.triggerEvent(t),Object(St.a)(t=>(new wi(o,t.targetRouterState,t.currentRouterState,s).activate(i),t))),Object(Bn.a)({next(){n=!0},complete(){n=!0}}),Wn(()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new Xn(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null}),Sn(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Si(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new Xn(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Jn(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(wd){t.reject(wd)}}var i;return an.a}));var i,o,s}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){xi(t),this.config=t.map(Ni),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return hi(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new fi(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return _r(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new fi(n,e,r)}(n);if(o.toRoot())return hi(e.root,new Ar([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new pi(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new pi(t,t===e.root,0)}const r=ci(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new pi(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?mi(s.segmentGroup,s.index,o.commands):gi(s.segmentGroup,s.index,o.commands);return hi(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Si(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Y_){e=this.malformedUriErrorHandler(Y_,this.urlSerializer,t)}return e}isActive(t,e){if(Si(t))return Cr(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Cr(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new Qn(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.N),r.Rb(Dr),r.Rb(go),r.Rb(w),r.Rb(r.s),r.Rb(r.x),r.Rb(r.i),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),wo=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new He.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Oo(this.skipLocationChange),replaceUrl:Oo(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Oo(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(_o),r.Kb(Zr),r.Sb("tabindex"),r.Kb(r.E),r.Kb(r.l))},t.\u0275dir=r.Fb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Ub("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})(),Co=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new He.a,this.subscription=t.events.subscribe(t=>{t instanceof Qn&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:Oo(this.skipLocationChange),replaceUrl:Oo(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Oo(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(_o),r.Kb(Zr),r.Kb(m))},t.\u0275dir=r.Fb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Ub("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Qb("href",e.href,r.lc),r.Bb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.yb]}),t})();function Oo(t){return""===t||!!t}let Eo=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||hr,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new So(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(go),r.Kb(r.Q),r.Kb(r.j),r.Sb("name"),r.Kb(r.h))},t.\u0275dir=r.Fb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class So{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Zr?this.route:t===go?this.childContexts:this.parent.get(t,e)}}class Io{}class Ao{preload(t,e){return Object(ze.a)(null)}}let To=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new fo(e,n,e=>t.triggerEvent(new ir(e)),e=>t.triggerEvent(new or(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Cn(t=>t instanceof Qn),xn(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(Ct.a)(n).pipe(Object(on.a)(),Object(St.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(ze.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(Tn.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(_o),r.Rb(r.x),r.Rb(r.i),r.Rb(r.s),r.Rb(Io))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),xo=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Yn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Qn&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof lr&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new lr(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(_o),r.Rb(B),r.Rb(void 0))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const Do=new r.r("ROUTER_CONFIGURATION"),ko=new r.r("ROUTER_FORROOT_GUARD"),No=[w,{provide:Dr,useClass:kr},{provide:_o,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new _o(null,t,e,n,r,i,s,vr(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[Dr,go,w,r.s,r.x,r.i,ho,Do,[class{},new r.B],[class{},new r.B]]},go,{provide:Zr,useFactory:function(t){return t.routerState.root},deps:[_o]},{provide:r.x,useClass:r.K},To,Ao,class{preload(t,e){return e().pipe(Sn(()=>Object(ze.a)(null)))}},{provide:Do,useValue:{enableTracing:!1}}];function jo(){return new r.z("Router",_o)}let Ro=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[No,Lo(e),{provide:ko,useFactory:Fo,deps:[[_o,new r.B,new r.J]]},{provide:Do,useValue:n||{}},{provide:m,useFactory:Po,deps:[a,[new r.p(v),new r.B],Do]},{provide:xo,useFactory:Mo,deps:[_o,B,Do]},{provide:Io,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Ao},{provide:r.z,multi:!0,useFactory:jo},[Uo,{provide:r.d,multi:!0,useFactory:Vo,deps:[Uo]},{provide:Bo,useFactory:qo,deps:[Uo]},{provide:r.b,multi:!0,useExisting:Bo}]]}}static forChild(e){return{ngModule:t,providers:[Lo(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ko,8),r.Rb(_o,8))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})();function Mo(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new xo(t,e,n)}function Po(t,e,n={}){return n.useHash?new _(t,e):new y(t,e)}function Fo(t){return"guarded"}function Lo(t){return[{provide:r.a,multi:!0,useValue:t},{provide:ho,multi:!0,useValue:t}]}let Uo=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new He.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(_o),r=this.injector.get(Do);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(ze.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Do),n=this.injector.get(To),i=this.injector.get(xo),o=this.injector.get(_o),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();function Vo(t){return t.appInitializer.bind(t)}function qo(t){return t.bootstrapListener.bind(t)}const Bo=new r.r("Router Initializer");let zo=(()=>{class t{constructor(t){this.router=t}ngOnInit(){}onViewCategory(){this.router.navigate(["menu-page"])}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(_o))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-categories"]],decls:39,vars:0,consts:[[1,"categories-outer"],[1,"container",2,"text-align","center"],["id","text-1",1,"col-lg-6","mx-auto"],[1,"display-6"],[1,"text-center",2,"margin-bottom","60px","margin-top","60px"],["type","button",1,"btn","btn-md","btn-outline-dark",3,"click"],[1,"row","row-cols-1","row-cols-md-2","row-cols-lg-2","row-cols-xl-4"],[1,"col"],[1,"card"],["src","https://firebasestorage.googleapis.com/v0/b/restaurant-21-club.appspot.com/o/starter.jpg?alt=media&token=2b0a42ab-d931-4421-9c5c-684a2ecb95e1","alt","...",1,"card-img-top"],[1,"card-body"],[1,"card-title"],["src","https://firebasestorage.googleapis.com/v0/b/restaurant-21-club.appspot.com/o/mains.jpg?alt=media&token=bbf302db-447f-4c7e-9467-3741af3010d9","alt","...",1,"card-img-top"],["src","https://firebasestorage.googleapis.com/v0/b/restaurant-21-club.appspot.com/o/dessert.jpg?alt=media&token=e8edc62c-da39-4f56-ae8f-94c372a1f3c2","alt","...",1,"card-img-top"],["src","https://firebasestorage.googleapis.com/v0/b/restaurant-21-club.appspot.com/o/alcohol.jpg?alt=media&token=40c06c97-283f-46b6-a843-36d4d93154c6","alt","...",1,"card-img-top"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Nb(2,"div",2),r.Nb(3,"p",3),r.oc(4," Want to get food delivered to you? "),r.Lb(5,"br"),r.oc(6," Place your order now. "),r.Mb(),r.Mb(),r.Nb(7,"div",4),r.Nb(8,"button",5),r.Ub("click",function(){return e.onViewCategory()}),r.oc(9,"Have a look at what we've for you"),r.Mb(),r.Mb(),r.Nb(10,"div",6),r.Nb(11,"div",7),r.Nb(12,"a"),r.Nb(13,"div",8),r.Lb(14,"img",9),r.Nb(15,"div",10),r.Nb(16,"h5",11),r.oc(17,"Starters"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(18,"div",7),r.Nb(19,"a"),r.Nb(20,"div",8),r.Lb(21,"img",12),r.Nb(22,"div",10),r.Nb(23,"h5",11),r.oc(24,"Mains"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(25,"div",7),r.Nb(26,"a"),r.Nb(27,"div",8),r.Lb(28,"img",13),r.Nb(29,"div",10),r.Nb(30,"h5",11),r.oc(31,"Desserts"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(32,"div",7),r.Nb(33,"a"),r.Nb(34,"div",8),r.Lb(35,"img",14),r.Nb(36,"div",10),r.Nb(37,"h5",11),r.oc(38,"Alcoholic beverages"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb())},styles:[".categories-outer[_ngcontent-%COMP%]{background-color:#fafafa;max-width:100%;padding-bottom:52px;padding-top:52px}#text-1[_ngcontent-%COMP%]{margin-bottom:30px}.lead[_ngcontent-%COMP%]{color:#292929;font-size:30px;font-weight:400}a.clickable-card[_ngcontent-%COMP%], a.clickable-card[_ngcontent-%COMP%]:hover{color:inherit;text-decoration:none}.card[_ngcontent-%COMP%]{border-bottom-left-radius:2em;border-top-right-radius:2em}.card-img-top[_ngcontent-%COMP%]{border-radius:2em;border-bottom-left-radius:0;border-bottom-right-radius:0;border-top-left-radius:0}@media (min-width:1281px){.card-img-top[_ngcontent-%COMP%]{height:15vw;object-fit:cover;width:100%}}@media (min-width:1025px) and (max-width:1280px){div.card[_ngcontent-%COMP%]{float:none;margin:0 auto 40px;width:90%}.card-img-top[_ngcontent-%COMP%]{height:15vw;object-fit:cover;width:100%}}@media (min-width:768px) and (max-width:1024px){div.card[_ngcontent-%COMP%]{float:none;margin:0 auto 40px;width:90%}.card-img-top[_ngcontent-%COMP%]{height:25vw;object-fit:cover;width:100%}}@media (min-width:768px) and (max-width:1024px) and (orientation:landscape){div.card[_ngcontent-%COMP%]{float:none;margin:0 auto 40px;width:80%}div.card-img-top[_ngcontent-%COMP%]{height:25vw;object-fit:cover}}@media (min-width:481px) and (max-width:767px){div.card[_ngcontent-%COMP%]{float:none;margin:0 auto 40px;width:80%}div.card-img-top[_ngcontent-%COMP%]{height:25vw;object-fit:cover}.lead[_ngcontent-%COMP%]{font-size:22px}}@media (min-width:320px) and (max-width:480px){div.card[_ngcontent-%COMP%]{float:none;margin:0 auto 40px;width:80%}div.card-img-top[_ngcontent-%COMP%]{height:25vw;object-fit:cover}.lead[_ngcontent-%COMP%]{font-size:22px;margin-left:20px;margin-right:20px}}"]}),t})();const Ho={apiKey:"AIzaSyBQq6pRpxgDOYsNo3PdNnfI-hiD5g-SBFk",authDomain:"restaurant-21-club.firebaseapp.com",databaseURL:"https://restaurant-21-club-default-rtdb.firebaseio.com",projectId:"restaurant-21-club",storageBucket:"restaurant-21-club.appspot.com",messagingSenderId:"440699115978",appId:"1:440699115978:web:a26f415abe1f71fc171733",measurementId:"G-1DCVC2NW3E"};class Wo{}class Ko{}class Go{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?this.lazyInit="string"==typeof t?()=>{this.headers=new Map,t.split("\n").forEach(t=>{const e=t.indexOf(":");if(e>0){const n=t.slice(0,e),r=n.toLowerCase(),i=t.slice(e+1).trim();this.maybeSetNormalizedName(n,r),this.headers.has(r)?this.headers.get(r).push(i):this.headers.set(r,[i])}})}:()=>{this.headers=new Map,Object.keys(t).forEach(e=>{let n=t[e];const r=e.toLowerCase();"string"==typeof n&&(n=[n]),n.length>0&&(this.headers.set(r,n),this.maybeSetNormalizedName(e,r))})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();const e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof Go?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){const e=new Go;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof Go?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){const e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if("string"==typeof n&&(n=[n]),0===n.length)return;this.maybeSetNormalizedName(t.name,e);const r=("a"===t.op?this.headers.get(e):void 0)||[];r.push(...n),this.headers.set(e,r);break;case"d":const i=t.value;if(i){let t=this.headers.get(e);if(!t)return;t=t.filter(t=>-1===i.indexOf(t)),0===t.length?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,t)}else this.headers.delete(e),this.normalizedNames.delete(e)}}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}}class $o{encodeKey(t){return Yo(t)}encodeValue(t){return Yo(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}}function Yo(t){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/gi,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%2B/gi,"+").replace(/%3D/gi,"=").replace(/%3F/gi,"?").replace(/%2F/gi,"/")}class Qo{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new $o,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(t=>{const r=t.indexOf("="),[i,o]=-1==r?[e.decodeKey(t),""]:[e.decodeKey(t.slice(0,r)),e.decodeValue(t.slice(r+1))],s=n.get(i)||[];s.push(o),n.set(i,s)}),n}(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{const n=t.fromObject[e];this.map.set(e,Array.isArray(n)?n:[n])})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();const e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){const e=[];return Object.keys(t).forEach(n=>{const r=t[n];Array.isArray(r)?r.forEach(t=>{e.push({param:n,value:t,op:"a"})}):e.push({param:n,value:r,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{const e=this.encoder.encodeKey(t);return this.map.get(t).map(t=>e+"="+this.encoder.encodeValue(t)).join("&")}).filter(t=>""!==t).join("&")}clone(t){const e=new Qo({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":const e=("a"===t.op?this.map.get(t.param):void 0)||[];e.push(t.value),this.map.set(t.param,e);break;case"d":if(void 0===t.value){this.map.delete(t.param);break}{let e=this.map.get(t.param)||[];const n=e.indexOf(t.value);-1!==n&&e.splice(n,1),e.length>0?this.map.set(t.param,e):this.map.delete(t.param)}}}),this.cloneFrom=this.updates=null)}}function Xo(t){return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer}function Jo(t){return"undefined"!=typeof Blob&&t instanceof Blob}function Zo(t){return"undefined"!=typeof FormData&&t instanceof FormData}class ts{constructor(t,e,n,r){let i;if(this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase(),function(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||r?(this.body=void 0!==n?n:null,i=r):i=n,i&&(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.params&&(this.params=i.params)),this.headers||(this.headers=new Go),this.params){const t=this.params.toString();if(0===t.length)this.urlWithParams=e;else{const n=e.indexOf("?");this.urlWithParams=e+(-1===n?"?":n<e.length-1?"&":"")+t}}else this.params=new Qo,this.urlWithParams=e}serializeBody(){return null===this.body?null:Xo(this.body)||Jo(this.body)||Zo(this.body)||"string"==typeof this.body?this.body:this.body instanceof Qo?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Zo(this.body)?null:Jo(this.body)?this.body.type||null:Xo(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Qo?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||Array.isArray(this.body)?"application/json":null}clone(t={}){const e=t.method||this.method,n=t.url||this.url,r=t.responseType||this.responseType,i=void 0!==t.body?t.body:this.body,o=void 0!==t.withCredentials?t.withCredentials:this.withCredentials,s=void 0!==t.reportProgress?t.reportProgress:this.reportProgress;let a=t.headers||this.headers,u=t.params||this.params;return void 0!==t.setHeaders&&(a=Object.keys(t.setHeaders).reduce((e,n)=>e.set(n,t.setHeaders[n]),a)),t.setParams&&(u=Object.keys(t.setParams).reduce((e,n)=>e.set(n,t.setParams[n]),u)),new ts(e,n,i,{params:u,headers:a,reportProgress:s,responseType:r,withCredentials:o})}}var es=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}({});class ns{constructor(t,e=200,n="OK"){this.headers=t.headers||new Go,this.status=void 0!==t.status?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}}class rs extends ns{constructor(t={}){super(t),this.type=es.ResponseHeader}clone(t={}){return new rs({headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class is extends ns{constructor(t={}){super(t),this.type=es.Response,this.body=void 0!==t.body?t.body:null}clone(t={}){return new is({body:void 0!==t.body?t.body:this.body,headers:t.headers||this.headers,status:void 0!==t.status?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}}class os extends ns{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${t.url||"(unknown url)"}`:`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}}function ss(t,e){return{body:e,headers:t.headers,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials}}let as=(()=>{class t{constructor(t){this.handler=t}request(t,e,n={}){let r;if(t instanceof ts)r=t;else{let i,o;i=n.headers instanceof Go?n.headers:new Go(n.headers),n.params&&(o=n.params instanceof Qo?n.params:new Qo({fromObject:n.params})),r=new ts(t,e,void 0!==n.body?n.body:null,{headers:i,params:o,reportProgress:n.reportProgress,responseType:n.responseType||"json",withCredentials:n.withCredentials})}const i=Object(ze.a)(r).pipe(xn(t=>this.handler.handle(t)));if(t instanceof ts||"events"===n.observe)return i;const o=i.pipe(Cn(t=>t instanceof is));switch(n.observe||"body"){case"body":switch(r.responseType){case"arraybuffer":return o.pipe(Object(St.a)(t=>{if(null!==t.body&&!(t.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return t.body}));case"blob":return o.pipe(Object(St.a)(t=>{if(null!==t.body&&!(t.body instanceof Blob))throw new Error("Response is not a Blob.");return t.body}));case"text":return o.pipe(Object(St.a)(t=>{if(null!==t.body&&"string"!=typeof t.body)throw new Error("Response is not a string.");return t.body}));case"json":default:return o.pipe(Object(St.a)(t=>t.body))}case"response":return o;default:throw new Error(`Unreachable: unhandled observe type ${n.observe}}`)}}delete(t,e={}){return this.request("DELETE",t,e)}get(t,e={}){return this.request("GET",t,e)}head(t,e={}){return this.request("HEAD",t,e)}jsonp(t,e){return this.request("JSONP",t,{params:(new Qo).append(e,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,e={}){return this.request("OPTIONS",t,e)}patch(t,e,n={}){return this.request("PATCH",t,ss(n,e))}post(t,e,n={}){return this.request("POST",t,ss(n,e))}put(t,e,n={}){return this.request("PUT",t,ss(n,e))}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Wo))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();class us{constructor(t,e){this.next=t,this.interceptor=e}handle(t){return this.interceptor.intercept(t,this.next)}}const cs=new r.r("HTTP_INTERCEPTORS");let ls=(()=>{class t{intercept(t,e){return e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const hs=/^\)\]\}',?\n/;class ds{}let fs=(()=>{class t{constructor(){}build(){return new XMLHttpRequest}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),ps=(()=>{class t{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Ot.a(e=>{const n=this.xhrFactory.build();if(n.open(t.method,t.urlWithParams),t.withCredentials&&(n.withCredentials=!0),t.headers.forEach((t,e)=>n.setRequestHeader(t,e.join(","))),t.headers.has("Accept")||n.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const e=t.detectContentTypeHeader();null!==e&&n.setRequestHeader("Content-Type",e)}if(t.responseType){const e=t.responseType.toLowerCase();n.responseType="json"!==e?e:"text"}const r=t.serializeBody();let i=null;const o=()=>{if(null!==i)return i;const e=1223===n.status?204:n.status,r=n.statusText||"OK",o=new Go(n.getAllResponseHeaders()),s=function(t){return"responseURL"in t&&t.responseURL?t.responseURL:/^X-Request-URL:/m.test(t.getAllResponseHeaders())?t.getResponseHeader("X-Request-URL"):null}(n)||t.url;return i=new rs({headers:o,status:e,statusText:r,url:s}),i},s=()=>{let{headers:r,status:i,statusText:s,url:a}=o(),u=null;204!==i&&(u=void 0===n.response?n.responseText:n.response),0===i&&(i=u?200:0);let c=i>=200&&i<300;if("json"===t.responseType&&"string"==typeof u){const t=u;u=u.replace(hs,"");try{u=""!==u?JSON.parse(u):null}catch(l){u=t,c&&(c=!1,u={error:l,text:u})}}c?(e.next(new is({body:u,headers:r,status:i,statusText:s,url:a||void 0})),e.complete()):e.error(new os({error:u,headers:r,status:i,statusText:s,url:a||void 0}))},a=t=>{const{url:r}=o(),i=new os({error:t,status:n.status||0,statusText:n.statusText||"Unknown Error",url:r||void 0});e.error(i)};let u=!1;const c=r=>{u||(e.next(o()),u=!0);let i={type:es.DownloadProgress,loaded:r.loaded};r.lengthComputable&&(i.total=r.total),"text"===t.responseType&&n.responseText&&(i.partialText=n.responseText),e.next(i)},l=t=>{let n={type:es.UploadProgress,loaded:t.loaded};t.lengthComputable&&(n.total=t.total),e.next(n)};return n.addEventListener("load",s),n.addEventListener("error",a),n.addEventListener("timeout",a),n.addEventListener("abort",a),t.reportProgress&&(n.addEventListener("progress",c),null!==r&&n.upload&&n.upload.addEventListener("progress",l)),n.send(r),e.next({type:es.Sent}),()=>{n.removeEventListener("error",a),n.removeEventListener("abort",a),n.removeEventListener("load",s),n.removeEventListener("timeout",a),t.reportProgress&&(n.removeEventListener("progress",c),null!==r&&n.upload&&n.upload.removeEventListener("progress",l)),n.readyState!==n.DONE&&n.abort()}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(ds))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const gs=new r.r("XSRF_COOKIE_NAME"),ms=new r.r("XSRF_HEADER_NAME");class bs{}let vs=(()=>{class t{constructor(t,e,n){this.doc=t,this.platform=e,this.cookieName=n,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=T(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(s),r.Rb(r.C),r.Rb(gs))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),ys=(()=>{class t{constructor(t,e){this.tokenService=t,this.headerName=e}intercept(t,e){const n=t.url.toLowerCase();if("GET"===t.method||"HEAD"===t.method||n.startsWith("http://")||n.startsWith("https://"))return e.handle(t);const r=this.tokenService.getToken();return null===r||t.headers.has(this.headerName)||(t=t.clone({headers:t.headers.set(this.headerName,r)})),e.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(bs),r.Rb(ms))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),_s=(()=>{class t{constructor(t,e){this.backend=t,this.injector=e,this.chain=null}handle(t){if(null===this.chain){const t=this.injector.get(cs,[]);this.chain=t.reduceRight((t,e)=>new us(t,e),this.backend)}return this.chain.handle(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Ko),r.Rb(r.s))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),ws=(()=>{class t{static disable(){return{ngModule:t,providers:[{provide:ys,useClass:ls}]}}static withOptions(e={}){return{ngModule:t,providers:[e.cookieName?{provide:gs,useValue:e.cookieName}:[],e.headerName?{provide:ms,useValue:e.headerName}:[]]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[ys,{provide:cs,useExisting:ys,multi:!0},{provide:bs,useClass:vs},{provide:gs,useValue:"XSRF-TOKEN"},{provide:ms,useValue:"X-XSRF-TOKEN"}]}),t})(),Cs=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[as,{provide:Wo,useClass:_s},ps,{provide:Ko,useExisting:ps},fs,{provide:ds,useExisting:fs}],imports:[[ws.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]]}),t})(),Os=(()=>{class t{constructor(t){this.http=t}ngOnInit(){}fetchImage(){return this.http.get("https://source.unsplash.com/1280x900/?restaurants,food,alcohol")}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(as))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Es=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-loader"]],decls:2,vars:0,consts:[[1,"loader"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.oc(1,"Loading..."),r.Mb())},styles:['.loader[_ngcontent-%COMP%], .loader[_ngcontent-%COMP%]:after, .loader[_ngcontent-%COMP%]:before{animation-fill-mode:both;animation:load7 1.8s ease-in-out infinite;border-radius:50%;height:2.5em;width:2.5em}.loader[_ngcontent-%COMP%]{animation-delay:-.16s;color:#707070;font-size:10px;margin:80px auto;position:relative;text-indent:-9999em;transform:translateZ(0)}.loader[_ngcontent-%COMP%]:after, .loader[_ngcontent-%COMP%]:before{content:"";position:absolute;top:0}.loader[_ngcontent-%COMP%]:before{animation-delay:-.32s;left:-3.5em}.loader[_ngcontent-%COMP%]:after{left:3.5em}@keyframes load7{0%,80%,to{box-shadow:0 2.5em 0 -1.3em}40%{box-shadow:0 2.5em 0 0}}']}),t})();function Ss(t,e){1&t&&(r.Nb(0,"div",3),r.Lb(1,"app-loader"),r.Mb())}let Is=(()=>{class t{constructor(t){this.fetchImgService=t,this.isFetchingImage=!1}ngOnInit(){this.isFetchingImage=!0,this.fetchImgService.fetchImage().subscribe(t=>{},t=>{this.imageUrl=t.url,this.isFetchingImage=!1})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Os))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-header-image"]],decls:3,vars:2,consts:[["style","margin-top: 150px; margin-bottom: 150px;",4,"ngIf"],["id","header-image-div",1,"container-lg",2,"text-align","center"],["alt","","id","header-image",1,"img-fluid",3,"src"],[2,"margin-top","150px","margin-bottom","150px"]],template:function(t,e){1&t&&(r.nc(0,Ss,2,0,"div",0),r.Nb(1,"div",1),r.Lb(2,"img",2),r.Mb()),2&t&&(r.dc("ngIf",e.isFetchingImage),r.Ab(2),r.ec("src",e.imageUrl,r.lc))},directives:[j,Es],styles:["#header-image-div[_ngcontent-%COMP%]{margin-top:60px;padding-left:0;padding-right:0}"]}),t})(),As=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-home"]],decls:15,vars:0,consts:[[1,"pt-5","my-5","px-xs-0","px-sm-0","pt-xs-0","pt-sm-0","text-center"],[1,"overflow-hidden"],[1,"container"],["src","https://firebasestorage.googleapis.com/v0/b/restaurant-21-club.appspot.com/o/interior2.jpg?alt=media&token=742de6e1-bbe5-45ee-ad1a-4fc074e5795e","alt","Example image","loading","lazy",1,"border","mb-4",2,"width","100%","margin-top","20px"],[1,"px-4","py-5","my-5","text-center"],[1,"col-lg-6","mx-auto"],[1,"lead","mb-4"],[2,"margin-top","25px"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Nb(2,"div",2),r.Lb(3,"img",3),r.Mb(),r.Mb(),r.Mb(),r.Nb(4,"div",4),r.Nb(5,"div",5),r.Nb(6,"p",6),r.oc(7," Whether you are planning an intimate dinner for friends, a corporate luncheon, or an extravagant soir\xe9e, you will find the perfect setting at 21 Club. In addition to accommodating as many as 400 guests, our restaurant feature award-winning off-site catering and a full service event production team that will make sure every detail is in place, so you don\u2019t have to. "),r.Mb(),r.Mb(),r.Mb(),r.Lb(8,"app-categories"),r.Nb(9,"div",7),r.Lb(10,"app-header-image"),r.Mb(),r.Nb(11,"div",4),r.Nb(12,"div",5),r.Nb(13,"p",6),r.oc(14," With specialty cocktails, unique starter dishes, and spectacular main courses and desserts, 21 Club is an amazing eatery. The superb talent and exacting precision of our chefs and staffs will make your experience here a grandeur one. "),r.Mb(),r.Mb(),r.Mb())},directives:[zo,Is],styles:[".lead[_ngcontent-%COMP%]{color:#000;font-weight:400}@media (min-width:1281px){.lead[_ngcontent-%COMP%]{font-size:25px}}@media (min-width:1025px) and (max-width:1280px){.lead[_ngcontent-%COMP%]{font-size:25px}}@media (min-width:481px) and (max-width:767px){.lead[_ngcontent-%COMP%]{font-size:18px}}@media (min-width:320px) and (max-width:480px){.lead[_ngcontent-%COMP%]{font-size:18px}}"]}),t})();var Ts=n("Jgta"),xs=n("D0XW");function Ds(){return t=>t.lift(new ks)}class ks{call(t,e){return e.subscribe(new Ns(t))}}class Ns extends $e.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}function js(t,e){return n=>n.lift(new Rs(t,e))}class Rs{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new Ms(t,this.compare,this.keySelector))}}class Ms extends $e.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var Ps=n("pxpQ"),Fs=n("spgP"),Ls=n("zIRd"),Us=n("qOnz"),Vs=n("q/0M"),qs=function(t,e){return(qs=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Bs(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var zs,Hs="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Ws=Ws||{},Ks=Hs||self;function Gs(){}function $s(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ys(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Qs="closure_uid_"+(1e9*Math.random()>>>0),Xs=0;function Js(t,e,n){return t.call.apply(t.bind,arguments)}function Zs(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function ta(t,e,n){return(ta=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Js:Zs).apply(null,arguments)}function ea(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function na(){return Date.now()}function ra(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function ia(){this.j=this.j,this.i=this.i}ia.prototype.j=!1,ia.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Qs)&&t[Qs]||(t[Qs]=++Xs)}(this)},ia.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var oa=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},sa=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function aa(t){return Array.prototype.concat.apply([],arguments)}function ua(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function ca(t){return/^[\s\xa0]*$/.test(t)}var la,ha=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function da(t,e){return-1!=t.indexOf(e)}function fa(t,e){return t<e?-1:t>e?1:0}t:{var pa=Ks.navigator;if(pa){var ga=pa.userAgent;if(ga){la=ga;break t}}la=""}function ma(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function ba(t){var e={};for(var n in t)e[n]=t[n];return e}var va="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ya(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<va.length;o++)n=va[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function _a(t){return _a[" "](t),t}_a[" "]=Gs;var wa,Ca,Oa=da(la,"Opera"),Ea=da(la,"Trident")||da(la,"MSIE"),Sa=da(la,"Edge"),Ia=Sa||Ea,Aa=da(la,"Gecko")&&!(da(la.toLowerCase(),"webkit")&&!da(la,"Edge"))&&!(da(la,"Trident")||da(la,"MSIE"))&&!da(la,"Edge"),Ta=da(la.toLowerCase(),"webkit")&&!da(la,"Edge");function xa(){var t=Ks.document;return t?t.documentMode:void 0}t:{var Da="",ka=(Ca=la,Aa?/rv:([^\);]+)(\)|;)/.exec(Ca):Sa?/Edge\/([\d\.]+)/.exec(Ca):Ea?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Ca):Ta?/WebKit\/(\S+)/.exec(Ca):Oa?/(?:Version)[ \/]?(\S+)/.exec(Ca):void 0);if(ka&&(Da=ka?ka[1]:""),Ea){var Na=xa();if(null!=Na&&Na>parseFloat(Da)){wa=String(Na);break t}}wa=Da}var ja={};function Ra(t){return function(t,e){var n=ja;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=ha(String(wa)).split("."),r=ha(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=fa(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||fa(0==s[2].length,0==a[2].length)||fa(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var Ma=Ks.document&&Ea&&(xa()||parseInt(wa,10))||void 0,Pa=!Ea||9<=Number(Ma),Fa=Ea&&!Ra("9"),La=function(){if(!Ks.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ks.addEventListener("test",Gs,e),Ks.removeEventListener("test",Gs,e)}catch(n){}return t}();function Ua(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function Va(t,e){if(Ua.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(Aa){t:{try{_a(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:qa[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Ua.prototype.b=function(){this.defaultPrevented=!0},ra(Va,Ua);var qa={2:"touch",3:"pen",4:"mouse"};Va.prototype.b=function(){Va.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Fa)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var Ba="closure_listenable_"+(1e6*Math.random()|0),za=0;function Ha(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++za,this.Y=this.Z=!1}function Wa(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function Ka(t){this.src=t,this.a={},this.b=0}function Ga(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=oa(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Wa(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function $a(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}Ka.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=$a(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Ha(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Ya="closure_lm_"+(1e6*Math.random()|0),Qa={};function Xa(t,e,n,r,i){if(r&&r.once)return Za(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Xa(t,e[o],n,r,i);return null}return n=au(n),t&&t[Ba]?t.va(e,n,Ys(r)?!!r.capture:!!r,i):Ja(t,e,n,!1,r,i)}function Ja(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Ys(i)?!!i.capture:!!i;if(s&&!Pa)return null;var a=ou(t);if(a||(t[Ya]=a=new Ka(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=iu,e=Pa?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)La||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(nu(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Za(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Za(t,e[o],n,r,i);return null}return n=au(n),t&&t[Ba]?t.wa(e,n,Ys(r)?!!r.capture:!!r,i):Ja(t,e,n,!0,r,i)}function tu(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)tu(t,e[o],n,r,i);else r=Ys(r)?!!r.capture:!!r,n=au(n),t&&t[Ba]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=$a(o=t.a[e],n,r,i))&&(Wa(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=ou(t))&&(e=t.a[e.toString()],t=-1,e&&(t=$a(e,n,r,i)),(n=-1<t?e[t]:null)&&eu(n))}function eu(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[Ba])Ga(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(nu(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ou(e))?(Ga(n,t),0==n.b&&(n.src=null,e[Ya]=null)):Wa(t)}}}function nu(t){return t in Qa?Qa[t]:Qa[t]="on"+t}function ru(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&eu(t),n.call(r,e)}function iu(t,e){if(t.Y)return!0;if(!Pa){if(!e)t:{e=["window","event"];for(var n=Ks,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return ru(t,e=new Va(e,this))}return ru(t,new Va(e,this))}function ou(t){return(t=t[Ya])instanceof Ka?t:null}var su="__closure_events_fn_"+(1e9*Math.random()>>>0);function au(t){return"function"==typeof t?t:(t[su]||(t[su]=function(e){return t.handleEvent(e)}),t[su])}function uu(){ia.call(this),this.c=new Ka(this),this.J=this,this.C=null}function cu(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Ua(e,t);else if(e instanceof Ua)e.target=e.target||t;else{var i=e;ya(e=new Ua(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=lu(s,r,!0,e)&&i}if(i=lu(s=e.a=t,r,!0,e)&&i,i=lu(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=lu(s=e.a=n[o],r,!1,e)&&i}function lu(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&Ga(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}ra(uu,ia),uu.prototype[Ba]=!0,(zs=uu.prototype).addEventListener=function(t,e,n,r){Xa(this,t,e,n,r)},zs.removeEventListener=function(t,e,n,r){tu(this,t,e,n,r)},zs.G=function(){if(uu.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Wa(n[r]);delete e.a[t],e.b--}}this.C=null},zs.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},zs.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var hu=Ks.JSON.stringify;function du(){this.b=this.a=null}var fu,pu=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new mu},function(t){t.reset()});function gu(){var t=_u,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function mu(){this.next=this.b=this.a=null}function bu(t){Ks.setTimeout(function(){throw t},0)}function vu(t,e){fu||function(){var t=Ks.Promise.resolve(void 0);fu=function(){t.then(wu)}}(),yu||(fu(),yu=!0),_u.add(t,e)}du.prototype.add=function(t,e){var n=pu.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},mu.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},mu.prototype.reset=function(){this.next=this.b=this.a=null};var yu=!1,_u=new du;function wu(){for(var t;t=gu();){try{t.a.call(t.b)}catch(n){bu(n)}var e=pu;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}yu=!1}function Cu(t,e){uu.call(this),this.b=t||1,this.a=e||Ks,this.f=ta(this.Za,this),this.g=na()}function Ou(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function Eu(t,e,n){if("function"==typeof t)n&&(t=ta(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=ta(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ks.setTimeout(t,e||0)}function Su(t){t.a=Eu(function(){t.a=null,t.c&&(t.c=!1,Su(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}ra(Cu,uu),(zs=Cu.prototype).aa=!1,zs.M=null,zs.Za=function(){if(this.aa){var t=na()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),cu(this,"tick"),this.aa&&(Ou(this),this.start()))}},zs.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=na())},zs.G=function(){Cu.X.G.call(this),Ou(this),delete this.a};var Iu=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}qs(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:Su(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Ks.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(ia);function Au(t){ia.call(this),this.b=t,this.a={}}ra(Au,ia);var Tu=[];function xu(t,e,n,r){Array.isArray(n)||(n&&(Tu[0]=n.toString()),n=Tu);for(var i=0;i<n.length;i++){var o=Xa(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Du(t){ma(t.a,function(t,e){this.a.hasOwnProperty(e)&&eu(t)},t),t.a={}}function ku(){this.a=!0}function Nu(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return hu(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}Au.prototype.G=function(){Au.X.G.call(this),Du(this)},Au.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},ku.prototype.info=function(){};var ju={},Ru=null;function Mu(){return Ru=Ru||new uu}function Pu(t){Ua.call(this,ju.Fa,t)}function Fu(t){var e=Mu();cu(e,new Pu(e,t))}function Lu(t,e){Ua.call(this,ju.STAT_EVENT,t),this.stat=e}function Uu(t){var e=Mu();cu(e,new Lu(e,t))}function Vu(t){Ua.call(this,ju.Ga,t)}function qu(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ks.setTimeout(function(){t()},e)}ju.Fa="serverreachability",ra(Pu,Ua),ju.STAT_EVENT="statevent",ra(Lu,Ua),ju.Ga="timingevent",ra(Vu,Ua);var Bu={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},zu={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Hu(){}function Wu(){}Hu.prototype.a=null;var Ku,Gu={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function $u(){Ua.call(this,"d")}function Yu(){Ua.call(this,"c")}function Qu(){}function Xu(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new Au(this),this.P=Ju,this.R=new Cu(t=Ia?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}ra($u,Ua),ra(Yu,Ua),ra(Qu,Hu),Ku=new Qu;var Ju=45e3,Zu={},tc={};function ec(t,e,n){t.H=1,t.i=Oc(bc(e)),t.j=n,t.I=!0,nc(t,null)}function nc(t,e){t.u=na(),oc(t),t.l=bc(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),Pc(n.b,"t",r),t.D=0,t.a=Dl(t.g,t.g.C?e:null),0<t.O&&(t.F=new Iu(ta(t.Ca,t,t.a),t.O)),xu(t.J,t.a,"readystatechange",t.Xa),e=t.B?ba(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Fu(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function rc(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=ic(t,n);if(i==tc){4==e&&(t.h=4,Uu(14),r=!1),Nu(t.c,t.f,null,"[Incomplete Response]");break}if(i==Zu){t.h=4,Uu(15),Nu(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}Nu(t.c,t.f,i,null),lc(t,i)}4==e&&0==n.length&&(t.h=1,Uu(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),Cl(e),e.F=!0,Uu(11))):(Nu(t.c,t.f,n,"[Invalid Chunked Response]"),cc(t),uc(t))}function ic(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?tc:(n=Number(e.substring(n,r)),isNaN(n)?Zu:(r+=1)+n>e.length?tc:(e=e.substr(r,n),t.D=r+n,e))}function oc(t){t.T=na()+t.P,sc(t,t.P)}function sc(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=qu(ta(t.Va,t),e)}function ac(t){t.o&&(Ks.clearTimeout(t.o),t.o=null)}function uc(t){0==t.g.v||t.A||Sl(t.g,t)}function cc(t){ac(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Ou(t.R),Du(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function lc(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||zc(n.b,t)))if(n.I=t.N,!t.C&&zc(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(d_){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;El(n),fl(n)}wl(n),Uu(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=qu(ta(n.Sa,n),6e3));if(1>=Bc(n.b)&&n.ea){try{n.ea()}catch(d_){}n.ea=void 0}}else Al(n,11)}else if((t.C||n.a==t)&&El(n),!ca(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(da(l,"spdy")||da(l,"quic")||da(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(Hc(h,h.b),h.b=null))}if(u.A){var d=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;d&&(u.na=d,Cc(u.B,u.A,d))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=na()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var f=t;if((u=n).la=xl(u,u.C?u.ga:null,u.fa),f.C){Wc(u.b,f);var p=f,g=u.D;g&&p.setTimeout(g),p.o&&(ac(p),oc(p)),u.a=f}else _l(u);0<n.g.length&&ml(n)}else"stop"!=i[0]&&"close"!=i[0]||Al(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?Al(n,7):dl(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);Fu(4)}catch(d_){}}function hc(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if($s(t)||"string"==typeof t)sa(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if($s(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if($s(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function dc(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof dc)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function fc(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];pc(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)pc(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function pc(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(zs=Xu.prototype).setTimeout=function(t){this.P=t},zs.Xa=function(t){t=t.target;var e=this.F;e&&3==ul(t)?e.f():this.Ca(t)},zs.Ca=function(t){try{if(t==this.a)t:{var e=ul(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!Ia&&!this.a.$())){this.A||4!=e||7==n||Fu(8==n||0>=r?3:2),ac(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ca(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Uu(12),cc(this),uc(this);break t}Nu(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,lc(this,u)}this.I?(rc(this,e,o),Ia&&this.b&&3==e&&(xu(this.J,this.R,"tick",this.Wa),this.R.start())):(Nu(this.c,this.f,o,null),lc(this,o)),4==e&&cc(this),this.b&&!this.A&&(4==e?Sl(this.g,this):(this.b=!1,oc(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Uu(12)):(this.h=0,Uu(13)),cc(this),uc(this)}}}catch(c){}},zs.Wa=function(){if(this.a){var t=ul(this.a),e=this.a.$();this.D<e.length&&(ac(this),rc(this,t,e),this.b&&4!=t&&oc(this))}},zs.cancel=function(){this.A=!0,cc(this)},zs.Va=function(){this.o=null;var t=na();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(Fu(3),Uu(17)),cc(this),this.h=2,uc(this)):sc(this,this.T-t)},(zs=dc.prototype).K=function(){fc(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},zs.L=function(){return fc(this),this.a.concat()},zs.get=function(t,e){return pc(this.b,t)?this.b[t]:e},zs.set=function(t,e){pc(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},zs.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var gc=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function mc(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof mc){this.a=void 0!==e?e:t.a,vc(this,t.f),this.j=t.j,yc(this,t.c),_c(this,t.h),this.g=t.g,e=t.b;var n=new Nc;n.c=e.c,e.a&&(n.a=new dc(e.a),n.b=e.b),wc(this,n),this.i=t.i}else t&&(n=String(t).match(gc))?(this.a=!!e,vc(this,n[1]||"",!0),this.j=Ec(n[2]||""),yc(this,n[3]||"",!0),_c(this,n[4]),this.g=Ec(n[5]||"",!0),wc(this,n[6]||"",!0),this.i=Ec(n[7]||"")):(this.a=!!e,this.b=new Nc(null,this.a))}function bc(t){return new mc(t)}function vc(t,e,n){t.f=n?Ec(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function yc(t,e,n){t.c=n?Ec(e,!0):e}function _c(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function wc(t,e,n){e instanceof Nc?(t.b=e,function(t,e){e&&!t.f&&(jc(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Rc(this,e),Pc(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=Sc(e,Dc)),t.b=new Nc(e,t.a))}function Cc(t,e,n){t.b.set(e,n)}function Oc(t){return Cc(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^na()).toString(36)),t}function Ec(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Sc(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Ic),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Ic(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}mc.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Sc(e,Ac,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(Sc(e,Ac,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Sc(n,"/"==n.charAt(0)?xc:Tc,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Sc(n,kc)),t.join("")};var Ac=/[#\/\?@]/g,Tc=/[#\?:]/g,xc=/[#\?]/g,Dc=/[#\?@]/g,kc=/#/g;function Nc(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function jc(t){t.a||(t.a=new dc,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function Rc(t,e){jc(t),e=Fc(t,e),pc(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,pc((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&fc(t)))}function Mc(t,e){return jc(t),e=Fc(t,e),pc(t.a.b,e)}function Pc(t,e,n){Rc(t,e),0<n.length&&(t.c=null,t.a.set(Fc(t,e),ua(n)),t.b+=n.length)}function Fc(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(zs=Nc.prototype).add=function(t,e){jc(this),this.c=null,t=Fc(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},zs.forEach=function(t,e){jc(this),this.a.forEach(function(n,r){sa(n,function(n){t.call(e,n,r,this)},this)},this)},zs.L=function(){jc(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},zs.K=function(t){jc(this);var e=[];if("string"==typeof t)Mc(this,t)&&(e=aa(e,this.a.get(Fc(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=aa(e,t[n])}return e},zs.set=function(t,e){return jc(this),this.c=null,Mc(this,t=Fc(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},zs.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},zs.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Lc=function(){return function(t,e){this.b=t,this.a=e}}();function Uc(t){this.g=t||Vc,t=Ks.PerformanceNavigationTiming?0<(t=Ks.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ks.ia&&Ks.ia.ya&&Ks.ia.ya()&&Ks.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Vc=10;function qc(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Bc(t){return t.b?1:t.a?t.a.size:0}function zc(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function Hc(t,e){t.a?t.a.add(e):t.b=e}function Wc(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Kc(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Bs(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return ua(t.c)}function Gc(){}function $c(){this.a=new Gc}function Yc(t,e,n){var r=n||"";try{hc(t,function(t,n){var i=t;Ys(t)&&(i=hu(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Y_){throw e.push(r+"type="+encodeURIComponent("_badmap")),Y_}}function Qc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Uc.prototype.cancel=function(){var t,e;if(this.c=Kc(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Bs(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},Gc.prototype.stringify=function(t){return Ks.JSON.stringify(t,void 0)},Gc.prototype.parse=function(t){return Ks.JSON.parse(t,void 0)};var Xc=Ks.JSON.parse;function Jc(t){uu.call(this),this.headers=new dc,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Zc,this.D=this.F=!1}ra(Jc,uu);var Zc="",tl=/^https?$/i,el=["POST","PUT"];function nl(t){return"content-type"==t.toLowerCase()}function rl(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,il(t),sl(t)}function il(t){t.u||(t.u=!0,cu(t,"complete"),cu(t,"error"))}function ol(t){if(t.b&&void 0!==Ws&&(!t.s[1]||4!=ul(t)||2!=t.W()))if(t.l&&4==ul(t))Eu(t.za,0,t);else if(cu(t,"readystatechange"),4==ul(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(gc)[1]||null;if(!o&&Ks.self&&Ks.self.location){var s=Ks.self.location.protocol;o=s.substr(0,s.length-1)}i=!tl.test(o?o.toLowerCase():"")}e=i}if(e)cu(t,"complete"),cu(t,"success");else{t.h=6;try{var a=2<ul(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",il(t)}}finally{sl(t)}}}function sl(t,e){if(t.a){al(t);var n=t.a,r=t.s[0]?Gs:null;t.a=null,t.s=null,e||cu(t,"ready");try{n.onreadystatechange=r}catch(Y_){}}}function al(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Ks.clearTimeout(t.m),t.m=null)}function ul(t){return t.a?t.a.readyState:0}function cl(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return ma(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Cc(t,e,n))}function ll(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function hl(t){this.pa=0,this.g=[],this.c=new ku,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=ll("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=ll("baseRetryDelayMs",5e3,t),this.Ra=ll("retryDelaySeedMs",1e4,t),this.Ma=ll("forwardChannelMaxRetries",2,t),this.ma=ll("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Uc(t&&t.concurrentRequestLimit),this.ka=new $c,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function dl(t){if(pl(t),3==t.v){var e=t.R++,n=bc(t.B);Cc(n,"SID",t.J),Cc(n,"RID",e),Cc(n,"TYPE","terminate"),vl(t,n),(e=new Xu(t,t.c,e,void 0)).H=2,e.i=Oc(bc(n)),n=!1,Ks.navigator&&Ks.navigator.sendBeacon&&(n=Ks.navigator.sendBeacon(e.i.toString(),"")),!n&&Ks.Image&&((new Image).src=e.i,n=!0),n||(e.a=Dl(e.g,null),e.a.ba(e.i)),e.u=na(),oc(e)}Tl(t)}function fl(t){t.a&&(Cl(t),t.a.cancel(),t.a=null)}function pl(t){fl(t),t.j&&(Ks.clearTimeout(t.j),t.j=null),El(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Ks.clearTimeout(t.h),t.h=null)}function gl(t,e){t.g.push(new Lc(t.Oa++,e)),3==t.v&&ml(t)}function ml(t){qc(t.b)||t.h||(t.h=!0,vu(t.Ba,t),t.u=0)}function bl(t,e){var n;n=e?e.f:t.R++;var r=bc(t.B);Cc(r,"SID",t.J),Cc(r,"RID",n),Cc(r,"AID",t.P),vl(t,r),t.i&&t.l&&cl(r,t.i,t.l),n=new Xu(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=yl(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Hc(t.b,n),ec(n,r,e)}function vl(t,e){t.f&&hc({},function(t,n){Cc(e,n,t)})}function yl(t,e,n){n=Math.min(t.g.length,n);var r=t.f?ta(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Yc(l,s,"req"+c+"_")}catch(ah){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function _l(t){t.a||t.j||(t.T=1,vu(t.Aa,t),t.o=0)}function wl(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=qu(ta(t.Aa,t),Il(t,t.o)),t.o++,0))}function Cl(t){null!=t.s&&(Ks.clearTimeout(t.s),t.s=null)}function Ol(t){t.a=new Xu(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=bc(t.la);Cc(e,"RID","rpc"),Cc(e,"SID",t.J),Cc(e,"CI",t.H?"0":"1"),Cc(e,"AID",t.P),vl(t,e),Cc(e,"TYPE","xmlhttp"),t.i&&t.l&&cl(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=Oc(bc(e)),n.j=null,n.I=!0,nc(n,t)}function El(t){null!=t.m&&(Ks.clearTimeout(t.m),t.m=null)}function Sl(t,e){var n=null;if(t.a==e){El(t),Cl(t),t.a=null;var r=2}else{if(!zc(t.b,e))return;n=e.s,Wc(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=na()-e.u;var i=t.u;cu(r=Mu(),new Vu(r,n,e,i)),ml(t)}else _l(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Bc(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=qu(ta(t.Ba,t,e),Il(t,t.u)),t.u++,0)))}(t,e)||2==r&&wl(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:Al(t,5);break;case 4:Al(t,10);break;case 3:Al(t,6);break;default:Al(t,2)}}function Il(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function Al(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=ta(t.Ya,t);n||(n=new mc("//www.google.com/images/cleardot.gif"),Ks.location&&"http"==Ks.location.protocol||vc(n,"https"),Oc(n)),function(t,e){var n=new ku;if(Ks.Image){var r=new Image;r.onload=ea(Qc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=ea(Qc,n,r,"TestLoadImage: error",!1,e),r.onabort=ea(Qc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=ea(Qc,n,r,"TestLoadImage: timeout",!1,e),Ks.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Uu(2);t.v=0,t.f&&t.f.ra(e),Tl(t),pl(t)}function Tl(t){t.v=0,t.I=-1,t.f&&(0==Kc(t.b).length&&0==t.g.length||(t.b.c.length=0,ua(t.g),t.g.length=0),t.f.qa())}function xl(t,e,n){var r=function(t){return t instanceof mc?bc(t):new mc(t,void 0)}(n);if(""!=r.c)e&&yc(r,e+"."+r.c),_c(r,r.h);else{var i=Ks.location;r=function(t,e,n,r){var i=new mc(null,void 0);return t&&vc(i,t),e&&yc(i,e),n&&_c(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&ma(t.V,function(t,e){Cc(r,e,t)}),n=t.na,(e=t.A)&&n&&Cc(r,e,n),Cc(r,"VER",t.ha),vl(t,r),r}function Dl(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Jc(t.Na)).F=t.C,e}function kl(){}function Nl(){if(Ea&&!(10<=Number(Ma)))throw Error("Environmental error: no available transport.")}function jl(t,e){uu.call(this),this.a=new hl(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!ca(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ca(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new Pl(this)}function Rl(t){$u.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Ml(){Yu.call(this),this.status=1}function Pl(t){this.a=t}(zs=Jc.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:Ku),this.a.onreadystatechange=ta(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void rl(this,o)}t=n||"";var i=new dc(this.headers);r&&hc(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=nl,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Ks.FormData&&t instanceof Ks.FormData,!(0<=oa(el,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{al(this),0<this.o&&((this.D=function(t){return Ea&&Ra(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=ta(this.xa,this)):this.m=Eu(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){rl(this,o)}},zs.xa=function(){void 0!==Ws&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,cu(this,"timeout"),this.abort(8))},zs.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,cu(this,"complete"),cu(this,"abort"),sl(this))},zs.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),sl(this,!0)),Jc.X.G.call(this)},zs.za=function(){this.j||(this.A||this.l||this.g?ol(this):this.Ua())},zs.Ua=function(){ol(this)},zs.W=function(){try{return 2<ul(this)?this.a.status:-1}catch(Ca){return-1}},zs.$=function(){try{return this.a?this.a.responseText:""}catch(Ca){return""}},zs.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Xc(e)}},zs.ua=function(){return this.h},zs.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(zs=hl.prototype).ha=8,zs.v=1,zs.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Xu(this,this.c,t,void 0),r=this.l;if(this.O&&(r?ya(r=ba(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=yl(this,n,e),Cc(i=bc(this.B),"RID",t),Cc(i,"CVER",22),this.A&&Cc(i,"X-HTTP-Session-Id",this.A),vl(this,i),this.i&&r&&cl(i,this.i,r),Hc(this.b,n),this.Ia&&Cc(i,"TYPE","init"),this.da?(Cc(i,"$req",e),Cc(i,"SID","null"),n.U=!0,ec(n,i,null)):ec(n,i,e),this.v=2}}else 3==this.v&&(t?bl(this,t):0==this.g.length||qc(this.b)||bl(this))},zs.Aa=function(){if(this.j=null,Ol(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=qu(ta(this.Ta,this),t)}},zs.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Uu(10),fl(this),Ol(this))},zs.Sa=function(){null!=this.m&&(this.m=null,fl(this),wl(this),Uu(19))},zs.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Uu(2)):(this.c.info("Failed to ping google.com"),Uu(1))},(zs=kl.prototype).ta=function(){},zs.sa=function(){},zs.ra=function(){},zs.qa=function(){},zs.Ja=function(){},Nl.prototype.a=function(t,e){return new jl(t,e)},ra(jl,uu),jl.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Uu(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=xl(t,null,t.fa),ml(t)},jl.prototype.close=function(){dl(this.a)},jl.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,gl(this.a,e)}else this.l?((e={}).__data__=hu(t),gl(this.a,e)):gl(this.a,t)},jl.prototype.G=function(){this.a.f=null,delete this.f,dl(this.a),delete this.a,jl.X.G.call(this)},ra(Rl,$u),ra(Ml,Yu),ra(Pl,kl),Pl.prototype.ta=function(){cu(this.a,"a")},Pl.prototype.sa=function(t){cu(this.a,new Rl(t))},Pl.prototype.ra=function(t){cu(this.a,new Ml(t))},Pl.prototype.qa=function(){cu(this.a,"b")},Nl.prototype.createWebChannel=Nl.prototype.a,jl.prototype.send=jl.prototype.h,jl.prototype.open=jl.prototype.g,jl.prototype.close=jl.prototype.close,Bu.NO_ERROR=0,Bu.TIMEOUT=8,Bu.HTTP_ERROR=6,zu.COMPLETE="complete",Wu.EventType=Gu,Gu.OPEN="a",Gu.CLOSE="b",Gu.ERROR="c",Gu.MESSAGE="d",uu.prototype.listen=uu.prototype.va,Jc.prototype.listenOnce=Jc.prototype.wa,Jc.prototype.getLastError=Jc.prototype.Qa,Jc.prototype.getLastErrorCode=Jc.prototype.ua,Jc.prototype.getStatus=Jc.prototype.W,Jc.prototype.getResponseJson=Jc.prototype.Pa,Jc.prototype.getResponseText=Jc.prototype.$,Jc.prototype.send=Jc.prototype.ba;var Fl=Bu,Ll=zu,Ul=ju,Vl=Wu,ql=Jc,Bl=n("mrSG"),zl=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();zl.o=-1;var Hl={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Wl=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Bl.c)(e,t),e}(Error),Kl=new Vs.b("@firebase/firestore");function Gl(){return Kl.logLevel}function $l(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Kl.logLevel<=Vs.a.DEBUG){var r=e.map(Xl);Kl.debug.apply(Kl,Object(Bl.f)(["Firestore (8.5.0): "+t],r))}}function Yl(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Kl.logLevel<=Vs.a.ERROR){var r=e.map(Xl);Kl.error.apply(Kl,Object(Bl.f)(["Firestore (8.5.0): "+t],r))}}function Ql(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Kl.logLevel<=Vs.a.WARN){var r=e.map(Xl);Kl.warn.apply(Kl,Object(Bl.f)(["Firestore (8.5.0): "+t],r))}}function Xl(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Y_){return t}}function Jl(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.5.0) INTERNAL ASSERTION FAILED: "+t;throw Yl(e),new Error(e)}function Zl(t,e){t||Jl()}function th(t,e){return t}function eh(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var nh=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=eh(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function rh(t,e){return t<e?-1:t>e?1:0}function ih(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function oh(t){return t+"\0"}var sh=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Wl(Hl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Wl(Hl.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Wl(Hl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wl(Hl.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?rh(this.nanoseconds,t.nanoseconds):rh(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),ah=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new sh(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function uh(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function ch(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function lh(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var hh=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Jl(),void 0===n?n=t.length-e:n>t.length-e&&Jl(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),dh=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Bl.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Wl(Hl.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(hh),fh=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ph=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Bl.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return fh.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Wl(Hl.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Wl(Hl.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Wl(Hl.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Wl(Hl.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(hh),gh=function(){function t(t){this.fields=t,t.sort(ph.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return ih(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),mh=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return rh(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();mh.EMPTY_BYTE_STRING=new mh("");var bh=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function vh(t){if(Zl(!!t),"string"==typeof t){var e=0,n=bh.exec(t);if(Zl(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:yh(t.seconds),nanos:yh(t.nanos)}}function yh(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function _h(t){return"string"==typeof t?mh.fromBase64String(t):mh.fromUint8Array(t)}function wh(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Ch(t){var e=t.mapValue.fields.__previous_value__;return wh(e)?Ch(e):e}function Oh(t){var e=vh(t.mapValue.fields.__local_write_time__.timestampValue);return new sh(e.seconds,e.nanos)}function Eh(t){return null==t}function Sh(t){return 0===t&&1/t==-1/0}function Ih(t){return"number"==typeof t&&Number.isInteger(t)&&!Sh(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var Ah=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(dh.fromString(e))},t.fromName=function(e){return new t(dh.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===dh.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return dh.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new dh(e.slice()))},t}();function Th(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wh(t)?4:10:Jl()}function xh(t,e){var n=Th(t);if(n!==Th(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Oh(t).isEqual(Oh(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=vh(t.timestampValue),r=vh(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return _h(t.bytesValue).isEqual(_h(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return yh(t.geoPointValue.latitude)===yh(e.geoPointValue.latitude)&&yh(t.geoPointValue.longitude)===yh(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return yh(t.integerValue)===yh(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=yh(t.doubleValue),r=yh(e.doubleValue);return n===r?Sh(n)===Sh(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return ih(t.arrayValue.values||[],e.arrayValue.values||[],xh);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(uh(n)!==uh(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!xh(n[i],r[i])))return!1;return!0}(t,e);default:return Jl()}}function Dh(t,e){return void 0!==(t.values||[]).find(function(t){return xh(t,e)})}function kh(t,e){var n=Th(t),r=Th(e);if(n!==r)return rh(n,r);switch(n){case 0:return 0;case 1:return rh(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=yh(t.integerValue||t.doubleValue),r=yh(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return Nh(t.timestampValue,e.timestampValue);case 4:return Nh(Oh(t),Oh(e));case 5:return rh(t.stringValue,e.stringValue);case 6:return function(t,e){var n=_h(t),r=_h(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=rh(n[i],r[i]);if(0!==o)return o}return rh(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=rh(yh(t.latitude),yh(e.latitude));return 0!==n?n:rh(yh(t.longitude),yh(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=kh(n[i],r[i]);if(o)return o}return rh(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=rh(r[s],o[s]);if(0!==a)return a;var u=kh(n[r[s]],i[o[s]]);if(0!==u)return u}return rh(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Jl()}}function Nh(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return rh(t,e);var n=vh(t),r=vh(e),i=rh(n.seconds,r.seconds);return 0!==i?i:rh(n.nanos,r.nanos)}function jh(t){return Rh(t)}function Rh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=vh(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?_h(t.bytesValue).toBase64():"referenceValue"in t?Ah.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=Rh(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+Rh(t.fields[o])}return e+"}"}(t.mapValue):Jl();var e}function Mh(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function Ph(t){return!!t&&"integerValue"in t}function Fh(t){return!!t&&"arrayValue"in t}function Lh(t){return!!t&&"nullValue"in t}function Uh(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Vh(t){return!!t&&"mapValue"in t}var qh=function(){function t(t){this.overlayMap=new Map,this.partialValue=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(e){return t.extractNestedValue(this.buildProto(),e)},t.prototype.toProto=function(){return this.field(ph.emptyPath())},t.prototype.set=function(t,e){this.setOverlay(t,e)},t.prototype.setAll=function(t){var e=this;t.forEach(function(t,n){t?e.set(n,t):e.delete(n)})},t.prototype.delete=function(t){this.setOverlay(t,null)},t.prototype.isEqual=function(t){return xh(this.buildProto(),t.buildProto())},t.prototype.setOverlay=function(t,e){for(var n=this.overlayMap,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===Th(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.applyOverlay=function(e,n){var r=this,i=!1,o=t.extractNestedValue(this.partialValue,e),s=Vh(o)?Object.assign({},o.mapValue.fields):{};return n.forEach(function(t,n){if(t instanceof Map){var o=r.applyOverlay(e.child(n),t);null!=o&&(s[n]=o,i=!0)}else null!==t?(s[n]=t,i=!0):s.hasOwnProperty(n)&&(delete s[n],i=!0)}),i?{mapValue:{fields:s}}:null},t.prototype.buildProto=function(){var t=this.applyOverlay(ph.emptyPath(),this.overlayMap);return null!=t&&(this.partialValue=t,this.overlayMap.clear()),this.partialValue},t.extractNestedValue=function(t,e){if(e.isEmpty())return t;for(var n=t,r=0;r<e.length-1;++r){if(!n.mapValue.fields)return null;if(!Vh(n=n.mapValue.fields[e.get(r)]))return null}return(n=(n.mapValue.fields||{})[e.lastSegment()])||null},t.prototype.clone=function(){return new t(this.buildProto())},t}();function Bh(t){var e=[];return ch(t.fields||{},function(t,n){var r=new ph([t]);if(Vh(n)){var i=Bh(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new gh(e)}var zh=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,ah.min(),qh.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,qh.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,qh.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=qh.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=qh.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.toProto())+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Hh=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Wh(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Hh(t,e,n,r,i,o,s)}function Kh(t){var e=th(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+jh(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Eh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=od(e.startAt)),e.endAt&&(n+="|ub:",n+=od(e.endAt)),e.h=n}return e.h}function Gh(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!ad(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!xh(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!cd(t.startAt,e.startAt)&&cd(t.endAt,e.endAt)}function $h(t){return Ah.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Yh=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Bl.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Qh(t,n,r):"array-contains"===n?new td(t,r):"in"===n?new ed(t,r):"not-in"===n?new nd(t,r):"array-contains-any"===n?new rd(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Xh(t,n):new Jh(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(kh(e,this.value)):null!==e&&Th(this.value)===Th(e)&&this.m(kh(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Jl()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Qh=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=Ah.fromName(r.referenceValue),i}return Object(Bl.c)(e,t),e.prototype.matches=function(t){var e=Ah.comparator(t.key,this.key);return this.m(e)},e}(Yh),Xh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Zh(0,n),r}return Object(Bl.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Yh),Jh=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Zh(0,n),r}return Object(Bl.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Yh);function Zh(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return Ah.fromName(t.referenceValue)})}var td=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Bl.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return Fh(e)&&Dh(e.arrayValue,this.value)},e}(Yh),ed=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Bl.c)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&Dh(this.value.arrayValue,e)},e}(Yh),nd=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Bl.c)(e,t),e.prototype.matches=function(t){if(Dh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!Dh(this.value.arrayValue,e)},e}(Yh),rd=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Bl.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!Fh(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return Dh(e.value.arrayValue,t)})},e}(Yh),id=function(t,e){this.position=t,this.before=e};function od(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return jh(t)}).join(",")}var sd=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function ad(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function ud(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?Ah.comparator(Ah.fromName(s.referenceValue),n.key):kh(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function cd(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!xh(t.position[n],e.position[n]))return!1;return!0}var ld=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function hd(t,e,n,r,i,o,s,a){return new ld(t,e,n,r,i,o,s,a)}function dd(t){return new ld(t)}function fd(t){return!Eh(t.limit)&&"F"===t.limitType}function pd(t){return!Eh(t.limit)&&"L"===t.limitType}function gd(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function md(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function bd(t){return null!==t.collectionGroup}function vd(t){var e=th(t);if(null===e.p){e.p=[];var n=md(e),r=gd(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new sd(n)),e.p.push(new sd(ph.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new sd(ph.keyField(),u))}}}return e.p}function yd(t){var e=th(t);if(!e.T)if("F"===e.limitType)e.T=Wh(e.path,e.collectionGroup,vd(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=vd(e);r<i.length;r++){var o=i[r];n.push(new sd(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new id(e.endAt.position,!e.endAt.before):null,a=e.startAt?new id(e.startAt.position,!e.startAt.before):null;e.T=Wh(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function _d(t,e,n){return new ld(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function wd(t,e){return Gh(yd(t),yd(e))&&t.limitType===e.limitType}function Cd(t){return Kh(yd(t))+"|lt:"+t.limitType}function Od(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+jh(e.value);var e}).join(", ")+"]"),Eh(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+od(t.startAt)),t.endAt&&(e+=", endAt: "+od(t.endAt)),"Target("+e+")"}(yd(t))+"; limitType="+t.limitType+")"}function Ed(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):Ah.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!ud(t.startAt,vd(t),e)||t.endAt&&ud(t.endAt,vd(t),e))}(t,e)}function Sd(t){return function(e,n){for(var r=!1,i=0,o=vd(t);i<o.length;i++){var s=o[i],a=Id(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function Id(t,e,n){var r=t.field.isKeyField()?Ah.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?kh(r,i):Jl()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Jl()}}function Ad(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Sh(e)?"-0":e}}function Td(t){return{integerValue:""+t}}function xd(t,e){return Ih(e)?Td(e):Ad(t,e)}var Dd=function(){this._=void 0};function kd(t,e,n){return t instanceof Rd?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof Md?Pd(t,e):t instanceof Fd?Ld(t,e):function(t,e){var n=jd(t,e),r=Vd(n)+Vd(t.A);return Ph(n)&&Ph(t.A)?Td(r):Ad(t.R,r)}(t,e)}function Nd(t,e,n){return t instanceof Md?Pd(t,e):t instanceof Fd?Ld(t,e):n}function jd(t,e){return t instanceof Ud?Ph(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Rd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Bl.c)(e,t),e}(Dd),Md=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Bl.c)(e,t),e}(Dd);function Pd(t,e){for(var n=qd(e),r=function(t){n.some(function(e){return xh(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Fd=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Bl.c)(e,t),e}(Dd);function Ld(t,e){for(var n=qd(e),r=function(t){n=n.filter(function(e){return!xh(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ud=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return Object(Bl.c)(e,t),e}(Dd);function Vd(t){return yh(t.integerValue||t.doubleValue)}function qd(t){return Fh(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Bd=function(t,e){this.field=t,this.transform=e},zd=function(t,e){this.version=t,this.transformResults=e},Hd=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Wd(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var Kd=function(){};function Gd(t,e,n){t instanceof Jd?function(t,e,n){var r=t.value.clone(),i=ef(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Zd?function(t,e,n){if(Wd(t.precondition,e)){var r=ef(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(tf(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function $d(t,e,n){t instanceof Jd?function(t,e,n){if(Wd(t.precondition,e)){var r=t.value.clone(),i=nf(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Xd(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Zd?function(t,e,n){if(Wd(t.precondition,e)){var r=nf(t.fieldTransforms,n,e),i=e.data;i.setAll(tf(t)),i.setAll(r),e.convertToFoundDocument(Xd(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Wd(t.precondition,e)&&e.convertToNoDocument(ah.min())}(t,e)}function Yd(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=jd(o.transform,s||null);null!=a&&(null==n&&(n=qh.empty()),n.set(o.field,a))}return n||null}function Qd(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&ih(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof Md&&e instanceof Md||t instanceof Fd&&e instanceof Fd?ih(t.elements,e.elements,xh):t instanceof Ud&&e instanceof Ud?xh(t.A,e.A):t instanceof Rd&&e instanceof Rd}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Xd(t){return t.isFoundDocument()?t.version:ah.min()}var Jd=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Bl.c)(e,t),e}(Kd),Zd=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Bl.c)(e,t),e}(Kd);function tf(t){var e=new Map;return t.fieldMask.fields.forEach(function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}}),e}function ef(t,e,n){var r=new Map;Zl(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,Nd(s,a,n[i]))}return r}function nf(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,kd(a,u,e))}return r}var rf,of,sf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Bl.c)(e,t),e}(Kd),af=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Bl.c)(e,t),e}(Kd),uf=function(t){this.count=t};function cf(t){switch(t){case Hl.OK:return Jl();case Hl.CANCELLED:case Hl.UNKNOWN:case Hl.DEADLINE_EXCEEDED:case Hl.RESOURCE_EXHAUSTED:case Hl.INTERNAL:case Hl.UNAVAILABLE:case Hl.UNAUTHENTICATED:return!1;case Hl.INVALID_ARGUMENT:case Hl.NOT_FOUND:case Hl.ALREADY_EXISTS:case Hl.PERMISSION_DENIED:case Hl.FAILED_PRECONDITION:case Hl.ABORTED:case Hl.OUT_OF_RANGE:case Hl.UNIMPLEMENTED:case Hl.DATA_LOSS:return!0;default:return Jl()}}function lf(t){if(void 0===t)return Yl("GRPC error has no .code"),Hl.UNKNOWN;switch(t){case rf.OK:return Hl.OK;case rf.CANCELLED:return Hl.CANCELLED;case rf.UNKNOWN:return Hl.UNKNOWN;case rf.DEADLINE_EXCEEDED:return Hl.DEADLINE_EXCEEDED;case rf.RESOURCE_EXHAUSTED:return Hl.RESOURCE_EXHAUSTED;case rf.INTERNAL:return Hl.INTERNAL;case rf.UNAVAILABLE:return Hl.UNAVAILABLE;case rf.UNAUTHENTICATED:return Hl.UNAUTHENTICATED;case rf.INVALID_ARGUMENT:return Hl.INVALID_ARGUMENT;case rf.NOT_FOUND:return Hl.NOT_FOUND;case rf.ALREADY_EXISTS:return Hl.ALREADY_EXISTS;case rf.PERMISSION_DENIED:return Hl.PERMISSION_DENIED;case rf.FAILED_PRECONDITION:return Hl.FAILED_PRECONDITION;case rf.ABORTED:return Hl.ABORTED;case rf.OUT_OF_RANGE:return Hl.OUT_OF_RANGE;case rf.UNIMPLEMENTED:return Hl.UNIMPLEMENTED;case rf.DATA_LOSS:return Hl.DATA_LOSS;default:return Jl()}}(of=rf||(rf={}))[of.OK=0]="OK",of[of.CANCELLED=1]="CANCELLED",of[of.UNKNOWN=2]="UNKNOWN",of[of.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",of[of.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",of[of.NOT_FOUND=5]="NOT_FOUND",of[of.ALREADY_EXISTS=6]="ALREADY_EXISTS",of[of.PERMISSION_DENIED=7]="PERMISSION_DENIED",of[of.UNAUTHENTICATED=16]="UNAUTHENTICATED",of[of.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",of[of.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",of[of.ABORTED=10]="ABORTED",of[of.OUT_OF_RANGE=11]="OUT_OF_RANGE",of[of.UNIMPLEMENTED=12]="UNIMPLEMENTED",of[of.INTERNAL=13]="INTERNAL",of[of.UNAVAILABLE=14]="UNAVAILABLE",of[of.DATA_LOSS=15]="DATA_LOSS";var hf=function(){function t(t,e){this.comparator=t,this.root=e||ff.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ff.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ff.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new df(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new df(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new df(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new df(this.root,t,this.comparator,!0)},t}(),df=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),ff=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Jl();if(this.right.isRed())throw Jl();var t=this.left.check();if(t!==this.right.check())throw Jl();return t+(this.isRed()?0:1)},t}();ff.EMPTY=null,ff.RED=!0,ff.BLACK=!1,ff.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Jl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Jl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Jl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Jl()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Jl()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new ff(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var pf=function(){function t(t){this.comparator=t,this.data=new hf(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new gf(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new gf(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),gf=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),mf=new hf(Ah.comparator);function bf(){return mf}var vf=new hf(Ah.comparator);function yf(){return vf}var _f=new hf(Ah.comparator);function wf(){return _f}var Cf=new pf(Ah.comparator);function Of(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Cf,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Ef=new pf(rh);function Sf(){return Ef}var If=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,Af.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(ah.min(),r,Sf(),bf(),Of())},t}(),Af=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(mh.EMPTY_BYTE_STRING,n,Of(),Of(),Of())},t}(),Tf=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},xf=function(t,e){this.targetId=t,this.V=e},Df=function(t,e,n,r){void 0===n&&(n=mh.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},kf=function(){function t(){this.S=0,this.D=Rf(),this.C=mh.EMPTY_BYTE_STRING,this.N=!1,this.F=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"k",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"O",{get:function(){return this.F},enumerable:!1,configurable:!0}),t.prototype.$=function(t){t.approximateByteSize()>0&&(this.F=!0,this.C=t)},t.prototype.M=function(){var t=Of(),e=Of(),n=Of();return this.D.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Jl()}}),new Af(this.C,this.N,t,e,n)},t.prototype.L=function(){this.F=!1,this.D=Rf()},t.prototype.B=function(t,e){this.F=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.F=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.F=!0,this.N=!0},t}(),Nf=function(){function t(t){this.W=t,this.G=new Map,this.H=bf(),this.J=jf(),this.Y=new pf(rh)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.tt(r=o[i],t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.$(t.resumeToken);break;case 1:r.K(),r.k||r.L(),r.$(t.resumeToken);break;case 2:r.K(),r.k||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.$(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.$(t.resumeToken));break;default:Jl()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach(function(t,r){n.st(r)&&e(r)})},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if($h(i))if(0===n){var o=new Ah(i.path);this.tt(e,o,zh.newNoDocument(o,ah.min()))}else Zl(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach(function(r,i){var o=e.ot(i);if(o){if(r.current&&$h(o.target)){var s=new Ah(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,zh.newNoDocument(s,t))}r.O&&(n.set(i,r.M()),r.L())}});var r=Of();this.J.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new If(t,n,this.Y,this.H,r);return this.H=bf(),this.J=jf(),this.Y=new pf(rh),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new kf,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new pf(rh),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||$l("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.k?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new kf),this.W.getRemoteKeysForTarget(t).forEach(function(n){e.tt(t,n,null)})},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function jf(){return new hf(Ah.comparator)}function Rf(){return new hf(Ah.comparator)}var Mf={asc:"ASCENDING",desc:"DESCENDING"},Pf={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ff=function(t,e){this.databaseId=t,this.I=e};function Lf(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uf(t,e){return t.I?e.toBase64():e.toUint8Array()}function Vf(t,e){return Lf(t,e.toTimestamp())}function qf(t){return Zl(!!t),ah.fromTimestamp(function(t){var e=vh(t);return new sh(e.seconds,e.nanos)}(t))}function Bf(t,e){return function(t){return new dh(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function zf(t){var e=dh.fromString(t);return Zl(fp(e)),e}function Hf(t,e){return Bf(t.databaseId,e.path)}function Wf(t,e){var n=zf(e);if(n.get(1)!==t.databaseId.projectId)throw new Wl(Hl.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Wl(Hl.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Ah(Yf(n))}function Kf(t,e){return Bf(t.databaseId,e)}function Gf(t){var e=zf(t);return 4===e.length?dh.emptyPath():Yf(e)}function $f(t){return new dh(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Yf(t){return Zl(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Qf(t,e,n){return{name:Hf(t,e),fields:n.toProto().mapValue.fields}}function Xf(t,e,n){var r=Wf(t,e.name),i=qf(e.updateTime),o=new qh({mapValue:{fields:e.fields}}),s=zh.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Jf(t,e){var n;if(e instanceof Jd)n={update:Qf(t,e.key,e.value)};else if(e instanceof sf)n={delete:Hf(t,e.key)};else if(e instanceof Zd)n={update:Qf(t,e.key,e.data),updateMask:dp(e.fieldMask)};else{if(!(e instanceof af))return Jl();n={verify:Hf(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Rd)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Md)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Fd)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Ud)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Jl()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Vf(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Jl()}(t,e.precondition)),n}function Zf(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Hd.updateTime(qf(t.updateTime)):void 0!==t.exists?Hd.exists(t.exists):Hd.none()}(e.currentDocument):Hd.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Zl("REQUEST_TIME"===e.setToServerValue),n=new Rd):"appendMissingElements"in e?n=new Md(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Fd(e.removeAllFromArray.values||[]):"increment"in e?n=new Ud(t,e.increment):Jl();var r=ph.fromServerFormat(e.fieldPath);return new Bd(r,n)}(t,e)}):[];if(e.update){var i=Wf(t,e.update.name),o=new qh({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new gh((t.fieldPaths||[]).map(function(t){return ph.fromServerFormat(t)}))}(e.updateMask);return new Zd(i,o,s,n,r)}return new Jd(i,o,n,r)}if(e.delete){var a=Wf(t,e.delete);return new sf(a,n)}if(e.verify){var u=Wf(t,e.verify);return new af(u,n)}return Jl()}function tp(t,e){return{documents:[Kf(t,e.path)]}}function ep(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Kf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Kf(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(Uh(t.value))return{unaryFilter:{field:up(t.field),op:"IS_NAN"}};if(Lh(t.value))return{unaryFilter:{field:up(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Uh(t.value))return{unaryFilter:{field:up(t.field),op:"IS_NOT_NAN"}};if(Lh(t.value))return{unaryFilter:{field:up(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:up(t.field),op:ap(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:up(t.field),direction:sp(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||Eh(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=ip(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ip(e.endAt)),n}function np(t){var e=Gf(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Zl(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=rp(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new sd(cp(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Eh(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=op(n.startAt));var l=null;return n.endAt&&(l=op(n.endAt)),hd(e,i,a,s,u,"F",c,l)}function rp(t){return t?void 0!==t.unaryFilter?[hp(t)]:void 0!==t.fieldFilter?[lp(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return rp(t)}).reduce(function(t,e){return t.concat(e)}):Jl():[]}function ip(t){return{before:t.before,values:t.position}}function op(t){return new id(t.values||[],!!t.before)}function sp(t){return Mf[t]}function ap(t){return Pf[t]}function up(t){return{fieldPath:t.canonicalString()}}function cp(t){return ph.fromServerFormat(t.fieldPath)}function lp(t){return Yh.create(cp(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Jl()}}(t.fieldFilter.op),t.fieldFilter.value)}function hp(t){switch(t.unaryFilter.op){case"IS_NAN":var e=cp(t.unaryFilter.field);return Yh.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=cp(t.unaryFilter.field);return Yh.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=cp(t.unaryFilter.field);return Yh.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=cp(t.unaryFilter.field);return Yh.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Jl()}}function dp(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function fp(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function pp(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=mp(e)),e=gp(t.get(n),e);return mp(e)}function gp(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function mp(t){return t+"\x01\x01"}function bp(t){var e=t.length;if(Zl(e>=2),2===e)return Zl("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),dh.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Jl(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Jl()}o=s+2}return new dh(r)}var vp=function(t,e){this.seconds=t,this.nanoseconds=e},yp=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};yp.store="owner",yp.key="owner";var _p=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};_p.store="mutationQueues",_p.keyPath="userId";var wp=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};wp.store="mutations",wp.keyPath="batchId",wp.userMutationsIndex="userMutationsIndex",wp.userMutationsKeyPath=["userId","batchId"];var Cp=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,pp(e)]},t.key=function(t,e,n){return[t,pp(e),n]},t}();Cp.store="documentMutations",Cp.PLACEHOLDER=new Cp;var Op=function(t,e){this.path=t,this.readTime=e},Ep=function(t,e){this.path=t,this.version=e},Sp=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};Sp.store="remoteDocuments",Sp.readTimeIndex="readTimeIndex",Sp.readTimeIndexPath="readTime",Sp.collectionReadTimeIndex="collectionReadTimeIndex",Sp.collectionReadTimeIndexPath=["parentPath","readTime"];var Ip=function(t){this.byteSize=t};Ip.store="remoteDocumentGlobal",Ip.key="remoteDocumentGlobalKey";var Ap=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};Ap.store="targets",Ap.keyPath="targetId",Ap.queryTargetsIndexName="queryTargetsIndex",Ap.queryTargetsKeyPath=["canonicalId","targetId"];var Tp=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};Tp.store="targetDocuments",Tp.keyPath=["targetId","path"],Tp.documentTargetsIndex="documentTargetsIndex",Tp.documentTargetsKeyPath=["path","targetId"];var xp=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};xp.key="targetGlobalKey",xp.store="targetGlobal";var Dp=function(t,e){this.collectionId=t,this.parent=e};Dp.store="collectionParents",Dp.keyPath=["collectionId","parent"];var kp=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};kp.store="clientMetadata",kp.keyPath="clientId";var Np=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};Np.store="bundles",Np.keyPath="bundleId";var jp=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};jp.store="namedQueries",jp.keyPath="name";var Rp=Object(Bl.f)(Object(Bl.f)([],Object(Bl.f)(Object(Bl.f)([],Object(Bl.f)(Object(Bl.f)([],Object(Bl.f)(Object(Bl.f)([],[_p.store,wp.store,Cp.store,Sp.store,Ap.store,yp.store,xp.store,Tp.store]),[kp.store])),[Ip.store])),[Dp.store])),[Np.store,jp.store]),Mp="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Pp=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Fp=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},Lp=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Jl(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Up=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new Fp,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new Bp(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Gp(e.target.error);n.ft.reject(new Bp(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Bp(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||($l("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Hp(e)},t}(),Vp=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t(Object(Us.r)())&&Yl("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return $l("SimpleDb","Removing database:",t),Wp(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=Object(Us.r)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return Object(Bl.b)(this,void 0,void 0,function(){var e,n=this;return Object(Bl.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:($l("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Bp(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Wl(Hl.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Bp(t,n))},i.onupgradeneeded=function(t){$l("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.wt.Rt(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){$l("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}})})},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Bl.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Bl.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Bl.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.At(t)];case 2:return a.db=h.sent(),e=Up.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),Lp.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.dt];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return $l("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),qp=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Wp(this.Pt.delete())},t}(),Bp=function(t){function e(e,n){var r=this;return(r=t.call(this,Hl.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Bl.c)(e,t),e}(Wl);function zp(t){return"IndexedDbTransactionError"===t.name}var Hp=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?($l("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):($l("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Wp(n)},t.prototype.add=function(t){return $l("SimpleDb","ADD",this.store.name,t,t),Wp(this.store.add(t))},t.prototype.get=function(t){var e=this;return Wp(this.store.get(t)).next(function(n){return void 0===n&&(n=null),$l("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return $l("SimpleDb","DELETE",this.store.name,t),Wp(this.store.delete(t))},t.prototype.count=function(){return $l("SimpleDb","COUNT",this.store.name),Wp(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Ft=function(t,e){$l("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.kt=!1;var r=this.cursor(n);return this.xt(r,function(t,e,n){return n.delete()})},t.prototype.Ot=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.$t=function(t){var e=this.cursor({});return new Lp(function(n,r){e.onerror=function(t){var e=Gp(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.xt=function(t,e){var n=[];return new Lp(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new qp(i),s=e(i.primaryKey,i.value,o);if(s instanceof Lp){var a=s.catch(function(t){return o.done(),Lp.reject(t)});n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}}).next(function(){return Lp.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.kt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Wp(t){return new Lp(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Gp(t.target.error);n(e)}})}var Kp=!1;function Gp(t){var e=Vp._t(Object(Us.r)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Wl("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Kp||(Kp=!0,setTimeout(function(){throw r},0)),r}}return t}var $p=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return Object(Bl.c)(e,t),e}(Pp);function Yp(t,e){var n=th(t);return Vp.It(n.Mt,e)}var Qp=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Gd(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&$d(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&$d(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach(function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(ah.min())})},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Of())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&ih(this.mutations,t.mutations,function(t,e){return Qd(t,e)})&&ih(this.baseMutations,t.baseMutations,function(t,e){return Qd(t,e)})},t}(),Xp=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Zl(e.mutations.length===r.length);for(var i=wf(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Jp=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=ah.min()),void 0===o&&(o=ah.min()),void 0===s&&(s=mh.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Zp=function(t){this.Lt=t};function tg(t,e){if(e.document)return Xf(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=Ah.fromSegments(e.noDocument.path),r=og(e.noDocument.readTime),i=zh.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=Ah.fromSegments(e.unknownDocument.path);return r=og(e.unknownDocument.version),zh.newUnknownDocument(o,r)}return Jl()}function eg(t,e,n){var r=ng(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Hf(t,e.key),fields:e.data.toProto().mapValue.fields,updateTime:Lf(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new Sp(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=ig(e.version);return s=e.hasCommittedMutations,new Sp(null,new Op(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),l=ig(e.version);return new Sp(new Ep(c,l),null,null,!0,r,i)}return Jl()}function ng(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function rg(t){var e=new sh(t[0],t[1]);return ah.fromTimestamp(e)}function ig(t){var e=t.toTimestamp();return new vp(e.seconds,e.nanoseconds)}function og(t){var e=new sh(t.seconds,t.nanoseconds);return ah.fromTimestamp(e)}function sg(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Zf(t.Lt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Zf(t.Lt,e)}),o=sh.fromMillis(e.localWriteTimeMs);return new Qp(e.batchId,o,n,i)}function ag(t){var e,n,r=og(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?og(t.lastLimboFreeSnapshotVersion):ah.min();return void 0!==t.query.documents?(Zl(1===(n=t.query).documents.length),e=yd(dd(Gf(n.documents[0])))):e=function(t){return yd(np(t))}(t.query),new Jp(e,t.targetId,0,t.lastListenSequenceNumber,r,i,mh.fromBase64String(t.resumeToken))}function ug(t,e){var n,r=ig(e.snapshotVersion),i=ig(e.lastLimboFreeSnapshotVersion);n=$h(e.target)?tp(t.Lt,e.target):ep(t.Lt,e.target);var o=e.resumeToken.toBase64();return new Ap(e.targetId,Kh(e.target),r,o,e.sequenceNumber,i,n)}function cg(t){var e=np({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?_d(e,e.limit,"L"):e}var lg=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return hg(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:og(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return hg(t).put({bundleId:(n=e).id,createTime:ig(qf(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return dg(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:cg(e.bundledQuery),readTime:og(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return dg(t).put(function(t){return{name:t.name,readTime:ig(qf(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function hg(t){return Yp(t,Np.store)}function dg(t){return Yp(t,jp.store)}var fg=function(){function t(){this.Bt=new pg}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),Lp.resolve()},t.prototype.getCollectionParents=function(t,e){return Lp.resolve(this.Bt.getEntries(e))},t}(),pg=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new pf(dh.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new pf(dh.comparator)).toArray()},t}(),gg=function(){function t(){this.qt=new pg}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.qt.add(e)});var o={collectionId:r,parent:pp(i)};return mg(t).put(o)}return Lp.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[oh(e),""],!1,!0);return mg(t).Nt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(bp(o.parent))}return n})},t}();function mg(t){return Yp(t,Dp.store)}var bg={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},vg=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function yg(t,e,n){var r=t.store(wp.store),i=t.store(Cp.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ot({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Zl(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var d=h[l],f=Cp.key(e,d.key.path,n.batchId);o.push(i.delete(f)),c.push(d.key)}return Lp.waitFor(o).next(function(){return c})}function _g(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Jl();e=t.noDocument}return JSON.stringify(e).length}vg.DEFAULT_COLLECTION_PERCENTILE=10,vg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,vg.DEFAULT=new vg(41943040,vg.DEFAULT_COLLECTION_PERCENTILE,vg.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),vg.DISABLED=new vg(-1,0,0);var wg=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Qt={}}return t.Kt=function(e,n,r,i){return Zl(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Og(t).Ot({index:wp.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=Eg(t),s=Og(t);return s.add({}).next(function(a){Zl("number"==typeof a);for(var u=new Qp(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return Jf(t.Lt,e)}),i=n.mutations.map(function(e){return Jf(t.Lt,e)});return new wp(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),l=[],h=new pf(function(t,e){return rh(t.canonicalString(),e.canonicalString())}),d=0,f=r;d<f.length;d++){var p=f[d],g=Cp.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,Cp.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Ut.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.Qt[a]=u.keys()}),Lp.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return Og(t).get(e).next(function(t){return t?(Zl(t.userId===n.userId),sg(n.R,t)):null})},t.prototype.jt=function(t,e){var n=this;return this.Qt[e]?Lp.resolve(this.Qt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.Qt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return Og(t).Ot({index:wp.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Zl(e.batchId>=r),o=sg(n.R,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return Og(t).Ot({index:wp.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Og(t).Nt(wp.userMutationsIndex,n).next(function(t){return t.map(function(t){return sg(e.R,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=Cp.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return Eg(t).Ot({range:i},function(r,i,s){var a=r[0],u=r[2],c=bp(r[1]);if(a===n.userId&&e.path.isEqual(c))return Og(t).get(u).next(function(t){if(!t)throw Jl();Zl(t.userId===n.userId),o.push(sg(n.R,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new pf(rh),i=[];return e.forEach(function(e){var o=Cp.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=Eg(t).Ot({range:s},function(t,i,o){var s=t[0],a=t[2],u=bp(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),Lp.waitFor(i).next(function(){return n.Wt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=Cp.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new pf(rh);return Eg(t).Ot({range:s},function(t,e,o){var s=t[0],u=t[2],c=bp(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Wt(t,a)})},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Og(t).get(e).next(function(t){if(null===t)throw Jl();Zl(t.userId===n.userId),r.push(sg(n.R,t))}))}),Lp.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return yg(t.Mt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Gt(e.batchId)}),Lp.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Gt=function(t){delete this.Qt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return Lp.resolve();var r=IDBKeyRange.lowerBound(Cp.prefixForUser(e.userId)),i=[];return Eg(t).Ot({range:r},function(t,n,r){if(t[0]===e.userId){var o=bp(t[1]);i.push(o)}else r.done()}).next(function(){Zl(0===i.length)})})},t.prototype.containsKey=function(t,e){return Cg(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return Sg(t).get(this.userId).next(function(t){return t||new _p(e.userId,-1,"")})},t}();function Cg(t,e,n){var r=Cp.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return Eg(t).Ot({range:o,kt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function Og(t){return Yp(t,wp.store)}function Eg(t){return Yp(t,Cp.store)}function Sg(t){return Yp(t,_p.store)}var Ig=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),Ag=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next(function(n){var r=new Ig(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next(function(t){return ah.fromTimestamp(new sh(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next(function(){return n.Xt(t).next(function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return Tg(t).delete(e.targetId)}).next(function(){return n.Xt(t)}).next(function(e){return Zl(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return Tg(t).Ot(function(s,a){var u=ag(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return Lp.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return Tg(t).Ot(function(t,n){var r=ag(n);e(r)})},t.prototype.Xt=function(t){return xg(t).get(xp.key).next(function(t){return Zl(null!==t),t})},t.prototype.Zt=function(t,e){return xg(t).put(xp.key,e)},t.prototype.te=function(t,e){return Tg(t).put(ug(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Kh(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return Tg(t).Ot({range:r,index:Ap.queryTargetsIndexName},function(t,n,r){var o=ag(n);Gh(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=Dg(t);return e.forEach(function(e){var s=pp(e.path);i.push(o.put(new Tp(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),Lp.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=Dg(t);return Lp.forEach(e,function(e){var o=pp(e.path);return Lp.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=Dg(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Dg(t),i=Of();return r.Ot({range:n,kt:!0},function(t,e,n){var r=bp(t[1]),o=new Ah(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=pp(e.path),r=IDBKeyRange.bound([n],[oh(n)],!1,!0),i=0;return Dg(t).Ot({index:Tp.documentTargetsIndex,kt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.lt=function(t,e){return Tg(t).get(e).next(function(t){return t?ag(t):null})},t}();function Tg(t){return Yp(t,Ap.store)}function xg(t){return Yp(t,xp.store)}function Dg(t){return Yp(t,Tp.store)}function kg(t){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(e){if(t.code!==Hl.FAILED_PRECONDITION||t.message!==Mp)throw t;return $l("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Ng(t,e){var n=t[1],r=e[1],i=rh(t[0],e[0]);return 0===i?rh(n,r):i}var jg=function(){function t(t){this.ne=t,this.buffer=new pf(Ng),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Ng(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Rg=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;$l("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Bl.b)(e,void 0,void 0,function(){var e;return Object(Bl.d)(this,function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return zp(e=n.sent())?($l("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,kg(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}})})})},t}(),Mg=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return Lp.resolve(zl.o);var r=new jg(e);return this.ae.forEachTarget(t,function(t){return r.re(t.sequenceNumber)}).next(function(){return n.ae.le(t,function(t){return r.re(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?($l("LruGarbageCollector","Garbage collection skipped; disabled"),Lp.resolve(bg)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?($l("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),bg):n.fe(t,e)})},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?($l("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Gl()<=Vs.a.DEBUG&&$l("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),Lp.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Pg=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Mg(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.de=function(t){var e=0;return this.le(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Fg(t,n)},t.prototype.removeReference=function(t,e,n){return Fg(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Fg(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return Sg(t).$t(function(r){return Cg(t,r,e).next(function(t){return t&&(n=!0),Lp.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,function(s,a){if(a<=e){var u=n._e(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),Dg(t).delete([0,pp(s.path)])})});i.push(u)}}).next(function(){return Lp.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Fg(t,e)},t.prototype.we=function(t,e){var n,r=Dg(t),i=zl.o;return r.Ot({index:Tp.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==zl.o&&e(new Ah(bp(n)),i),i=s,n=o):i=zl.o}).next(function(){i!==zl.o&&e(new Ah(bp(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Fg(t,e){return Dg(t).put(function(t,e){return new Tp(0,pp(t.path),e)}(e,t.currentSequenceNumber))}var Lg=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){ch(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return lh(this.inner)},t}(),Ug=function(){function t(){this.changes=new Lg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:ah.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:zh.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?Lp.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),Vg=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return zg(t).put(Hg(e),n)},t.prototype.removeEntry=function(t,e){var n=zg(t),r=Hg(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.me(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return zg(t).get(Hg(e)).next(function(t){return n.ye(e,t)})},t.prototype.ge=function(t,e){var n=this;return zg(t).get(Hg(e)).next(function(t){return{document:n.ye(e,t),size:_g(t)}})},t.prototype.getEntries=function(t,e){var n=this,r=bf();return this.pe(t,e,function(t,e){var i=n.ye(t,e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.Ee=function(t,e){var n=this,r=bf(),i=new hf(Ah.comparator);return this.pe(t,e,function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,_g(e))}).next(function(){return{documents:r,Te:i}})},t.prototype.pe=function(t,e,n){if(e.isEmpty())return Lp.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return zg(t).Ot({range:r},function(t,e,r){for(var s=Ah.fromSegments(t);o&&Ah.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=bf(),o=e.path.length+1,s={};if(n.isEqual(ah.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=ng(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=Sp.collectionReadTimeIndex}return zg(t).Ot(s,function(t,n,s){if(t.length===o){var a=tg(r.R,n);e.path.isPrefixOf(a.key.path)?Ed(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new qg(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Bg(t).get(Ip.key).next(function(t){return Zl(!!t),t})},t.prototype.me=function(t,e){return Bg(t).put(Ip.key,e)},t.prototype.ye=function(t,e){if(e){var n=tg(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(ah.min()))return n}return zh.newInvalidDocument(t)},t}(),qg=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new Lg(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Bl.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new pf(function(t,e){return rh(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=eg(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=_g(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=eg(e.Ie.R,zh.newNoDocument(o,ah.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,l))}else n.push(e.Ie.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))}),n.push(this.Ie.updateMetadata(t,r)),Lp.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next(function(t){return n.Ae.set(e,t.size),t.document})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next(function(t){var e=t.documents;return t.Te.forEach(function(t,e){n.Ae.set(t,e)}),e})},e}(Ug);function Bg(t){return Yp(t,Ip.store)}function zg(t){return Yp(t,Sp.store)}function Hg(t){return t.path.toArray()}var Wg=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Zl(n<r&&n>=0&&r<=11);var o=new Up("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(yp.store)}(t),function(t){t.createObjectStore(_p.store,{keyPath:_p.keyPath}),t.createObjectStore(wp.store,{keyPath:wp.keyPath,autoIncrement:!0}).createIndex(wp.userMutationsIndex,wp.userMutationsKeyPath,{unique:!0}),t.createObjectStore(Cp.store)}(t),Kg(t),function(t){t.createObjectStore(Sp.store)}(t));var s=Lp.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(Tp.store),t.deleteObjectStore(Ap.store),t.deleteObjectStore(xp.store)}(t),Kg(t)),s=s.next(function(){return function(t){var e=t.store(xp.store),n=new xp(0,0,ah.min().toTimestamp(),0);return e.put(xp.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(wp.store).Nt().next(function(n){t.deleteObjectStore(wp.store),t.createObjectStore(wp.store,{keyPath:wp.keyPath,autoIncrement:!0}).createIndex(wp.userMutationsIndex,wp.userMutationsKeyPath,{unique:!0});var r=e.store(wp.store),i=n.map(function(t){return r.put(t)});return Lp.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(kp.store,{keyPath:kp.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.Re(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(Ip.store)}(t),i.be(o)})),n<7&&r>=7&&(s=s.next(function(){return i.ve(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Pe(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(Sp.store);e.createIndex(Sp.readTimeIndex,Sp.readTimeIndexPath,{unique:!1}),e.createIndex(Sp.collectionReadTimeIndex,Sp.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.Ve(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(Np.store,{keyPath:Np.keyPath})}(t),function(t){t.createObjectStore(jp.store,{keyPath:jp.keyPath})}(t)})),s},t.prototype.be=function(t){var e=0;return t.store(Sp.store).Ot(function(t,n){e+=_g(n)}).next(function(){var n=new Ip(e);return t.store(Ip.store).put(Ip.key,n)})},t.prototype.Re=function(t){var e=this,n=t.store(_p.store),r=t.store(wp.store);return n.Nt().next(function(n){return Lp.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(wp.userMutationsIndex,i).next(function(r){return Lp.forEach(r,function(r){Zl(r.userId===n.userId);var i=sg(e.R,r);return yg(t,n.userId,i).next(function(){})})})})})},t.prototype.ve=function(t){var e=t.store(Tp.store),n=t.store(Sp.store);return t.store(xp.store).get(xp.key).next(function(t){var r=[];return n.Ot(function(n,i){var o=new dh(n),s=function(t){return[0,pp(t)]}(o);r.push(e.get(s).next(function(n){return n?Lp.resolve():function(n){return e.put(new Tp(0,pp(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return Lp.waitFor(r)})})},t.prototype.Pe=function(t,e){t.createObjectStore(Dp.store,{keyPath:Dp.keyPath});var n=e.store(Dp.store),r=new pg,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:pp(i)})}};return e.store(Sp.store).Ot({kt:!0},function(t,e){var n=new dh(t);return i(n.popLast())}).next(function(){return e.store(Cp.store).Ot({kt:!0},function(t,e){var n=bp(t[1]);return i(n.popLast())})})},t.prototype.Ve=function(t){var e=this,n=t.store(Ap.store);return n.Ot(function(t,r){var i=ag(r),o=ug(e.R,i);return n.put(o)})},t}();function Kg(t){t.createObjectStore(Tp.store,{keyPath:Tp.keyPath}).createIndex(Tp.documentTargetsIndex,Tp.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(Ap.store,{keyPath:Ap.keyPath}).createIndex(Ap.queryTargetsIndexName,Ap.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(xp.store)}var Gg="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",$g=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=l,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Fe=null,this.inForeground=!1,this.ke=null,this.Oe=null,this.$e=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Wl(Hl.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Pg(this,i),this.Le=n+"main",this.R=new Zp(u),this.Be=new Vp(this.Le,11,new Wg(this.R)),this.qe=new Ag(this.referenceDelegate,this.R),this.Ut=new gg,this.Ue=function(t,e){return new Vg(t,e)}(this.R,this.Ut),this.Qe=new lg,this.window&&this.window.localStorage?this.Ke=this.window.localStorage:(this.Ke=null,!1===l&&Yl("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Wl(Hl.FAILED_PRECONDITION,Gg);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.qe.getHighestSequenceNumber(e)})}).then(function(e){t.Ne=new zl(e,t.De)}).then(function(){t.xe=!0}).catch(function(e){return t.Be&&t.Be.close(),Promise.reject(e)})},t.prototype.He=function(t){var e=this;return this.Me=function(n){return Object(Bl.b)(e,void 0,void 0,function(){return Object(Bl.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt(function(n){return Object(Bl.b)(e,void 0,void 0,function(){return Object(Bl.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget(function(){return Object(Bl.b)(e,void 0,void 0,function(){return Object(Bl.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Qg(e).put(new kp(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.Je(e).next(function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable(function(){return t.Me(!1)}))})}).next(function(){return t.Ye(e)}).next(function(n){return t.isPrimary&&!n?t.Xe(e).next(function(){return!1}):!!n&&t.Ze(e).next(function(){return!0})})}).catch(function(e){if(zp(e))return $l("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return $l("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Se.enqueueRetryable(function(){return t.Me(e)}),t.isPrimary=e})},t.prototype.Je=function(t){var e=this;return Yg(t).get(yp.key).next(function(t){return Lp.resolve(e.tn(t))})},t.prototype.en=function(t){return Qg(t).delete(this.clientId)},t.prototype.nn=function(){return Object(Bl.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Bl.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.$e,18e5)?[3,2]:(this.$e=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Yp(t,kp.store);return e.Nt().next(function(t){var n=r.rn(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return Lp.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Ke)for(e=0,n=t;e<n.length;e++)this.Ke.removeItem(this.on(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.ze=function(){var t=this;this.Oe=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.je().then(function(){return t.nn()}).then(function(){return t.ze()})})},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?Lp.resolve(!0):Yg(t).get(yp.key).next(function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Wl(Hl.FAILED_PRECONDITION,Gg);return!1}}return!(!e.networkEnabled||!e.inForeground)||Qg(t).Nt().next(function(t){return void 0===e.rn(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&$l("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Bl.b)(this,void 0,void 0,function(){var t=this;return Object(Bl.d)(this,function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.Oe&&(this.Oe.cancel(),this.Oe=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[yp.store,kp.store],function(e){var n=new $p(e,zl.o);return t.Xe(n).next(function(){return t.en(n)})})];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}})})},t.prototype.rn=function(t,e){var n=this;return t.filter(function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)})},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Qg(e).Nt().next(function(e){return t.rn(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return wg.Kt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r,i=this;return $l("IndexedDbPersistence","Starting transaction:",t),this.Be.runTransaction(t,"readonly"===e?"readonly":"readwrite",Rp,function(o){return r=new $p(o,i.Ne?i.Ne.next():zl.o),"readwrite-primary"===e?i.Je(r).next(function(t){return!!t||i.Ye(r)}).next(function(e){if(!e)throw Yl("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Se.enqueueRetryable(function(){return i.Me(!1)}),new Wl(Hl.FAILED_PRECONDITION,Mp);return n(r)}).next(function(t){return i.Ze(r).next(function(){return t})}):i.dn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.dn=function(t){var e=this;return Yg(t).get(yp.key).next(function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Wl(Hl.FAILED_PRECONDITION,Gg)})},t.prototype.Ze=function(t){var e=new yp(this.clientId,this.allowTabSynchronization,Date.now());return Yg(t).put(yp.key,e)},t.yt=function(){return Vp.yt()},t.prototype.Xe=function(t){var e=this,n=Yg(t);return n.get(yp.key).next(function(t){return e.tn(t)?($l("IndexedDbPersistence","Releasing primary lease."),n.delete(yp.key)):Lp.resolve()})},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Yl("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ke=function(){t.Se.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.je()})},this.document.addEventListener("visibilitychange",this.ke),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.ke&&(this.document.removeEventListener("visibilitychange",this.ke),this.ke=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Fe=function(){e.un(),e.Se.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Fe))},t.prototype.hn=function(){this.Fe&&(this.window.removeEventListener("unload",this.Fe),this.Fe=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Ke)||void 0===e?void 0:e.getItem(this.on(t)));return $l("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Yl("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Ke)try{this.Ke.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Yl("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Ke)try{this.Ke.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Yg(t){return Yp(t,yp.store)}function Qg(t){return Yp(t,kp.store)}function Xg(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Jg=function(t,e){this.progress=t,this.wn=e},Zg=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.yn(t,e,r)})},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next(function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t})},t.prototype.gn=function(t,e){t.forEach(function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)})},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next(function(e){return n.En(t,e).next(function(){return e})})},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(t){return n.gn(e,t)})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return Ah.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):bd(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new Ah(e)).next(function(t){var e=yf();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e})},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=yf();return this.Ut.getCollectionParents(t,i).next(function(s){return Lp.forEach(s,function(s){var a=function(t,e){return new ld(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Rn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=r.get(c);null==l&&(l=zh.newInvalidDocument(c),r=r.insert(c,l)),$d(u,l,o.localWriteTime),l.isFoundDocument()||(r=r.remove(c))}})}).next(function(){return r.forEach(function(t,n){Ed(e,n)||(r=r.remove(t))}),r})},t.prototype.Rn=function(t,e,n){for(var r=Of(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Zd&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next(function(t){return t.forEach(function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))}),c})},t}(),tm=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=Of(),i=Of(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),em=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(ah.min())?this.Dn(t,e):this.Sn.pn(t,r).next(function(o){var s=i.Cn(e,o);return(fd(e)||pd(e))&&i.Nn(e.limitType,s,r,n)?i.Dn(t,e):(Gl()<=Vs.a.DEBUG&&$l("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),Od(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.Cn=function(t,e){var n=new pf(Sd(t));return e.forEach(function(e,r){Ed(t,r)&&(n=n.add(r))}),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Gl()<=Vs.a.DEBUG&&$l("QueryEngine","Using full collection scan to execute query:",Od(e)),this.Sn.getDocumentsMatchingQuery(t,e,ah.min())},t}(),nm=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.Fn=new hf(rh),this.kn=new Lg(function(t){return Kh(t)},Gh),this.On=ah.min(),this._n=t.getMutationQueue(n),this.$n=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Zg(this.$n,this._n,this.persistence.getIndexManager()),this.Qe=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Fn)})},t}();function rm(t,e,n,r){return new nm(t,e,n,r)}function im(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Bl.d)(this,function(s){switch(s.label){case 0:return n=th(t),r=n._n,i=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n._n.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Zg(n.$n,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=Of(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var d=0,f=e;d<f.length;d++){var p=f[d];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.pn(t,s).next(function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n._n=r,n.Mn=i,n.xn.Vn(n.Mn),o)]}})})}function om(t,e){var n=th(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.$n.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=Lp.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=n.docVersions.get(t);Zl(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))})}),s.next(function(){return t._n.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}function sm(t){var e=th(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.qe.getLastRemoteSnapshotVersion(t)})}function am(t,e){var n=th(t),r=e.snapshotVersion,i=n.Fn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.$n.newChangeBuffer({trackRemovals:!0});i=n.Fn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Zl(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}});var a=bf();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(um(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(ah.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next(function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return Lp.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Mn.En(t,a)}).next(function(){return a})}).then(function(t){return n.Fn=i,t})}function um(t,e,n,r,i){var o=Of();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=bf();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(ah.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):$l("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function cm(t,e){var n=th(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)})}function lm(t,e){var n=th(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.qe.getTargetData(t,e).next(function(i){return i?Lp.resolve(r=i):n.qe.allocateTargetId(t).next(function(i){return r=new Jp(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Fn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Fn=n.Fn.insert(t.targetId,t),n.kn.set(e,t.targetId)),t})}function hm(t,e,n){return Object(Bl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Bl.d)(this,function(a){switch(a.label){case 0:r=th(t),i=r.Fn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!zp(s=a.sent()))throw s;return $l("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Fn=r.Fn.remove(e),r.kn.delete(i.target),[2]}})})}function dm(t,e,n){var r=th(t),i=ah.min(),o=Of();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=th(t),i=r.kn.get(n);return void 0!==i?Lp.resolve(r.Fn.get(i)):r.qe.getTargetData(e,n)}(r,t,yd(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:ah.min(),n?o:Of())}).next(function(t){return{documents:t,Bn:o}})})}function fm(t,e){var n=th(t),r=th(n.qe),i=n.Fn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.lt(t,e).next(function(t){return t?t.target:null})})}function pm(t){var e=th(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=th(t),i=bf(),o=ng(n),s=zg(e),a=IDBKeyRange.lowerBound(o,!0);return s.Ot({index:Sp.readTimeIndex,range:a},function(t,e){var n=tg(r.R,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{wn:i,readTime:rg(o)}})}(e.$n,t,e.On)}).then(function(t){var n=t.wn;return e.On=t.readTime,n})}function gm(t){return Object(Bl.b)(this,void 0,void 0,function(){var e;return Object(Bl.d)(this,function(n){return[2,(e=th(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=zg(t),n=ah.min();return e.Ot({index:Sp.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=rg(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.On=t})]})})}function mm(t,e,n,r){return Object(Bl.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,d,f;return Object(Bl.d)(this,function(p){switch(p.label){case 0:for(i=th(t),o=Of(),s=bf(),a=wf(),u=0,c=n;u<c.length;u++)h=e.qn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.Un(l)),a=a.insert(h,e.Qn(l.metadata.readTime));return d=i.$n.newChangeBuffer({trackRemovals:!0}),[4,lm(i,function(t){return yd(dd(dh.fromString("__bundle__/docs/"+t)))}(r))];case 1:return f=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return um(t,d,s,ah.min(),a).next(function(e){return d.apply(t),e}).next(function(e){return i.qe.removeMatchingKeysForTargetId(t,f.targetId).next(function(){return i.qe.addMatchingKeys(t,o,f.targetId)}).next(function(){return i.Mn.En(t,e)}).next(function(){return e})})})]}})})}function bm(t,e,n){return void 0===n&&(n=Of()),Object(Bl.b)(this,void 0,void 0,function(){var r,i;return Object(Bl.d)(this,function(o){switch(o.label){case 0:return[4,lm(t,yd(cg(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=th(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=qf(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.Qe.saveNamedQuery(t,e);var s=r.withResumeToken(mh.EMPTY_BYTE_STRING,o);return i.Fn=i.Fn.insert(s.targetId,s),i.qe.updateTargetData(t,s).next(function(){return i.qe.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.qe.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.Qe.saveNamedQuery(t,e)})})]}})})}var vm=function(){function t(t){this.R=t,this.Kn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return Lp.resolve(this.Kn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Kn.set(e.id,{id:(n=e).id,version:n.version,createTime:qf(n.createTime)}),Lp.resolve()},t.prototype.getNamedQuery=function(t,e){return Lp.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:cg(t.bundledQuery),readTime:qf(t.readTime)}}(e)),Lp.resolve()},t}(),ym=function(){function t(){this.Wn=new pf(_m.Gn),this.zn=new pf(_m.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new _m(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.Yn(new _m(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.Zn=function(t){var e=this,n=new Ah(new dh([])),r=new _m(n,t),i=new _m(n,t+1),o=[];return this.zn.forEachInRange([r,i],function(t){e.Yn(t),o.push(t.key)}),o},t.prototype.ts=function(){var t=this;this.Wn.forEach(function(e){return t.Yn(e)})},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new Ah(new dh([])),n=new _m(e,t),r=new _m(e,t+1),i=Of();return this.zn.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new _m(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),_m=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return Ah.comparator(t.key,e.key)||rh(t.ns,e.ns)},t.Hn=function(t,e){return rh(t.ns,e.ns)||Ah.comparator(t.key,e.key)},t}(),wm=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new pf(_m.Gn)}return t.prototype.checkEmpty=function(t){return Lp.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++;var o=new Qp(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new _m(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return Lp.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return Lp.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.cs(e+1),r=n<0?0:n;return Lp.resolve(this._n.length>r?this._n[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return Lp.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return Lp.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new _m(e,0),i=new _m(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],function(t){var e=n.os(t.ns);o.push(e)}),Lp.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new pf(rh);return e.forEach(function(t){var e=new _m(t,0),i=new _m(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],function(t){r=r.add(t.ns)})}),Lp.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;Ah.isDocumentKey(i)||(i=i.child(""));var o=new _m(new Ah(i),0),s=new pf(rh);return this.rs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)},o),Lp.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.os(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Zl(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return Lp.forEach(e.mutations,function(i){var o=new _m(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.rs=r})},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new _m(e,0),r=this.rs.firstAfterOrEqual(n);return Lp.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return Lp.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),Cm=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new hf(Ah.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return Lp.resolve(n?n.document.clone():zh.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=bf();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():zh.newInvalidDocument(t))}),Lp.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=bf(),i=new Ah(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.document,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||Ed(e,u)&&(r=r.insert(u.key,u.clone()))}return Lp.resolve(r)},t.prototype.fs=function(t,e){return Lp.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new Om(this)},t.prototype.getSize=function(t){return Lp.resolve(this.size)},t}(),Om=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return Object(Bl.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)}),Lp.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(Ug),Em=function(){function t(t){this.persistence=t,this.ds=new Lg(function(t){return Kh(t)},Gh),this.lastRemoteSnapshotVersion=ah.min(),this.highestTargetId=0,this.ws=0,this._s=new ym,this.targetCount=0,this.ys=Ig.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach(function(t,n){return e(n)}),Lp.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return Lp.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return Lp.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),Lp.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),Lp.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new Ig(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,Lp.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),Lp.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,Lp.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Lp.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return Lp.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return Lp.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),Lp.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),Lp.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),Lp.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return Lp.resolve(n)},t.prototype.containsKey=function(t,e){return Lp.resolve(this._s.containsKey(e))},t}(),Sm=function(){function t(t,e){var n=this;this.gs={},this.Ne=new zl(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new Em(this),this.Ut=new fg,this.Ue=function(t,e){return new Cm(t,function(t){return n.referenceDelegate.ps(t)})}(this.Ut),this.R=new Zp(e),this.Qe=new vm(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new wm(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Qe},t.prototype.runTransaction=function(t,e,n){var r=this;$l("MemoryPersistence","Starting transaction:",t);var i=new Im(this.Ne.next());return this.referenceDelegate.Es(),n(i).next(function(t){return r.referenceDelegate.Ts(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Is=function(t,e){return Lp.or(Object.values(this.gs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),Im=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Bl.c)(e,t),e}(Pp),Am=function(){function t(t){this.persistence=t,this.As=new ym,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Jl()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),Lp.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),Lp.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),Lp.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach(function(t){return n.vs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.vs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Lp.forEach(this.vs,function(r){var i=Ah.fromPath(r);return e.Ps(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Rs=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next(function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())})},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return Lp.or([function(){return Lp.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),Tm=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function xm(t,e){return"firestore_clients_"+t+"_"+e}function Dm(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function km(t,e){return"firestore_targets_"+t+"_"+e}Tm.UNAUTHENTICATED=new Tm(null),Tm.GOOGLE_CREDENTIALS=new Tm("google-credentials-uid"),Tm.FIRST_PARTY=new Tm("first-party-uid");var Nm=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Wl(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Yl("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),jm=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Wl(i.error.code,i.error.message)),o?new t(e,i.state,r):(Yl("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Rm=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=Sf(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ih(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Yl("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Mm=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Yl("SharedClientState","Failed to parse online state: "+e),null)},t}(),Pm=function(){function t(){this.activeTargetIds=Sf()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Fm=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.Fs.bind(this),this.ks=new hf(rh),this.started=!1,this.Os=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.$s=xm(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.ks=this.ks.insert(this.Ns,new Pm),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Qs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Bl.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Bl.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(i=this.getItem(xm(this.persistenceKey,r)))&&(o=Rm.Vs(r,i))&&(this.ks=this.ks.insert(o.clientId,o));for(this.Ks(),(s=this.storage.getItem(this.Us))&&(a=this.js(s))&&this.Ws(a),u=0,c=this.Os;u<c.length;u++)this.Fs(c[u]);return this.Os=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.ks)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.ks.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(km(this.persistenceKey,t));if(n){var r=jm.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Ks(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Ks()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(km(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.Hs(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.$s),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return $l("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){$l("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){$l("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Fs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if($l("SharedClientState","EVENT",n.key,n.newValue),n.key===this.$s)return void Yl("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable(function(){return Object(Bl.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Bl.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(i=this.ri(n.key,n.newValue)))return[2,this.oi(i)]}else if(n.key===this.Us){if(null!==n.newValue&&(o=this.js(n.newValue)))return[2,this.Ws(o)]}else if(n.key===this.Ms)(s=function(t){var e=zl.o;if(null!=t)try{var n=JSON.parse(t);Zl("number"==typeof n),e=n}catch(t){Yl("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==zl.o&&this.sequenceNumberHandler(s);else if(n.key===this.Qs)return[2,this.syncEngine.ci()]}else this.Os.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.ks.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Ks=function(){this.setItem(this.$s,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new Nm(this.currentUser,t,e,n),i=Dm(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=Dm(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){this.storage.setItem(this.Us,JSON.stringify({clientId:this.Ns,onlineState:t}))},t.prototype.Ys=function(t,e,n){var r=km(this.persistenceKey,t),i=new jm(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Qs,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return Rm.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]);return Nm.Vs(new Tm(void 0!==n[2]?n[2]:null),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return jm.Vs(r,e)},t.prototype.js=function(t){return Mm.Vs(t)},t.prototype.ii=function(t){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:($l("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.ks.insert(t,e):this.ks.remove(t),i=this.Gs(this.ks),o=this.Gs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.hi(s,a).then(function(){n.ks=r})},t.prototype.Ws=function(t){this.ks.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=Sf();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),Lm=function(){function t(){this.li=new Pm,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new Pm,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Um=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),Vm=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){$l("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){$l("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),qm={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Bm=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),zm=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Bl.c)(e,t),e.prototype.ki=function(t,e,n,r){return new Promise(function(i,o){var s=new ql;s.listenOnce(Ll.COMPLETE,function(){try{switch(s.getLastErrorCode()){case Fl.NO_ERROR:var e=s.getResponseJson();$l("Connection","XHR received:",JSON.stringify(e)),i(e);break;case Fl.TIMEOUT:$l("Connection",'RPC "'+t+'" timed out'),o(new Wl(Hl.DEADLINE_EXCEEDED,"Request time out"));break;case Fl.HTTP_ERROR:var n=s.getStatus();if($l("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(Hl).indexOf(e)>=0?e:Hl.UNKNOWN}(r.status);o(new Wl(a,r.message))}else o(new Wl(Hl.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Wl(Hl.UNAVAILABLE,"Connection failed."));break;default:Jl()}}finally{$l("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.$i=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Nl,i=Mu(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Fi(o.initMessageHeaders,e),Object(Us.z)()||Object(Us.C)()||Object(Us.v)()||Object(Us.x)()||Object(Us.D)()||Object(Us.u)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");$l("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Bm({Ei:function(t){c?$l("Connection","Not sending because WebChannel is closed:",t):(u||($l("Connection","Opening WebChannel transport."),a.open(),u=!0),$l("Connection","WebChannel sending:",t),a.send(t))},Ti:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Vl.EventType.OPEN,function(){c||$l("Connection","WebChannel transport opened.")}),h(a,Vl.EventType.CLOSE,function(){c||(c=!0,$l("Connection","WebChannel transport closed"),l.Vi())}),h(a,Vl.EventType.ERROR,function(t){c||(c=!0,Ql("Connection","WebChannel transport errored:",t),l.Vi(new Wl(Hl.UNAVAILABLE,"The operation could not be completed")))}),h(a,Vl.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Zl(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){$l("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=rf[t];if(void 0!==e)return lf(e)}(i),s=r.message;void 0===o&&(o=Hl.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.Vi(new Wl(o,s)),a.close()}else $l("Connection","WebChannel received:",n),l.Si(n)}}),h(i,Ul.STAT_EVENT,function(t){10===t.stat?$l("Connection","Detected buffering proxy"):11===t.stat&&$l("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Pi()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Di=(t.ssl?"https":"http")+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);$l("RestConnection","Sending: ",i,n);var o={};return this.Fi(o,r),this.ki(t,i,o,n).then(function(t){return $l("RestConnection","Received: ",t),t},function(e){throw Ql("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Oi=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.Fi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.5.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){return this.Di+"/v1/"+e+":"+qm[t]},t}());function Hm(){return"undefined"!=typeof window?window:null}function Wm(){return"undefined"!=typeof document?document:null}function Km(t){return new Ff(t,!0)}var Gm=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Qi=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Ki=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Qi),i=Math.max(0,n-r);i>0&&$l("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,function(){return e.Qi=Date.now(),t()}),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),$m=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Gm(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,function(){return t.rr()}))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(t){return this.er()?[2,this.close(0)]:[2]})})},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===Hl.RESOURCE_EXHAUSTED?(Yl(e.toString()),Yl("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Ki()):e&&e.code===Hl.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}})})},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then(function(e){t.Yi===n&&t.lr(e)},function(n){e(function(){var e=new Wl(Hl.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)})})},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii(function(){n(function(){return e.state=2,e.listener.Ii()})}),this.stream.Ri(function(t){n(function(){return e.dr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji(function(){return Object(Bl.b)(t,void 0,void 0,function(){return Object(Bl.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.dr=function(t){return $l("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget(function(){return e.Yi===t?n():($l("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Ym=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return Object(Bl.c)(e,t),e.prototype.wr=function(t){return this.Hi.$i("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Jl()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Zl(void 0===e||"string"==typeof e),mh.fromBase64String(e||"")):(Zl(void 0===e||e instanceof Uint8Array),mh.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?Hl.UNKNOWN:lf(t.code);return new Wl(e,t.message||"")}(a);n=new Df(r,i,o,s||null)}else if("documentChange"in e){i=Wf(t,(r=e.documentChange).document.name),o=qf(r.document.updateTime);var a=new qh({mapValue:{fields:r.document.fields}}),u=(s=zh.newFoundDocument(i,o,a),r.targetIds||[]);n=new Tf(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Wf(t,(r=e.documentDelete).document),o=r.readTime?qf(r.readTime):ah.min(),a=zh.newNoDocument(i,o),n=new Tf([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Wf(t,(r=e.documentRemove).document),n=new Tf([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Jl();var c=e.filter;i=new uf(r=c.count||0),n=new xf(o=c.targetId,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return ah.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ah.min():e.readTime?qf(e.readTime):ah.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=$f(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=$h(r)?{documents:tp(t,r)}:{query:ep(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=Uf(t,e.resumeToken):e.snapshotVersion.compareTo(ah.min())>0&&(n.readTime=Lf(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Jl()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=$f(this.R),e.removeTarget=t,this.cr(e)},e}($m),Qm=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return Object(Bl.c)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.$i("Write",t)},e.prototype.onMessage=function(t){if(Zl(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Zl(void 0!==e),t.map(function(t){return function(t,e){var n=qf(t.updateTime?t.updateTime:e);return n.isEqual(ah.min())&&(n=qf(e)),new zd(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=qf(t.commitTime);return this.listener.Tr(n,e)}return Zl(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=$f(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return Jf(e.R,t)})};this.cr(n)},e}($m),Xm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return Object(Bl.c)(e,t),e.prototype.br=function(){if(this.Rr)throw new Wl(Hl.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Ni(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Hl.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Wl(Hl.UNKNOWN,t.toString())})},e.prototype.Oi=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then(function(i){return r.Hi.Oi(t,e,n,i)}).catch(function(t){throw"FirebaseError"===t.name?(t.code===Hl.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Wl(Hl.UNKNOWN,t.toString())})},e.prototype.terminate=function(){this.Rr=!0},e}(function(){}),Jm=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()}))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.Fr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.Fr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Yl(e),this.Vr=!1):$l("OnlineStateTracker",e)},t.prototype.Fr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Zm=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.kr=[],this.Or=new Map,this.$r=new Set,this.Mr=[],this.Lr=i,this.Lr.di(function(t){n.enqueueAndForget(function(){return Object(Bl.b)(o,void 0,void 0,function(){return Object(Bl.d)(this,function(t){switch(t.label){case 0:return ub(this)?($l("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Bl.b)(this,void 0,void 0,function(){var e;return Object(Bl.d)(this,function(n){switch(n.label){case 0:return(e=th(t)).$r.add(4),[4,eb(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.$r.delete(4),[4,tb(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Br=new Jm(n,r)};function tb(t){return Object(Bl.b)(this,void 0,void 0,function(){var e,n;return Object(Bl.d)(this,function(r){switch(r.label){case 0:if(!ub(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function eb(t){return Object(Bl.b)(this,void 0,void 0,function(){var e,n;return Object(Bl.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function nb(t,e){var n=th(t);n.Or.has(e.targetId)||(n.Or.set(e.targetId,e),ab(n)?sb(n):Ob(n).er()&&ib(n,e))}function rb(t,e){var n=th(t),r=Ob(n);n.Or.delete(e),r.er()&&ob(n,e),0===n.Or.size&&(r.er()?r.ir():ub(n)&&n.Br.set("Unknown"))}function ib(t,e){t.qr.U(e.targetId),Ob(t).mr(e)}function ob(t,e){t.qr.U(e),Ob(t).yr(e)}function sb(t){t.qr=new Nf({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.Or.get(e)||null}}),Ob(t).start(),t.Br.Sr()}function ab(t){return ub(t)&&!Ob(t).tr()&&t.Or.size>0}function ub(t){return 0===th(t).$r.size}function cb(t){t.qr=void 0}function lb(t){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(e){return t.Or.forEach(function(e,n){ib(t,e)}),[2]})})}function hb(t,e){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(n){return cb(t),ab(t)?(t.Br.Nr(e),sb(t)):t.Br.set("Unknown"),[2]})})}function db(t,e,n){return Object(Bl.b)(this,void 0,void 0,function(){var r,i,o;return Object(Bl.d)(this,function(s){switch(s.label){case 0:if(t.Br.set("Online"),!(e instanceof Df&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Bl.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Or.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Or.delete(o),t.qr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),$l("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,fb(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof Tf?t.qr.X(e):e instanceof xf?t.qr.rt(e):t.qr.et(e),n.isEqual(ah.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,sm(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Or.get(r);i&&t.Or.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Or.get(e);if(n){t.Or.set(e,n.withResumeToken(mh.EMPTY_BYTE_STRING,n.snapshotVersion)),ob(t,e);var r=new Jp(n.target,e,1,n.sequenceNumber);ib(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return $l("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,fb(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function fb(t,e,n){return Object(Bl.b)(this,void 0,void 0,function(){var r=this;return Object(Bl.d)(this,function(i){switch(i.label){case 0:if(!zp(e))throw e;return t.$r.add(1),[4,eb(t)];case 1:return i.sent(),t.Br.set("Offline"),n||(n=function(){return sm(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Bl.b)(r,void 0,void 0,function(){return Object(Bl.d)(this,function(e){switch(e.label){case 0:return $l("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.$r.delete(1),[4,tb(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function pb(t,e){return e().catch(function(n){return fb(t,n,e)})}function gb(t){return Object(Bl.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Bl.d)(this,function(s){switch(s.label){case 0:e=th(t),n=Eb(e),r=e.kr.length>0?e.kr[e.kr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return ub(t)&&t.kr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,cm(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.kr.length&&n.ir(),[3,7]):(r=i.batchId,function(t,e){t.kr.push(e);var n=Eb(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,fb(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return mb(e)&&bb(e),[2]}})})}function mb(t){return ub(t)&&!Eb(t).tr()&&t.kr.length>0}function bb(t){Eb(t).start()}function vb(t){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(e){return Eb(t).Ar(),[2]})})}function yb(t){return Object(Bl.b)(this,void 0,void 0,function(){var e,n,r;return Object(Bl.d)(this,function(i){for(e=Eb(t),n=0,r=t.kr;n<r.length;n++)e.Er(r[n].mutations);return[2]})})}function _b(t,e,n){return Object(Bl.b)(this,void 0,void 0,function(){var r,i;return Object(Bl.d)(this,function(o){switch(o.label){case 0:return r=t.kr.shift(),i=Xp.from(r,e,n),[4,pb(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,gb(t)];case 2:return o.sent(),[2]}})})}function wb(t,e){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(n){switch(n.label){case 0:return e&&Eb(t).pr?[4,function(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r;return Object(Bl.d)(this,function(i){switch(i.label){case 0:return cf(r=e.code)&&r!==Hl.ABORTED?(n=t.kr.shift(),Eb(t).sr(),[4,pb(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,gb(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return mb(t)&&bb(t),[2]}})})}function Cb(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n;return Object(Bl.d)(this,function(r){switch(r.label){case 0:return n=th(t),e?(n.$r.delete(2),[4,tb(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.$r.add(2),[4,eb(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function Ob(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=th(t);return r.br(),new Ym(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:lb.bind(null,t),Ri:hb.bind(null,t),_r:db.bind(null,t)}),t.Mr.push(function(n){return Object(Bl.b)(e,void 0,void 0,function(){return Object(Bl.d)(this,function(e){switch(e.label){case 0:return n?(t.Ur.sr(),ab(t)?sb(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),cb(t),e.label=3;case 3:return[2]}})})})),t.Ur}function Eb(t){var e=this;return t.Qr||(t.Qr=function(t,e,n){var r=th(t);return r.br(),new Qm(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:vb.bind(null,t),Ri:wb.bind(null,t),Ir:yb.bind(null,t),Tr:_b.bind(null,t)}),t.Mr.push(function(n){return Object(Bl.b)(e,void 0,void 0,function(){return Object(Bl.d)(this,function(e){switch(e.label){case 0:return n?(t.Qr.sr(),[4,gb(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Qr.stop()];case 3:e.sent(),t.kr.length>0&&($l("RemoteStore","Stopping write stream with "+t.kr.length+" pending writes"),t.kr=[]),e.label=4;case 4:return[2]}})})})),t.Qr}var Sb=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Fp,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Wl(Hl.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function Ib(t,e){if(Yl("AsyncQueue",e+": "+t),zp(t))return new Wl(Hl.UNAVAILABLE,e+": "+t);throw t}var Ab=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||Ah.comparator(e.key,n.key)}:function(t,e){return Ah.comparator(t.key,e.key)},this.keyedMap=yf(),this.sortedSet=new hf(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),Tb=function(){function t(){this.Kr=new hf(Ah.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Kr.get(e);n?0!==t.type&&3===n.type?this.Kr=this.Kr.insert(e,t):3===t.type&&1!==n.type?this.Kr=this.Kr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Kr=this.Kr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Kr=this.Kr.remove(e):1===t.type&&2===n.type?this.Kr=this.Kr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Kr=this.Kr.insert(e,{type:2,doc:t.doc}):Jl():this.Kr=this.Kr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Kr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),xb=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,Ab.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&wd(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),Db=function(){this.Wr=void 0,this.listeners=[]},kb=function(){this.queries=new Lg(function(t){return Cd(t)},wd),this.onlineState="Unknown",this.Gr=new Set};function Nb(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Bl.d)(this,function(c){switch(c.label){case 0:if(n=th(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new Db),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Wr=c.sent(),[3,4];case 3:return a=c.sent(),u=Ib(a,"Initialization of query '"+Od(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.zr(n.onlineState),o.Wr&&e.Hr(o.Wr)&&Pb(n),[2]}})})}function jb(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Bl.d)(this,function(a){return n=th(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Rb(t,e){for(var n=th(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Hr(s)&&(r=!0);a.Wr=s}}r&&Pb(n)}function Mb(t,e,n){var r=th(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Pb(t){t.Gr.forEach(function(t){t.next()})}var Fb=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new xb(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){return!t.fromCache||!(this.options.so&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=xb.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),Lb=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),Ub=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Wf(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Xf(this.R,t.document,!1):zh.newNoDocument(this.qn(t.metadata.name),this.Qn(t.metadata.readTime))},t.prototype.Qn=function(t){return qf(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new Ub(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||Of()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Bl.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Bl.d)(this,function(o){switch(o.label){case 0:return[4,mm(this.localStore,new Ub(this.R),this.documents,this.ro.id)];case 1:t=o.sent(),e=this.co(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,bm(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Jg(Object.assign({},this.progress),t))]}})})}}();var Vb=function(t){this.key=t},qb=function(t){this.key=t},Bb=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=Of(),this.mutatedKeys=Of(),this.lo=Sd(t),this.fo=new Ab(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new Tb,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=fd(this.query)&&i.size===this.query.limit?i.last():null,c=pd(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=Ed(n.query,e)?e:null,d=!!l&&n.mutatedKeys.has(l.key),f=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data.isEqual(h.data)?d!==f&&(r.track({type:3,doc:h}),p=!0):n.yo(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.lo(h,u)>0||c&&n.lo(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=f?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),fd(this.query)||pd(this.query))for(;s.size>this.query.limit;){var l=fd(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Jl()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)}),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new xb(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new Tb,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e.uo=e.uo.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e.uo=e.uo.delete(t)}),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=Of(),this.fo.forEach(function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))});var n=[];return e.forEach(function(e){t.ho.has(e)||n.push(new qb(e))}),this.ho.forEach(function(t){e.has(t)||n.push(new Vb(t))}),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=Of();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return xb.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),zb=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Hb=function(t){this.key=t,this.bo=!1},Wb=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new Lg(function(t){return Cd(t)},wd),this.Vo=new Map,this.So=new Set,this.Do=new hf(Ah.comparator),this.Co=new Map,this.No=new ym,this.xo={},this.Fo=new Map,this.ko=Ig.Yt(),this.onlineState="Unknown",this.Oo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Oo},enumerable:!1,configurable:!0}),t}();function Kb(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Bl.d)(this,function(a){switch(a.label){case 0:return n=wv(t),(i=n.Po.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Ro(),[3,4]):[3,1];case 1:return[4,lm(n.localStore,yd(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Gb(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&nb(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Gb(t,e,n,r){return Object(Bl.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Bl.d)(this,function(l){switch(l.label){case 0:return t.$o=function(e,n,r){return function(t,e,n,r){return Object(Bl.b)(this,void 0,void 0,function(){var i,o,s;return Object(Bl.d)(this,function(a){switch(a.label){case 0:return(i=e.view._o(n)).Nn?[4,dm(t.localStore,e.query,!1).then(function(t){return e.view._o(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(sv(t,e.targetId,s.To),s.snapshot)]}})})}(t,e,n,r)},[4,dm(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Bb(e,i.Bn),s=o._o(i.documents),a=Af.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),sv(t,n,u.To),c=new zb(e,n,o),[2,(t.Po.set(e,c),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),u.snapshot)]}})})}function $b(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r,i;return Object(Bl.d)(this,function(o){switch(o.label){case 0:return n=th(t),r=n.Po.get(e),(i=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,i.filter(function(t){return!wd(t,e)})),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,hm(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),rb(n.remoteStore,r.targetId),iv(n,r.targetId)}).catch(kg)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return iv(n,r.targetId),[4,hm(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Yb(t,e,n){return Object(Bl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Bl.d)(this,function(a){switch(a.label){case 0:r=Cv(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=th(t),i=sh.now(),o=e.reduce(function(t,e){return t.add(e.key)},Of());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Mn.pn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Yd(c,n.get(c.key));null!=l&&s.push(new Zd(c.key,l,Bh(l.toProto().mapValue),Hd.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)})}).then(function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new hf(rh)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,cv(r,i.changes)];case 3:return a.sent(),[4,gb(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=Ib(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Qb(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r;return Object(Bl.d)(this,function(i){switch(i.label){case 0:n=th(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,am(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.Co.get(e);r&&(Zl(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Zl(r.bo):t.removedDocuments.size>0&&(Zl(r.bo),r.bo=!1))}),[4,cv(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,kg(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function Xb(t,e,n){var r=th(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach(function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=th(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)}),r&&Pb(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Jb(t,e,n){return Object(Bl.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Bl.d)(this,function(c){switch(c.label){case 0:return(r=th(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.Co.get(e),(o=i&&i.key)?(s=(s=new hf(Ah.comparator)).insert(o,zh.newNoDocument(o,ah.min())),a=Of().add(o),u=new If(ah.min(),new Map,new pf(rh),s,a),[4,Qb(r,u)]):[3,2];case 1:return c.sent(),r.Do=r.Do.remove(o),r.Co.delete(e),uv(r),[3,4];case 2:return[4,hm(r.localStore,e,!1).then(function(){return iv(r,e,n)}).catch(kg)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Zb(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r,i;return Object(Bl.d)(this,function(o){switch(o.label){case 0:n=th(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,om(n.localStore,e)];case 2:return i=o.sent(),rv(n,r,null),nv(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,cv(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,kg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function tv(t,e,n){return Object(Bl.b)(this,void 0,void 0,function(){var r,i;return Object(Bl.d)(this,function(o){switch(o.label){case 0:r=th(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=th(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n._n.lookupMutationBatch(t,e).next(function(e){return Zl(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)}).next(function(){return n._n.performConsistencyCheck(t)}).next(function(){return n.Mn.pn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),rv(r,e,n),nv(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,cv(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,kg(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function ev(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Bl.d)(this,function(a){switch(a.label){case 0:ub((n=th(t)).remoteStore)||$l("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=th(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e._n.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Fo.get(r)||[]).push(e),n.Fo.set(r,i),[3,4]);case 3:return o=a.sent(),s=Ib(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function nv(t,e){(t.Fo.get(e)||[]).forEach(function(t){t.resolve()}),t.Fo.delete(e)}function rv(t,e,n){var r=th(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function iv(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach(function(e){t.No.containsKey(e)||ov(t,e)})}function ov(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(rb(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),uv(t))}function sv(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Vb?(t.No.addReference(o.key,e),av(t,o)):o instanceof qb?($l("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||ov(t,o.key)):Jl()}}function av(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||($l("SyncEngine","New document in limbo: "+n),t.So.add(r),uv(t))}function uv(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new Ah(dh.fromString(e)),r=t.ko.next();t.Co.set(r,new Hb(n)),t.Do=t.Do.insert(n,r),nb(t.remoteStore,new Jp(yd(dd(n.path)),r,2,zl.o))}}function cv(t,e,n){return Object(Bl.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Bl.d)(this,function(a){switch(a.label){case 0:return r=th(t),i=[],o=[],s=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach(function(t,a){s.push(r.$o(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=tm.Pn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.vo._r(i),[4,function(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Bl.d)(this,function(l){switch(l.label){case 0:n=th(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return Lp.forEach(e,function(e){return Lp.forEach(e.bn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return Lp.forEach(e.vn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!zp(r=l.sent()))throw r;return $l("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Fn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Fn=n.Fn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function lv(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r;return Object(Bl.d)(this,function(i){switch(i.label){case 0:return(n=th(t)).currentUser.isEqual(e)?[3,3]:($l("SyncEngine","User change. New user:",e.toKey()),[4,im(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Fo.forEach(function(t){t.forEach(function(t){t.reject(new Wl(Hl.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Fo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,cv(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function hv(t,e){var n=th(t),r=n.Co.get(e);if(r&&r.bo)return Of().add(r.key);var i=Of(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.Po.get(a[s]);i=i.unionWith(u.view.wo)}return i}function dv(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r,i;return Object(Bl.d)(this,function(o){switch(o.label){case 0:return[4,dm((n=th(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.Ao(r),[2,(n.isPrimaryClient&&sv(n,e.targetId,i.To),i)]}})})}function fv(t){return Object(Bl.b)(this,void 0,void 0,function(){var e;return Object(Bl.d)(this,function(n){return[2,pm((e=th(t)).localStore).then(function(t){return cv(e,t)})]})})}function pv(t,e,n,r){return Object(Bl.b)(this,void 0,void 0,function(){var i,o;return Object(Bl.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=th(t),r=th(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.jt(t,e).next(function(e){return e?n.Mn.pn(t,e):Lp.resolve(null)})})}((i=th(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,gb(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(rv(i,e,r||null),nv(i,e),function(t,e){th(th(t)._n).Gt(e)}(i.localStore,e)):Jl(),s.label=4;case 4:return[4,cv(i,o)];case 5:return s.sent(),[3,7];case 6:$l("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function gv(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Bl.d)(this,function(c){switch(c.label){case 0:return wv(n=th(t)),Cv(n),!0!==e||!0===n.Oo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,mv(n,r.toArray())]);case 1:return i=c.sent(),n.Oo=!0,[4,Cb(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)nb(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Oo?[3,7]:(a=[],u=Promise.resolve(),n.Vo.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return iv(n,e),hm(n.localStore,e,!0)}),rb(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,mv(n,a)];case 5:return c.sent(),function(t){var e=th(t);e.Co.forEach(function(t,n){rb(e.remoteStore,n)}),e.No.ts(),e.Co=new Map,e.Do=new hf(Ah.comparator)}(n),n.Oo=!1,[4,Cb(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function mv(t,e,n){return Object(Bl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,d,f,p;return Object(Bl.d)(this,function(g){switch(g.label){case 0:n=th(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.Vo.get(a=s[o]))&&0!==c.length?[4,lm(n.localStore,yd(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(d=n.Po.get(h[l]),[4,dv(n,d)]):[3,6];case 4:(f=g.sent()).snapshot&&i.push(f.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,fm(n.localStore,a)];case 8:return p=g.sent(),[4,lm(n.localStore,p)];case 9:return u=g.sent(),[4,Gb(n,bv(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.vo._r(i),r)]}})})}function bv(t){return hd(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function vv(t){var e=th(t);return th(th(e.localStore).persistence).fn()}function yv(t,e,n,r){return Object(Bl.b)(this,void 0,void 0,function(){var i,o,s;return Object(Bl.d)(this,function(a){switch(a.label){case 0:return(i=th(t)).Oo?($l("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,pm(i.localStore)];case 3:return o=a.sent(),s=If.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,cv(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,hm(i.localStore,e,!0)];case 6:return a.sent(),iv(i,e,r),[3,8];case 7:Jl(),a.label=8;case 8:return[2]}})})}function _v(t,e,n){return Object(Bl.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Bl.d)(this,function(d){switch(d.label){case 0:if(!(r=wv(t)).Oo)return[3,10];i=0,o=e,d.label=1;case 1:return i<o.length?r.Vo.has(s=o[i])?($l("SyncEngine","Adding an already active target "+s),[3,5]):[4,fm(r.localStore,s)]:[3,6];case 2:return a=d.sent(),[4,lm(r.localStore,a)];case 3:return u=d.sent(),[4,Gb(r,bv(a),u.targetId,!1)];case 4:d.sent(),nb(r.remoteStore,u),d.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Bl.d)(this,function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,hm(r.localStore,t,!1).then(function(){rb(r.remoteStore,t),iv(r,t)}).catch(kg)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,d.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:d.sent(),d.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function wv(t){var e=th(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qb.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=hv.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Jb.bind(null,e),e.vo._r=Rb.bind(null,e.eventManager),e.vo.Mo=Mb.bind(null,e.eventManager),e}function Cv(t){var e=th(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Zb.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=tv.bind(null,e),e}var Ov=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(e){switch(e.label){case 0:return this.R=Km(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Qo(t),[2]}})})},t.prototype.Uo=function(t){return null},t.prototype.Qo=function(t){return rm(this.persistence,new em,t.initialUser,this.R)},t.prototype.qo=function(t){return new Sm(Am.bs,this.R)},t.prototype.Bo=function(t){return new Lm},t.prototype.terminate=function(){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),Ev=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Ko=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Bl.c)(e,t),e.prototype.initialize=function(e){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,gm(this.localStore)];case 2:return n.sent(),[4,this.Ko.initialize(this,e)];case 3:return n.sent(),[4,Cv(this.Ko.syncEngine)];case 4:return n.sent(),[4,gb(this.Ko.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Qo=function(t){return rm(this.persistence,new em,t.initialUser,this.R)},e.prototype.Uo=function(t){return new Rg(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.qo=function(t){var e=Xg(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?vg.withCacheSize(this.cacheSizeBytes):vg.DEFAULT;return new $g(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Hm(),Wm(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new Lm},e}(Ov),Sv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Ko=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Bl.c)(e,t),e.prototype.initialize=function(e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r=this;return Object(Bl.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Ko.syncEngine,this.sharedClientState instanceof Fm?(this.sharedClientState.syncEngine={ui:pv.bind(null,n),ai:yv.bind(null,n),hi:_v.bind(null,n),fn:vv.bind(null,n),ci:fv.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.He(function(t){return Object(Bl.b)(r,void 0,void 0,function(){return Object(Bl.d)(this,function(e){switch(e.label){case 0:return[4,gv(this.Ko.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.Bo=function(t){var e=Hm();if(!Fm.yt(e))throw new Wl(Hl.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Xg(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Fm(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(Ev),Iv=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n=this;return Object(Bl.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Xb(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=lv.bind(null,this.syncEngine),[4,Cb(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new kb},t.prototype.createDatastore=function(t){var e=Km(t.databaseInfo.databaseId),n=new zm(t.databaseInfo);return function(t,e,n){return new Xm(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Xb(s.syncEngine,t,0)},o=Vm.yt()?new Vm:new Um,new Zm(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Wb(t,e,n,r,i,o);return s&&(a.Oo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Bl.b)(this,void 0,void 0,function(){var e;return Object(Bl.d)(this,function(n){switch(n.label){case 0:return e=th(t),$l("RemoteStore","RemoteStore shutting down."),e.$r.add(5),[4,eb(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),Av=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),Tv=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new Fp,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then(function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Lo=function(){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}})})},t.prototype.Ho=function(){return Object(Bl.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Bl.d)(this,function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new Lb(JSON.parse(r),t.length+n)]}})})},t.prototype.Zo=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.Jo=function(){return Object(Bl.b)(this,void 0,void 0,function(){var t,e;return Object(Bl.d)(this,function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.Xo=function(t){return Object(Bl.b)(this,void 0,void 0,function(){var e;return Object(Bl.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return Object(Bl.b)(this,void 0,void 0,function(){var t,e;return Object(Bl.d)(this,function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Bl.b)(this,void 0,void 0,function(){var e,n=this;return Object(Bl.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Wl(Hl.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Bl.d)(this,function(u){switch(u.label){case 0:return n=th(t),r=$f(n.R)+"/documents",i={documents:e.map(function(t){return Hf(n.R,t)})},[4,n.Oi("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Zl(!!e.found);var n=Wf(t,e.found.name),r=qf(e.found.updateTime),i=new qh({mapValue:{fields:e.found.fields}});return zh.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Zl(!!e.missing),Zl(!!e.readTime);var n=Wf(t,e.missing),r=qf(e.readTime);return zh.newNoDocument(n,r)}(t,e):Jl()}(n.R,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Zl(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){return n.recordVersion(t)}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new sf(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Bl.b)(this,void 0,void 0,function(){var t,e=this;return Object(Bl.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=Ah.fromPath(n);e.mutations.push(new af(r,e.precondition(r)))}),[4,function(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r,i;return Object(Bl.d)(this,function(o){switch(o.label){case 0:return n=th(t),r=$f(n.R)+"/documents",i={writes:e.map(function(t){return Jf(n.R,t)})},[4,n.Ni("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Jl();e=ah.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Wl(Hl.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Hd.updateTime(e):Hd.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(ah.min()))throw new Wl(Hl.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Hd.updateTime(e)}return Hd.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),xv=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Gm(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji(function(){return Object(Bl.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Bl.d)(this,function(r){return t=new Tv(this.datastore),(e=this.sc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.ic(t)})})}).catch(function(t){n.ic(t)}),[2]})})})},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!Eh(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget(function(){return e.nc(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!cf(e)}return!1},t}(),Dv=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=Tm.UNAUTHENTICATED,this.clientId=nh.u(),this.credentialListener=function(){},this.receivedInitialUser=new Fp,this.credentials.setChangeListener(function(t){$l("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Wl(Hl.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Fp;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Bl.b)(t,void 0,void 0,function(){var t,n;return Object(Bl.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=Ib(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function kv(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Bl.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),$l("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Bl.b)(i,void 0,void 0,function(){return Object(Bl.d)(this,function(t){switch(t.label){case 0:return[4,im(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Nv(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r;return Object(Bl.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,jv(t)];case 1:return n=i.sent(),$l("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r;return Object(Bl.d)(this,function(i){switch(i.label){case 0:return(n=th(t)).asyncQueue.verifyOperationInProgress(),$l("RemoteStore","RemoteStore received new credentials"),r=ub(n),n.$r.add(3),[4,eb(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.$r.delete(3),[4,tb(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function jv(t){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:($l("FirestoreClient","Using default OfflineComponentProvider"),[4,kv(t,new Ov)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Rv(t){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:($l("FirestoreClient","Using default OnlineComponentProvider"),[4,Nv(t,new Iv)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Mv(t){return jv(t).then(function(t){return t.persistence})}function Pv(t){return jv(t).then(function(t){return t.localStore})}function Fv(t){return Rv(t).then(function(t){return t.remoteStore})}function Lv(t){return Rv(t).then(function(t){return t.syncEngine})}function Uv(t){return Object(Bl.b)(this,void 0,void 0,function(){var e,n;return Object(Bl.d)(this,function(r){switch(r.label){case 0:return[4,Rv(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Kb.bind(null,e.syncEngine),n.onUnlisten=$b.bind(null,e.syncEngine),n)]}})})}function Vv(t,e,n){var r=this;void 0===n&&(n={});var i=new Fp;return t.asyncQueue.enqueueAndForget(function(){return Object(Bl.b)(r,void 0,void 0,function(){var r;return Object(Bl.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Av({next:function(o){e.enqueueAndForget(function(){return jb(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Wl(Hl.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Wl(Hl.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Fb(dd(n.path),o,{includeMetadataChanges:!0,so:!0});return Nb(t,s)},[4,Uv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function qv(t,e,n){var r=this;void 0===n&&(n={});var i=new Fp;return t.asyncQueue.enqueueAndForget(function(){return Object(Bl.b)(r,void 0,void 0,function(){var r;return Object(Bl.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new Av({next:function(n){e.enqueueAndForget(function(){return jb(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Wl(Hl.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Fb(n,o,{includeMetadataChanges:!0,so:!0});return Nb(t,s)},[4,Uv(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Bv=function(t,e,n,r,i,o,s){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s},zv=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Hv=new Map,Wv=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Kv=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(Tm.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Gv=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(this.token.user)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),$v=function(){function t(t){var e=this;this.oc=null,this.currentUser=Tm.UNAUTHENTICATED,this.receivedInitialUser=!1,this.cc=0,this.changeListener=null,this.forceRefresh=!1,this.oc=function(){e.cc++,e.currentUser=e.uc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.cc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.oc):(this.oc(null),t.get().then(function(t){e.auth=t,e.oc&&e.auth.addAuthTokenListener(e.oc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.cc!==e?($l("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Zl("string"==typeof n.accessToken),new Wv(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.oc),this.oc=null,this.changeListener=null},t.prototype.uc=function(){var t=this.auth&&this.auth.getUid();return Zl(null===t||"string"==typeof t),new Tm(t)},t}(),Yv=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n,this.type="FirstParty",this.user=Tm.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.hc},e=this.ac.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.lc&&(t["X-Goog-Iam-Authorization-Token"]=this.lc),t},enumerable:!1,configurable:!0}),t}(),Qv=function(){function t(t,e,n){this.ac=t,this.hc=e,this.lc=n}return t.prototype.getToken=function(){return Promise.resolve(new Yv(this.ac,this.hc,this.lc))},t.prototype.setChangeListener=function(t){t(Tm.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Xv(t,e,n){if(!n)throw new Wl(Hl.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Jv(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Wl(Hl.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Zv(t,e,n,r){if(!0===e&&!0===r)throw new Wl(Hl.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function ty(t){if(!Ah.isDocumentKey(t))throw new Wl(Hl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function ey(t){if(Ah.isDocumentKey(t))throw new Wl(Hl.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function ny(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Jl()}function ry(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Wl(Hl.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=ny(t);throw new Wl(Hl.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function iy(t,e){if(e<=0)throw new Wl(Hl.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var oy=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Wl(Hl.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Wl(Hl.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Zv("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),sy=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new oy({}),this._settingsFrozen=!1,t instanceof zv?(this._databaseId=t,this._credentials=new Kv):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Wl(Hl.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new zv(t.options.projectId)}(t),this._credentials=new $v(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Wl(Hl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Wl(Hl.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new oy(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Kv;switch(t.type){case"gapi":var e=t.client;return Zl(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Qv(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Wl(Hl.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Hv.get(this))&&($l("ComponentProvider","Removing Datastore"),Hv.delete(this),t.terminate()),Promise.resolve();var t},t}(),ay=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new cy(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),uy=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),cy=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,dd(r))||this)._path=r,i.type="collection",i}return Object(Bl.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new ay(this.firestore,null,new Ah(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(uy);function ly(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Us.q)(t),Xv("collection","path",e),t instanceof sy)return ey(n=dh.fromString.apply(dh,Object(Bl.f)([e],r))),new cy(t,null,n);if(!(t instanceof ay||t instanceof cy))throw new Wl(Hl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ey(n=dh.fromString.apply(dh,Object(Bl.f)([t.path],r)).child(dh.fromString(e))),new cy(t.firestore,null,n)}function hy(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t=Object(Us.q)(t),1===arguments.length&&(e=nh.u()),Xv("doc","path",e),t instanceof sy)return ty(n=dh.fromString.apply(dh,Object(Bl.f)([e],r))),new ay(t,null,new Ah(n));if(!(t instanceof ay||t instanceof cy))throw new Wl(Hl.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return ty(n=t._path.child(dh.fromString.apply(dh,Object(Bl.f)([e],r)))),new ay(t.firestore,t instanceof cy?t.converter:null,new Ah(n))}function dy(t,e){return t=Object(Us.q)(t),e=Object(Us.q)(e),(t instanceof ay||t instanceof cy)&&(e instanceof ay||e instanceof cy)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function fy(t,e){return t=Object(Us.q)(t),e=Object(Us.q)(e),t instanceof uy&&e instanceof uy&&t.firestore===e.firestore&&wd(t._query,e._query)&&t.converter===e.converter}var py=function(){function t(){var t=this;this.fc=Promise.resolve(),this.dc=[],this.wc=!1,this._c=[],this.mc=null,this.yc=!1,this.gc=[],this.Zi=new Gm(this,"async_queue_retry"),this.Ec=function(){var e=Wm();e&&$l("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Wm();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ec)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.wc},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Tc(),this.Ic(t)},t.prototype.enterRestrictedMode=function(){if(!this.wc){this.wc=!0;var t=Wm();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Ec)}},t.prototype.enqueue=function(t){return this.Tc(),this.wc?new Promise(function(t){}):this.Ic(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.dc.push(t),e.Ac()})},t.prototype.Ac=function(){return Object(Bl.b)(this,void 0,void 0,function(){var t,e=this;return Object(Bl.d)(this,function(n){switch(n.label){case 0:if(0===this.dc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.dc[0]()];case 2:return n.sent(),this.dc.shift(),this.Zi.reset(),[3,4];case 3:if(!zp(t=n.sent()))throw t;return $l("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.dc.length>0&&this.Zi.ji(function(){return e.Ac()}),n.label=5;case 5:return[2]}})})},t.prototype.Ic=function(t){var e=this,n=this.fc.then(function(){return e.yc=!0,t().catch(function(t){throw e.mc=t,e.yc=!1,Yl("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.yc=!1,t})});return this.fc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Tc(),this.gc.indexOf(t)>-1&&(e=0);var i=Sb.createAndSchedule(this,t,e,n,function(t){return r.Rc(t)});return this._c.push(i),i},t.prototype.Tc=function(){this.mc&&Jl()},t.prototype.verifyOperationInProgress=function(){},t.prototype.bc=function(){return Object(Bl.b)(this,void 0,void 0,function(){var t;return Object(Bl.d)(this,function(e){switch(e.label){case 0:return[4,t=this.fc];case 1:e.sent(),e.label=2;case 2:if(t!==this.fc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.vc=function(t){for(var e=0,n=this._c;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Pc=function(t){var e=this;return this.bc().then(function(){e._c.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e._c;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.bc()})},t.prototype.Vc=function(t){this.gc.push(t)},t.prototype.Rc=function(t){var e=this._c.indexOf(t);this._c.splice(e,1)},t}();function gy(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Fp,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var my=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new py,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Bl.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||vy(this),this._firestoreClient.terminate()},e}(sy);function by(t){return t._firestoreClient||vy(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function vy(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new Bv(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new Dv(t._credentials,t._queue,r)}function yy(t,e,n){var r=this,i=new Fp;return t.asyncQueue.enqueue(function(){return Object(Bl.b)(r,void 0,void 0,function(){var r;return Object(Bl.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,kv(t,n)];case 1:return o.sent(),[4,Nv(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===Hl.FAILED_PRECONDITION||t.code===Hl.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function _y(t){if(t._initialized||t._terminated)throw new Wl(Hl.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var wy=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Wl(Hl.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ph(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),Cy=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(mh.fromBase64String(e))}catch(e){throw new Wl(Hl.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(mh.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),Oy=function(t){this._methodName=t},Ey=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Wl(Hl.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Wl(Hl.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return rh(this._lat,t._lat)||rh(this._long,t._long)},t}(),Sy=/^__.*__$/,Iy=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Zd(t,this.data,this.fieldMask,e,this.fieldTransforms):new Jd(t,this.data,e,this.fieldTransforms)},t}(),Ay=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Zd(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function Ty(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Jl()}}var xy=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Sc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dc",{get:function(){return this.settings.Dc},enumerable:!1,configurable:!0}),t.prototype.Cc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.Nc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Fc(t),r},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Cc({path:n,xc:!1});return r.Sc(),r},t.prototype.Oc=function(t){return this.Cc({path:void 0,xc:!0})},t.prototype.$c=function(t){return Yy(t,this.settings.methodName,this.settings.Mc||!1,this.path,this.settings.Lc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.Sc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Fc(this.path.get(t))},t.prototype.Fc=function(t){if(0===t.length)throw this.$c("Document fields must not be empty");if(Ty(this.Dc)&&Sy.test(t))throw this.$c('Document fields cannot begin and end with "__"')},t}(),Dy=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Km(t)}return t.prototype.Bc=function(t,e,n,r){return void 0===r&&(r=!1),new xy({Dc:t,methodName:e,Lc:n,path:ph.emptyPath(),xc:!1,Mc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function ky(t){var e=t._freezeSettings(),n=Km(t._databaseId);return new Dy(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Ny(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Bc(o.merge||o.mergeFields?2:0,e,n,i);Wy("Data must be an object, but it was:",s,r);var a,u,c=zy(r,s);if(o.merge)a=new gh(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,d=o.mergeFields;h<d.length;h++){var f=Ky(e,d[h],n);if(!s.contains(f))throw new Wl(Hl.INVALID_ARGUMENT,"Field '"+f+"' is specified in your field mask but missing from your input data.");Qy(l,f)||l.push(f)}a=new gh(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new Iy(new qh(c),a,u)}var jy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Bl.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Dc)throw t.$c(1===t.Dc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(Oy);function Ry(t,e,n){return new xy({Dc:3,Lc:e.settings.Lc,methodName:t._methodName,xc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var My=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Bl.c)(e,t),e.prototype._toFieldTransform=function(t){return new Bd(t.path,new Rd)},e.prototype.isEqual=function(t){return t instanceof e},e}(Oy),Py=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Bl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Ry(this,t,!0),n=this.qc.map(function(t){return By(t,e)}),r=new Md(n);return new Bd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Oy),Fy=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).qc=n,r}return Object(Bl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Ry(this,t,!0),n=this.qc.map(function(t){return By(t,e)}),r=new Fd(n);return new Bd(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(Oy),Ly=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Uc=n,r}return Object(Bl.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Ud(t.R,xd(t.R,this.Uc));return new Bd(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(Oy);function Uy(t,e,n,r){var i=t.Bc(1,e,n);Wy("Data must be an object, but it was:",i,r);var o=[],s=qh.empty();ch(r,function(t,r){var a=$y(e,t,n);r=Object(Us.q)(r);var u=i.kc(a);if(r instanceof jy)o.push(a);else{var c=By(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new gh(o);return new Ay(s,a,i.fieldTransforms)}function Vy(t,e,n,r,i,o){var s=t.Bc(1,e,n),a=[Ky(e,r,n)],u=[i];if(o.length%2!=0)throw new Wl(Hl.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Ky(e,o[c])),u.push(o[c+1]);for(var l=[],h=qh.empty(),d=a.length-1;d>=0;--d)if(!Qy(l,a[d])){var f=a[d],p=u[d];p=Object(Us.q)(p);var g=s.kc(f);if(p instanceof jy)l.push(f);else{var m=By(p,g);null!=m&&(l.push(f),h.set(f,m))}}var b=new gh(l);return new Ay(h,b,s.fieldTransforms)}function qy(t,e,n,r){return void 0===r&&(r=!1),By(n,t.Bc(r?4:3,e))}function By(t,e){if(Hy(t=Object(Us.q)(t)))return Wy("Unsupported field value:",e,t),zy(t,e);if(t instanceof Oy)return function(t,e){if(!Ty(e.Dc))throw e.$c(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.$c(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.xc&&4!==e.Dc)throw e.$c("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=By(o[i],e.Oc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=Object(Us.q)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return xd(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=sh.fromDate(t);return{timestampValue:Lf(e.R,n)}}if(t instanceof sh)return n=new sh(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Lf(e.R,n)};if(t instanceof Ey)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Cy)return{bytesValue:Uf(e.R,t._byteString)};if(t instanceof ay){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.$c("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Bf(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.$c("Unsupported field value: "+ny(t))}(t,e)}function zy(t,e){var n={};return lh(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ch(t,function(t,r){var i=By(r,e.Nc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Hy(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof sh||t instanceof Ey||t instanceof Cy||t instanceof ay||t instanceof Oy)}function Wy(t,e,n){if(!Hy(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=ny(n);throw e.$c("an object"===r?t+" a custom object":t+" "+r)}}function Ky(t,e,n){if((e=Object(Us.q)(e))instanceof wy)return e._internalPath;if("string"==typeof e)return $y(t,e);throw Yy("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Gy=new RegExp("[~\\*/\\[\\]]");function $y(t,e,n){if(e.search(Gy)>=0)throw Yy("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(wy.bind.apply(wy,Object(Bl.f)([void 0],e.split(".")))))._internalPath}catch(r){throw Yy("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Yy(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Wl(Hl.INVALID_ARGUMENT,(a+=". ")+t+u)}function Qy(t,e){return t.some(function(t){return t.isEqual(e)})}var Xy=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new ay(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Jy(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Zy("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Jy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Bl.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Xy);function Zy(t,e){return"string"==typeof e?$y(t,e):e instanceof wy?e._internalPath:e._delegate._internalPath}var t_=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),e_=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Bl.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new n_(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Zy("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Xy),n_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Bl.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(e_),r_=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new t_(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new n_(n._firestore,n._userDataWriter,r.key,r,new t_(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Wl(Hl.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new n_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new t_(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new n_(t._firestore,t._userDataWriter,e.doc.key,e.doc,new t_(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:i_(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function i_(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Jl()}}function o_(t,e){return t instanceof e_&&e instanceof e_?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof r_&&e instanceof r_&&t._firestore===e._firestore&&fy(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function s_(t){if(pd(t)&&0===t.explicitOrderBy.length)throw new Wl(Hl.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var a_=function(){};function u_(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var c_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qc=e,i.Kc=n,i.jc=r,i.type="where",i}return Object(Bl.c)(e,t),e.prototype._apply=function(t){var e=ky(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Wl(Hl.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){m_(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(g_(r,t,l[c]));a={arrayValue:{values:u}}}else a=g_(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||m_(s,o),a=qy(n,"where",s,"in"===o||"not-in"===o);var h=Yh.create(i,o,a);return function(t,e){if(e.g()){var n=md(t);if(null!==n&&!n.isEqual(e.field))throw new Wl(Hl.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=gd(t);null!==r&&b_(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Wl(Hl.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.Qc,this.Kc,this.jc);return new uy(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new ld(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(a_),l_=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qc=e,r.Wc=n,r.type="orderBy",r}return Object(Bl.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Wl(Hl.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Wl(Hl.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new sd(e,n);return function(t,e){if(null===gd(t)){var n=md(t);null!==n&&b_(0,n,e.field)}}(t,r),r}(t._query,this.Qc,this.Wc);return new uy(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new ld(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(a_),h_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Gc=n,i.zc=r,i}return Object(Bl.c)(e,t),e.prototype._apply=function(t){return new uy(t.firestore,t.converter,_d(t._query,this.Gc,this.zc))},e}(a_),d_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Bl.c)(e,t),e.prototype._apply=function(t){var e=p_(t,this.type,this.Hc,this.Jc);return new uy(t.firestore,t.converter,function(t,e){return new ld(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(a_),f_=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return Object(Bl.c)(e,t),e.prototype._apply=function(t){var e=p_(t,this.type,this.Hc,this.Jc);return new uy(t.firestore,t.converter,function(t,e){return new ld(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(a_);function p_(t,e,n,r){if(n[0]=Object(Us.q)(n[0]),n[0]instanceof Xy)return function(t,e,n,r,i){if(!r)throw new Wl(Hl.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=vd(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(Mh(e,r.key));else{var c=r.data.field(u.field);if(wh(c))throw new Wl(Hl.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Wl(Hl.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new id(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=ky(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Wl(Hl.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Wl(Hl.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!bd(t)&&-1!==c.indexOf("/"))throw new Wl(Hl.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(dh.fromString(c));if(!Ah.isDocumentKey(l))throw new Wl(Hl.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new Ah(l);a.push(Mh(e,h))}else{var d=qy(n,r,c);a.push(d)}}return new id(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function g_(t,e,n){if("string"==typeof(n=Object(Us.q)(n))){if(""===n)throw new Wl(Hl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!bd(e)&&-1!==n.indexOf("/"))throw new Wl(Hl.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(dh.fromString(n));if(!Ah.isDocumentKey(r))throw new Wl(Hl.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return Mh(t,new Ah(r))}if(n instanceof ay)return Mh(t,n._key);throw new Wl(Hl.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+ny(n)+".")}function m_(t,e){if(!Array.isArray(t)||0===t.length)throw new Wl(Hl.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Wl(Hl.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function b_(t,e,n){if(!n.isEqual(e))throw new Wl(Hl.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var v_=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),Th(t)){case 0:return null;case 1:return t.booleanValue;case 2:return yh(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(_h(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Jl()}},t.prototype.convertObject=function(t,e){var n=this,r={};return ch(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new Ey(yh(t.latitude),yh(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Ch(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(Oh(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=vh(t);return new sh(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=dh.fromString(t);Zl(fp(n));var r=new zv(n.get(1),n.get(3)),i=new Ah(n.popFirst(5));return r.isEqual(e)||Yl("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function y_(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var __=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Bl.c)(e,t),e.prototype.convertBytes=function(t){return new Cy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new ay(this.firestore,null,e)},e}(v_),w_=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=ky(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=C_(t,this._firestore),i=y_(r.converter,e,n),o=Ny(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,Hd.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=C_(t,this._firestore);return o="string"==typeof(e=Object(Us.q)(e))||e instanceof wy?Vy(this._dataReader,"WriteBatch.update",s._key,e,n,r):Uy(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Hd.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=C_(t,this._firestore);return this._mutations=this._mutations.concat(new sf(e._key,Hd.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Wl(Hl.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function C_(t,e){if((t=Object(Us.q)(t)).firestore!==e)throw new Wl(Hl.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var O_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Bl.c)(e,t),e.prototype.convertBytes=function(t){return new Cy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new ay(this.firestore,null,e)},e}(v_);function E_(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=ry(t,ay);var o=ry(t.firestore,my),s=ky(o);return I_(o,[("string"==typeof(e=Object(Us.q)(e))||e instanceof wy?Vy(s,"updateDoc",t._key,e,n,r):Uy(s,"updateDoc",t._key,e)).toMutation(t._key,Hd.exists(!0))])}function S_(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t=Object(Us.q)(t);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||gy(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(gy(i[a])){var d=i[a];i[a]=null===(e=d.next)||void 0===e?void 0:e.bind(d),i[a+1]=null===(n=d.error)||void 0===n?void 0:n.bind(d),i[a+2]=null===(r=d.complete)||void 0===r?void 0:r.bind(d)}if(t instanceof ay)c=ry(t.firestore,my),l=dd(t._key.path),u={next:function(e){i[a]&&i[a](A_(c,t,e))},error:i[a+1],complete:i[a+2]};else{var f=ry(t,uy);c=ry(f.firestore,my),l=f._query;var p=new O_(c);u={next:function(t){i[a]&&i[a](new r_(c,p,f,t))},error:i[a+1],complete:i[a+2]},s_(t._query)}return function(t,e,n,r){var i=this,o=new Av(r),s=new Fb(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Bl.b)(i,void 0,void 0,function(){var e;return Object(Bl.d)(this,function(n){switch(n.label){case 0:return e=Nb,[4,Uv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Bl.b)(i,void 0,void 0,function(){var e;return Object(Bl.d)(this,function(n){switch(n.label){case 0:return e=jb,[4,Uv(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(by(c),l,h,u)}function I_(t,e){return function(t,e){var n=this,r=new Fp;return t.asyncQueue.enqueueAndForget(function(){return Object(Bl.b)(n,void 0,void 0,function(){var n;return Object(Bl.d)(this,function(i){switch(i.label){case 0:return n=Yb,[4,Lv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(by(t),e)}function A_(t,e,n){var r=n.docs.get(e._key),i=new O_(t);return new e_(t,i,e._key,r,new t_(n.hasPendingWrites,n.fromCache),e.converter)}var T_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Bl.c)(e,t),e.prototype.get=function(e){var n=this,r=C_(e,this._firestore),i=new O_(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new e_(n._firestore,i,r._key,t._document,new t_(!1,!1),r.converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=ky(t)}return t.prototype.get=function(t){var e=this,n=C_(t,this._firestore),r=new __(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Jl();var i=t[0];if(i.isFoundDocument())return new Xy(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Xy(e._firestore,r,n._key,null,n.converter);throw Jl()})},t.prototype.set=function(t,e,n){var r=C_(t,this._firestore),i=y_(r.converter,e,n),o=Ny(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=C_(t,this._firestore);return o="string"==typeof(e=Object(Us.q)(e))||e instanceof wy?Vy(this._dataReader,"Transaction.update",s._key,e,n,r):Uy(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=C_(t,this._firestore);return this._transaction.delete(e._key),this},t}());function x_(){if("undefined"==typeof Uint8Array)throw new Wl(Hl.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function D_(){if("undefined"==typeof atob)throw new Wl(Hl.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var k_=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return D_(),new t(Cy.fromBase64String(e))},t.fromUint8Array=function(e){return x_(),new t(Cy.fromUint8Array(e))},t.prototype.toBase64=function(){return D_(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return x_(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),N_=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){_y(t=ry(t,my));var n=by(t),r=t._freezeSettings(),i=new Iv;return yy(n,i,new Ev(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){_y(t=ry(t,my));var e=by(t),n=t._freezeSettings(),r=new Iv;return yy(e,r,new Sv(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Wl(Hl.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Fp;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Bl.b)(e,void 0,void 0,function(){var e;return Object(Bl.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Bl.b)(this,void 0,void 0,function(){return Object(Bl.d)(this,function(e){switch(e.label){case 0:return Vp.yt()?[4,Vp.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(Xg(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),j_=function(){function t(t,e,n){var r=this;this._delegate=e,this.Yc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof zv||(this.Xc=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={});var i=(t=ry(t,sy))._getSettings();if("firestore.googleapis.com"!==i.host&&i.host!==e&&Ql("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},i),{host:e+":"+n,ssl:!1})),r.mockUserToken){var o=Object(Us.l)(r.mockUserToken),s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Wl(Hl.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");t._credentials=new Gv(new Wv(o,new Tm(s)))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Bl.b)(e,void 0,void 0,function(){var e,n;return Object(Bl.d)(this,function(r){switch(r.label){case 0:return[4,Mv(t)];case 1:return e=r.sent(),[4,Fv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=th(t);return e.$r.delete(0),tb(e)}(n))]}})})})}(by(ry(this._delegate,my)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Bl.b)(e,void 0,void 0,function(){var e,n;return Object(Bl.d)(this,function(r){switch(r.label){case 0:return[4,Mv(t)];case 1:return e=r.sent(),[4,Fv(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Bl.b)(this,void 0,void 0,function(){var e;return Object(Bl.d)(this,function(n){switch(n.label){case 0:return(e=th(t)).$r.add(0),[4,eb(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}})})}(n))]}})})})}(by(ry(this._delegate,my)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Zv("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Yc.enableMultiTabIndexedDbPersistence(this):this.Yc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Yc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.Xc&&(this.Xc._removeServiceInstance("firestore"),this.Xc._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Fp;return t.asyncQueue.enqueueAndForget(function(){return Object(Bl.b)(e,void 0,void 0,function(){var e;return Object(Bl.d)(this,function(r){switch(r.label){case 0:return e=ev,[4,Lv(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(by(ry(this._delegate,my)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new Av(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Bl.b)(n,void 0,void 0,function(){var e;return Object(Bl.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){th(t).Gr.add(e),e.next()},[4,Uv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Wo(),t.asyncQueue.enqueueAndForget(function(){return Object(Bl.b)(n,void 0,void 0,function(){var e;return Object(Bl.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){th(t).Gr.delete(e)},[4,Uv(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(by(t=ry(t,my)),gy(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.Xc)throw new Wl(Hl.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Xc},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new G_(this,ly(this._delegate,t))}catch(t){throw U_(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new L_(this,hy(this._delegate,t))}catch(t){throw U_(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new H_(this,function(t,e){if(t=ry(t,sy),Xv("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Wl(Hl.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new uy(t,null,function(t){return new ld(dh.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw U_(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Fp;return t.asyncQueue.enqueueAndForget(function(){return Object(Bl.b)(n,void 0,void 0,function(){var n;return Object(Bl.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Rv(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new xv(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(by(t),function(n){return e(new T_(t,n))})}(this._delegate,function(n){return t(new M_(e,n))})},t.prototype.batch=function(){var t=this;return by(this._delegate),new P_(new w_(this._delegate,function(e){return I_(t._delegate,e)}))},t.prototype.loadBundle=function(t){throw new Wl(Hl.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Wl(Hl.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),R_=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Bl.c)(e,t),e.prototype.convertBytes=function(t){return new k_(new Cy(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return L_.Zc(e,this.firestore,null)},e}(v_),M_=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new R_(t)}return t.prototype.get=function(t){var e=this,n=$_(t);return this._delegate.get(n).then(function(t){return new B_(e._firestore,new e_(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))})},t.prototype.set=function(t,e,n){var r=$_(t);return n?(Jv("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=$_(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Bl.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=$_(t);return this._delegate.delete(e),this},t}(),P_=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=$_(t);return n?(Jv("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=$_(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Bl.f)([s,e,n],i)),this},t.prototype.delete=function(t){var e=$_(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),F_=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new n_(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new z_(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.tu=function(e,n){var r=t.eu,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new R_(e),n),i.set(n,o)),o},t}();F_.eu=new WeakMap;var L_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new R_(t)}return t.nu=function(e,n,r){if(e.length%2!=0)throw new Wl(Hl.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new ay(n._delegate,r,new Ah(e)))},t.Zc=function(e,n,r){return new t(n,new ay(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new G_(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new G_(this.firestore,ly(this._delegate,t))}catch(t){throw U_(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=Object(Us.q)(t))instanceof ay&&dy(this._delegate,t)},t.prototype.set=function(t,e){e=Jv("DocumentReference.set",e);try{return function(t,e,n){t=ry(t,ay);var r=ry(t.firestore,my),i=y_(t.converter,e,n);return I_(r,[Ny(ky(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,Hd.none())])}(this._delegate,t,e)}catch(t){throw U_(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?E_(this._delegate,t):E_.apply(void 0,Object(Bl.f)([this._delegate,t,e],n))}catch(t){throw U_(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return I_(ry((t=this._delegate).firestore,my),[new sf(t._key,Hd.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=V_(e),i=q_(e,function(e){return new B_(t.firestore,new e_(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))});return S_(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ry(t,ay);var e=ry(t.firestore,my),n=by(e),r=new O_(e);return function(t,e){var n=this,r=new Fp;return t.asyncQueue.enqueueAndForget(function(){return Object(Bl.b)(n,void 0,void 0,function(){var n;return Object(Bl.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Bl.b)(this,void 0,void 0,function(){var r,i;return Object(Bl.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=th(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Mn.mn(t,e)})}(t,e)];case 1:return(i=o.sent()).isFoundDocument()?n.resolve(i):i.isNoDocument()?n.resolve(null):n.reject(new Wl(Hl.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=Ib(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Pv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new e_(e,r,t._key,n,new t_(null!==n&&n.hasLocalMutations,!0),t.converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ry(t,ay);var e=ry(t.firestore,my);return Vv(by(e),t._key,{source:"server"}).then(function(n){return A_(e,t,n)})}(this._delegate):function(t){t=ry(t,ay);var e=ry(t.firestore,my);return Vv(by(e),t._key).then(function(n){return A_(e,t,n)})}(this._delegate)).then(function(t){return new B_(e.firestore,new e_(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))})},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?F_.tu(this.firestore,e):null))},t}();function U_(t,e,n){return t.message=t.message.replace(e,n),t}function V_(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!gy(r))return r}return{}}function q_(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=gy(t[0])?t[0]:gy(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var B_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new L_(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return o_(this._delegate,t._delegate)},t}(),z_=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Bl.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(B_),H_=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new R_(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,u_(this._delegate,function(t,e,n){var r=e,i=Zy("where",t);return new c_(i,r,n)}(e,n,r)))}catch(e){throw U_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,u_(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Zy("orderBy",t);return new l_(r,n)}(e,n)))}catch(e){throw U_(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,u_(this._delegate,function(t){return iy("limit",t),new h_("limit",t,"F")}(e)))}catch(e){throw U_(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,u_(this._delegate,function(t){return iy("limitToLast",t),new h_("limitToLast",t,"L")}(e)))}catch(e){throw U_(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,u_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new d_("startAt",t,!0)}).apply(void 0,e)))}catch(e){throw U_(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,u_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new d_("startAfter",t,!1)}).apply(void 0,e)))}catch(e){throw U_(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,u_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new f_("endBefore",t,!0)}).apply(void 0,e)))}catch(e){throw U_(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,u_(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new f_("endAt",t,!1)}).apply(void 0,e)))}catch(e){throw U_(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return fy(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=ry(t,uy);var e=ry(t.firestore,my),n=by(e),r=new O_(e);return function(t,e){var n=this,r=new Fp;return t.asyncQueue.enqueueAndForget(function(){return Object(Bl.b)(n,void 0,void 0,function(){var n;return Object(Bl.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Bl.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Bl.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,dm(t,e,!0)];case 1:return a=u.sent(),r=new Bb(e,a.Bn),i=r._o(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=Ib(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Pv(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new r_(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=ry(t,uy);var e=ry(t.firestore,my),n=by(e),r=new O_(e);return qv(n,t._query,{source:"server"}).then(function(n){return new r_(e,r,t,n)})}(this._delegate):function(t){t=ry(t,uy);var e=ry(t.firestore,my),n=by(e),r=new O_(e);return s_(t._query),qv(n,t._query).then(function(n){return new r_(e,r,t,n)})}(this._delegate)).then(function(t){return new K_(e.firestore,new r_(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=V_(e),i=q_(e,function(e){return new K_(t.firestore,new r_(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return S_(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,this._delegate.withConverter(e?F_.tu(this.firestore,e):null))},t}(),W_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new z_(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),K_=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new H_(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new z_(t._firestore,e)})},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new W_(e._firestore,t)})},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new z_(n._firestore,r))})},t.prototype.isEqual=function(t){return o_(this._delegate,t._delegate)},t}(),G_=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Bl.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new L_(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new L_(this.firestore,void 0===t?hy(this._delegate):hy(this._delegate,t))}catch(t){throw U_(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=ry(t.firestore,my),r=hy(t),i=y_(t.converter,e);return I_(n,[Ny(ky(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,Hd.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new L_(e.firestore,t)})},e.prototype.isEqual=function(t){return dy(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?F_.tu(this.firestore,t):null))},e}(H_);function $_(t){return ry(t,ay)}var Y_,Q_=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(wy.bind.apply(wy,Object(Bl.f)([void 0],t)))}return t.documentId=function(){return new t(ph.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=Object(Us.q)(t))instanceof wy&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),X_=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new My("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new jy("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Py("arrayUnion",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Fy("arrayRemove",t)}).apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new Ly("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),J_=n("/6Yf"),Z_={Firestore:j_,GeoPoint:Ey,Timestamp:sh,Blob:k_,Transaction:M_,WriteBatch:P_,DocumentReference:L_,DocumentSnapshot:B_,Query:H_,QueryDocumentSnapshot:z_,QuerySnapshot:K_,CollectionReference:G_,FieldPath:Q_,FieldValue:X_,setLogLevel:function(t){Kl.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new J_.a("firestore",function(t){return function(t,e){return new j_(t,new my(t,e),new N_)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Z_)))})(Y_=Ls.a),Y_.registerVersion("@firebase/firestore","2.3.0");var tw=n("VRyK"),ew=n("qgXg"),nw=n("Ylt2");class rw extends He.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new iw(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new We.a;if(this.isStopped||this.hasError?o=Hn.a.EMPTY:(this.observers.push(t),o=new nw.a(this,t)),r&&t.add(t=new Ps.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||ew.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class iw{constructor(t,e){this.time=t,this.value=e}}function ow(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new rw(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function sw(t,e){return e?hn(()=>t,e):hn(()=>t)}var aw=n("tf+s");const uw=new r.r("angularfire2.auth.use-emulator"),cw=new r.r("angularfire2.auth.settings"),lw=new r.r("angularfire2.auth.tenant-id"),hw=new r.r("angularfire2.auth.langugage-code"),dw=new r.r("angularfire2.auth.use-device-language"),fw=new r.r("angularfire.auth.persistence");let pw=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new Fs.e(i),d=Object(Fs.i)(h),f=new He.a,p=Object(ze.a)(void 0).pipe(Object(Ps.b)(h.outsideAngular),hn(()=>i.runOutsideAngular(()=>n.e(5).then(n.bind(null,"6nsN")))),Object(St.a)(()=>Object(Fs.h)(t,i,e)),Object(St.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(Fs.g)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),ow({bufferSize:1,refCount:!1}));if(q(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(ze.a)(null);else{p.pipe(qn()).subscribe();const t=p.pipe(hn(t=>t.getRedirectResult().then(t=>t,()=>null)),d,ow({bufferSize:1,refCount:!1})),e=t=>new Ot.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(hn(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(hn(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(sw(n),Object(aw.a)(h.outsideAngular),Object(Ps.b)(h.insideAngular)),this.user=t.pipe(sw(r),Object(aw.a)(h.outsideAngular),Object(Ps.b)(h.insideAngular)),this.idToken=this.user.pipe(hn(t=>t?Object(Ct.a)(t.getIdToken()):Object(ze.a)(null))),this.idTokenResult=this.user.pipe(hn(t=>t?Object(Ct.a)(t.getIdTokenResult()):Object(ze.a)(null))),this.credential=Object(tw.a)(t,f,this.authState.pipe(Cn(t=>!t))).pipe(Object(St.a)(t=>(null==t?void 0:t.user)?t:null),Object(aw.a)(h.outsideAngular),Object(Ps.b)(h.insideAngular))}return Object(Fs.j)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>f.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Fs.c),r.Rb(Fs.b,8),r.Rb(r.C),r.Rb(r.A),r.Rb(uw,8),r.Rb(cw,8),r.Rb(lw,8),r.Rb(hw,8),r.Rb(dw,8),r.Rb(fw,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(Fs.c),Object(r.Rb)(Fs.b,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(uw,8),Object(r.Rb)(cw,8),Object(r.Rb)(lw,8),Object(r.Rb)(hw,8),Object(r.Rb)(dw,8),Object(r.Rb)(fw,8))},token:t,providedIn:"any"}),t})();Object(Fs.f)(pw,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let gw=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[pw]}),t})();function mw(t,e){return function(t,e=xs.b){return new Ot.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function bw(t,e){return mw(t,e).pipe(Object(St.a)(t=>({payload:t,type:"query"})))}function vw(t,e){return bw(t,e).pipe(vn(void 0),Ds(),Object(St.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function yw(t,e,n){return vw(t,n).pipe(yn((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return _w(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return _w(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return _w(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),js(),Object(St.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function _w(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function ww(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class Cw{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=vw(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(St.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(vn(void 0),Ds(),Cn(([t,e])=>e.length>0||!t),Object(St.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(yn((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=ww(t);return yw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return bw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(St.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Ct.a)(this.query.get(t)).pipe(Object(Ps.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new Ow(this.ref.doc(t),this.afs)}}class Ow{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=xw(n,e);return new Cw(r,i,this.afs)}snapshotChanges(){return mw(this.ref,this.afs.schedulers.outsideAngular).pipe(vn(void 0),Ds(),Object(St.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(St.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(Ct.a)(this.ref.get(t)).pipe(Object(Ps.b)(this.afs.schedulers.insideAngular))}}class Ew{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?vw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(St.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Cn(t=>t.length>0),this.afs.keepUnstableUntilFirst):vw(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(yn((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=ww(t);return yw(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return bw(this.query,this.afs.schedulers.outsideAngular).pipe(Object(St.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(Ct.a)(this.query.get(t)).pipe(Object(Ps.b)(this.afs.schedulers.insideAngular))}}const Sw=new r.r("angularfire2.enableFirestorePersistence"),Iw=new r.r("angularfire2.firestore.persistenceSettings"),Aw=new r.r("angularfire2.firestore.settings"),Tw=new r.r("angularfire2.firestore.use-emulator");function xw(t,e=(t=>t)){return{query:e(t),ref:t}}let Dw=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new Fs.e(o),this.keepUnstableUntilFirst=Object(Fs.i)(this.schedulers);const c=Object(Fs.h)(t,o,e);!Ts.a.auth&&u&&Object(Fs.k)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(Fs.g)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!q(i)){const e=()=>{try{return Object(Ct.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Y_){return"undefined"!=typeof console&&console.warn(Y_),Object(ze.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(ze.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=xw(n,e),o=this.schedulers.ngZone.run(()=>r);return new Cw(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new Ew(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new Ow(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Fs.c),r.Rb(Fs.b,8),r.Rb(Sw,8),r.Rb(Aw,8),r.Rb(r.C),r.Rb(r.A),r.Rb(Iw,8),r.Rb(Tw,8),r.Rb(uw,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(Fs.c),Object(r.Rb)(Fs.b,8),Object(r.Rb)(Sw,8),Object(r.Rb)(Aw,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(Iw,8),Object(r.Rb)(Tw,8),Object(r.Rb)(uw,8))},token:t,providedIn:"any"}),t})(),kw=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:Sw,useValue:!0},{provide:Iw,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[Dw]}),t})();var Nw=n("w1tV");class jw{constructor(t,e){this.observables=t,this.project=e}call(t,e){return e.subscribe(new Rw(t,this.observables,this.project))}}class Rw extends Ye{constructor(t,e,n){super(t),this.observables=e,this.project=n,this.toRespond=[];const r=e.length;this.values=new Array(r);for(let i=0;i<r;i++)this.toRespond.push(i);for(let i=0;i<r;i++)this.add(Je(this,e[i],void 0,i))}notifyNext(t,e,n){this.values[n]=e;const r=this.toRespond;if(r.length>0){const t=r.indexOf(n);-1!==t&&r.splice(t,1)}}notifyComplete(){}_next(t){if(0===this.toRespond.length){const e=[t,...this.values];this.project?this._tryProject(e):this.destination.next(e)}}_tryProject(t){let e;try{e=this.project.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}class Mw{constructor(t){this.predicate=t}call(t,e){return e.subscribe(new Pw(t,this.predicate))}}class Pw extends $e.a{constructor(t,e){super(t),this.predicate=e,this.skipping=!0,this.index=0}_next(t){const e=this.destination;this.skipping&&this.tryCallPredicate(t),this.skipping||e.next(t)}tryCallPredicate(t){try{const e=this.predicate(t,this.index++);this.skipping=Boolean(e)}catch(e){this.destination.error(e)}}}function Fw(t){return null==t}function Lw(t){return"function"==typeof t.set}function Uw(t,e){return Lw(e)?e:t.ref(e)}function Vw(t,e){if("string"==typeof t)return e.stringCase();if(Lw(t))return e.firebaseCase();if("function"==typeof t.exportVal)return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof t)}function qw(t,e,n="on",r=xs.b){return new Ot.a(i=>{let o=null;return o=t[n](e,(t,e)=>{r.schedule(()=>{i.next({snapshot:t,prevKey:e})}),"once"===n&&r.schedule(()=>i.complete())},t=>{r.schedule(()=>i.error(t))}),"on"===n?{unsubscribe(){null!=o&&t.off(e,o)}}:{unsubscribe(){}}}).pipe(Object(St.a)(t=>{const{snapshot:n,prevKey:r}=t;let i=null;return n.exists()&&(i=n.key),{type:e,payload:n,prevKey:r,key:i}}),Object(Nw.a)())}function Bw(t,e){const n=t.length;for(let r=0;r<n;r++)if(t[r].payload.key===e)return r;return-1}function zw(t,e){const{payload:n,prevKey:r,key:i}=e,o=Bw(t,i),s=function(t,e){if(Fw(e))return 0;{const n=Bw(t,e);return-1===n?t.length:n+1}}(t,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let n=null;e.payload.forEach(e=>{const r={payload:e,type:"value",prevKey:n,key:e.key};return n=e.key,t=[...t,r],!1})}return t;case"child_added":if(o>-1){const i=t[o-1];(i&&i.key||null)!==r&&(t=t.filter(t=>t.payload.key!==n.key)).splice(s,0,e)}else{if(null==r)return[e,...t];(t=t.slice()).splice(s,0,e)}return t;case"child_removed":return t.filter(t=>t.payload.key!==n.key);case"child_changed":return t.map(t=>t.payload.key===i?e:t);case"child_moved":if(o>-1){const e=t.splice(o,1)[0];return(t=t.slice()).splice(s,0,e),t}return t;default:return t}}function Hw(t){return(Fw(t)||0===t.length)&&(t=["child_added","child_removed","child_changed","child_moved"]),t}function Ww(t,e,n){return function(t,e,n){return qw(t,"value","once",n).pipe(hn(r=>{const i=[Object(ze.a)(r)];return e.forEach(e=>i.push(qw(t,e,"on",n))),Object(tw.a)(...i).pipe(yn(zw,[]))}),js())}(t,e=Hw(e),n)}function Kw(t,e,n){const r=(e=Hw(e)).map(e=>qw(t,e,"on",n));return Object(tw.a)(...r)}function Gw(t,e){return function(n,r){return Vw(n,{stringCase:()=>t.child(n)[e](r),firebaseCase:()=>n[e](r),snapshotCase:()=>n.ref[e](r)})}}function $w(t,e){return function(){return qw(t,"value","on",e)}}n("6Uf2");const Yw=new r.r("angularfire2.realtimeDatabaseURL"),Qw=new r.r("angularfire2.database.use-emulator");let Xw=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Fs.e(i),this.keepUnstableUntilFirst=Object(Fs.i)(this.schedulers);const a=o,u=Object(Fs.h)(t,i,e);!Ts.a.auth&&s&&Object(Fs.k)(),this.database=Object(Fs.g)(`${u.name}.database.${n}`,"AngularFireDatabase",u,()=>{const t=i.runOutsideAngular(()=>u.database(n||void 0));return a&&t.useEmulator(...a),t},[a])}list(t,e){const n=this.schedulers.ngZone.runOutsideAngular(()=>Uw(this.database,t));let r=n;return e&&(r=e(n)),function(t,e){const n=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>t.ref);return{query:t,update:Gw(r,"update"),set:Gw(r,"set"),push:t=>r.push(t),remove:(i=r,function(t){return t?Vw(t,{stringCase:()=>i.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):i.remove()}),snapshotChanges:r=>Ww(t,r,n).pipe(e.keepUnstableUntilFirst),stateChanges:r=>Kw(t,r,n).pipe(e.keepUnstableUntilFirst),auditTrail:r=>function(t,e,n){return function(t,e,n){return function(t,e){return qw(t,"value","on",e).pipe(Object(St.a)(t=>{let e;return t.payload.forEach(t=>(e=t.key,!1)),{data:t,lastKeyToLoad:e}}))}(t,n).pipe(function(...t){return e=>{let n;return"function"==typeof t[t.length-1]&&(n=t.pop()),e.lift(new jw(t,n))}}(e),Object(St.a)(([t,e])=>{const n=t.lastKeyToLoad,r=e.map(t=>t.key);return{actions:e,lastKeyToLoad:n,loadedKeys:r}}),(r=t=>-1===t.loadedKeys.indexOf(t.lastKeyToLoad),t=>t.lift(new Mw(r))),Object(St.a)(t=>t.actions));var r}(t,Kw(t,e).pipe(yn((t,e)=>[...t,e],[])),n)}(t,r,n).pipe(e.keepUnstableUntilFirst),valueChanges:(r,i)=>Ww(t,r,n).pipe(Object(St.a)(t=>t.map(t=>i&&i.idField?Object.assign(Object.assign({},t.payload.val()),{[i.idField]:t.key}):t.payload.val())),e.keepUnstableUntilFirst)};var i}(r,this)}object(t){const e=this.schedulers.ngZone.runOutsideAngular(()=>Uw(this.database,t));return r=this,{query:n=e,snapshotChanges:()=>$w(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>$w(n,r.schedulers.outsideAngular)().pipe(r.keepUnstableUntilFirst,Object(St.a)(t=>t.payload.exists()?t.payload.val():null))};var n,r}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Fs.c),r.Rb(Fs.b,8),r.Rb(Yw,8),r.Rb(r.C),r.Rb(r.A),r.Rb(Qw,8),r.Rb(uw,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(Fs.c),Object(r.Rb)(Fs.b,8),Object(r.Rb)(Yw,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(Qw,8),Object(r.Rb)(uw,8))},token:t,providedIn:"any"}),t})(),Jw=(()=>{class t{constructor(){this.cartDataSub=new Ke(null)}setUser(t){localStorage.setItem("user",t)}getUser(){return localStorage.getItem("user")}setIsAuthenticated(t){localStorage.setItem("isAuthenticated",t)}getIsAuthenticated(){return localStorage.getItem("isAuthenticated")}setIsAdmin(t){localStorage.setItem("isAdmin",t)}getIsAdmin(){return localStorage.getItem("isAdmin")}setUserName(t){localStorage.setItem("name",t)}getUserName(){return localStorage.getItem("name")}clearDataOnLogOut(){localStorage.removeItem("user"),localStorage.removeItem("isAdmin"),localStorage.removeItem("isAuthenticated"),localStorage.removeItem("name")}addCartData(t){localStorage.setItem("cartData",JSON.stringify(t));const e=JSON.parse(localStorage.getItem("cartData"));0==Object.keys(e.items).length&&this.removeCartData(),this.cartDataSub.next(JSON.parse(this.getCartData()))}removeCartData(){null!=localStorage.getItem("cartData")&&localStorage.removeItem("cartData"),this.cartDataSub.next(null)}getCartData(){return localStorage.getItem("cartData")}getCartDataObservable(){return this.cartDataSub.next(JSON.parse(this.getCartData())),this.cartDataSub.asObservable()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),Zw=(()=>{class t{constructor(t,e,n){this.afdb=t,this.http=e,this.handleLocalStorageService=n,this.userData={uid:null,email:null,name:null,phone:null,address:null,role:{val:"customer"}},this.userDataSub=new Ke(this.userData),this.isAdminSub=new Ke(null)}createNewUser(t,e,n){this.userData.name=t,this.userData.email=e,this.userData.uid=n,this.userObj=this.afdb.object("users/"+this.userData.uid),this.userObj.set(this.userData).then(()=>{this.getUserDataFromFirebase()}),this.userDataSub.next(this.userData)}getUserDataObservable(){return this.userDataSub.asObservable()}getUserDataFromFirebase(){null!=this.handleLocalStorageService.getUser()&&this.http.get(Ho.databaseURL+"/users/"+localStorage.getItem("user")+".json").subscribe(t=>{this.userData=t,this.userDataSub.next(this.userData),this.handleLocalStorageService.setUserName(this.userData.name),"admin"==t.role.val?(this.handleLocalStorageService.setIsAdmin("true"),this.isAdminSub.next(!0)):"customer"==t.role.val&&(this.isAdminSub.next(!1),this.handleLocalStorageService.setIsAdmin("false"))})}getIsAdminObservable(){return this.isAdminSub.next("true"==this.userData.role.val),this.isAdminSub.asObservable()}updateUserData(t){return this.handleLocalStorageService.setUserName(t.name),this.userDataSub.next(t),this.userObj=this.afdb.object("users/"+t.uid),this.userObj.update(t)}checkAddressPresentOrNot(){return Object(Bl.b)(this,void 0,void 0,function*(){if(null!=this.handleLocalStorageService.getUser())return yield this.getAddressFromFirebase()})}getAddressFromFirebase(){return Object(Bl.b)(this,void 0,void 0,function*(){return yield this.http.get(Ho.databaseURL+"/users/"+localStorage.getItem("user")+"/address.json").toPromise()})}getAllUsersData(){return Object(Bl.b)(this,void 0,void 0,function*(){const t=Ho.databaseURL+"/users.json";return yield this.http.get(t).toPromise()})}clearUserDataLocally(){Object.entries(this.userData).forEach(([t,e])=>{"role"===t?this.userData.role.val="customer":this.userData[t]=null})}set setUid(t){this.userData.uid=t}get getUid(){return this.userData.uid}set setEmail(t){this.userData.email=t}set setName(t){this.userData.name=t}get getName(){return this.userData.name}set setPhone(t){this.userData.phone=t}set setAddress(t){this.userData.address=t}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Xw),r.Rb(as),r.Rb(Jw))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),tC=(()=>{class t{constructor(t,e,n,r,i){this.afs=t,this.afAuth=e,this.router=n,this.userDataService=r,this.handleLocalStorageService=i,this.isAuthenticated=!1,this.isAuthSub=new Ke(null),this.authStateData=null,this.authStateSubject=new He.a,this.afAuth.authState.subscribe(t=>{t?(i.setUser(t.uid),this.userDataService.getUserDataFromFirebase(),this.setIsAuthenticated(!0),i.setIsAuthenticated("true"),this.setAuthState(t)):(this.setIsAuthenticated(!1),i.clearDataOnLogOut())})}signIn(t,e){return this.afAuth.signInWithEmailAndPassword(t,e)}signUp(t,e){return this.afAuth.createUserWithEmailAndPassword(t,e)}authenticateWithGoogle(){return this.afAuth.signInWithPopup(new Ts.a.auth.GoogleAuthProvider)}autoLogIn(){null!=localStorage.getItem("user")&&(this.setIsAuthenticated(!0),this.handleLocalStorageService.setIsAuthenticated("true"))}logOut(){this.afAuth.signOut().then(()=>{this.handleLocalStorageService.clearDataOnLogOut(),this.setIsAuthenticated(!1),this.setAuthState(null),this.router.navigate([""])})}getIsAuthObservable(){return this.isAuthSub.next(this.isAuthenticated),this.isAuthSub.asObservable()}setIsAuthenticated(t){this.isAuthenticated=t,this.isAuthSub.next(this.isAuthenticated)}getAuthStateObservable(){return this.authStateSubject.asObservable()}setAuthState(t){this.authStateData=t,this.authStateSubject.next(this.authStateData)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Dw),r.Rb(pw),r.Rb(_o),r.Rb(Zw),r.Rb(Jw))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),eC=(()=>{class t{constructor(){this.errorSubject=new He.a,this.errorObj={logIn:{errorFound:null,email:null,password:null,unknown:null},signUp:{errorFound:null,name:null,email:null,password:null,unknown:null}}}getErrorObservable(){return this.errorSubject.asObservable()}initializeErrorObj(){this.errorSubject.next(this.errorObj)}foundLogInError(){return!(null===this.errorObj.logIn.errorFound)}foundSignUpError(){return!(null===this.errorObj.signUp.errorFound)}handleAuthError(t,e){if("logIn"===e)switch(this.errorObj.logIn.errorFound=!0,t.code){case"auth/user-not-found":this.errorObj.logIn.email="Email not registered.";break;case"auth/wrong-password":this.errorObj.logIn.password="Password doesn't match.";break;default:this.errorObj.logIn.unknown=t.message}else if("signUp"===e)switch(t.code){case"auth/email-already-in-use":this.errorObj.signUp.email="Email already in use.";break;case"auth/invalid-email":this.errorObj.signUp.email="Please enter a valid email.";break;default:this.errorObj.signUp.unknown=t.message}this.errorSubject.next(this.errorObj)}clearLogInError(){Object.entries(this.errorObj.logIn).forEach(([t,e])=>{this.errorObj.logIn[t]=null}),this.errorSubject.next(this.errorObj)}clearSignUpError(){Object.entries(this.errorObj.signUp).forEach(([t,e])=>{this.errorObj.signUp[t]=null}),this.errorSubject.next(this.errorObj)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function nC(t,e){1&t&&(r.Nb(0,"span",19),r.oc(1,"Please enter a valid email."),r.Mb())}function rC(t,e){if(1&t&&(r.Nb(0,"span",19),r.oc(1),r.Mb()),2&t){const t=r.Yb();r.Ab(1),r.pc(t.errorObj.logIn.email)}}function iC(t,e){1&t&&(r.Nb(0,"span",19),r.oc(1,"Password length must be greater than 8."),r.Mb())}function oC(t,e){if(1&t&&(r.Nb(0,"span",20),r.oc(1),r.Mb()),2&t){const t=r.Yb();r.Ab(1),r.pc(t.errorObj.logIn.password)}}function sC(t,e){1&t&&r.Lb(0,"i",21)}function aC(t,e){1&t&&r.Lb(0,"span",22)}function uC(t,e){if(1&t&&(r.Nb(0,"span",23),r.oc(1),r.Mb()),2&t){const t=r.Yb();r.Ab(1),r.pc(t.errorObj.logIn.unknown)}}const cC=function(t){return{"error-border":t}},lC=function(){return["/sign-up"]};let hC=(()=>{class t{constructor(t,e,n,r){this.authService=t,this.router=e,this.authErrorHandler=n,this.userDataService=r,this.isLoggingIn=!1,this.isBtnClicked=!1,this.isHideResponseErrors=!0,this.errorSub=n.getErrorObservable().subscribe(t=>{this.errorObj=t}),this.authErrorHandler.initializeErrorObj()}ngOnInit(){this.logInForm=new Oe({email:new Ce("",[Lt.required,Lt.email]),password:new Ce("",[Lt.required,Lt.minLength(8)])}),this.errorObj={logIn:{errorFound:null,email:null,password:null,unknown:null},signUp:{errorFound:null,name:null,email:null,password:null,unknown:null}}}ngOnDestroy(){this.errorSub.unsubscribe()}onLogIn(){this.logInForm.invalid||(this.isBtnClicked=!0,this.isLoggingIn=!0,this.email=this.logInForm.get("email").value,this.password=this.logInForm.get("password").value,this.authService.signIn(this.email,this.password).then(t=>{this.isLoggingIn=!1,this.isHideResponseErrors=!0,this.router.navigate([""])}).catch(t=>{this.isBtnClicked=!1,this.isHideResponseErrors=!1,this.isLoggingIn=!1,this.authErrorHandler.handleAuthError(t,"logIn")}))}onLogInWithGoogle(){this.authService.authenticateWithGoogle().then(t=>{1==t.additionalUserInfo.isNewUser&&this.userDataService.createNewUser(t.user.displayName,t.user.email,t.user.uid),this.router.navigate([""])}).catch(t=>{console.log(t),this.authErrorHandler.handleAuthError(t,"logIn")})}hideResponseErrors(){this.authErrorHandler.foundLogInError&&!1===this.isHideResponseErrors&&(this.isHideResponseErrors=!this.isHideResponseErrors,this.authErrorHandler.clearLogInError())}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(tC),r.Kb(_o),r.Kb(eC),r.Kb(Zw))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-login"]],decls:28,vars:17,consts:[[1,"form-signin"],[1,"h3","mb-3","fw-normal"],[3,"formGroup","ngSubmit"],[3,"click"],[1,"form-floating"],["type","email","id","floatingInput","placeholder","name@example.com","formControlName","email",1,"form-control",3,"ngClass"],["for","floatingInput",1,"floating-label"],["class","error-text",4,"ngIf"],["type","password","id","floatingPassword","placeholder","Password","formControlName","password",1,"form-control",3,"ngClass"],["for","floatingPassword",1,"floating-label"],["class","error-text","style","margin-top: -100px;",4,"ngIf"],["type","submit",1,"w-100","btn","btn-lg","btn-primary",2,"margin-top","10px",3,"disabled"],["class","fa fa-arrow-right",4,"ngIf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["type","button",1,"w-100","btn","btn-lg","btn-primary","google-btn",2,"margin-bottom","25px",3,"click"],[1,"google-btn-text"],["class","unknown-error-text",4,"ngIf"],[1,"mobile-only"],[3,"routerLink"],[1,"error-text"],[1,"error-text",2,"margin-top","-100px"],[1,"fa","fa-arrow-right"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],[1,"unknown-error-text"]],template:function(t,e){1&t&&(r.Nb(0,"main",0),r.Nb(1,"h1",1),r.oc(2,"Log in"),r.Mb(),r.Nb(3,"form",2),r.Ub("ngSubmit",function(){return e.onLogIn()}),r.Nb(4,"div",3),r.Ub("click",function(){return e.hideResponseErrors()}),r.Nb(5,"div",4),r.Lb(6,"input",5),r.Nb(7,"label",6),r.oc(8,"Email address"),r.Mb(),r.nc(9,nC,2,0,"span",7),r.nc(10,rC,2,1,"span",7),r.Mb(),r.Nb(11,"div",4),r.Lb(12,"input",8),r.Nb(13,"label",9),r.oc(14,"Password"),r.Mb(),r.nc(15,iC,2,0,"span",7),r.nc(16,oC,2,1,"span",10),r.Mb(),r.Mb(),r.Nb(17,"button",11),r.nc(18,sC,1,0,"i",12),r.nc(19,aC,1,0,"span",13),r.Mb(),r.Mb(),r.Nb(20,"button",14),r.Ub("click",function(){return e.onLogInWithGoogle()}),r.Nb(21,"span",15),r.oc(22,"Log in with Google"),r.Mb(),r.Mb(),r.nc(23,uC,2,1,"span",16),r.Nb(24,"p",17),r.oc(25,"Don't have an account? "),r.Nb(26,"a",18),r.oc(27,"Sign up"),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(3),r.dc("formGroup",e.logInForm),r.Ab(3),r.dc("ngClass",r.gc(12,cC,!e.isHideResponseErrors&&null!=e.errorObj.logIn.email)),r.Ab(3),r.dc("ngIf",null!=e.logInForm.controls.email.errors&&e.logInForm.controls.email.touched),r.Ab(1),r.dc("ngIf",!e.isHideResponseErrors&&null!=e.errorObj.logIn.email),r.Ab(2),r.dc("ngClass",r.gc(14,cC,!e.isHideResponseErrors&&null!=e.errorObj.logIn.password)),r.Ab(3),r.dc("ngIf",null!=e.logInForm.controls.password.errors&&e.logInForm.controls.password.touched),r.Ab(1),r.dc("ngIf",!e.isHideResponseErrors&&null!=e.errorObj.logIn.password),r.Ab(1),r.dc("disabled",!e.logInForm.valid||e.isBtnClicked),r.Ab(1),r.dc("ngIf",!e.isLoggingIn),r.Ab(1),r.dc("ngIf",e.isLoggingIn),r.Ab(4),r.dc("ngIf",null!=e.errorObj.logIn.unknown),r.Ab(3),r.dc("routerLink",r.fc(16,lC)))},directives:[Se,ie,xe,Nt,re,ke,x,j,Co],styles:[".form-signin[_ngcontent-%COMP%]{margin:auto;max-width:330px;min-height:70vh;padding-bottom:180px;padding-top:150px;width:100%}.floating-label[_ngcontent-%COMP%]{color:#6d6d6d}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0;margin-bottom:-1px}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{border-top-left-radius:0;border-top-right-radius:0;margin-bottom:1px}button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#adadad;border-color:inherit}input[type=email].ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid #ff5353}input[type=password].ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid #ff5353;margin-bottom:-1px}.error-text[_ngcontent-%COMP%]{color:#ff5353;font-size:13px;margin-left:13px}.unknown-error-text[_ngcontent-%COMP%]{color:#ff5353;font-size:13px;margin-top:10px}.error-border[_ngcontent-%COMP%]{border:1px solid #ff5353}.google-btn[_ngcontent-%COMP%]{margin-top:10px}.google-btn-text[_ngcontent-%COMP%]{font-size:16px}"]}),t})();function dC(t,e){1&t&&(r.Nb(0,"span",20),r.oc(1,"What's your name?"),r.Mb())}function fC(t,e){1&t&&(r.Nb(0,"span",20),r.oc(1,"Please enter a valid email."),r.Mb())}function pC(t,e){if(1&t&&(r.Nb(0,"span",20),r.oc(1),r.Mb()),2&t){const t=r.Yb();r.Ab(1),r.pc(t.errorObj.signUp.email)}}function gC(t,e){1&t&&(r.Nb(0,"span",20),r.oc(1,"Password length must be greater than 8."),r.Mb())}function mC(t,e){1&t&&r.Lb(0,"i",21)}function bC(t,e){1&t&&r.Lb(0,"span",22)}function vC(t,e){1&t&&r.Lb(0,"i",23)}function yC(t,e){if(1&t&&(r.Nb(0,"span",24),r.oc(1),r.Mb()),2&t){const t=r.Yb();r.Ab(1),r.pc(t.errorObj.signUp.unknown)}}const _C=function(t){return{"error-border":t}},wC=function(){return["/login"]};let CC=(()=>{class t{constructor(t,e,n,r){this.authService=t,this.router=e,this.authErrorHandler=n,this.userDataService=r,this.isBtnClicked=!1,this.isSignedUp=!1,this.isHideResponseErrors=!0,this.isSigningUp=!1,this.errorSub=n.getErrorObservable().subscribe(t=>{this.errorObj=t}),this.authErrorHandler.initializeErrorObj()}ngOnInit(){this.signUpForm=new Oe({name:new Ce("",Lt.required),email:new Ce("",[Lt.required,Lt.email]),password:new Ce("",[Lt.required,Lt.minLength(8)])}),this.errorObj={logIn:{errorFound:null,email:null,password:null,unknown:null},signUp:{errorFound:null,name:null,email:null,password:null,unknown:null}}}ngOnDestroy(){this.errorSub.unsubscribe()}onSignUp(){this.signUpForm.invalid||(this.isBtnClicked=!0,this.isSigningUp=!0,this.name=this.signUpForm.get("name").value,this.email=this.signUpForm.get("email").value,this.password=this.signUpForm.get("password").value,this.authService.signUp(this.email,this.password).then(t=>{this.isSignedUp=!0,this.isSigningUp=!1,this.isHideResponseErrors=!0,this.userDataService.createNewUser(this.name,this.email,t.user.uid),setTimeout(()=>{this.router.navigate([""])},1500)}).catch(t=>{this.isSignedUp=!1,this.isSigningUp=!1,this.isBtnClicked=!1,this.isHideResponseErrors=!1,this.authErrorHandler.handleAuthError(t,"signUp")}))}onSignUpWithGoogle(){this.authService.authenticateWithGoogle().then(t=>{1==t.additionalUserInfo.isNewUser&&this.userDataService.createNewUser(t.user.displayName,t.user.email,t.user.uid),setTimeout(()=>{this.router.navigate([""])},1500)}).catch(t=>{this.authErrorHandler.handleAuthError(t,"signUp")})}hideResponseErrors(){this.authErrorHandler.foundSignUpError&&!1===this.isHideResponseErrors&&(this.isHideResponseErrors=!this.isHideResponseErrors,this.authErrorHandler.clearSignUpError())}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(tC),r.Kb(_o),r.Kb(eC),r.Kb(Zw))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-signup"]],decls:32,vars:15,consts:[[1,"form-signin"],[1,"h3","mb-3","fw-normal"],[3,"formGroup","ngSubmit"],[1,"form-floating"],["type","name","id","name","placeholder","Sreya Saha","formControlName","name",1,"form-control"],["for","floatingInput",1,"floating-label"],["class","error-text",4,"ngIf"],[1,"form-floating",3,"click"],["type","email","id","email","placeholder","name@example.com","formControlName","email",1,"form-control",3,"ngClass"],["type","password","id","password","placeholder","Password","name","password","formControlName","password",1,"form-control"],["for","floatingPassword",1,"floating-label"],["type","submit",1,"w-100","btn","btn-lg","btn-primary",3,"disabled"],["class","fa fa-arrow-right",4,"ngIf"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["class","fa fa-check","aria-hidden","true",4,"ngIf"],["type","button",1,"w-100","btn","btn-lg","btn-primary","google-btn",2,"margin-bottom","25px",3,"click"],[1,"google-btn-text"],["class","unknown-error-text",4,"ngIf"],[1,"mobile-only"],[3,"routerLink"],[1,"error-text"],[1,"fa","fa-arrow-right"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"],["aria-hidden","true",1,"fa","fa-check"],[1,"unknown-error-text"]],template:function(t,e){1&t&&(r.Nb(0,"main",0),r.Nb(1,"h1",1),r.oc(2,"Sign up"),r.Mb(),r.Nb(3,"form",2),r.Ub("ngSubmit",function(){return e.onSignUp()}),r.Nb(4,"div",3),r.Lb(5,"input",4),r.Nb(6,"label",5),r.oc(7,"Name"),r.Mb(),r.nc(8,dC,2,0,"span",6),r.Mb(),r.Nb(9,"div",7),r.Ub("click",function(){return e.hideResponseErrors()}),r.Lb(10,"input",8),r.Nb(11,"label",5),r.oc(12,"Email address"),r.Mb(),r.nc(13,fC,2,0,"span",6),r.nc(14,pC,2,1,"span",6),r.Mb(),r.Nb(15,"div",3),r.Lb(16,"input",9),r.Nb(17,"label",10),r.oc(18,"Password"),r.Mb(),r.nc(19,gC,2,0,"span",6),r.Mb(),r.Nb(20,"button",11),r.nc(21,mC,1,0,"i",12),r.nc(22,bC,1,0,"span",13),r.nc(23,vC,1,0,"i",14),r.Mb(),r.Mb(),r.Nb(24,"button",15),r.Ub("click",function(){return e.onSignUpWithGoogle()}),r.Nb(25,"span",16),r.oc(26,"Sign up with Google"),r.Mb(),r.Mb(),r.nc(27,yC,2,1,"span",17),r.Nb(28,"p",18),r.oc(29,"Have an account? "),r.Nb(30,"a",19),r.oc(31,"Log in"),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(3),r.dc("formGroup",e.signUpForm),r.Ab(5),r.dc("ngIf",null!=e.signUpForm.controls.name.errors&&e.signUpForm.controls.name.touched),r.Ab(2),r.dc("ngClass",r.gc(12,_C,!e.isHideResponseErrors&&null!=e.errorObj.signUp.email)),r.Ab(3),r.dc("ngIf",null!=e.signUpForm.controls.email.errors&&e.signUpForm.controls.email.touched),r.Ab(1),r.dc("ngIf",!e.isHideResponseErrors&&null!=e.errorObj.signUp.email),r.Ab(5),r.dc("ngIf",null!=e.signUpForm.controls.password.errors&&e.signUpForm.controls.password.touched),r.Ab(1),r.dc("disabled",!e.signUpForm.valid||e.isBtnClicked||e.isSignedUp),r.Ab(1),r.dc("ngIf",!e.isSigningUp&&!e.isSignedUp),r.Ab(1),r.dc("ngIf",e.isSigningUp),r.Ab(1),r.dc("ngIf",e.isSignedUp&&e.isBtnClicked),r.Ab(4),r.dc("ngIf",null!=e.errorObj.signUp.unknown),r.Ab(3),r.dc("routerLink",r.fc(14,wC)))},directives:[Se,ie,xe,Nt,re,ke,j,x,Co],styles:[".form-signin[_ngcontent-%COMP%]{margin:auto;max-width:330px;min-height:70vh;padding-bottom:180px;padding-top:150px;width:100%}.floating-label[_ngcontent-%COMP%]{color:#6d6d6d}.form-signin[_ngcontent-%COMP%]   .checkbox[_ngcontent-%COMP%]{font-weight:400}.form-signin[_ngcontent-%COMP%]   .form-floating[_ngcontent-%COMP%]:focus-within{z-index:2}.form-signin[_ngcontent-%COMP%]   input[type=name][_ngcontent-%COMP%]{border-top-left-radius:0;border-top-right-radius:0;margin-bottom:-1px}.form-signin[_ngcontent-%COMP%]   input[type=email][_ngcontent-%COMP%]{border-bottom-left-radius:0;border-bottom-right-radius:0;margin-bottom:-1px}.form-signin[_ngcontent-%COMP%]   input[type=password][_ngcontent-%COMP%]{border-top-left-radius:0;border-top-right-radius:0;margin-bottom:10px}button[type=submit][_ngcontent-%COMP%]:disabled{background-color:#adadad;border-color:inherit}input[type=email].ng-invalid.ng-touched[_ngcontent-%COMP%], input[type=name].ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid #ff5353}input[type=password].ng-invalid.ng-touched[_ngcontent-%COMP%]{border:1px solid #ff5353;margin-bottom:-1px}.error-text[_ngcontent-%COMP%]{color:#ff5353;font-size:13px;margin-left:13px}.error-border[_ngcontent-%COMP%]{border:1px solid #ff5353}.unknown-error-text[_ngcontent-%COMP%]{color:#ff5353;font-size:13px;margin-top:10px}.google-btn[_ngcontent-%COMP%]{margin-top:10px}.google-btn-text[_ngcontent-%COMP%]{font-size:16px}"]}),t})();function OC(t,e){1&t&&(r.Nb(0,"span",16),r.oc(1,"Name cannot be blank."),r.Mb())}function EC(t,e){1&t&&(r.Nb(0,"span",16),r.oc(1," Enter a 10 digit valid phone number. "),r.Mb())}function SC(t,e){1&t&&(r.Nb(0,"div",17),r.oc(1," Profile updated! "),r.Mb())}function IC(t,e){1&t&&(r.Nb(0,"div",18),r.oc(1," Some error occurred. "),r.Mb())}let AC=(()=>{class t{constructor(t,e,n,r){this.userDataService=t,this.router=e,this.route=n,this.handleLocalStorageService=r,this.pathVar="",this.isUpdateSuccess=!1,this.isUpdateFailure=!1,this.pathVar=this.route.snapshot.params.name}ngOnInit(){if(""!=this.pathVar&&null!=this.pathVar){let t=this.makeProfilePath(this.handleLocalStorageService.getUserName());this.pathVar!=t&&this.router.navigate(["not-found"])}this.userDataSub=this.userDataService.getUserDataObservable().subscribe(t=>{this.userData=t,null!=this.userData&&(null!=this.userData.name&&this.userProfileForm.patchValue({name:this.userData.name}),null!=this.userData.phone&&this.userProfileForm.patchValue({phone:this.userData.phone}),null!=this.userData.email&&this.userProfileForm.patchValue({email:this.userData.email}),null!=this.userData.address&&this.userProfileForm.patchValue({address:this.userData.address}))}),this.userProfileForm=new Oe({name:new Ce(this.userData.name,[Lt.required]),phone:new Ce(this.userData.phone,[Lt.pattern("^((\\+91-?)|0)?[0-9]{10}$")]),email:new Ce(this.userData.email),address:new Ce(this.userData.address),role:new Ce(this.userData.role.val)})}ngOnDestroy(){this.userDataSub.unsubscribe()}onUpdate(){this.userProfileForm.invalid||(this.userData.name=this.userProfileForm.get("name").value,this.userData.phone=this.userProfileForm.get("phone").value,this.userData.address=this.userProfileForm.get("address").value,this.userDataService.setUid=this.userData.uid,this.userDataService.updateUserData(this.userData).then(()=>{let t;this.isUpdateSuccess=!0,t=this.makeProfilePath(this.userDataService.getName),this.router.navigate(["profile",t])}).catch(()=>{this.isUpdateFailure=!0}),setTimeout(()=>{this.isUpdateFailure=this.isUpdateSuccess=!1},2e3))}replaceUndefinedOrNull(t){return null==t||null==t?" ":t}makeProfilePath(t){return t.split(" ").join("-")}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Zw),r.Kb(_o),r.Kb(Zr),r.Kb(Jw))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-user-profile"]],decls:32,vars:6,consts:[[1,"container","profile-div"],[1,"row"],[1,"col-xs-12","col-md-6","col-md-offset-3"],[2,"margin-bottom","40px"],[3,"formGroup","ngSubmit"],[1,"form-group"],["for","exampleInputEmail1"],["type","name","formControlName","name",1,"form-control"],["class","error-text",4,"ngIf"],["type","phone","formControlName","phone",1,"form-control"],["type","email","formControlName","email","readonly","",1,"form-control"],["type","address","formControlName","address",1,"form-control"],["type","role","formControlName","role","readonly","",1,"form-control"],["class","alert alert-success mx-auto","role","alert",4,"ngIf"],["class","alert alert-danger mx-auto","role","alert",4,"ngIf"],["type","submit",1,"btn","btn-md","btn-primary",3,"disabled"],[1,"error-text"],["role","alert",1,"alert","alert-success","mx-auto"],["role","alert",1,"alert","alert-danger","mx-auto"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Nb(2,"div",2),r.Nb(3,"h2",3),r.oc(4,"Your profile"),r.Mb(),r.Nb(5,"form",4),r.Ub("ngSubmit",function(){return e.onUpdate()}),r.Nb(6,"div",5),r.Nb(7,"label",6),r.oc(8,"Name"),r.Mb(),r.Lb(9,"input",7),r.nc(10,OC,2,0,"span",8),r.Mb(),r.Nb(11,"div",5),r.Nb(12,"label",6),r.oc(13,"Phone"),r.Mb(),r.Lb(14,"input",9),r.nc(15,EC,2,0,"span",8),r.Mb(),r.Nb(16,"div",5),r.Nb(17,"label",6),r.oc(18,"Email"),r.Mb(),r.Lb(19,"input",10),r.Mb(),r.Nb(20,"div",5),r.Nb(21,"label",6),r.oc(22,"Address"),r.Mb(),r.Lb(23,"input",11),r.Mb(),r.Nb(24,"div",5),r.Nb(25,"label",6),r.oc(26,"Role"),r.Mb(),r.Lb(27,"input",12),r.Mb(),r.nc(28,SC,2,0,"div",13),r.nc(29,IC,2,0,"div",14),r.Nb(30,"button",15),r.oc(31," Update "),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(5),r.dc("formGroup",e.userProfileForm),r.Ab(5),r.dc("ngIf",null!=e.userProfileForm.controls.name.errors&&e.userProfileForm.touched),r.Ab(5),r.dc("ngIf",null!=e.userProfileForm.controls.phone.errors),r.Ab(13),r.dc("ngIf",1==e.isUpdateSuccess),r.Ab(1),r.dc("ngIf",1==e.isUpdateFailure),r.Ab(1),r.dc("disabled",!e.userProfileForm.valid))},directives:[Se,ie,xe,Nt,re,ke,j],styles:[".profile-div[_ngcontent-%COMP%]{min-height:70vh;padding-bottom:180px;padding-top:100px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{font-size:20px;font-weight:400}"]}),t})(),TC=(()=>{class t{constructor(t,e){this.http=t,this.afdb=e}addItemData(t){return this.item=t,this.http.post(Ho.databaseURL+"/items/"+t.category+".json",t)}setItemId(t){let e;"starters"===this.item.category?e="S"+t:"mains"===this.item.category?e="M"+t:"alcoholic-beverages"===this.item.category?e="AB"+t:"desserts"===this.item.category&&(e="D"+t),this.afdb.object("items/"+this.item.category+"/"+t).update({id:e})}getItemsCategoryWise(t){return Object(Bl.b)(this,void 0,void 0,function*(){const e=Ho.databaseURL+"/items/"+t+".json";return yield this.http.get(e).pipe(Object(St.a)(t=>{const e=[];for(const n in t)t.hasOwnProperty(n)&&e.push(t[n]);return e})).toPromise()})}getItemById(t,e){return Object(Bl.b)(this,void 0,void 0,function*(){const n=this.getPathItemId(e),r=Ho.databaseURL+"/items/"+t+"/"+n+".json";return yield this.http.get(r).pipe(Object(St.a)(t=>t)).toPromise()})}deleteItemData(t,e){return Object(Bl.b)(this,void 0,void 0,function*(){const n=this.getPathItemId(e),r=this.afdb.object("items/"+t+"/"+n);return yield r.remove()})}deleteImageUrl(t,e){return Object(Bl.b)(this,void 0,void 0,function*(){const n=this.getPathItemId(e),r=this.afdb.object("items/"+t+"/"+n);return yield r.update({imageUrl:""})})}updateItemData(t,e,n){return Object(Bl.b)(this,void 0,void 0,function*(){const r=this.getPathItemId(n),i=this.afdb.object("items/"+e+"/"+r);return yield i.update(t)})}getPathItemId(t){let e="";if(t.startsWith("-"))e=t;else{let n=t.split("-");for(let t=1;t<n.length;t++)e+="-"+n[t]}return e}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(as),r.Rb(Xw))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),xC=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-starters-icon"]],decls:28,vars:0,consts:[["height","35","width","35","version","1.1","id","Layer_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 511.996 511.996",0,"xml","space","preserve",2,"enable-background","new 0 0 511.996 511.996"],["d","M213.326,394.653c-5.891,0-10.656,4.781-10.656,10.688c0,5.875,4.766,10.656,10.656,10.656\n\t\t\tc5.891,0,10.672-4.781,10.672-10.656C223.998,399.435,219.217,394.653,213.326,394.653z"],["d","M255.998,415.997c-5.891,0-10.672,4.781-10.672,10.656c0,5.907,4.781,10.688,10.672,10.688s10.672-4.781,10.672-10.688\n\t\t\tC266.67,420.778,261.889,415.997,255.998,415.997z"],["d","M298.67,394.653c-5.89,0-10.672,4.782-10.672,10.688c0,5.875,4.781,10.656,10.672,10.656s10.656-4.781,10.656-10.656\n\t\t\tC309.326,399.435,304.56,394.653,298.67,394.653z"],["d","M319.998,298.656c17.672,0,32-14.312,32-31.992c0-17.672-14.328-32-32-32H266.67v-10.665h85.328\n\t\t\tc0-49.414-37.328-90.101-85.328-95.406V10.672v-0.008C266.67,4.773,261.889,0,255.998,0s-10.672,4.773-10.672,10.664v0.008\n\t\t\tv117.921c-48,5.305-85.328,45.992-85.328,95.406h85.328v10.664h-53.328c-17.672,0-32,14.328-32,32\n\t\t\tc0,17.68,14.328,31.992,32,31.992h53.328v24.438c-37.547,11.625-70.062-2.062-70.406-2.203c-1.297-0.578-2.734-0.891-4.25-0.891\n\t\t\tc-5.891,0-10.672,4.781-10.672,10.656c0,4.375,2.625,8.125,6.375,9.781c0.016,0,0.047,0.016,0.078,0.031s0.078,0.031,0.109,0.031\n\t\t\tc2.297,1,21.094,8.688,47.172,8.688c9.688,0,20.375-1.062,31.594-3.938v17.406h-85.328V469.34h85.328v31.984c0,0,0,0,0,0.016\n\t\t\tc0,5.875,4.781,10.656,10.672,10.656s10.672-4.781,10.672-10.656c0-0.016,0-0.016,0-0.016V469.34h85.328V362.655H266.67v-24.406\n\t\t\tc37.547-11.641,70.062,2.047,70.375,2.188c1.312,0.562,2.766,0.906,4.281,0.906c5.891,0,10.672-4.781,10.672-10.688\n\t\t\tc0-4.344-2.625-8.094-6.375-9.75c-0.016-0.016-0.047-0.031-0.094-0.031c-0.031-0.031-0.062-0.031-0.094-0.062\n\t\t\tc-3.141-1.344-37.312-15.281-78.766-4.75v-17.406H319.998z M219.076,202.664c7.391-12.734,21.172-21.328,36.922-21.328\n\t\t\tc5.891,0,10.672-4.781,10.672-10.672s-4.781-10.665-10.672-10.665c-27.859,0-51.547,17.812-60.344,42.664h-11.25\n\t\t\tc3.485-11.765,9.875-22.539,18.797-31.46c14.109-14.102,32.859-21.867,52.797-21.867s38.688,7.765,52.797,21.867\n\t\t\tc8.922,8.922,15.312,19.695,18.797,31.461H219.076z M330.67,383.999v63.998H181.326v-63.998H330.67z M191.998,277.343\n\t\t\tc-5.875,0-10.672-4.797-10.672-10.68c0-5.875,4.797-10.664,10.672-10.664h128c5.875,0,10.672,4.789,10.672,10.664\n\t\t\tc0,5.883-4.797,10.68-10.672,10.68H191.998z"]],template:function(t,e){1&t&&(r.Xb(),r.Nb(0,"svg",0),r.Nb(1,"g"),r.Nb(2,"g"),r.Lb(3,"path",1),r.Mb(),r.Mb(),r.Nb(4,"g"),r.Nb(5,"g"),r.Lb(6,"path",2),r.Mb(),r.Mb(),r.Nb(7,"g"),r.Nb(8,"g"),r.Lb(9,"path",3),r.Mb(),r.Mb(),r.Nb(10,"g"),r.Nb(11,"g"),r.Lb(12,"path",4),r.Mb(),r.Mb(),r.Lb(13,"g"),r.Lb(14,"g"),r.Lb(15,"g"),r.Lb(16,"g"),r.Lb(17,"g"),r.Lb(18,"g"),r.Lb(19,"g"),r.Lb(20,"g"),r.Lb(21,"g"),r.Lb(22,"g"),r.Lb(23,"g"),r.Lb(24,"g"),r.Lb(25,"g"),r.Lb(26,"g"),r.Lb(27,"g"),r.Mb())},styles:[""]}),t})(),DC=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-mains-icon"]],decls:45,vars:0,consts:[["version","1.1","height","35","width","35","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 480 480",0,"xml","space","preserve",2,"enable-background","new 0 0 480 480"],["d","M339.904,161.776l-5.136-16.904c-6.524-19.202-27.379-29.479-46.581-22.955c-10.802,3.67-19.285,12.153-22.955,22.955\n\t\t\tl-5.136,16.904c-4.322,14.256-5.229,29.329-2.648,44c2.354,12.352,10.196,22.964,21.312,28.84L273.008,363.2\n\t\t\tc-0.77,7.177,1.558,14.342,6.4,19.696c10.413,11.39,28.089,12.182,39.479,1.769c0.616-0.563,1.206-1.153,1.769-1.769\n\t\t\tc4.734-5.202,7.058-12.157,6.4-19.16L321.272,234.6c11.101-5.879,18.93-16.484,21.28-28.824\n\t\t\tC345.133,191.105,344.226,176.032,339.904,161.776z M326.792,202.992c-1.732,8.874-8.056,16.155-16.6,19.112\n\t\t\tc-3.243,1.219-5.332,4.387-5.176,7.848L311.096,365c0.28,2.649-0.594,5.29-2.4,7.248c-4.817,4.769-12.575,4.769-17.392,0\n\t\t\tc-1.896-2.116-2.757-4.964-2.352-7.776l6.032-134.52c0.156-3.461-1.933-6.629-5.176-7.848c-8.544-2.957-14.868-10.238-16.6-19.112\n\t\t\tc-2.14-12.18-1.386-24.693,2.2-36.528l5.136-16.912c3.974-10.745,15.906-16.234,26.652-12.26c5.681,2.101,10.159,6.58,12.26,12.26\n\t\t\tl5.136,16.912C328.174,178.3,328.928,190.812,326.792,202.992z"],["d","M216,120c-4.418,0-8,3.582-8,8v68.688l-21.656,21.656c-1.602,1.596-2.454,3.797-2.344,6.056l7,140\n\t\t\tc0.167,3.019-0.929,5.972-3.024,8.152c-4.379,4.418-11.511,4.45-15.93,0.07c-0.024-0.023-0.047-0.047-0.07-0.07\n\t\t\tc-2.096-2.18-3.191-5.133-3.024-8.152l7.048-140c0.112-2.258-0.737-4.458-2.336-6.056L152,196.688V128c0-4.418-3.582-8-8-8\n\t\t\ts-8,3.582-8,8v72c0,2.122,0.844,4.156,2.344,5.656l21.488,21.496l-6.824,136.472c-0.726,14.907,10.77,27.581,25.677,28.307\n\t\t\tc14.907,0.726,27.581-10.77,28.307-25.677c0.043-0.876,0.043-1.753,0-2.629l-6.824-136.472l21.488-21.496\n\t\t\tc1.5-1.5,2.344-3.534,2.344-5.656v-72C224,123.582,220.418,120,216,120z"],["d","M168,120c-4.418,0-8,3.582-8,8v64c0,4.418,3.582,8,8,8s8-3.582,8-8v-64C176,123.582,172.418,120,168,120z"],["d","M192,120c-4.418,0-8,3.582-8,8v64c0,4.418,3.582,8,8,8s8-3.582,8-8v-64C200,123.582,196.418,120,192,120z"],["d","M240,0C107.452,0,0,107.452,0,240s107.452,240,240,240s240-107.452,240-240C479.85,107.514,372.486,0.15,240,0z M240,464\n\t\t\tC116.288,464,16,363.712,16,240S116.288,16,240,16s224,100.288,224,224C463.859,363.653,363.653,463.859,240,464z"],["d","M265.969,390.172c-0.429-4.397-4.342-7.614-8.74-7.185c-0.103,0.01-0.206,0.022-0.309,0.036l0.032-0.008\n\t\t\tc-11.263,1.308-22.641,1.308-33.904,0c-4.39-0.515-8.365,2.626-8.88,7.016c-0.515,4.39,2.626,8.365,7.016,8.88\n\t\t\tc12.491,1.459,25.109,1.459,37.6,0C263.181,398.483,266.398,394.57,265.969,390.172z"],["d","M362.4,136.912c-2.839-3.385-7.885-3.828-11.27-0.988c-0.011,0.009-0.022,0.019-0.034,0.028\n\t\t\tc-3.377,2.848-3.807,7.894-0.96,11.272c48.235,57.26,44.545,141.929-8.488,194.776c-3.13,3.119-3.139,8.186-0.02,11.316\n\t\t\tc3.119,3.13,8.186,3.139,11.316,0.02C411.881,294.623,415.991,200.541,362.4,136.912z"],["d","M186.392,105.744c-0.005,0-0.01-0.001-0.015-0.001c-0.008,0-0.016,0.001-0.025,0.001H186.392z"],["d","M277.736,84.472c-31.265-7.493-64.055-5.479-94.168,5.784c-4.136,1.555-6.227,6.169-4.672,10.304\n\t\t\t\tc1.172,3.117,4.152,5.18,7.481,5.183c0.957-0.005,1.905-0.18,2.799-0.519c27.118-10.141,56.646-11.952,84.8-5.2\n\t\t\t\tc4.295,1.038,8.618-1.601,9.656-5.896C284.67,89.833,282.031,85.51,277.736,84.472z"],["d","M137.992,341.6C111.023,314.677,95.908,278.108,96,240c-0.079-30.446,9.565-60.122,27.528-84.704\n\t\t\tc2.655-3.532,1.944-8.547-1.588-11.202s-8.547-1.944-11.202,1.588c-0.047,0.063-0.093,0.126-0.138,0.19\n\t\t\tc-46.253,63.588-39.447,151.359,16.056,207.056c3.128,3.13,8.202,3.132,11.332,0.004C141.118,349.804,141.12,344.73,137.992,341.6\n\t\t\tz"]],template:function(t,e){1&t&&(r.Xb(),r.Nb(0,"svg",0),r.Nb(1,"g"),r.Nb(2,"g"),r.Lb(3,"path",1),r.Mb(),r.Mb(),r.Nb(4,"g"),r.Nb(5,"g"),r.Lb(6,"path",2),r.Mb(),r.Mb(),r.Nb(7,"g"),r.Nb(8,"g"),r.Lb(9,"path",3),r.Mb(),r.Mb(),r.Nb(10,"g"),r.Nb(11,"g"),r.Lb(12,"path",4),r.Mb(),r.Mb(),r.Nb(13,"g"),r.Nb(14,"g"),r.Lb(15,"path",5),r.Mb(),r.Mb(),r.Nb(16,"g"),r.Nb(17,"g"),r.Lb(18,"path",6),r.Mb(),r.Mb(),r.Nb(19,"g"),r.Nb(20,"g"),r.Lb(21,"path",7),r.Mb(),r.Mb(),r.Nb(22,"g"),r.Nb(23,"g"),r.Nb(24,"g"),r.Lb(25,"path",8),r.Lb(26,"path",9),r.Mb(),r.Mb(),r.Mb(),r.Nb(27,"g"),r.Nb(28,"g"),r.Lb(29,"path",10),r.Mb(),r.Mb(),r.Lb(30,"g"),r.Lb(31,"g"),r.Lb(32,"g"),r.Lb(33,"g"),r.Lb(34,"g"),r.Lb(35,"g"),r.Lb(36,"g"),r.Lb(37,"g"),r.Lb(38,"g"),r.Lb(39,"g"),r.Lb(40,"g"),r.Lb(41,"g"),r.Lb(42,"g"),r.Lb(43,"g"),r.Lb(44,"g"),r.Mb())},styles:[""]}),t})(),kC=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-desserts-icon"]],decls:18,vars:0,consts:[["id","Capa_1","enable-background","new 0 0 512 512","height","35","viewBox","0 0 512 512","width","35","xmlns","http://www.w3.org/2000/svg"],["d","m199.424 291.494c-4.142 0-7.5 3.357-7.5 7.5v53.63c0 4.143 3.358 7.5 7.5 7.5s7.5-3.357 7.5-7.5v-53.63c0-4.142-3.358-7.5-7.5-7.5z"],["d","m147.042 291.494c-4.142 0-7.5 3.357-7.5 7.5v53.63c0 4.143 3.358 7.5 7.5 7.5s7.5-3.357 7.5-7.5v-53.63c0-4.142-3.358-7.5-7.5-7.5z"],["d","m251.805 291.494c-4.142 0-7.5 3.357-7.5 7.5v53.63c0 4.143 3.358 7.5 7.5 7.5s7.499-3.357 7.499-7.5v-53.63c.001-4.142-3.357-7.5-7.499-7.5z"],["d","m304.186 360.124c4.143 0 7.5-3.357 7.5-7.5v-53.63c0-4.143-3.357-7.5-7.5-7.5s-7.5 3.357-7.5 7.5v53.63c0 4.142 3.358 7.5 7.5 7.5z"],["d","m356.568 360.124c4.143 0 7.5-3.357 7.5-7.5v-53.63c0-4.143-3.357-7.5-7.5-7.5s-7.5 3.357-7.5 7.5v53.63c0 4.142 3.357 7.5 7.5 7.5z"],["d","m177.7 185.583c0-4.143-3.358-7.5-7.5-7.5s-7.5 3.357-7.5 7.5v.028c0 4.143 3.358 7.486 7.5 7.486s7.5-3.372 7.5-7.514z"],["d","m161.402 166.194c0-4.143-3.358-7.5-7.5-7.5s-7.5 3.357-7.5 7.5v.028c0 4.143 3.358 7.486 7.5 7.486 4.142.001 7.5-3.371 7.5-7.514z"],["d","m145.075 185.583c0-4.143-3.358-7.5-7.5-7.5s-7.5 3.357-7.5 7.5v.028c0 4.143 3.358 7.486 7.5 7.486s7.5-3.372 7.5-7.514z"],["d","m246.023 82.586c-4.142 0-7.5 3.357-7.5 7.5v.028c0 4.143 3.358 7.485 7.5 7.485s7.5-3.371 7.5-7.514c-.001-4.142-3.358-7.499-7.5-7.499z"],["d","m229.696 63.197c-4.142 0-7.5 3.357-7.5 7.5v.028c0 4.143 3.358 7.485 7.5 7.485s7.5-3.371 7.5-7.514c0-4.141-3.358-7.499-7.5-7.499z"],["d","m213.398 82.586c-4.142 0-7.5 3.357-7.5 7.5v.028c0 4.143 3.358 7.485 7.5 7.485s7.5-3.371 7.5-7.514c0-4.142-3.358-7.499-7.5-7.499z"],["d","m435.792 221.991h-12.366c.557-4.136.847-8.309.847-12.484 0-32.715-16.989-61.535-42.605-78.108l19.757-29.051c.017-.025.034-.049.051-.074l43.135-63.428c1.725-2.548 2.355-5.617 1.775-8.644-.581-3.034-2.308-5.655-4.844-7.372l-30.629-20.845c-2.547-1.724-5.617-2.354-8.643-1.775-3.034.581-5.655 2.308-7.375 4.848l-41.663 61.294c-.188.241-.358.495-.515.757l-11.714 17.233c-4.566-10.602-11.045-20.304-19.277-28.661-17.28-17.545-40.623-27.207-65.726-27.207-50.19 0-91.21 39.971-92.899 89.742-16.888 3.238-32.606 11.113-45.439 22.966-3.043 2.811-3.231 7.556-.42 10.599s7.556 3.231 10.598.421c14.422-13.322 33.19-20.658 52.848-20.658 42.971 0 77.932 34.973 77.932 77.963 0 4.236-.339 8.413-.994 12.484h-153.89c-.663-4.124-1.007-8.302-1.007-12.484 0-11.347 2.381-22.269 7.079-32.464 1.733-3.763.088-8.217-3.674-9.95-3.761-1.735-8.217-.089-9.95 3.673-5.61 12.177-8.455 25.212-8.455 38.741 0 4.176.29 8.349.847 12.484h-12.368c-9.34 0-16.939 7.599-16.939 16.938v19.502c0 6.646 3.856 12.393 9.439 15.166v56.379c0 38.381 31.224 69.605 69.604 69.605h89.298v45.094h-40.686c-18.546 0-33.634 15.101-33.634 33.663v22.053c0 6.402 5.195 11.61 11.581 11.61h173.839c6.402 0 11.61-5.208 11.61-11.61v-22.053c0-18.561-15.102-33.663-33.663-33.663h-40.686v-45.094h89.327c38.364 0 69.575-31.224 69.575-69.605v-54.606h.919c9.34 0 16.938-7.599 16.938-16.939v-19.502c0-9.34-7.598-16.938-16.938-16.938zm-30.434-205.644 14.162 9.639-22.318 2.361zm-19.203 28.25 39.225-4.149-11.681 17.176-39.227 4.161zm-22.733 33.445 39.221-4.161-11.691 17.191-39.202 4.142zm16.478 29.281-11.521 16.94c-6.219-2.715-12.79-4.768-19.625-6.071-.124-2.525-.334-5.031-.641-7.511zm29.373 102.183c0 4.181-.343 8.359-1.007 12.484h-135.483c.549-4.099.836-8.271.836-12.484 0-14.368-3.277-27.984-9.12-40.143 14.098-23.419 39.353-37.82 66.813-37.82 42.988.001 77.961 34.974 77.961 77.963zm-153.301-54.435c-16.901-23.325-44.349-38.527-75.284-38.527-.831 0-1.657.036-2.485.058 2.493-40.742 36.426-73.128 77.797-73.128 21.055 0 40.601 8.073 55.04 22.732 13.257 13.459 21.121 31.116 22.588 50.367-.77-.019-1.542-.029-2.316-.029-30.101 0-57.98 14.502-75.34 38.527zm79.349 323.266v18.663h-167.032v-18.663c0-10.291 8.359-18.663 18.634-18.663h129.734c10.292 0 18.664 8.372 18.664 18.663zm-74.349-33.663h-18.362v-45.094h18.362zm176.759-186.243c0 1.051-.888 1.939-1.938 1.939h-169.787c-4.143 0-7.5 3.357-7.5 7.5s3.357 7.5 7.5 7.5h153.867v54.605c0 30.109-24.482 54.605-54.575 54.605h-226.986c-30.109 0-54.604-24.496-54.604-54.605v-54.605h147.66c4.142 0 7.5-3.357 7.5-7.5s-3.358-7.5-7.5-7.5h-155.16c-1.051 0-1.939-.889-1.939-1.939v-19.502c0-1.051.888-1.938 1.939-1.938h187.532c.011 0 .022.002.033.002.008 0 .015-.002.023-.002h171.997c1.051 0 1.938.888 1.938 1.938z"],["d","m323.381 185.583v.028c0 4.143 3.357 7.486 7.5 7.486s7.5-3.372 7.5-7.515-3.357-7.5-7.5-7.5-7.5 3.358-7.5 7.501z"],["d","m314.582 158.694c-4.143 0-7.5 3.357-7.5 7.5v.028c0 4.143 3.357 7.486 7.5 7.486s7.5-3.372 7.5-7.515c0-4.142-3.358-7.499-7.5-7.499z"],["d","m298.256 178.083c-4.143 0-7.5 3.357-7.5 7.5v.028c0 4.143 3.357 7.486 7.5 7.486s7.5-3.372 7.5-7.515c0-4.142-3.358-7.499-7.5-7.499z"]],template:function(t,e){1&t&&(r.Xb(),r.Nb(0,"svg",0),r.Nb(1,"g"),r.Nb(2,"g"),r.Lb(3,"path",1),r.Lb(4,"path",2),r.Lb(5,"path",3),r.Lb(6,"path",4),r.Lb(7,"path",5),r.Lb(8,"path",6),r.Lb(9,"path",7),r.Lb(10,"path",8),r.Lb(11,"path",9),r.Lb(12,"path",10),r.Lb(13,"path",11),r.Lb(14,"path",12),r.Lb(15,"path",13),r.Lb(16,"path",14),r.Lb(17,"path",15),r.Mb(),r.Mb(),r.Mb())},styles:[""]}),t})(),NC=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-drinks-icon"]],decls:18,vars:0,consts:[["height","35","width","35","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 20.751 20.751",0,"xml","space","preserve",2,"enable-background","new 0 0 20.751 20.751"],["d","M9.962,10.465c0-0.855-0.211-1.682-0.616-2.392L9.25,7.905H3.24L3.146,8.073\n\t\tC2.742,8.782,2.53,9.61,2.53,10.465c0,2.181,1.388,3.988,3.189,4.287v5.093c-1.039,0.042-1.813,0.2-1.813,0.387\n\t\tc0,0.222,1.055,0.4,2.357,0.4c1.303,0,2.36-0.178,2.36-0.4c0-0.187-0.774-0.345-1.813-0.387v-5.097\n\t\tC8.593,14.43,9.962,12.63,9.962,10.465z M6.245,14.131c-1.682,0-3.052-1.644-3.052-3.668c0-0.674,0.151-1.325,0.44-1.896h5.225\n\t\tc0.288,0.571,0.441,1.223,0.441,1.896C9.3,12.488,7.928,14.131,6.245,14.131z M16.325,2.292h-2.643V0h2.643V2.292z M16.325,5.132\n\t\tV2.997h-2.643v2.136c-1.116,0.503-1.896,1.625-1.896,2.931v2.093v6.673v3.921h6.434V16.83v-6.673V8.064\n\t\tC18.221,6.758,17.443,5.636,16.325,5.132z M17.652,17.516h-5.241v-6.288h5.241V17.516z M9.022,10.534c0,0-0.139,3.325-2.732,3.325\n\t\ts-2.943-3.325-2.943-3.325H9.022z",2,"fill","#010002"]],template:function(t,e){1&t&&(r.Xb(),r.Nb(0,"svg",0),r.Nb(1,"g"),r.Lb(2,"path",1),r.Mb(),r.Lb(3,"g"),r.Lb(4,"g"),r.Lb(5,"g"),r.Lb(6,"g"),r.Lb(7,"g"),r.Lb(8,"g"),r.Lb(9,"g"),r.Lb(10,"g"),r.Lb(11,"g"),r.Lb(12,"g"),r.Lb(13,"g"),r.Lb(14,"g"),r.Lb(15,"g"),r.Lb(16,"g"),r.Lb(17,"g"),r.Mb())},styles:[""]}),t})();const jC=["startersRef"],RC=["mainsRef"],MC=["dessertsRef"],PC=["alcoholicBeveragesRef"],FC=function(t){return{active:t}};function LC(t,e){if(1&t){const t=r.Ob();r.Nb(0,"nav",16),r.Nb(1,"div",1),r.Nb(2,"ul",17),r.Nb(3,"li",18),r.Nb(4,"a",19),r.Ub("click",function(){r.kc(t);const e=r.Yb(),n=r.ic(4);return e.scrollTo(n,1)}),r.Lb(5,"app-starters-icon"),r.Mb(),r.Mb(),r.Nb(6,"li",18),r.Nb(7,"a",19),r.Ub("click",function(){r.kc(t);const e=r.Yb(),n=r.ic(13);return e.scrollTo(n,2)}),r.Lb(8,"app-mains-icon"),r.Mb(),r.Mb(),r.Nb(9,"li",18),r.Nb(10,"a",19),r.Ub("click",function(){r.kc(t);const e=r.Yb(),n=r.ic(16);return e.scrollTo(n,3)}),r.Lb(11,"app-desserts-icon"),r.Mb(),r.Mb(),r.Nb(12,"li",18),r.Nb(13,"a",19),r.Ub("click",function(){r.kc(t);const e=r.Yb(),n=r.ic(19);return e.scrollTo(n,4)}),r.Lb(14,"app-drinks-icon"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=r.Yb();r.Ab(4),r.dc("ngClass",r.gc(4,FC,1===t.currentActive)),r.Ab(3),r.dc("ngClass",r.gc(6,FC,2===t.currentActive)),r.Ab(3),r.dc("ngClass",r.gc(8,FC,3===t.currentActive)),r.Ab(3),r.dc("ngClass",r.gc(10,FC,4===t.currentActive))}}function UC(t,e){1&t&&(r.Nb(0,"div",20),r.Lb(1,"app-loader"),r.Mb())}function VC(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",26),r.Nb(1,"div",27),r.Lb(2,"img",28),r.Nb(3,"div",29),r.Nb(4,"p",30),r.Nb(5,"strong"),r.oc(6),r.Mb(),r.Mb(),r.Nb(7,"span",31),r.oc(8),r.Mb(),r.Nb(9,"div",32),r.Nb(10,"small",33),r.oc(11),r.Mb(),r.Nb(12,"div",34),r.Nb(13,"button",35),r.Ub("click",function(){r.kc(t);const n=e.$implicit;return r.Yb(2).onEdit(n.category,n.id)}),r.oc(14,"Edit"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit;r.Ab(2),r.ec("src",t.imageUrl,r.lc),r.Ab(4),r.pc(t.name),r.Ab(2),r.pc(t.category),r.Ab(3),r.qc("\u20b9",t.price,"")}}function qC(t,e){if(1&t&&(r.Nb(0,"div",21),r.Nb(1,"div",22),r.Nb(2,"span",23),r.oc(3,"Starters"),r.Mb(),r.Mb(),r.Nb(4,"div",24),r.nc(5,VC,15,4,"div",25),r.Mb(),r.Mb()),2&t){const t=r.Yb();r.Ab(5),r.dc("ngForOf",t.starters)}}function BC(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",26),r.Nb(1,"div",27),r.Lb(2,"img",28),r.Nb(3,"div",29),r.Nb(4,"p",30),r.Nb(5,"strong"),r.oc(6),r.Mb(),r.Mb(),r.Nb(7,"span",31),r.oc(8),r.Mb(),r.Nb(9,"div",32),r.Nb(10,"small",33),r.oc(11),r.Mb(),r.Nb(12,"div",34),r.Nb(13,"button",35),r.Ub("click",function(){r.kc(t);const n=e.$implicit;return r.Yb(2).onEdit(n.category,n.id)}),r.oc(14,"Edit"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit;r.Ab(2),r.ec("src",t.imageUrl,r.lc),r.Ab(4),r.pc(t.name),r.Ab(2),r.pc(t.category),r.Ab(3),r.qc("\u20b9",t.price,"")}}function zC(t,e){if(1&t&&(r.Nb(0,"div",21),r.Nb(1,"div",22),r.Nb(2,"span",23),r.oc(3,"Mains"),r.Mb(),r.Mb(),r.Nb(4,"div",24),r.nc(5,BC,15,4,"div",25),r.Mb(),r.Mb()),2&t){const t=r.Yb();r.Ab(5),r.dc("ngForOf",t.mains)}}function HC(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",26),r.Nb(1,"div",27),r.Lb(2,"img",28),r.Nb(3,"div",29),r.Nb(4,"p",30),r.Nb(5,"strong"),r.oc(6),r.Mb(),r.Mb(),r.Nb(7,"span",31),r.oc(8),r.Mb(),r.Nb(9,"div",32),r.Nb(10,"small",33),r.oc(11),r.Mb(),r.Nb(12,"div",34),r.Nb(13,"button",35),r.Ub("click",function(){r.kc(t);const n=e.$implicit;return r.Yb(2).onEdit(n.category,n.id)}),r.oc(14,"Edit"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit;r.Ab(2),r.ec("src",t.imageUrl,r.lc),r.Ab(4),r.pc(t.name),r.Ab(2),r.pc(t.category),r.Ab(3),r.qc("\u20b9",t.price,"")}}function WC(t,e){if(1&t&&(r.Nb(0,"div",21),r.Nb(1,"div",22),r.Nb(2,"span",23),r.oc(3,"Desserts"),r.Mb(),r.Mb(),r.Nb(4,"div",24),r.nc(5,HC,15,4,"div",25),r.Mb(),r.Mb()),2&t){const t=r.Yb();r.Ab(5),r.dc("ngForOf",t.desserts)}}function KC(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",26),r.Nb(1,"div",27),r.Lb(2,"img",28),r.Nb(3,"div",29),r.Nb(4,"p",30),r.Nb(5,"strong"),r.oc(6),r.Mb(),r.Mb(),r.Nb(7,"span",31),r.oc(8),r.Mb(),r.Nb(9,"div",32),r.Nb(10,"small",33),r.oc(11),r.Mb(),r.Nb(12,"div",34),r.Nb(13,"button",35),r.Ub("click",function(){r.kc(t);const n=e.$implicit;return r.Yb(2).onEdit(n.category,n.id)}),r.oc(14,"Edit"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit;r.Ab(2),r.ec("src",t.imageUrl,r.lc),r.Ab(4),r.pc(t.name),r.Ab(2),r.pc(t.category),r.Ab(3),r.qc("\u20b9",t.price,"")}}function GC(t,e){if(1&t&&(r.Nb(0,"div",21),r.Nb(1,"div",22),r.Nb(2,"span",23),r.oc(3,"Alcoholic Beverages"),r.Mb(),r.Mb(),r.Nb(4,"div",24),r.nc(5,KC,15,4,"div",25),r.Mb(),r.Mb()),2&t){const t=r.Yb();r.Ab(5),r.dc("ngForOf",t.alcoholicBeverages)}}let $C=(()=>{class t{constructor(t,e,n){this.router=t,this.itemDataService=e,this.route=n,this.starters=[],this.mains=[],this.alcoholicBeverages=[],this.desserts=[],this.isLoading=!1,this.isLoaded=!1,this.sectionName="",this.showCategoryNavbar=!1,this.startersOffset=null,this.mainsOffset=null,this.dessertsOffset=null,this.alcoholicBeveragesOffset=null,this.route.fragment.subscribe(t=>{this.sectionName=t})}ngOnInit(){this.fetchItems()}ngAfterViewInit(){this.startersOffset=this.startersRef.nativeElement.offsetTop,this.mainsOffset=this.mainsRef.nativeElement.offsetTop,this.dessertsOffset=this.dessertsRef.nativeElement.offsetTop,this.alcoholicBeveragesOffset=this.alcoholicBeveragesRef.nativeElement.offsetTop}checkOffsetTop(){this.startersOffset=this.startersRef.nativeElement.offsetTop+200,this.mainsOffset=this.mainsRef.nativeElement.offsetTop-200,this.dessertsOffset=this.dessertsRef.nativeElement.offsetTop-200,this.alcoholicBeveragesOffset=this.alcoholicBeveragesRef.nativeElement.offsetTop-200,window.pageYOffset>=this.startersOffset&&window.pageYOffset<this.mainsOffset?(this.currentActive=1,this.showCategoryNavbar=!0):window.pageYOffset>=this.mainsOffset&&window.pageYOffset<this.dessertsOffset?(this.currentActive=2,this.showCategoryNavbar=!0):window.pageYOffset>=this.dessertsOffset&&window.pageYOffset<this.alcoholicBeveragesOffset?(this.currentActive=3,this.showCategoryNavbar=!0):window.pageYOffset>=this.alcoholicBeveragesOffset?(this.currentActive=4,this.showCategoryNavbar=!0):(this.currentActive=0,this.showCategoryNavbar=!1)}scrollTo(t,e){t.scrollIntoView(),this.currentActive=e}fetchItems(){return Object(Bl.b)(this,void 0,void 0,function*(){try{this.isLoading=!0,this.starters=yield this.itemDataService.getItemsCategoryWise("starters"),this.mains=yield this.itemDataService.getItemsCategoryWise("mains"),this.alcoholicBeverages=yield this.itemDataService.getItemsCategoryWise("alcoholic-beverages"),this.desserts=yield this.itemDataService.getItemsCategoryWise("desserts"),this.isLoading=!1,this.isLoaded=!0}catch(t){console.log(t)}})}onEdit(t,e){this.router.navigate(["admin/items/edit",t,e])}onAdd(){this.router.navigate(["admin/items/add"])}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(_o),r.Kb(TC),r.Kb(Zr))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-display-items"]],viewQuery:function(t,e){if(1&t&&(r.tc(jC,1),r.tc(RC,1),r.tc(MC,1),r.tc(PC,1)),2&t){let t;r.hc(t=r.Vb())&&(e.startersRef=t.first),r.hc(t=r.Vb())&&(e.mainsRef=t.first),r.hc(t=r.Vb())&&(e.dessertsRef=t.first),r.hc(t=r.Vb())&&(e.alcoholicBeveragesRef=t.first)}},hostBindings:function(t,e){1&t&&r.Ub("scroll",function(t){return e.checkOffsetTop(t)},!1,r.jc)},decls:21,vars:6,consts:[[1,"album","py-5"],[1,"container"],[1,"d-flex","flex-row-reverse",2,"margin-bottom","30px"],["startersRef",""],[1,"p-2"],["type","button",1,"btn","btn-outline-primary",3,"click"],["class","sticky-top category-navbar",4,"ngIf"],["class","loader-div",4,"ngIf"],["id","starters",1,"section",2,"scroll-margin-top","0rem"],["class","items-div",4,"ngIf"],["id","mains",1,"section"],["mainsRef",""],["id","desserts",1,"section"],["dessertsRef",""],["id","alcoholic-beverages",1,"section"],["alcoholicBeveragesRef",""],[1,"sticky-top","category-navbar"],[1,"nav","nav-pills","nav-justified","text-light","category-ul-nav"],[1,"nav-item"],[1,"nav-link",3,"ngClass","click"],[1,"loader-div"],[1,"items-div"],[1,"d-flex","align-items-center","pb-3","mb-5","border-bottom"],[1,"fs-2"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-3","g-3"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"card"],["role","img","aria-label","item-image","preserveAspectRatio","xMidYMid slice","focusable","false",1,"img-loading","card-img-top",3,"src"],[1,"card-body"],[1,"card-text"],[1,"badge","bg-light","text-dark","item-category"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-dark","item-price"],[1,"btn-group"],["type","button",1,"btn","btn-sm","btn-outline-primary",3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"main"),r.Nb(1,"div",0),r.Nb(2,"div",1),r.Nb(3,"div",2,3),r.Nb(5,"div",4),r.Nb(6,"button",5),r.Ub("click",function(){return e.onAdd()}),r.oc(7,"Add a new item"),r.Mb(),r.Mb(),r.Mb(),r.nc(8,LC,15,12,"nav",6),r.nc(9,UC,2,0,"div",7),r.Nb(10,"section",8),r.nc(11,qC,6,1,"div",9),r.Mb(),r.Nb(12,"section",10,11),r.nc(14,zC,6,1,"div",9),r.Mb(),r.Nb(15,"section",12,13),r.nc(17,WC,6,1,"div",9),r.Mb(),r.Nb(18,"section",14,15),r.nc(20,GC,6,1,"div",9),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(8),r.dc("ngIf",1==e.showCategoryNavbar),r.Ab(1),r.dc("ngIf",1==e.isLoading&&0==e.isLoaded),r.Ab(2),r.dc("ngIf",1==e.isLoaded),r.Ab(3),r.dc("ngIf",1==e.isLoaded),r.Ab(3),r.dc("ngIf",1==e.isLoaded),r.Ab(3),r.dc("ngIf",1==e.isLoaded))},directives:[j,x,xC,DC,kC,NC,Es,k],styles:["section[_ngcontent-%COMP%]{scroll-margin-top:6rem}img[_ngcontent-%COMP%]{height:300px;object-fit:cover;width:100%}.item-price[_ngcontent-%COMP%]{color:#000;font-size:18px}.card[_ngcontent-%COMP%]{border-radius:1.3em;font-family:Karla,sans-serif}.card-img-top[_ngcontent-%COMP%]{border-top-left-radius:1.3em;border-top-right-radius:1.3em}.card-text[_ngcontent-%COMP%]{color:#000;font-size:20px}.item-category[_ngcontent-%COMP%]{font-size:14px;margin-bottom:10px;white-space:pre-wrap}.item-price[_ngcontent-%COMP%]{margin-right:10px}.loader-div[_ngcontent-%COMP%]{margin-top:250px;min-height:60vh}.img-loading[_ngcontent-%COMP%]{background-color:#e2e2e2;background-image:linear-gradient(0deg,#e2e2e2,#f7f7f7)}div.card[_ngcontent-%COMP%]{box-shadow:0 8px 24px rgba(149,157,165,.2)}div.card[_ngcontent-%COMP%]:hover{box-shadow:0 .5em 3rem -1rem rgba(0,0,0,.5);transform:translateY(-.1rem) scale(1)}.category-navbar[_ngcontent-%COMP%], .items-div[_ngcontent-%COMP%]{margin-bottom:80px}.category-navbar[_ngcontent-%COMP%]{background-color:#fff;border-bottom-left-radius:.5em;border-bottom-right-radius:.5em;box-shadow:1.95px 1.95px 2.6px rgba(0,0,0,.15);color:#000;font-size:18px;margin-top:80px;padding-bottom:10px;padding-top:10px}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{background-color:hsla(0,0%,90.6%,.8470588235294118);color:#fff}.nav-link[_ngcontent-%COMP%]{color:#000}@media (min-width:481px) and (max-width:767px){.nav-link[_ngcontent-%COMP%]{padding:.5rem}.category-navbar[_ngcontent-%COMP%]{font-size:15px}}@media (min-width:320px) and (max-width:480px){.nav-link[_ngcontent-%COMP%]{padding:.5rem}.category-navbar[_ngcontent-%COMP%]{font-size:15px}}"]}),t})();class YC{constructor(t,e){this.dueTime=t,this.scheduler=e}call(t,e){return e.subscribe(new QC(t,this.dueTime,this.scheduler))}}class QC extends $e.a{constructor(t,e,n){super(t),this.dueTime=e,this.scheduler=n,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(t){this.clearDebounce(),this.lastValue=t,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(XC,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:t}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(t)}}clearDebounce(){const t=this.debouncedSubscription;null!==t&&(this.remove(t),t.unsubscribe(),this.debouncedSubscription=null)}}function XC(t){t.debouncedNext()}var JC="firebasestorage.googleapis.com",ZC=function(t){function e(n,r){var i=t.call(this,tO(n),"Firebase Storage: "+r+" ("+tO(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return Object(Bl.c)(e,t),e.prototype._codeEquals=function(t){return tO(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.message=this.customData.serverResponse?this._baseMessage+"\n"+this.customData.serverResponse:this._baseMessage},enumerable:!1,configurable:!0}),e}(Us.c);function tO(t){return"storage/"+t}function eO(){return new ZC("unknown","An unknown error occurred, please check the error payload for server response.")}function nO(){return new ZC("canceled","User canceled the upload/download.")}function rO(){return new ZC("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function iO(t){return new ZC("invalid-argument",t)}function oO(){return new ZC("app-deleted","The Firebase app was deleted.")}function sO(t){return new ZC("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function aO(t,e){return new ZC("invalid-format","String does not match format '"+t+"': "+e)}function uO(t){throw new ZC("internal-error","Internal error: "+t)}var cO={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},lO=function(){return function(t,e){this.data=t,this.contentType=e||null}}();function hO(t,e){switch(t){case cO.RAW:return new lO(dO(e));case cO.BASE64:case cO.BASE64URL:return new lO(fO(t,e));case cO.DATA_URL:return new lO((n=new pO(e)).base64?fO(cO.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(Y_){throw aO(cO.DATA_URL,"Malformed data URL.")}return dO(e)}(n.rest),new pO(e).contentType)}var n;throw eO()}function dO(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1))){var i=r,o=t.charCodeAt(++n);e.push(240|(r=65536|(1023&i)<<10|1023&o)>>18,128|r>>12&63,128|r>>6&63,128|63&r)}else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function fO(t,e){switch(t){case cO.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw aO(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case cO.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw aO(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(Y_){throw aO(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var pO=function(){return function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw aO(cO.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(n=i).length>=(r=";base64").length&&n.substring(n.length-r.length)===r,this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)}}(),gO={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function mO(t){switch(t){case"running":case"pausing":case"canceling":return gO.RUNNING;case"paused":return gO.PAUSED;case"success":return gO.SUCCESS;case"canceled":return gO.CANCELED;case"error":default:return gO.ERROR}}var bO=function(t){return t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT",t}({}),vO=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=bO.NO_ERROR,this.sendPromise_=new Promise(function(e){t.xhr_.addEventListener("abort",function(){t.errorCode_=bO.ABORT,e(t)}),t.xhr_.addEventListener("error",function(){t.errorCode_=bO.NETWORK_ERROR,e(t)}),t.xhr_.addEventListener("load",function(){e(t)})})}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw uO("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw uO("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw uO("cannot .getStatus() before sending");try{return this.xhr_.status}catch(Y_){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw uO("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),yO=function(){function t(){}return t.prototype.createXhrIo=function(){return new vO},t}(),_O=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(Y_){return new t(e,"")}if(""===r.path)return r;throw new ZC("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var a=n.replace(/[.]/g,"\\."),u=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+a+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===JC?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],c=0;c<u.length;c++){var l=u[c],h=l.regex.exec(e);if(h){var d=h[l.indices.path];d||(d=""),r=new t(h[l.indices.bucket],d),l.postModify(r);break}}if(null==r)throw function(t){return new ZC("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),wO=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function CO(t){return"string"==typeof t||t instanceof String}function OO(t){return EO()&&t instanceof Blob}function EO(){return"undefined"!=typeof Blob}function SO(t,e,n,r){if(r<e)throw iO("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw iO("Invalid value for '"+t+"'. Expected "+n+" or less.")}function IO(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function AO(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var TO=function(){function t(t,e,n,r,i,o,s,a,u,c,l){var h=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=l,this.promise_=new Promise(function(t,e){h.resolve_=t,h.reject_=e,h.start_()})}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.xhr;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(Y_){o(Y_)}else null!==s?((r=eO()).serverResponse=s.getResponseText(),o(t.errorCallback_?t.errorCallback_(s,r):r)):o(r=n.canceled?t.appDelete_?oO():nO():new ZC("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new xO(!1,null,!0)):this.backoffId_=function(e,n,r){var i=1,o=null,s=!1,a=0;function u(){return 2===a}var c=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];c||(c=!0,n.apply(null,t))}function h(e){o=setTimeout(function(){o=null,function(e,n){if(n)e(!1,new xO(!1,null,!0));else{var r=t.pool_.createXhrIo();t.pendingXhr_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then(function(n){null!==t.progressCallback_&&n.removeUploadProgressListener(i),t.pendingXhr_=null;var r=(n=n).getErrorCode()===bO.NO_ERROR,o=n.getStatus();if(r&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new xO(s,n))}else{var a=n.getErrorCode()===bO.ABORT;e(!1,new xO(!1,null,a))}})}function i(e){null!==t.progressCallback_&&t.progressCallback_(e.loaded,e.lengthComputable?e.total:-1)}}(d,u())},e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!c)if(t)l.call.apply(l,Object(Bl.f)([null,t],e));else{var r;u()||s?l.call.apply(l,Object(Bl.f)([null,t],e)):(i<64&&(i*=2),1===a?(a=2,r=0):r=1e3*(i+Math.random()),h(r))}}var f=!1;function p(t){f||(f=!0,c||(null!==o?(t||(a=2),clearTimeout(o),h(0)):t||(a=1)))}return h(0),setTimeout(function(){s=!0,p(!0)},r),p}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),xO=function(){return function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n}}();function DO(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function kO(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=DO();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(EO())return new Blob(t);throw new ZC("unsupported-environment","This browser doesn't seem to support creating Blobs")}var NO=function(){function t(t,e){var n=0,r="";OO(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(OO(this.data_)){var r=(o=e,s=n,(i=this.data_).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(EO()){var r=e.map(function(e){return e instanceof t?e.data_:e});return new t(kO.apply(null,r))}var i=e.map(function(t){return CO(t)?hO(cO.RAW,t).data:t.data_}),o=0;i.forEach(function(t){o+=t.byteLength});var s=new Uint8Array(o),a=0;return i.forEach(function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]}),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function jO(t){var e,n;try{e=JSON.parse(t)}catch(Y_){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function RO(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function MO(t,e){return e}var PO=function(){return function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||MO}}(),FO=null;function LO(){if(FO)return FO;var t=[];t.push(new PO("bucket")),t.push(new PO("generation")),t.push(new PO("metageneration")),t.push(new PO("name","fullPath",!0));var e=new PO("name");e.xform=function(t,e){return function(t){return!CO(t)||t.length<2?t:RO(t)}(e)},t.push(e);var n=new PO("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new PO("timeCreated")),t.push(new PO("updated")),t.push(new PO("md5Hash",null,!0)),t.push(new PO("cacheControl",null,!0)),t.push(new PO("contentDisposition",null,!0)),t.push(new PO("contentEncoding",null,!0)),t.push(new PO("contentLanguage",null,!0)),t.push(new PO("contentType",null,!0)),t.push(new PO("metadata","customMetadata",!0)),FO=t}function UO(t,e,n){var r=jO(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=new _O(t.bucket,t.fullPath);return e._makeStorageReference(n)}})}(r,t),r}(t,r,n)}function VO(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var qO=function(){return function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}();function BO(t){if(!t)throw eO()}function zO(t,e){return function(n,r){var i=UO(t,r,e);return BO(null!==i),i}}function HO(t){return function(e,n){var r;return(r=401===e.getStatus()?e.getResponseText().includes("Firebase App Check token is invalid")?new ZC("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new ZC("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?new ZC("quota-exceeded","Quota for bucket '"+t.bucket+"' exceeded, please view quota on https://firebase.google.com/pricing/."):403===e.getStatus()?new ZC("unauthorized","User does not have permission to access '"+t.path+"'."):n).serverResponse=n.serverResponse,r}}function WO(t){var e=HO(t);return function(n,r){var i=e(n,r);return 404===n.getStatus()&&(i=new ZC("object-not-found","Object '"+t.path+"' does not exist.")),i.serverResponse=r.serverResponse,i}}function KO(t,e,n){var r=IO(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new qO(r,"GET",zO(t,n),i);return o.errorHandler=WO(e),o}function GO(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var $O=function(){return function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null}}();function YO(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(Y_){BO(!1)}return BO(!!n&&-1!==(e||["active"]).indexOf(n)),n}var QO=262144,XO=function(){return function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}}}();function JO(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then(function(){return t.apply(void 0,e)})}}var ZO=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=LO(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise(function(t,e){r._resolve=t,r._reject=e,r._start()}),this._promise.then(null,function(){})}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}})},t.prototype._createResumable=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=GO(e,r,i),a={name:s.fullPath},u=IO(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},l=VO(s,n),h=new qO(u,"POST",function(t){var e;YO(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(Y_){BO(!1)}return BO(CO(e)),e},t.maxUploadRetryTime);return h.urlParams=a,h.headers=c,h.body=l,h.errorHandler=HO(e),h}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()},t._errorHandler)})},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken(function(n,r){var i=function(t,e,n,r){var i=new qO(n,"POST",function(t){var e=YO(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(Y_){BO(!1)}n||BO(!1);var i=Number(n);return BO(!isNaN(i)),new $O(i,r.size(),"final"===e)},t.maxUploadRetryTime);return i.headers={"X-Goog-Upload-Command":"query"},i.errorHandler=HO(e),i}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then(function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()},t._errorHandler)})},t.prototype._continueUpload=function(){var t=this,e=QO*this._chunkMultiplier,n=new $O(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken(function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var u=new $O(0,0);if(s?(u.current=s.current,u.total=s.total):(u.current=0,u.total=r.size()),r.size()!==u.total)throw new ZC("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,l=c;i>0&&(l=Math.min(l,i));var h=u.current,d={"X-Goog-Upload-Command":l===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},f=r.slice(h,h+l);if(null===f)throw rO();var p=new qO(n,"POST",function(t,n){var i,s=YO(t,["active","final"]),a=u.current+l,c=r.size();return i="final"===s?zO(e,o)(t,n):null,new $O(a,c,"final"===s,i)},e.maxUploadRetryTime);return p.headers=d,p.body=f.uploadData(),p.progressCallback=a||null,p.errorHandler=HO(t),p}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(Y_){return t._error=Y_,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then(function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()},t._errorHandler)})},t.prototype._increaseMultiplier=function(){QO*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken(function(e,n){var r=KO(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._transition("success")},t._metadataErrorHandler)})},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken(function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=GO(e,r,i),c=VO(u,n),l=NO.getBlob("--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+c+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",r,"\r\n--"+a+"--");if(null===l)throw rO();var h={name:u.fullPath},d=IO(o,t.host),f=t.maxUploadRetryTime,p=new qO(d,"POST",zO(t,n),f);return p.urlParams=h,p.headers=s,p.body=l.uploadData(),p.errorHandler=HO(e),p}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then(function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")},t._errorHandler)})},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=nO(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=mO(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new XO(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach(function(e){t._notifyObserver(e)})},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(mO(this._state)){case gO.SUCCESS:JO(this._resolve.bind(null,this.snapshot))();break;case gO.CANCELED:case gO.ERROR:JO(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(mO(this._state)){case gO.RUNNING:case gO.PAUSED:t.next&&JO(t.next.bind(t,this.snapshot))();break;case gO.SUCCESS:t.complete&&JO(t.complete.bind(t))();break;case gO.CANCELED:case gO.ERROR:t.error&&JO(t.error.bind(t,this._error))();break;default:t.error&&JO(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),tE=function(){function t(t,e){this._service=t,this._location=e instanceof _O?e:_O.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new _O(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return RO(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new _O(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw sO(t)},t}();function eE(t){var e={prefixes:[],items:[]};return nE(t,e).then(function(){return e})}function nE(t,e,n){return Object(Bl.b)(this,void 0,void 0,function(){var r,i,o;return Object(Bl.d)(this,function(s){switch(s.label){case 0:return[4,rE(t,{pageToken:n})];case 1:return r=s.sent(),(i=e.prefixes).push.apply(i,r.prefixes),(o=e.items).push.apply(o,r.items),null==r.nextPageToken?[3,3]:[4,nE(t,e,r.nextPageToken)];case 2:s.sent(),s.label=3;case 3:return[2]}})})}function rE(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n,r;return Object(Bl.d)(this,function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&SO("options.maxResults",1,1e3,e.maxResults),r=function(t,e,n,r,i){var o={};o.prefix=e.isRoot?"":e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=IO(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new qO(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=jO(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new _O(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++)a=t._makeStorageReference(new _O(e,c[u].name)),r.items.push(a);return r}(t,e,r)}(t,e,r);return BO(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=HO(e),u}(t.storage,t._location,"/",(n=e||{}).pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}})})}function iE(t,e){var n=function(t,e){var n=e.split("/").filter(function(t){return t.length>0}).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new _O(t._location.bucket,n);return new tE(t.storage,r)}function oE(t){return/^[A-Za-z]+:\/\//.test(t)}function sE(t,e){if(t instanceof cE){var n=t;if(null==n._bucket)throw new ZC("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new tE(n,n._bucket);return null!=e?sE(r,e):r}if(void 0!==e){if(e.includes(".."))throw iO('`path` param cannot contain ".."');return iE(t,e)}return t}function aE(t,e){if(e&&oE(e)){if(t instanceof cE)return new tE(t,e);throw iO("To use ref(service, url), the first argument must be a Storage instance.")}return sE(t,e)}function uE(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:_O.makeFromBucketSpec(n,t)}var cE=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=JC,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?_O.makeFromBucketSpec(i,this._host):uE(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,this._bucket=null!=this._url?_O.makeFromBucketSpec(this._url,t):uE(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){SO("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){SO("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return Object(Bl.b)(this,void 0,void 0,function(){var t,e;return Object(Bl.d)(this,function(n){switch(n.label){case 0:return(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}})})},t.prototype._getAppCheckToken=function(){return Object(Bl.b)(this,void 0,void 0,function(){var t;return Object(Bl.d)(this,function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}})})},t.prototype._delete=function(){return this._deleted=!0,this._requests.forEach(function(t){return t.cancel()}),this._requests.clear(),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new tE(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new wO(oO());var i=function(t,e,n,r,i,o){var s=AO(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new TO(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then(function(){return r._requests.delete(i)},function(){return r._requests.delete(i)}),i},t.prototype.makeRequestWithTokens=function(t){return Object(Bl.b)(this,void 0,void 0,function(){var e;return Object(Bl.d)(this,function(n){switch(n.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=n.sent(),[2,this._makeRequest(t,e[0],e[1])]}})})},t}();function lE(t,e){return aE(t=Object(Us.q)(t),e)}var hE,dE,fE=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),pE=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new fE(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then(function(e){if(t)return t(new fE(e,n,n._ref))},e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new fE(t,i,i._ref))}:{next:e.next?function(t){return e.next(new fE(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),gE=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map(function(e){return new mE(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map(function(e){return new mE(e,t._service)})},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),mE=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return iE(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new pE(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new ZO(t,new NO(e),n)}(t=Object(Us.q)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=cO.RAW),this._throwIfRoot("putString");var r=hO(e,t),i=Object(Bl.a)({},n);return null==i.contentType&&null!=r.contentType&&(i.contentType=r.contentType),new pE(new ZO(this._delegate,new NO(r.data,!0),i),this)},t.prototype.listAll=function(){var t,e=this;return(t=this._delegate,eE(t=Object(Us.q)(t))).then(function(t){return new gE(t,e.storage)})},t.prototype.list=function(t){var e=this;return function(t,e){return rE(t=Object(Us.q)(t),e)}(this._delegate,t||void 0).then(function(t){return new gE(t,e.storage)})},t.prototype.getMetadata=function(){return t=this._delegate,function(t){return Object(Bl.b)(this,void 0,void 0,function(){var e;return Object(Bl.d)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=KO(t.storage,t._location,LO()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=Object(Us.q)(t));var t},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return Object(Bl.b)(this,void 0,void 0,function(){var n;return Object(Bl.d)(this,function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=IO(e.fullServerUrl(),t.host),o=VO(n,r),s=t.maxOperationRetryTime,a=new qO(i,"PATCH",zO(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=WO(e),a}(t.storage,t._location,e,LO()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}})})}(t=Object(Us.q)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return t=this._delegate,function(t){return Object(Bl.b)(this,void 0,void 0,function(){var e;return Object(Bl.d)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=IO(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new qO(r,"GET",function(t,e){return function(n,r){var i=UO(t,r,e);return BO(null!==i),function(t,e,n){var r=jO(e);if(null===r)return null;if(!CO(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map(function(e){var r=t.fullPath;return IO("/b/"+o(t.bucket)+"/o/"+o(r),n)+AO({alt:"media",token:e})})[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=WO(e),o}(t.storage,t._location,LO()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then(function(t){if(null===t)throw new ZC("no-download-url","The given file does not have any download URLs.");return t})]}})})}(t=Object(Us.q)(t));var t},t.prototype.delete=function(){return this._throwIfRoot("delete"),t=this._delegate,function(t){return Object(Bl.b)(this,void 0,void 0,function(){var e;return Object(Bl.d)(this,function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=IO(e.fullServerUrl(),t.host),r=new qO(n,"DELETE",function(t,e){},t.maxOperationRetryTime);return r.successCodes=[200,204],r.errorHandler=WO(e),r}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}})})}(t=Object(Us.q)(t));var t},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw sO(t)},t}(),bE=function(){function t(t,e){var n=this;this.app=t,this._delegate=e,this.INTERNAL={delete:function(){return n._delegate._delete()}}}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(oE(t))throw iO("ref() expected a child path but got a URL, use refFromURL instead.");return new mE(lE(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!oE(t))throw iO("refFromURL() expected a full URL but got a child path, use ref() instead.");try{_O.makeFromUrl(t,this._delegate.host)}catch(Y_){throw iO("refFromUrl() expected a valid full URL but got an invalid one.")}return new mE(lE(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e){!function(t,e,n){t.host="http://"+e+":"+n}(this._delegate,t,e)},t}();function vE(t){const e=function(t){return new Ot.a(e=>{const n=t=>e.next(t);n(t.snapshot);const r=t.on("state_changed",n);return t.then(t=>{n(t),e.complete()},r=>{n(t.snapshot),(t=>{e.error(t)})(r)}),function(){r()}}).pipe(function(t,e=xs.a){return n=>n.lift(new YC(t,e))}(0))}(t);return{task:t,then:t.then.bind(t),catch:t.catch.bind(t),pause:t.pause.bind(t),cancel:t.cancel.bind(t),resume:t.resume.bind(t),snapshotChanges:()=>e,percentageChanges:()=>e.pipe(Object(St.a)(t=>t.bytesTransferred/t.totalBytes*100))}}function yE(t,e,n){return{getDownloadURL:()=>Object(ze.a)(void 0).pipe(Object(Ps.b)(e.outsideAngular),hn(()=>t.getDownloadURL()),n),getMetadata:()=>Object(ze.a)(void 0).pipe(Object(Ps.b)(e.outsideAngular),hn(()=>t.getMetadata()),n),delete:()=>Object(Ct.a)(t.delete()),child:r=>yE(t.child(r),e,n),updateMetadata:e=>Object(Ct.a)(t.updateMetadata(e)),put:(e,n)=>vE(t.put(e,n)),putString:(e,n,r)=>vE(t.putString(e,n,r)),listAll:()=>Object(Ct.a)(t.listAll())}}dE={TaskState:gO,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:cO,Storage:cE,Reference:mE},(hE=Ls.a).INTERNAL.registerComponent(new J_.a("storage",function(t,e){var n=e.instanceIdentifier,r=t.getProvider("app").getImmediate(),i=t.getProvider("auth-internal"),o=t.getProvider("app-check-internal");return new bE(r,new cE(r,i,o,new yO,n,Ls.a.SDK_VERSION))},"PUBLIC").setServiceProps(dE).setMultipleInstances(!0)),hE.registerVersion("@firebase/storage","0.5.2");const _E=new r.r("angularfire2.storageBucket"),wE=new r.r("angularfire2.storage.maxUploadRetryTime"),CE=new r.r("angularfire2.storage.maxOperationRetryTime");let OE=(()=>{class t{constructor(t,e,n,r,i,o,s){this.schedulers=new Fs.e(i),this.keepUnstableUntilFirst=Object(Fs.i)(this.schedulers);const a=Object(Fs.h)(t,i,e);this.storage=Object(Fs.g)(`${a.name}.storage.${n}`,"AngularFireStorage",a,()=>{const t=i.runOutsideAngular(()=>a.storage(n||void 0));return o&&t.setMaxUploadRetryTime(o),s&&t.setMaxOperationRetryTime(s),t},[o,s])}ref(t){return yE(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst)}refFromURL(t){return yE(this.storage.refFromURL(t),this.schedulers,this.keepUnstableUntilFirst)}upload(t,e,n){return yE(this.storage.ref(t),this.schedulers,this.keepUnstableUntilFirst).put(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Fs.c),r.Rb(Fs.b,8),r.Rb(_E,8),r.Rb(r.C),r.Rb(r.A),r.Rb(wE,8),r.Rb(CE,8))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(Fs.c),Object(r.Rb)(Fs.b,8),Object(r.Rb)(_E,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A),Object(r.Rb)(wE,8),Object(r.Rb)(CE,8))},token:t,providedIn:"any"}),t})(),EE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({}),t})(),SE=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[OE],imports:[EE]}),t})(),IE=(()=>{class t{constructor(t,e){this.afdb=t,this.storage=e,this.basePath="/uploads/images/",this.imageUrl="",this.imageUrlSub=new He.a}pushImageToStorage(t,e){const n=this.basePath+e+"/"+t.name,r=this.storage.ref(n),i=this.storage.upload(n,t);return i.snapshotChanges().pipe(Wn(()=>{r.getDownloadURL().subscribe(t=>{this.imageUrl=t,this.imageUrlSub.next(this.imageUrl)})})).subscribe(t=>{}),i.percentageChanges()}deleteImage(t){return Object(Bl.b)(this,void 0,void 0,function*(){return yield this.storage.refFromURL(t).delete().toPromise()})}getimageUrlObservable(){return this.imageUrlSub.asObservable()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Xw),r.Rb(OE))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function AE(t,e){1&t&&(r.Nb(0,"span",32),r.oc(1,"Please enter a title for this item."),r.Mb())}function TE(t,e){1&t&&(r.Nb(0,"span",32),r.oc(1,"Please enter a valid amount."),r.Mb())}function xE(t,e){1&t&&(r.Nb(0,"span",32),r.oc(1,"Please select a category."),r.Mb())}function DE(t,e){if(1&t){const t=r.Ob();r.Nb(0,"button",38),r.Ub("click",function(){return r.kc(t),r.Yb(2).onDeleteImage()}),r.oc(1,"Delete image"),r.Mb()}}function kE(t,e){if(1&t&&(r.Nb(0,"div",33),r.Nb(1,"div",34),r.Lb(2,"img",35),r.Mb(),r.Nb(3,"div",36),r.nc(4,DE,2,0,"button",37),r.Mb(),r.Mb()),2&t){const t=r.Yb();r.Ab(2),r.dc("src",t.previewPath,r.lc),r.Ab(2),r.dc("ngIf",1==t.showDeleteBtn&&""!=t.previewPath)}}function NE(t,e){if(1&t){const t=r.Ob();r.Nb(0,"input",39),r.Ub("change",function(e){return r.kc(t),r.Yb().selectFile(e)}),r.Mb()}}function jE(t,e){1&t&&(r.Nb(0,"span",32),r.oc(1,"Please set and upload an image for this item."),r.Mb())}const RE=function(t){return{width:t}};function ME(t,e){if(1&t&&(r.Nb(0,"div",40),r.Nb(1,"div",41),r.oc(2),r.Mb(),r.Mb()),2&t){const t=r.Yb();r.Ab(1),r.dc("ngStyle",r.gc(3,RE,t.uploadPercentage+"%")),r.Bb("aria-valuenow",t.uploadPercentage),r.Ab(1),r.qc(" ",t.uploadPercentage,"% ")}}function PE(t,e){1&t&&(r.Nb(0,"div",42),r.oc(1," Please select an .jpg, .jpeg or .png file only. "),r.Mb())}function FE(t,e){1&t&&(r.Nb(0,"div",42),r.oc(1," Please upload an image smaller than 2 MB. "),r.Mb())}function LE(t,e){if(1&t&&(r.Nb(0,"div",43),r.oc(1),r.Mb()),2&t){const t=r.Yb();r.Ab(1),r.qc(" ",t.onSuccessText," ")}}function UE(t,e){if(1&t&&(r.Nb(0,"div",42),r.Nb(1,"h4"),r.oc(2,"Some error occurred."),r.Mb(),r.oc(3),r.Mb()),2&t){const t=r.Yb();r.Ab(3),r.qc(" ",t.unknownErrorText," ")}}function VE(t,e){if(1&t&&(r.Nb(0,"button",44),r.oc(1),r.Mb()),2&t){const t=r.Yb();r.dc("disabled",!t.addOrEditItemsForm.valid||t.isUploading||t.fileSizeExceeded||!t.isImage),r.Ab(1),r.pc(t.submitBtnText)}}function qE(t,e){if(1&t&&(r.Nb(0,"button",45),r.oc(1),r.Mb()),2&t){const t=r.Yb();r.dc("disabled",t.isUploading||t.fileSizeExceeded||!t.isImage),r.Ab(1),r.pc(t.submitBtnText)}}function BE(t,e){if(1&t){const t=r.Ob();r.Nb(0,"button",46),r.Ub("click",function(){return r.kc(t),r.Yb().onDeleteItem()}),r.oc(1,"Delete item"),r.Mb()}}function zE(t,e){if(1&t){const t=r.Ob();r.Nb(0,"button",47),r.Ub("click",function(){return r.kc(t),r.Yb().addAnotherItem()}),r.oc(1),r.Mb()}if(2&t){const t=r.Yb();r.Ab(1),r.pc(t.addAnotherItemBtnText)}}function HE(t,e){if(1&t){const t=r.Ob();r.Nb(0,"button",38),r.Ub("click",function(){return r.kc(t),r.Yb(2).onDeleteImage()}),r.oc(1,"Delete image"),r.Mb()}}function WE(t,e){if(1&t&&(r.Nb(0,"div",48),r.Nb(1,"div",34),r.Nb(2,"div",1),r.Nb(3,"div",49),r.Lb(4,"img",35),r.Mb(),r.Mb(),r.Mb(),r.Nb(5,"div",36),r.nc(6,HE,2,0,"button",37),r.Mb(),r.Mb()),2&t){const t=r.Yb();r.Ab(4),r.dc("src",t.previewPath,r.lc),r.Ab(2),r.dc("ngIf",1==t.showDeleteBtn&&""!=t.previewPath)}}const KE=function(){return["/admin/items"]};let GE=(()=>{class t{constructor(t,e,n,r){this.router=t,this.route=e,this.itemImageService=n,this.itemDataService=r,this.selectedFile=null,this.uploadPercentage=-1,this.isAdd=!1,this.isEdit=!1,this.isUploaded=!1,this.isUploading=!1,this.isImage=!1,this.isSubmitted=!1,this.fileSizeExceeded=!1,this.showDeleteBtn=!1,this.onSuccessText="",this.unknownErrorText="",this.previewPath="",this.validImageTypes=["image/png","image/jpeg","image/jpg"],this.item={id:"",name:"",description:"",price:0,category:"",imageUrl:"",addedOn:"",modifiedOn:""},this.isAdd=!1,this.isEdit=!1,this.isUploaded=!1,this.isUploading=!1,this.isImage=!1,this.isSubmitted=!1,this.fileSizeExceeded=!1,this.showDeleteBtn=!1,this.selectedFile=null}ngOnInit(){this.addOrEditItemsForm=new Oe({itemTitle:new Ce("",[Lt.required]),itemDesc:new Ce(""),itemPrice:new Ce("",[Lt.required,Lt.pattern("^-?[0-9]+([,.]?[0-9]+)?$")]),itemCategory:new Ce("",[Lt.required]),itemImage:new Ce("")}),this.route.data.subscribe(t=>{this.selectedPath=t.path,this.submitBtnText="edit"===this.selectedPath?"Update item":"Add item",this.isAdd="add"===this.selectedPath,this.isEdit="edit"===this.selectedPath}),this.route.params.subscribe(t=>{this.itemId=t.itemId,this.itemCategory=t.itemCategory}),1==this.isEdit&&this.initializeForItemEdit()}initializeForItemEdit(){return Object(Bl.b)(this,void 0,void 0,function*(){this.item=yield this.itemDataService.getItemById(this.itemCategory,this.itemId),this.addOrEditItemsForm.patchValue({itemTitle:this.replaceUndefinedOrNull(this.item.name),itemDesc:this.replaceUndefinedOrNull(this.item.description),itemPrice:this.replaceUndefinedOrNull(this.item.price),itemCategory:this.replaceUndefinedOrNull(this.item.category)}),this.previewPath=this.item.imageUrl,this.imageUrl=this.item.imageUrl,this.fileSizeExceeded=!1,this.isImage=!0,this.showDeleteBtn=!0})}selectFile(t){this.setFile(t),this.checkImageOrNot(this.file),this.isImage&&this.checkFileSize(this.file),1==this.isImage&&0==this.fileSizeExceeded&&this.previewImage()}onSubmit(){(!this.isAdd||1!=this.addOrEditItemsForm.invalid&&0!=this.isImage&&1!=this.fileSizeExceeded)&&(1==this.isAdd&&null!=this.selectedFile&&this.uploadImage(),null!=this.selectedFile&&1==this.isEdit&&""==this.item.imageUrl?this.uploadImage():null!=this.selectedFile&&1==this.isEdit&&""!=this.item.imageUrl?(this.performDeleteImage(),this.uploadImage()):null==this.selectedFile&&this.isEdit&&this.updateItemData())}uploadImage(){const t=this.addOrEditItemsForm.get("itemCategory").value;this.isUploading=!0,this.itemImageService.pushImageToStorage(this.file,t).subscribe(t=>{this.uploadPercentage=Math.round(t||0),100==this.uploadPercentage&&(this.isUploaded=!0)},t=>{this.unknownErrorText=t,this.isUploaded=!1,this.isUploading=!1}),this.imageUrlSub=this.itemImageService.getimageUrlObservable().subscribe(t=>{""!=t&&null!=t&&null!=t&&(this.imageUrl=t,this.imageUrlSub.unsubscribe(),this.isAdd?this.pushItemData():this.isEdit&&this.updateItemData())})}pushItemData(){this.item.name=this.addOrEditItemsForm.get("itemTitle").value,this.item.description=this.addOrEditItemsForm.get("itemDesc").value,this.item.price=this.addOrEditItemsForm.get("itemPrice").value,this.item.category=this.addOrEditItemsForm.get("itemCategory").value,this.item.imageUrl=this.imageUrl,this.item.addedOn=(new Date).toLocaleString(),this.itemDataService.addItemData(this.item).subscribe(t=>{null!=t&&(this.isSubmitted=!0,this.onSuccessText="Item added!",this.addAnotherItemBtnText="Add another item",this.itemDataService.setItemId(t.name))},t=>{this.unknownErrorText=t,this.isSubmitted=!1,this.addAnotherItemBtnText="Try again?"})}updateItemData(){this.item.name=this.addOrEditItemsForm.get("itemTitle").value,this.item.description=this.addOrEditItemsForm.get("itemDesc").value,this.item.price=this.addOrEditItemsForm.get("itemPrice").value,this.item.category=this.addOrEditItemsForm.get("itemCategory").value,this.item.imageUrl=this.imageUrl,this.item.modifiedOn=(new Date).toLocaleString(),this.performItemDataUpdate(this.item).then(t=>{this.isSubmitted=!0,this.onSuccessText="Item updated!"}).catch(t=>{this.unknownErrorText=t,this.isSubmitted=!1})}performItemDataUpdate(t){return Object(Bl.b)(this,void 0,void 0,function*(){yield this.itemDataService.updateItemData(t,this.itemCategory,this.itemId)})}addAnotherItem(){this.addOrEditItemsForm.reset(),this.file=null,this.selectedFile=null,this.uploadPercentage=-1,this.isImage=!1,this.isUploaded=!1,this.isUploading=!1,this.isSubmitted=!1,this.fileSizeExceeded=!1,this.isAdd&&(this.submitBtnText="Add item"),this.isEdit&&(this.submitBtnText="Update item"),this.unknownErrorText="",this.previewPath="",this.onSuccessText="",this.item={id:"",name:"",description:"",price:0,category:"",imageUrl:"",addedOn:"",modifiedOn:""}}onDeleteImage(){1!=this.isEdit&&1!=this.showDeleteBtn||this.performDeleteImage()}performDeleteImage(){return Object(Bl.b)(this,void 0,void 0,function*(){yield this.itemImageService.deleteImage(this.item.imageUrl).then(()=>{null==this.selectedFile&&(this.previewPath="",this.showDeleteBtn=!1,this.item.imageUrl="")}).catch(()=>{this.unknownErrorText="Some error occurred while deleting image."}),yield this.itemDataService.deleteImageUrl(this.item.category,this.itemId)})}onDeleteItem(){1!=this.isEdit&&1!=this.showDeleteBtn||this.performDeleteItem()}performDeleteItem(){return Object(Bl.b)(this,void 0,void 0,function*(){""!=this.previewPath&&(yield this.performDeleteImage()),yield this.itemDataService.deleteItemData(this.item.category,this.item.id).then(()=>{this.onSuccessText="Item deleted!",setTimeout(()=>{this.router.navigate(["admin/items"])},1500)}).catch(()=>{this.unknownErrorText="Some error occurred while deleting item."})})}setFile(t){this.selectedFile=t.target.files,this.selectedFile&&(this.file=this.selectedFile.item(0))}previewImage(){const t=new FileReader;t.onload=()=>{this.previewPath=t.result},t.readAsDataURL(this.file)}checkImageOrNot(t){this.isImage=-1!=this.validImageTypes.indexOf(t.type)}checkFileSize(t){this.fileSizeExceeded=Math.round(t.size/1024)>2048}hideResponseTexts(){this.unknownErrorText="",this.onSuccessText=""}replaceUndefinedOrNull(t){return null==t||null==t?"":t}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(_o),r.Kb(Zr),r.Kb(IE),r.Kb(TC))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-add-or-edit-items"]],decls:58,vars:22,consts:[[1,"container","add-edit-div"],[1,"row"],[1,"d-flex","flex-row-reverse",2,"margin-bottom","30px"],[1,"p-2"],["type","button",1,"btn","btn-outline-primary",3,"routerLink"],[1,"fa","fa-arrow-left"],[2,"margin-left","3px","margin-bottom","10px"],[1,"col-xs-12","col-md-6","col-md-offset-3"],[2,"margin-bottom","40px"],[3,"formGroup","ngSubmit"],[3,"click"],[1,"form-group"],["for","exampleInputEmail1"],["type","itemTitle","formControlName","itemTitle",1,"form-control"],["class","error-text",4,"ngIf"],["type","itemDesc","formControlName","itemDesc",1,"form-control"],["type","itemPrice","formControlName","itemPrice",1,"form-control"],["aria-label","Default select example","formControlName","itemCategory",1,"form-select"],["value","starters"],["value","mains"],["value","alcoholic-beverages"],["value","desserts"],["class","form-group mobile-only","style","margin-top: 15px;",4,"ngIf"],["type","file","class","form-control text-nowrap text-truncate","accept","image/png, image/jpeg, image/jpg","formControlName","itemImage",3,"change",4,"ngIf"],["class","progress mt-2","style","margin-bottom: 15px;",4,"ngIf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","alert alert-success","role","alert",4,"ngIf"],["type","submit","style","margin-right: 10px","class","btn btn-md btn-primary",3,"disabled",4,"ngIf"],["type","submit","class","btn btn-md btn-primary",3,"disabled",4,"ngIf"],["type","button","class","btn btn-md btn-outline-danger","style","margin-left: 10px",3,"click",4,"ngIf"],["type","button","class","btn btn-md btn-primary",3,"click",4,"ngIf"],["class","col-xs-12 col-md-6 col-md-offset-3 on-mobile-hide",4,"ngIf"],[1,"error-text"],[1,"form-group","mobile-only",2,"margin-top","15px"],[1,"container-fluid","no-padding"],["alt","",1,"img-thumbnail",3,"src"],[1,"text-center"],["type","button","class","btn btn-md btn-outline-danger","style","margin-top: 25px",3,"click",4,"ngIf"],["type","button",1,"btn","btn-md","btn-outline-danger",2,"margin-top","25px",3,"click"],["type","file","accept","image/png, image/jpeg, image/jpg","formControlName","itemImage",1,"form-control","text-nowrap","text-truncate",3,"change"],[1,"progress","mt-2",2,"margin-bottom","15px"],["role","progressbar","aria-valuemin","0","aria-valuemax","100",1,"progress-bar","progress-bar-animated","bg-warning",3,"ngStyle"],["role","alert",1,"alert","alert-danger"],["role","alert",1,"alert","alert-success"],["type","submit",1,"btn","btn-md","btn-primary",2,"margin-right","10px",3,"disabled"],["type","submit",1,"btn","btn-md","btn-primary",3,"disabled"],["type","button",1,"btn","btn-md","btn-outline-danger",2,"margin-left","10px",3,"click"],["type","button",1,"btn","btn-md","btn-primary",3,"click"],[1,"col-xs-12","col-md-6","col-md-offset-3","on-mobile-hide"],[1,"col-md-12"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"div",1),r.Nb(2,"div",2),r.Nb(3,"div",3),r.Nb(4,"button",4),r.Lb(5,"i",5),r.Nb(6,"span",6),r.oc(7," Display all items "),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(8,"div",7),r.Nb(9,"h2",8),r.oc(10),r.Zb(11,"titlecase"),r.Mb(),r.Nb(12,"form",9),r.Ub("ngSubmit",function(){return e.onSubmit()}),r.Nb(13,"div",10),r.Ub("click",function(){return e.hideResponseTexts()}),r.Nb(14,"div",11),r.Nb(15,"label",12),r.oc(16,"Title"),r.Mb(),r.Lb(17,"input",13),r.nc(18,AE,2,0,"span",14),r.Mb(),r.Nb(19,"div",11),r.Nb(20,"label",12),r.oc(21,"Description"),r.Mb(),r.Lb(22,"input",15),r.Mb(),r.Nb(23,"div",11),r.Nb(24,"label",12),r.oc(25,"Price (in \u20b9)"),r.Mb(),r.Lb(26,"input",16),r.nc(27,TE,2,0,"span",14),r.Mb(),r.Nb(28,"div",11),r.Nb(29,"label",12),r.oc(30,"Category"),r.Mb(),r.Nb(31,"select",17),r.Nb(32,"option",18),r.oc(33,"Starters"),r.Mb(),r.Nb(34,"option",19),r.oc(35,"Mains"),r.Mb(),r.Nb(36,"option",20),r.oc(37,"Alcoholic Beverages"),r.Mb(),r.Nb(38,"option",21),r.oc(39,"Desserts"),r.Mb(),r.Mb(),r.nc(40,xE,2,0,"span",14),r.Mb(),r.Mb(),r.Nb(41,"div",11),r.Nb(42,"label"),r.oc(43,"Thumbnail image"),r.Mb(),r.nc(44,kE,5,2,"div",22),r.nc(45,NE,1,0,"input",23),r.nc(46,jE,2,0,"span",14),r.Mb(),r.nc(47,ME,3,5,"div",24),r.nc(48,PE,2,0,"div",25),r.nc(49,FE,2,0,"div",25),r.nc(50,LE,2,1,"div",26),r.nc(51,UE,4,1,"div",25),r.Nb(52,"div",11),r.nc(53,VE,2,2,"button",27),r.nc(54,qE,2,2,"button",28),r.nc(55,BE,2,0,"button",29),r.nc(56,zE,2,1,"button",30),r.Mb(),r.Mb(),r.Mb(),r.nc(57,WE,7,2,"div",31),r.Mb(),r.Mb()),2&t&&(r.Ab(4),r.dc("routerLink",r.fc(21,KE)),r.Ab(6),r.qc("",r.ac(11,19,e.selectedPath)," Item"),r.Ab(2),r.dc("formGroup",e.addOrEditItemsForm),r.Ab(6),r.dc("ngIf",null!=e.addOrEditItemsForm.controls.itemTitle.errors&&e.addOrEditItemsForm.controls.itemTitle.touched),r.Ab(9),r.dc("ngIf",null!=e.addOrEditItemsForm.controls.itemPrice.errors&&e.addOrEditItemsForm.controls.itemPrice.touched),r.Ab(13),r.dc("ngIf",null!=e.addOrEditItemsForm.controls.itemCategory.errors&&e.addOrEditItemsForm.controls.itemCategory.touched),r.Ab(4),r.dc("ngIf",""!=e.previewPath),r.Ab(1),r.dc("ngIf",!e.isUploaded),r.Ab(1),r.dc("ngIf",null!=e.addOrEditItemsForm.controls.itemImage.errors&&e.addOrEditItemsForm.controls.itemImage.touched),r.Ab(1),r.dc("ngIf",e.isUploading),r.Ab(1),r.dc("ngIf",e.selectedFile&&!e.isImage),r.Ab(1),r.dc("ngIf",e.selectedFile&&e.isImage&&e.fileSizeExceeded),r.Ab(1),r.dc("ngIf",""!=e.onSuccessText),r.Ab(1),r.dc("ngIf",""!=e.unknownErrorText),r.Ab(2),r.dc("ngIf",1==e.isAdd&&0==e.isUploading),r.Ab(1),r.dc("ngIf",1==e.isEdit),r.Ab(1),r.dc("ngIf",1==e.showDeleteBtn),r.Ab(1),r.dc("ngIf",1==e.isSubmitted&&1==e.isAdd||""!=e.unknownErrorText&&1==e.isAdd),r.Ab(1),r.dc("ngIf",""!=e.previewPath))},directives:[wo,Se,ie,xe,Nt,re,ke,j,Re,Me,Ue,P],pipes:[L],styles:[".add-edit-div[_ngcontent-%COMP%]{min-height:70vh;padding-bottom:180px;padding-top:70px}.form-group[_ngcontent-%COMP%]{margin-bottom:20px}label[_ngcontent-%COMP%]{font-size:20px;font-weight:400}"]}),t})();const $E=function(){return[""]};let YE=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-not-found"]],decls:34,vars:2,consts:[[1,"main"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","width","470","height","290","viewBox","0 0 470 290"],["id","prefix__a","d","M5.063 128.67c-2.513 15.192 5.633 31.093 17.898 38.941 5.99 3.832 13.34 6.528 16.471 13.254 4.868 10.452-3.879 22.437-13.113 28.515-9.236 6.078-20.5 10.9-24.704 21.683-2.771 7.108-1.685 15.387 1.058 22.507 10.06 26.112 39.393 37.547 65.479 36.15 26.086-1.396 50.827-12.407 76.416-18.075 87.873-19.465 180.005 24.717 267.728 4.47 13.65-3.151 27.4-8.081 37.943-17.99 11.883-11.167 18.632-28.016 19.65-45.023.97-16.225-4.34-34.495-17.744-41.806-7.834-4.273-17.196-4.1-25.7-1.774-5.43 1.483-10.767 3.808-16.369 3.848-5.601.038-11.763-3-13.386-8.808-1.707-6.107 2.182-12.41 6.642-16.577 9.072-8.474 21.203-12.707 29.441-22.126 7.927-9.063 11.264-22.574 8.574-34.716-2.692-12.141-11.326-22.538-22.188-26.715-27.683-10.645-57.844 18.377-86.152 9.873-2.101-.63-4.312-1.605-5.418-3.641-1.08-1.988-.834-4.51-.214-6.716 3.468-12.348 16.939-20.21 17.528-33.102.32-7.008-3.504-13.564-8.325-18.251-33.126-32.2-81.125 6.102-114.9 18.194-55.542 19.884-112.157 36.49-167.849 55.963-20.81 7.275-44.91 18.606-48.766 41.922z",1,"fundo"],["fill","none","fill-rule","evenodd"],["fill","#FFF","d","M0 0H1366V800H0z","transform","translate(-448 -157)"],["transform","translate(-448 -157) translate(448 157)"],["id","prefix__b","fill","#fff"],[0,"xlink","href","#prefix__a"],["fill","#F6F6F7",0,"xlink","href","#prefix__a"],["fill","#EDEDF0","fill-rule","nonzero","d","M-14.199 211.2H481.36V301.2H-14.199z","mask","url(#prefix__b)"],[1,"paes"],[1,"pao-baixo"],["fill","#FBB965","d","M2.79 131.737s-2.073 3.155-2.479 6.868c-.406 3.713-.747 9.666 1.24 13.372 1.985 3.707 12.69 20.8 65.175 21.02 53.15.225 69.188-15.685 70.59-18.977 2.605-6.118 1.838-21.327.06-22.283-1.777-.956-44.044-3.204-72.446-4.057-28.402-.854-49.872-1.968-62.14 4.057","transform","translate(161 68)"],["fill","#E6A95F","d","M34.648 167.758c-8.863-1.526-23.515-6.939-30.292-14.218-6.775-7.28-2.096-8.803 3.508-5.387 5.605 3.415 24.569 11.557 54.124 12.263 29.555.706 61.424-6.946 72.2-17.053 0 0 2.705-1.47 2.768 1.509.062 2.98.428 7.948-2.769 10.507-3.196 2.558-34.805 23.526-99.54 12.379","transform","translate(161 68)"],["fill","#FFDA7F","d","M5.679 131.837c-6.522 1.646-.275 6.91 9.492 12.14 9.767 5.229 28.24 10.257 44.267 10.015 16.028-.243 37.48-.481 52.543-5.333 15.06-4.852 16.223-9.55 17.998-13.298 1.774-3.748-107.32-7.809-124.3-3.524","transform","translate(161 68)"],[1,"pao-cima"],["fill","#FBB868","d","M71.37 0C49.008.035-2.43.631 1.18 51.16c0 0-.018 10.84 62.825 10.84 62.844 0 72.591-9.633 73.721-11.173C142.284 44.623 147.583-.117 71.37 0","transform","translate(161 68)"],["fill","#E6A95F","d","M34.552 61c-7.628-1.006-23.98-2.904-27.586-5.506-3.606-2.604-7.448-2.895-5.39-10.826.842-3.242 7.976-.619 11.264.839 3.289 1.458 21.239 6.047 42.989 6.673 21.75.625 57.126-1.679 67.42-5.458 9.806-3.598 13.662-7.027 15.493-5.228 2.396 2.351 1.687 8.008-4.913 12.215-6.252 3.985-27.53 7.2-49.434 7.76-21.904.56-38.604 1.012-49.843-.469","transform","translate(161 68)"],["fill","#FFEAD4","d","M45.508 13.114c-.368.549-.54 1.598-.503 2.445.017.392.297.604.45.287.143-.297.222-.617.303-.978.087-.387.197-.735.238-1.15.042-.44-.257-.95-.488-.604M42.092 9.016c-.694.13-1.446.61-1.774 1.098-.168.248-.3.512-.317.792-.017.313.154.503.29.776.249.494 1.245.392 1.22-.162-.014-.274.33-.612.54-.817.367-.361.75-.62.923-1.075.154-.404-.413-.7-.882-.612M51.621 9.247c-.182-.409-.68-.325-.615.364.063.687.007 1.485.25 2.067.19.458.694.473.737-.25.043-.759-.109-1.592-.372-2.181M32.55 15.101c-1.206.547-1.849 1.662-1.414 2.552.188.384 1.21.504 1.46.077.188-.32.407-.629.616-.942.243-.363.63-.675.767-1.064.173-.486-.753-.93-1.43-.623M29.793 9.012c-.26-.108-.498.532-.62.942-.166.565-.205 1.033-.149 1.674.053.59.424.405.493-.048-.002.014.102-.302.138-.4.093-.247.18-.497.262-.76.113-.359.144-1.297-.124-1.408M38.384 6.056c-.737-.211-1.406.211-1.881.674-.53.514-.607 1.19-.39 1.829.167.5 1.09.632 1.326.096.127-.285.31-.53.533-.764.304-.32.72-.44.944-.848.237-.429-.053-.85-.532-.987M21.722 10.101c-.484-.28-1.16.08-1.542.378-.57.444-.957.924-1.152 1.628-.21.764.802 1.182 1.296.663.4-.42.901-.746 1.308-1.172.319-.334.594-1.205.09-1.497M23.513 15.078c-.385.414-.505 1.566-.513 2.381-.005.47.333.749.47.35.206-.592.422-1.34.517-2.047.082-.598-.253-.921-.474-.684M38.964 14.6c-.26-.324-1.293-.581-2.192-.6-.626-.012-.971.28-.65.452.459.244 1.155.57 2.063.547.56-.014.936-.205.78-.4M51.58 3.028c-.54-.1-.912.074-1.399.401-.45.304-.83.813-1.092 1.395-.344.76.386 1.437.866 1.076.662-.5 1.41-.857 1.914-1.641.255-.397.126-1.152-.29-1.23M66.234 9c-.923 0-2.062.305-2.227.708-.074.182.437.384.836.247.537-.185 1.29-.187 1.832-.364.59-.193.337-.591-.441-.591M60.589 9.375c-.101-.522-.482-.493-.556.048-.12.852.102 1.815.423 2.412.213.396.543.02.544-.494.002-.736-.283-1.302-.411-1.966M69.955 3.569c-.44-.473-1.713-.712-2.727-.479-.37.085-.24.315.044.396.601.173 1.168.408 1.848.503.49.069 1.042-.199.835-.42M73.956 10.626c-.231-.836-.735-1.255-1.316-1.507-.24-.104-.5-.147-.75-.1-.148.028-.273.063-.407.161-.032.022-.373.238-.223.161-.282.148-.382.791-.057.979.117.067.22.24.333.325.168.128.336.247.508.364.327.219.564.609.873.868.537.45 1.27-.42 1.04-1.251M66.549 15.017c-.83-.233-.486 2.056-.435 2.528.055.51.678.664.741.08.068-.628.42-2.405-.306-2.608M54.803 16.301c-.065-.347-.1-.709-.19-1.038-.107-.393-.44-.32-.532.052-.186.746-.052 2.313.405 2.636.225.16.545-.077.512-.623-.024-.375-.13-.676-.195-1.027M39.534 21.024c-.423.212-.58 1.352-.523 2.174.066.946.664 1.13.785.144.065-.538.22-1.041.203-1.612-.016-.528-.238-.82-.465-.706M15.946 21.201c-.04-.142-.134-.197-.214-.2-.311-.02-.464.621-.576 1.05-.124.468-.188.945-.14 1.461.053.562.486.699.57.088.053-.375.146-.754.233-1.107.108-.439.265-.815.127-1.292M14.918 16.274c-.067-.169-.25-.279-.46-.274-.571.015-1.05.232-1.55.61-.562.422-.976 1.023-.899 1.675.081.697.993.942 1.574.476.407-.326.746-.755 1.058-1.149.364-.462.441-.923.277-1.338M62.906 5.209c-.447-.277-1.34-.251-1.957-.083-.279.077-.57.172-.738.298-.069.051-.108.105-.15.16-.025.038-.037.076-.038.115.043.077.042.09-.003.037-.154.243.622.357.925.173.227-.051.444-.104.705-.13.521-.054 1.021-.089 1.286-.315.092-.078.088-.182-.03-.255M52.906 8.291c-.191-.24-.402-.204-.634-.28-.218-.073-.326.255-.245.491.117.34.438.509.697.497.26-.01.37-.472.182-.708M80.437 1.283c-.385-.22-.844-.327-1.272-.266-.497.071-.7.363-1.033.724-.356.388.07 1.143.54.93l-.065-.083c.095.05.192.08.295.09.177.032.31.074.477.16.373.189.702.503 1.023.78.348.301 1.738.788 1.586-.245-.141-.963-.789-1.652-1.551-2.09M78.955 8.082c-.134-.55-.259-1.126-.366-1.703-.102-.548-.457-.476-.541.05-.073.453-.057.877.01 1.331.083.548.286.874.512 1.17.11.144.276.048.357-.132.097-.215.088-.476.028-.716M87.395 8c-.77.016-1.317.338-2.032.43-.505.065-.477.525.046.56.713.047 1.359-.082 2.053-.14.468-.04 1.35.253 1.516-.164.191-.483-.906-.7-1.583-.685M81.958 14.767c-.103-.44-.306-.8-.377-1.279-.095-.644-.518-.678-.57.063-.07.998.19 1.845.53 2.34.293.426.566-.494.417-1.124M99.918 9.365c-.177-.18-.36-.23-.56-.337-.295-.16-.508.405-.225.646.181.155.805.626.863.04.012-.119-.003-.273-.078-.349M93.308 4.792c-.387-.436-.932-.682-1.466-.78-.809-.145-1.17 1.02-.47 1.477.65.427 1.772 2.34 2.503 1.097.376-.641-.178-1.356-.567-1.794M91.498 10.138c-.32.55-.428 1.334-.494 2.18-.043.546.266.928.442.494.21-.512.38-1.126.522-1.741.139-.605-.204-1.393-.47-.933M103.977 8.863c-.265-1.177-1.477-2.153-2.51-1.784-.548.195-.653 1.156-.104 1.442.294.153.53.397.762.655.326.36.549.611.988.784.564.223.992-.535.864-1.097M100.988 4.781c.03-.437-.169-.702-.568-.724-.906-.33-1.89.849-2.3 1.608-.47.873.538 1.63 1.223 1.22.683-.406 1.786-1.108 1.645-2.104M110.532 7.06c-.238-.218-.568.203-.463.619l.012.045c-.01.096-.001.204 0 .297 0 .14-.016.294-.025.434-.012.181-.043.357-.053.539-.013.245.016.45.06.612.091.33.32.515.53.304.108-.11.286-.37.335-.709.04-.276.058-.554.07-.836.024-.568-.189-1.052-.466-1.306M108.458 14.127c-.434-.548-.995-.921-1.662-1.103-.746-.203-1.116.933-.445 1.28.216.11.4.251.557.443.204.248.42.648.672.84.348.262.868.645 1.249.23.437-.478-.064-1.305-.37-1.69M117.71 13.184c-.282.276-.558.555-.852.815-.143.126-.333.256-.446.42-.108.156-.174.34-.284.489-.392.535.193 1.412.694.973.104-.091.318-.086.446-.134.16-.062.324-.11.486-.169.51-.186.872-.578 1.145-1.11.418-.816-.553-1.907-1.188-1.284M97.93 18.019c-.834-.165-1.209.791-.697 1.348.495.538 1.83 2.49 2.627 1.2.636-1.034-1.044-2.373-1.93-2.548M124.69 17.006c-.372.072-.428.396-.629.626-.202.23.139.496.376.3.22-.181.506-.403.559-.676.032-.168-.129-.285-.307-.25M115.979 19.839c-.079-.499-.153-.976-.264-1.445-.205-.86-.853-.174-.689.73.089.49.148.982.25 1.46.196.907.849.182.703-.745M78.957 24.496c.068-.31.05-.616-.02-.91-.077-.321-.14-.65-.183-1.002-.099-.82-.671-.76-.736.076-.056.71.019 1.361.23 1.918.132.348.265.461.467.377-.18.076.075.038.116.016.071-.038.117-.183.135-.33.01-.08.063-.472-.009-.145M61.924 22.403c-.057-.057-.16-.13-.189-.2-.132-.33-.73-.229-.735.1-.004.27.047.533.379.665.186.073.458.02.543-.14l.027-.053c.06-.114.083-.266-.025-.372M106.798 22.22c-.107-.292-.757-.304-.794.028-.032.293.107.618.488.731.229.068.532-.032.507-.257-.021-.186-.137-.329-.201-.502M70.884 28.197c-.13-.291-.716-.24-.83.025-.131.304-.034.606.41.754.101.033.24.034.334-.012.326-.16.181-.553.086-.767","transform","translate(161 68)"],[1,"olhos"],["fill","#633","d","M51.976 32.505c.27 2.748-1.735 5.197-4.476 5.47-2.748.274-5.199-1.732-5.476-4.48-.27-2.748 1.735-5.197 4.483-5.47 2.748-.274 5.192 1.733 5.469 4.48M93.976 28.505c.27 2.748-1.735 5.197-4.483 5.47-2.748.273-5.192-1.733-5.469-4.48-.27-2.748 1.735-5.197 4.483-5.47 2.748-.274 5.192 1.733 5.469  4.48M65.03 45.127c2.1-5.726 9.106-6.606 13.113-2.171.408.462-.277 1.204-.725.77-3.981-3.892-9.17-2.951-11.83 1.745-.187.333-.68-.002-.558-.344 ","transform","translate(161 68)"],["fill-rule","nonzero","stroke","#979797","stroke-linecap","round","stroke-width","1.8",1,"left-sparks"],["d","M23.684 5.789L30 1.158","transform","rotate(-90 157 13)"],["d","M0 5.789L6.316 1.158","transform","rotate(-90 157 13) matrix(-1 0 0 1 6.316 0)"],["d","M15.789 4.632L15.789 0","transform","rotate(-90 157 13)"],["fill-rule","nonzero","stroke","#979797","stroke-linecap","round","stroke-width","1.8",1,"right-sparks"],["d","M23.684 5.789L30 1.158","transform","matrix(0 -1 -1 0 318 170)"],["d","M0 5.789L6.316 1.158","transform","matrix(0 -1 -1 0 318 170) matrix(-1 0 0 1 6.316 0)"],["d","M15.789 4.632L15.789 0","transform","matrix(0 -1 -1 0 318 170)"],["fill","#4B4B62","fill-rule","nonzero","stroke","#4B4B62","stroke-width","2","d","M198.754 186c1.56 0 2.246-.703 2.246-2.3v-41.4c0-1.597-.686-2.3-2.246-2.3h-9.608c-1.56 0-2.247.703-2.247 2.3v19.678h-5.802c-1.185 0-1.934-.83-1.934-2.172V142.3c0-1.597-.686-2.3-2.246-2.3h-9.67c-1.56 0-2.247.703-2.247 2.3v22.425c0 7.283 3.244 10.606 11.355 10.606H186.9v8.369c0 1.597.687 2.3 2.247 2.3h9.608zm32.277 1c15.3 0 18.969-5.248 18.969-13.056V152.12c0-7.808-3.67-13.12-18.969-13.12-15.3 0-19.031 5.312-19.031 13.12v21.824c0 7.808 3.732 13.056 19.031 13.056zm.969-12c-4.25 0-5-1.27-5-2.986v-17.091c0-1.652.75-2.923 5-2.923 4.313 0 5 1.27 5 2.923v17.09c0 1.716-.688 2.987-5 2.987zm62.754 11c1.56 0 2.246-.703 2.246-2.3v-41.4c0-1.597-.686-2.3-2.246-2.3h-9.608c-1.56 0-2.247.703-2.247 2.3v19.678h-5.802c-1.185 0-1.934-.83-1.934-2.172V142.3c0-1.597-.686-2.3-2.246-2.3h-9.67c-1.56 0-2.247.703-2.247 2.3v22.425c0 7.283 3.244 10.606 11.355 10.606H282.9v8.369c0 1.597.687 2.3 2.247 2.3h9.608z",1,"path"],[1,"home-link","text-center"],[2,"color","grey",3,"routerLink"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Xb(),r.Nb(1,"svg",1),r.Nb(2,"defs"),r.Lb(3,"path",2),r.Mb(),r.Nb(4,"g",3),r.Lb(5,"path",4),r.Nb(6,"g",5),r.Nb(7,"mask",6),r.Lb(8,"use",7),r.Mb(),r.Lb(9,"use",8),r.Lb(10,"path",9),r.Nb(11,"g",10),r.Nb(12,"g",11),r.Lb(13,"path",12),r.Lb(14,"path",13),r.Lb(15,"path",14),r.Mb(),r.Nb(16,"g",15),r.Lb(17,"path",16),r.Lb(18,"path",17),r.Lb(19,"path",18),r.Nb(20,"g",19),r.Lb(21,"path",20),r.Mb(),r.Mb(),r.Mb(),r.Nb(22,"g",21),r.Lb(23,"path",22),r.Lb(24,"path",23),r.Lb(25,"path",24),r.Mb(),r.Nb(26,"g",25),r.Lb(27,"path",26),r.Lb(28,"path",27),r.Lb(29,"path",28),r.Mb(),r.Lb(30,"path",29),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Wb(),r.Nb(31,"div",30),r.Nb(32,"a",31),r.oc(33,"Return to homepage."),r.Mb(),r.Mb()),2&t&&(r.Ab(32),r.dc("routerLink",r.fc(1,$E)))},directives:[Co],styles:[".fundo[_ngcontent-%COMP%]{animation:scales 3s infinite alternate}.fundo[_ngcontent-%COMP%], .pao-baixo[_ngcontent-%COMP%]{transform-origin:center}.pao-baixo[_ngcontent-%COMP%]{animation:rotatepao 14s cubic-bezier(.1,.49,.41,.97) infinite}.pao-cima[_ngcontent-%COMP%]{animation:rotatepao 7s cubic-bezier(.1,.49,.41,.97) 1s infinite;transform-origin:center}.left-sparks[_ngcontent-%COMP%]{transform-origin:150px 156px}.left-sparks[_ngcontent-%COMP%], .right-sparks[_ngcontent-%COMP%]{animation:left-sparks 4s infinite alternate}.right-sparks[_ngcontent-%COMP%]{transform-origin:310px 150px}.olhos[_ngcontent-%COMP%]{animation:olhos 2s infinite alternate;transform-origin:center}@keyframes scales{0%{transform:scale(.98)}to{transform:scale(1)}}@keyframes rotatepao{0%{transform:rotate(0deg)}50%,60%{transform:rotate(-20deg)}to{transform:rotate(0deg)}}@keyframes olhos{0%{transform:rotateX(0deg)}to{transform:rotateX(30deg)}}@keyframes left-sparks{0%{opacity:0}}.main[_ngcontent-%COMP%]{align-items:center;display:flex;justify-content:center;margin:0 auto;max-width:460px;min-height:500px;padding-top:20px;width:auto}.home-link[_ngcontent-%COMP%]{padding-bottom:150px}.path[_ngcontent-%COMP%]{stroke-dasharray:300;stroke-dashoffset:300;animation:dash 4s infinite alternate}@keyframes dash{0%,30%{fill:4b4b62;stroke-dashoffset:0}80%,to{fill:transparent;stroke-dashoffset:-200}}"]}),t})(),QE=(()=>{class t{constructor(t){this.handleLocalStorageService=t,this.itemsArray=[],this.onCartPageSub=new Ke(!1),this.onConfirmOrderPageSub=new Ke(!1)}ngOnInit(){this.cartObj=this.getCartData()}addOrUpdate(t){if(this.cartObj=this.getCartData(),null==this.cartObj){const e={items:{[t.id]:{addedOn:(new Date).toLocaleString(),quantity:t.quantity,itemId:t.id,category:t.category,name:t.name,price:t.price,imageUrl:t.imageUrl}},totalAmt:t.price};this.handleLocalStorageService.addCartData(e)}else if(null==this.cartObj.items[t.id]){const e={[t.id]:{addedOn:(new Date).toLocaleString(),quantity:t.quantity,itemId:t.id,category:t.category,name:t.name,price:t.price,imageUrl:t.imageUrl}};this.cartObj={items:Object.assign(Object.assign({},this.cartObj.items),{[t.id]:e[t.id]}),totalAmt:this.getCartTotalAmount(t.price,!0)},this.handleLocalStorageService.addCartData(this.cartObj)}else{const e=this.cartObj.items[t.id];e.quantity+=1,this.cartObj.items[t.id]=e,this.cartObj.totalAmt=this.getCartTotalAmount(t.price,!0),this.handleLocalStorageService.addCartData(this.cartObj)}}removeItem(t){if(this.cartObj=this.getCartData(),null!=this.cartObj){const e=this.cartObj.items[t.id];e.quantity>1?(e.quantity-=1,this.cartObj.items[t.id]=e):1==e.quantity&&delete this.cartObj.items[t.id],this.cartObj.totalAmt=this.getCartTotalAmount(t.price,!1)}this.handleLocalStorageService.addCartData(this.cartObj)}getCartTotalAmount(t,e){let n;return n=1==e?Number(this.cartObj.totalAmt)+Number(t):Number(this.cartObj.totalAmt)-Number(t),n}getCartData(){return null!=this.handleLocalStorageService.getCartData()?JSON.parse(this.handleLocalStorageService.getCartData()):null}clearCart(){this.cartObj=null,this.handleLocalStorageService.removeCartData()}onCartPageObs(){return this.onCartPageSub.next(!1),this.onCartPageSub.asObservable()}goToOrders(t){this.onCartPageSub.next(t)}onConfirmOrderPageObs(){return this.onConfirmOrderPageSub.asObservable()}hideCartBar(t){this.onConfirmOrderPageSub.next(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Jw))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),XE=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-cart-icon"]],decls:25,vars:0,consts:[["height","28","width","28","version","1.1","id","Capa_1","xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","x","0px","y","0px","viewBox","0 0 512 512",0,"xml","space","preserve",2,"enable-background","new 0 0 512 512"],["d","M394.667,256C318.122,255.906,256.094,193.878,256,117.333c0-3.605,0.277-7.125,0.533-10.667H96\n\tc-5.891,0.005-10.662,4.785-10.657,10.677c0.001,0.655,0.062,1.309,0.182,1.953l32,170.667c0.944,5.043,5.344,8.699,10.475,8.704\n\th292.992c26.9,0.003,49.592-20.027,52.928-46.72l2.901-23.168C453.072,246.443,424.265,255.988,394.667,256z",2,"fill","#FFC107"],["cx","394.667","cy","458.667","r","53.333",2,"fill","#455A64"],["cx","181.333","cy","458.667","r","53.333",2,"fill","#455A64"],["d","M437.333,384H191.125c-35.561-0.074-66.163-25.156-73.216-60.011L65.92,64H10.667\n\t\tC4.776,64,0,59.224,0,53.333s4.776-10.667,10.667-10.667h64c5.07-0.001,9.439,3.566,10.453,8.533l53.717,268.587\n\t\tc5.035,24.896,26.888,42.817,52.288,42.88h246.208c5.891,0,10.667,4.776,10.667,10.667S443.224,384,437.333,384z",2,"fill","#455A64"],["cx","394.667","cy","117.333","r","117.333",2,"fill","#4CAF50"],["d","M437.333,128H352c-5.891,0-10.667-4.776-10.667-10.667s4.776-10.667,10.667-10.667h85.333\n\t\tc5.891,0,10.667,4.776,10.667,10.667S443.224,128,437.333,128z",2,"fill","#FAFAFA"],["d","M394.667,170.667c-5.891,0-10.667-4.776-10.667-10.667V74.667C384,68.776,388.776,64,394.667,64\n\t\tc5.891,0,10.667,4.776,10.667,10.667V160C405.333,165.891,400.558,170.667,394.667,170.667z",2,"fill","#FAFAFA"]],template:function(t,e){1&t&&(r.Xb(),r.Nb(0,"svg",0),r.Lb(1,"path",1),r.Nb(2,"g"),r.Lb(3,"circle",2),r.Lb(4,"circle",3),r.Lb(5,"path",4),r.Mb(),r.Lb(6,"circle",5),r.Nb(7,"g"),r.Lb(8,"path",6),r.Lb(9,"path",7),r.Mb(),r.Lb(10,"g"),r.Lb(11,"g"),r.Lb(12,"g"),r.Lb(13,"g"),r.Lb(14,"g"),r.Lb(15,"g"),r.Lb(16,"g"),r.Lb(17,"g"),r.Lb(18,"g"),r.Lb(19,"g"),r.Lb(20,"g"),r.Lb(21,"g"),r.Lb(22,"g"),r.Lb(23,"g"),r.Lb(24,"g"),r.Mb())},styles:[""]}),t})();const JE=["startersRef"],ZE=["mainsRef"],tS=["dessertsRef"],eS=["alcoholicBeveragesRef"],nS=function(t){return{active:t}};function rS(t,e){if(1&t){const t=r.Ob();r.Nb(0,"nav",15),r.Nb(1,"div",1),r.Nb(2,"ul",16),r.Nb(3,"li",17),r.Nb(4,"a",18),r.Ub("click",function(){r.kc(t);const e=r.Yb(),n=r.ic(4);return e.scrollTo(n,1)}),r.Lb(5,"app-starters-icon"),r.Mb(),r.Mb(),r.Nb(6,"li",17),r.Nb(7,"a",18),r.Ub("click",function(){r.kc(t);const e=r.Yb(),n=r.ic(11);return e.scrollTo(n,2)}),r.Lb(8,"app-mains-icon"),r.Mb(),r.Mb(),r.Nb(9,"li",17),r.Nb(10,"a",18),r.Ub("click",function(){r.kc(t);const e=r.Yb(),n=r.ic(14);return e.scrollTo(n,3)}),r.Lb(11,"app-desserts-icon"),r.Mb(),r.Mb(),r.Nb(12,"li",17),r.Nb(13,"a",18),r.Ub("click",function(){r.kc(t);const e=r.Yb(),n=r.ic(17);return e.scrollTo(n,4)}),r.Lb(14,"app-drinks-icon"),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=r.Yb();r.Ab(4),r.dc("ngClass",r.gc(4,nS,1===t.currentActive)),r.Ab(3),r.dc("ngClass",r.gc(6,nS,2===t.currentActive)),r.Ab(3),r.dc("ngClass",r.gc(8,nS,3===t.currentActive)),r.Ab(3),r.dc("ngClass",r.gc(10,nS,4===t.currentActive))}}function iS(t,e){1&t&&(r.Nb(0,"div",19),r.Lb(1,"app-loader"),r.Mb())}function oS(t,e){if(1&t){const t=r.Ob();r.Nb(0,"span",35),r.Ub("click",function(){r.kc(t);const e=r.Yb().$implicit;return r.Yb(2).onAdd(e)}),r.Lb(1,"app-cart-icon"),r.Mb()}}const sS=function(t){return[t]};function aS(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",36),r.Nb(1,"div",37),r.Nb(2,"span",38),r.Ub("click",function(){r.kc(t);const e=r.Yb().$implicit;return r.Yb(2).onRemove(e)}),r.oc(3,"-"),r.Mb(),r.Nb(4,"span",39),r.oc(5),r.Mb(),r.Nb(6,"span",40),r.Ub("click",function(){r.kc(t);const e=r.Yb().$implicit;return r.Yb(2).onAdd(e)}),r.oc(7,"+"),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=r.Yb().$implicit;r.Ab(5),r.pc(r.gc(1,sS,t.quantity))}}function uS(t,e){if(1&t&&(r.Nb(0,"div",25),r.Nb(1,"div",26),r.Lb(2,"img",27),r.Nb(3,"div",28),r.Nb(4,"p",29),r.Nb(5,"strong"),r.oc(6),r.Mb(),r.Mb(),r.Nb(7,"div",30),r.Nb(8,"small",31),r.oc(9),r.Mb(),r.Nb(10,"div",32),r.nc(11,oS,2,0,"span",33),r.nc(12,aS,8,3,"div",34),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t){const t=e.$implicit;r.Ab(2),r.ec("src",t.imageUrl,r.lc),r.Ab(4),r.pc(t.name),r.Ab(3),r.qc("\u20b9",t.price,""),r.Ab(2),r.dc("ngIf",0==t.quantity),r.Ab(1),r.dc("ngIf",t.quantity>0)}}function cS(t,e){if(1&t&&(r.Nb(0,"div",20),r.Nb(1,"div",21),r.Nb(2,"span",22),r.oc(3,"Starters"),r.Mb(),r.Mb(),r.Nb(4,"div",23),r.nc(5,uS,13,5,"div",24),r.Mb(),r.Mb()),2&t){const t=r.Yb();r.Ab(5),r.dc("ngForOf",t.starters)}}function lS(t,e){if(1&t){const t=r.Ob();r.Nb(0,"span",35),r.Ub("click",function(){r.kc(t);const e=r.Yb().$implicit;return r.Yb(2).onAdd(e)}),r.Lb(1,"app-cart-icon"),r.Mb()}}function hS(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",36),r.Nb(1,"div",37),r.Nb(2,"span",38),r.Ub("click",function(){r.kc(t);const e=r.Yb().$implicit;return r.Yb(2).onRemove(e)}),r.oc(3,"-"),r.Mb(),r.Nb(4,"span",39),r.oc(5),r.Mb(),r.Nb(6,"span",40),r.Ub("click",function(){r.kc(t);const e=r.Yb().$implicit;return r.Yb(2).onAdd(e)}),r.oc(7,"+"),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=r.Yb().$implicit;r.Ab(5),r.pc(r.gc(1,sS,t.quantity))}}function dS(t,e){if(1&t&&(r.Nb(0,"div",25),r.Nb(1,"div",26),r.Lb(2,"img",27),r.Nb(3,"div",28),r.Nb(4,"p",29),r.Nb(5,"strong"),r.oc(6),r.Mb(),r.Mb(),r.Nb(7,"div",30),r.Nb(8,"small",31),r.oc(9),r.Mb(),r.Nb(10,"div",32),r.nc(11,lS,2,0,"span",33),r.nc(12,hS,8,3,"div",34),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t){const t=e.$implicit;r.Ab(2),r.ec("src",t.imageUrl,r.lc),r.Ab(4),r.pc(t.name),r.Ab(3),r.qc("\u20b9",t.price,""),r.Ab(2),r.dc("ngIf",0==t.quantity),r.Ab(1),r.dc("ngIf",t.quantity>0)}}function fS(t,e){if(1&t&&(r.Nb(0,"div",20),r.Nb(1,"div",21),r.Nb(2,"span",22),r.oc(3,"Mains"),r.Mb(),r.Mb(),r.Nb(4,"div",23),r.nc(5,dS,13,5,"div",24),r.Mb(),r.Mb()),2&t){const t=r.Yb();r.Ab(5),r.dc("ngForOf",t.mains)}}function pS(t,e){if(1&t){const t=r.Ob();r.Nb(0,"span",35),r.Ub("click",function(){r.kc(t);const e=r.Yb().$implicit;return r.Yb(2).onAdd(e)}),r.Lb(1,"app-cart-icon"),r.Mb()}}function gS(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",36),r.Nb(1,"div",37),r.Nb(2,"span",38),r.Ub("click",function(){r.kc(t);const e=r.Yb().$implicit;return r.Yb(2).onRemove(e)}),r.oc(3,"-"),r.Mb(),r.Nb(4,"span",39),r.oc(5),r.Mb(),r.Nb(6,"span",40),r.Ub("click",function(){r.kc(t);const e=r.Yb().$implicit;return r.Yb(2).onAdd(e)}),r.oc(7,"+"),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=r.Yb().$implicit;r.Ab(5),r.pc(r.gc(1,sS,t.quantity))}}function mS(t,e){if(1&t&&(r.Nb(0,"div",25),r.Nb(1,"div",26),r.Lb(2,"img",27),r.Nb(3,"div",28),r.Nb(4,"p",29),r.Nb(5,"strong"),r.oc(6),r.Mb(),r.Mb(),r.Nb(7,"div",30),r.Nb(8,"small",31),r.oc(9),r.Mb(),r.Nb(10,"div",32),r.nc(11,pS,2,0,"span",33),r.nc(12,gS,8,3,"div",34),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t){const t=e.$implicit;r.Ab(2),r.ec("src",t.imageUrl,r.lc),r.Ab(4),r.pc(t.name),r.Ab(3),r.qc("\u20b9",t.price,""),r.Ab(2),r.dc("ngIf",0==t.quantity),r.Ab(1),r.dc("ngIf",t.quantity>0)}}function bS(t,e){if(1&t&&(r.Nb(0,"div",20),r.Nb(1,"div",21),r.Nb(2,"span",22),r.oc(3,"Desserts"),r.Mb(),r.Mb(),r.Nb(4,"div",23),r.nc(5,mS,13,5,"div",24),r.Mb(),r.Mb()),2&t){const t=r.Yb();r.Ab(5),r.dc("ngForOf",t.desserts)}}function vS(t,e){if(1&t){const t=r.Ob();r.Nb(0,"span",35),r.Ub("click",function(){r.kc(t);const e=r.Yb().$implicit;return r.Yb(2).onAdd(e)}),r.Lb(1,"app-cart-icon"),r.Mb()}}function yS(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",36),r.Nb(1,"div",37),r.Nb(2,"span",38),r.Ub("click",function(){r.kc(t);const e=r.Yb().$implicit;return r.Yb(2).onRemove(e)}),r.oc(3,"-"),r.Mb(),r.Nb(4,"span",39),r.oc(5),r.Mb(),r.Nb(6,"span",40),r.Ub("click",function(){r.kc(t);const e=r.Yb().$implicit;return r.Yb(2).onAdd(e)}),r.oc(7,"+"),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=r.Yb().$implicit;r.Ab(5),r.pc(r.gc(1,sS,t.quantity))}}function _S(t,e){if(1&t&&(r.Nb(0,"div",25),r.Nb(1,"div",26),r.Lb(2,"img",27),r.Nb(3,"div",28),r.Nb(4,"p",29),r.Nb(5,"strong"),r.oc(6),r.Mb(),r.Mb(),r.Nb(7,"div",30),r.Nb(8,"small",31),r.oc(9),r.Mb(),r.Nb(10,"div",32),r.nc(11,vS,2,0,"span",33),r.nc(12,yS,8,3,"div",34),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t){const t=e.$implicit;r.Ab(2),r.ec("src",t.imageUrl,r.lc),r.Ab(4),r.pc(t.name),r.Ab(3),r.qc("\u20b9",t.price,""),r.Ab(2),r.dc("ngIf",0==t.quantity),r.Ab(1),r.dc("ngIf",t.quantity>0)}}function wS(t,e){if(1&t&&(r.Nb(0,"div",20),r.Nb(1,"div",21),r.Nb(2,"span",22),r.oc(3,"Alcoholic Beverages"),r.Mb(),r.Mb(),r.Nb(4,"div",23),r.nc(5,_S,13,5,"div",24),r.Mb(),r.Mb()),2&t){const t=r.Yb();r.Ab(5),r.dc("ngForOf",t.alcoholicBeverages)}}let CS=(()=>{class t{constructor(t,e,n,r){this.router=t,this.itemDataService=e,this.route=n,this.handleCartService=r,this._starters=[],this._mains=[],this._alcoholicBeverages=[],this._desserts=[],this.starters=[],this.mains=[],this.alcoholicBeverages=[],this.desserts=[],this.isLoading=!1,this.isLoaded=!1,this.sectionName="",this.showCategoryNavbar=!1,this.startersOffset=null,this.mainsOffset=null,this.dessertsOffset=null,this.alcoholicBeveragesOffset=null,this.route.fragment.subscribe(t=>{this.sectionName=t})}ngOnInit(){this.fetchItems()}ngAfterViewInit(){this.startersOffset=this.startersRef.nativeElement.offsetTop,this.mainsOffset=this.mainsRef.nativeElement.offsetTop,this.dessertsOffset=this.dessertsRef.nativeElement.offsetTop,this.alcoholicBeveragesOffset=this.alcoholicBeveragesRef.nativeElement.offsetTop}checkOffsetTop(){this.startersOffset=this.startersRef.nativeElement.offsetTop+200,this.mainsOffset=this.mainsRef.nativeElement.offsetTop-200,this.dessertsOffset=this.dessertsRef.nativeElement.offsetTop-200,this.alcoholicBeveragesOffset=this.alcoholicBeveragesRef.nativeElement.offsetTop-200,window.pageYOffset>=this.startersOffset&&window.pageYOffset<this.mainsOffset?(this.currentActive=1,this.showCategoryNavbar=!0):window.pageYOffset>=this.mainsOffset&&window.pageYOffset<this.dessertsOffset?(this.currentActive=2,this.showCategoryNavbar=!0):window.pageYOffset>=this.dessertsOffset&&window.pageYOffset<this.alcoholicBeveragesOffset?(this.currentActive=3,this.showCategoryNavbar=!0):window.pageYOffset>=this.alcoholicBeveragesOffset?(this.currentActive=4,this.showCategoryNavbar=!0):(this.currentActive=0,this.showCategoryNavbar=!1)}scrollTo(t,e){t.scrollIntoView(),this.currentActive=e}fetchItems(){return Object(Bl.b)(this,void 0,void 0,function*(){try{this.isLoading=!0,this._starters=yield this.itemDataService.getItemsCategoryWise("starters"),this._mains=yield this.itemDataService.getItemsCategoryWise("mains"),this._alcoholicBeverages=yield this.itemDataService.getItemsCategoryWise("alcoholic-beverages"),this._desserts=yield this.itemDataService.getItemsCategoryWise("desserts"),this.mergeItemAndCartData(),this.isLoading=!1,this.isLoaded=!0}catch(t){console.log(t)}})}fetchCartData(){this.cartData=this.handleCartService.getCartData()}mergeItemAndCartData(){this.fetchCartData();for(let t in this._starters){let e=0;const n=this._starters[t].id;if(null!=this.cartData){const t=this.cartData.items[n];null!=t&&null!=t.quantity&&(e=this.cartData.items[n].quantity)}this.starters[t]=Object.assign(Object.assign({},this._starters[t]),{quantity:e})}for(let t in this._mains){let e=0;const n=this._mains[t].id;if(null!=this.cartData){const t=this.cartData.items[n];null!=t&&null!=t.quantity&&(e=this.cartData.items[n].quantity)}this.mains[t]=Object.assign(Object.assign({},this._mains[t]),{quantity:e})}for(let t in this._desserts){let e=0;const n=this._desserts[t].id;if(null!=this.cartData){const t=this.cartData.items[n];null!=t&&null!=t.quantity&&(e=this.cartData.items[n].quantity)}this.desserts[t]=Object.assign(Object.assign({},this._desserts[t]),{quantity:e})}for(let t in this._alcoholicBeverages){let e=0;const n=this._alcoholicBeverages[t].id;if(null!=this.cartData){const t=this.cartData.items[n];null!=t&&null!=t.quantity&&(e=this.cartData.items[n].quantity)}this.alcoholicBeverages[t]=Object.assign(Object.assign({},this._alcoholicBeverages[t]),{quantity:e})}}onAdd(t){t.quantity+=1,this.handleCartService.addOrUpdate(t)}onRemove(t){t.quantity-=1,this.handleCartService.removeItem(t)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(_o),r.Kb(TC),r.Kb(Zr),r.Kb(QE))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-category-page"]],viewQuery:function(t,e){if(1&t&&(r.tc(JE,1),r.tc(ZE,1),r.tc(tS,1),r.tc(eS,1)),2&t){let t;r.hc(t=r.Vb())&&(e.startersRef=t.first),r.hc(t=r.Vb())&&(e.mainsRef=t.first),r.hc(t=r.Vb())&&(e.dessertsRef=t.first),r.hc(t=r.Vb())&&(e.alcoholicBeveragesRef=t.first)}},hostBindings:function(t,e){1&t&&r.Ub("scroll",function(t){return e.checkOffsetTop(t)},!1,r.jc)},decls:19,vars:6,consts:[[1,"album","py-5"],[1,"container"],[1,"d-flex","flex-row-reverse",2,"margin-bottom","30px"],["startersRef",""],[1,"p-2"],["class","sticky-top category-navbar",4,"ngIf"],["class","loader-div",4,"ngIf"],["id","starters",1,"section",2,"scroll-margin-top","0rem"],["class","items-div",4,"ngIf"],["id","mains",1,"section"],["mainsRef",""],["id","desserts",1,"section"],["dessertsRef",""],["id","alcoholic-beverages",1,"section"],["alcoholicBeveragesRef",""],[1,"sticky-top","category-navbar"],[1,"nav","nav-pills","nav-justified","text-light","category-ul-nav"],[1,"nav-item"],[1,"nav-link",3,"ngClass","click"],[1,"loader-div"],[1,"items-div"],[1,"d-flex","align-items-center","pb-3","mb-5","border-bottom"],[1,"fs-2"],[1,"row","row-cols-1","row-cols-sm-2","row-cols-md-3","g-3"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"card"],["role","img","aria-label","item-image","preserveAspectRatio","xMidYMid slice","focusable","false",1,"img-loading","card-img-top",3,"src"],[1,"card-body"],[1,"card-text"],[1,"d-flex","justify-content-between","align-items-center"],[1,"text-dark","item-price"],[1,"btn-group"],["class","btn btn-sm",3,"click",4,"ngIf"],["class","btn-toolbar","role","toolbar",4,"ngIf"],[1,"btn","btn-sm",3,"click"],["role","toolbar",1,"btn-toolbar"],["role","group","aria-label","-",1,"btn-group"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"text-center",2,"width","30px"],["type","button",1,"btn","btn-outline-success","btn-sm",3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"main"),r.Nb(1,"div",0),r.Nb(2,"div",1),r.Nb(3,"div",2,3),r.Lb(5,"div",4),r.Mb(),r.nc(6,rS,15,12,"nav",5),r.nc(7,iS,2,0,"div",6),r.Nb(8,"section",7),r.nc(9,cS,6,1,"div",8),r.Mb(),r.Nb(10,"section",9,10),r.nc(12,fS,6,1,"div",8),r.Mb(),r.Nb(13,"section",11,12),r.nc(15,bS,6,1,"div",8),r.Mb(),r.Nb(16,"section",13,14),r.nc(18,wS,6,1,"div",8),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(6),r.dc("ngIf",1==e.showCategoryNavbar),r.Ab(1),r.dc("ngIf",1==e.isLoading&&0==e.isLoaded),r.Ab(2),r.dc("ngIf",1==e.isLoaded),r.Ab(3),r.dc("ngIf",1==e.isLoaded),r.Ab(3),r.dc("ngIf",1==e.isLoaded),r.Ab(3),r.dc("ngIf",1==e.isLoaded))},directives:[j,x,xC,DC,kC,NC,Es,k,XE],styles:["section[_ngcontent-%COMP%]{scroll-margin-top:6rem}img[_ngcontent-%COMP%]{height:300px;object-fit:cover;width:100%}.item-price[_ngcontent-%COMP%]{color:#000;font-size:20px}.card[_ngcontent-%COMP%]{border-radius:1.3em;font-family:Karla,sans-serif}.card-img-top[_ngcontent-%COMP%]{border-top-left-radius:1.3em;border-top-right-radius:1.3em}.card-text[_ngcontent-%COMP%]{color:#000;font-size:20px}.item-category[_ngcontent-%COMP%]{font-size:14px;margin-bottom:10px;white-space:pre-wrap}.item-price[_ngcontent-%COMP%]{margin-right:10px}.loader-div[_ngcontent-%COMP%]{margin-top:250px;min-height:60vh}.img-loading[_ngcontent-%COMP%]{background-color:#e2e2e2;background-image:linear-gradient(0deg,#e2e2e2,#f7f7f7)}div.card[_ngcontent-%COMP%]{box-shadow:0 8px 24px rgba(149,157,165,.2)}div.card[_ngcontent-%COMP%]:hover{box-shadow:0 .5em 3rem -1rem rgba(0,0,0,.5);transform:translateY(-.1rem) scale(1)}.category-navbar[_ngcontent-%COMP%], .items-div[_ngcontent-%COMP%]{margin-bottom:80px}.category-navbar[_ngcontent-%COMP%]{background-color:#fff;border-bottom-left-radius:.5em;border-bottom-right-radius:.5em;box-shadow:1.95px 1.95px 2.6px rgba(0,0,0,.15);color:#000;font-size:18px;margin-top:80px;padding-bottom:10px;padding-top:10px}.nav-pills[_ngcontent-%COMP%]   .nav-link.active[_ngcontent-%COMP%], .nav-pills[_ngcontent-%COMP%]   .show[_ngcontent-%COMP%] > .nav-link[_ngcontent-%COMP%]{background-color:hsla(0,0%,90.6%,.8470588235294118);color:#fff}.nav-link[_ngcontent-%COMP%]{color:#000}.btn-group-sm[_ngcontent-%COMP%] > .btn[_ngcontent-%COMP%], .btn-sm[_ngcontent-%COMP%]{border-radius:.2rem;font-size:.875rem;font-size:17px;padding:0 .6rem}@media (min-width:481px) and (max-width:767px){.nav-link[_ngcontent-%COMP%]{padding:.5rem}.category-navbar[_ngcontent-%COMP%]{font-size:15px}}@media (min-width:320px) and (max-width:480px){.nav-link[_ngcontent-%COMP%]{padding:.5rem}.category-navbar[_ngcontent-%COMP%]{font-size:15px}}"]}),t})();function OS(t,e){1&t&&(r.Nb(0,"div",7),r.Nb(1,"h3"),r.oc(2,"No items in cart."),r.Mb(),r.Mb())}const ES=function(t){return[t]};function SS(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",23),r.Nb(1,"div",24),r.Nb(2,"span",25),r.Ub("click",function(){r.kc(t);const e=r.Yb(2).$implicit;return r.Yb(2).onRemove(e)}),r.oc(3,"-"),r.Mb(),r.Nb(4,"span",26),r.oc(5),r.Mb(),r.Nb(6,"span",27),r.Ub("click",function(){r.kc(t);const e=r.Yb(2).$implicit;return r.Yb(2).onAdd(e)}),r.oc(7,"+"),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=r.Yb(2).$implicit;r.Ab(5),r.pc(r.gc(1,ES,t.quantity))}}function IS(t,e){if(1&t&&(r.Nb(0,"div",13),r.Nb(1,"div",14),r.Nb(2,"div",15),r.Lb(3,"img",16),r.Mb(),r.Nb(4,"div",17),r.Nb(5,"div",18),r.Nb(6,"h5",19),r.oc(7),r.Mb(),r.Nb(8,"span",20),r.oc(9),r.Mb(),r.Nb(10,"p",21),r.oc(11),r.Mb(),r.nc(12,SS,8,3,"div",22),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t){const t=r.Yb().$implicit,e=r.Yb(2);r.Ab(3),r.dc("src",t.imageUrl,r.lc),r.Ab(4),r.pc(t.name),r.Ab(2),r.pc(t.category),r.Ab(2),r.rc(" \u20b9",t.price," \xd7 ",t.quantity," = \u20b9",e.getItemTotalAmount(t.price,t.quantity)," "),r.Ab(1),r.dc("ngIf",t.quantity>0)}}function AS(t,e){if(1&t&&(r.Nb(0,"div"),r.nc(1,IS,13,7,"div",12),r.Mb()),2&t){const t=e.$implicit;r.Ab(1),r.dc("ngIf",t.quantity>0)}}function TS(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div"),r.nc(1,AS,2,1,"div",8),r.Nb(2,"div",9),r.Nb(3,"div",10),r.Nb(4,"button",11),r.Ub("click",function(){return r.kc(t),r.Yb().clearCart()}),r.oc(5,"Clear cart"),r.Mb(),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=r.Yb();r.Ab(1),r.dc("ngForOf",t.cartArray)}}let xS=(()=>{class t{constructor(t,e,n){this.handleLocalStorageService=t,this.handleCartService=e,this.router=n,this.cartArray=[],this.isCartEmpty=!0,this.cartObj=JSON.parse(this.handleLocalStorageService.getCartData())}ngOnInit(){this.populateCartData(),this.handleCartService.goToOrders(!0)}ngOnDestroy(){this.handleCartService.goToOrders(!1)}populateCartData(){if(null!=this.cartObj&&null!=this.cartObj.items){this.isCartEmpty=!1;const t=this.cartObj.items;for(let e in t){const n=t[e];this.cartArray.push({id:n.itemId,name:n.name,category:n.category,price:n.price,imageUrl:n.imageUrl,quantity:n.quantity})}}else this.isCartEmpty=!0}onAdd(t){t.quantity+=1,this.handleCartService.addOrUpdate(t)}onRemove(t){t.quantity-=1,this.handleCartService.removeItem(t),this.cartObj=JSON.parse(this.handleLocalStorageService.getCartData()),null==this.cartObj&&(this.isCartEmpty=!0)}getItemTotalAmount(t,e){return Number(t)*Number(e)}clearCart(){this.isCartEmpty=!0,this.cartArray=[],this.cartObj=null,this.handleCartService.clearCart()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Jw),r.Kb(QE),r.Kb(_o))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-cart-page"]],decls:8,vars:2,consts:[[1,"cart-page"],[1,"album","py-5"],[1,"container"],[1,"d-flex","align-items-center","pb-3","mb-5","border-bottom"],[1,"fs-2"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"text-center","cart-btn-group"],[1,"form-group"],[1,"btn","btn-outline-danger",3,"click"],["class","card mb-3 mx-auto","style","max-width: 700px;",4,"ngIf"],[1,"card","mb-3","mx-auto",2,"max-width","700px"],[1,"row","g-0"],[1,"col-md-4"],[1,"item-image",3,"src"],[1,"col-md-8"],[1,"card-body"],[1,"card-title"],[1,"badge","bg-light","text-dark","item-category"],[1,"card-text","item-price"],["class","btn-toolbar","role","toolbar",4,"ngIf"],["role","toolbar",1,"btn-toolbar"],["role","group","aria-label","-",1,"btn-group"],["type","button",1,"btn","btn-outline-danger","btn-sm",3,"click"],[1,"text-center",2,"width","30px"],["type","button",1,"btn","btn-outline-success","btn-sm",3,"click"]],template:function(t,e){1&t&&(r.Nb(0,"main",0),r.Nb(1,"div",1),r.Nb(2,"div",2),r.Nb(3,"div",3),r.Nb(4,"span",4),r.oc(5,"Your Cart"),r.Mb(),r.Mb(),r.nc(6,OS,3,0,"div",5),r.nc(7,TS,6,1,"div",6),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(6),r.dc("ngIf",1==e.isCartEmpty),r.Ab(1),r.dc("ngIf",0==e.isCartEmpty))},directives:[j,k],styles:["div[_ngcontent-%COMP%]{font-family:Karla,sans-serif}.cart-page[_ngcontent-%COMP%]{min-height:120vh;padding-top:80px}img[_ngcontent-%COMP%]{height:200px;object-fit:cover;width:100%}.card-title[_ngcontent-%COMP%]{font-size:25px}.item-category[_ngcontent-%COMP%]{font-size:15px}.item-price[_ngcontent-%COMP%]{color:#444;font-size:19px}.card[_ngcontent-%COMP%]{border-radius:1.3em;font-family:Karla,sans-serif}div.card[_ngcontent-%COMP%]{box-shadow:0 8px 24px rgba(149,157,165,.2)}div.card[_ngcontent-%COMP%]:hover{box-shadow:0 .5em 3rem -1rem rgba(0,0,0,.5);transform:translateY(-.1rem) scale(1)}.item-category[_ngcontent-%COMP%]{font-size:14px;margin-bottom:10px;white-space:pre-wrap}.cart-btn-group[_ngcontent-%COMP%]{margin-bottom:100px;margin-top:80px}@media (min-width:1281px){.item-image[_ngcontent-%COMP%]{border-bottom-left-radius:1.3em;border-top-left-radius:1.3em}}@media (min-width:1025px) and (max-width:1280px){.item-image[_ngcontent-%COMP%]{border-bottom-left-radius:1.3em;border-top-left-radius:1.3em}}@media (min-width:768px) and (max-width:1024px){.item-image[_ngcontent-%COMP%]{border-bottom-left-radius:1.3em;border-top-left-radius:1.3em}}@media (min-width:768px) and (max-width:1024px) and (orientation:landscape){.item-image[_ngcontent-%COMP%]{border-bottom-left-radius:1.3em;border-top-left-radius:1.3em}}@media (min-width:481px) and (max-width:767px){.item-image[_ngcontent-%COMP%]{border-top-left-radius:1.3em;border-top-right-radius:1.3em}}@media (min-width:320px) and (max-width:480px){.item-image[_ngcontent-%COMP%]{border-top-left-radius:1.3em;border-top-right-radius:1.3em}}"]}),t})(),DS=(()=>{class t{constructor(t,e,n){this.http=t,this.handleLocalStorageService=e,this.afdb=n,this.uid=this.handleLocalStorageService.getUser()}addOrderData(t,e){const n=this.formatOrderData(t,e);return this.http.post(Ho.databaseURL+"/orders/"+this.uid+".json",n)}formatOrderData(t,e){let n={};for(let r in t){const e={[t[r].id]:{itemId:t[r].id,name:t[r].name,price:t[r].price,quantity:t[r].quantity}};n=Object.assign(Object.assign({},n),{[t[r].id]:e[t[r].id]})}return{orderId:"",orderedItems:n,addedOn:(new Date).toLocaleString(),totalAmt:e}}setOrderId(t){let e="order"+t;this.afdb.object("orders/"+this.uid+"/"+t).update({orderId:e})}getOrderData(){return Object(Bl.b)(this,void 0,void 0,function*(){const t=this.handleLocalStorageService.getUser(),e=Ho.databaseURL+"/orders/"+t+".json";return yield this.http.get(e).toPromise()})}getOrderDataById(t){return Object(Bl.b)(this,void 0,void 0,function*(){const e=Ho.databaseURL+"/orders/"+t+".json";return yield this.http.get(e).toPromise()})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(as),r.Rb(Jw),r.Rb(Xw))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function kS(t,e){1&t&&(r.Nb(0,"div"),r.Lb(1,"app-loader"),r.Mb())}function NS(t,e){1&t&&(r.Nb(0,"div",8),r.Nb(1,"h3"),r.oc(2,"You haven't ordered anything yet."),r.Mb(),r.Mb())}function jS(t,e){if(1&t&&(r.Nb(0,"div"),r.Nb(1,"p",13),r.oc(2),r.Mb(),r.Mb()),2&t){const t=e.$implicit,n=r.Yb(2);r.Ab(2),r.sc(" ",t.name,": \u20b9",t.price," \xd7 ",t.quantity," = \u20b9",n.getItemTotalAmount(t.price,t.quantity)," ")}}function RS(t,e){if(1&t&&(r.Nb(0,"div"),r.Nb(1,"div",9),r.Nb(2,"div",10),r.Nb(3,"strong"),r.oc(4),r.Mb(),r.oc(5),r.Mb(),r.Nb(6,"div",11),r.Nb(7,"h5",12),r.oc(8),r.Mb(),r.nc(9,jS,3,4,"div",7),r.Lb(10,"hr"),r.Nb(11,"strong"),r.oc(12),r.Mb(),r.oc(13," (inclusive of 18 %GST) "),r.Mb(),r.Mb(),r.Mb()),2&t){const t=e.$implicit;r.Ab(4),r.qc("Order # ",t.orderNo,""),r.Ab(1),r.qc(" placed on ",t.addedOn," "),r.Ab(3),r.qc("ID: ",t.orderId,""),r.Ab(1),r.dc("ngForOf",t.orderedItems),r.Ab(3),r.qc("Total amount paid: \u20b9",t.totalAmt,"")}}let MS=(()=>{class t{constructor(t){this.orderDataService=t,this.orderArray=[],this.isLoading=!0,this.isLoaded=!1,this.fetchOrderData()}ngOnInit(){}fetchOrderData(){return Object(Bl.b)(this,void 0,void 0,function*(){this.isLoaded=!1,this.isLoading=!0,this.orders=yield this.orderDataService.getOrderData();let t=0;for(let e in this.orders){t++;const n=this.orders[e],r=[];for(let t in n.orderedItems)r.push({name:n.orderedItems[t].name,price:n.orderedItems[t].price,quantity:n.orderedItems[t].quantity});this.orderArray.push({orderNo:t,orderId:n.orderId,addedOn:n.addedOn,orderedItems:r,totalAmt:n.totalAmt})}this.orderArray.reverse(),this.isLoaded=!0,this.isLoading=!1})}getItemTotalAmount(t,e){return Number(t)*Number(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(DS))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-order-page"]],decls:9,vars:3,consts:[[1,"my-order-page"],[1,"album","py-5"],[1,"container"],[1,"d-flex","align-items-center","pb-3","mb-5","border-bottom"],[1,"fs-2"],[4,"ngIf"],["class","text-center",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"card","mx-auto",2,"max-width","700px"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(t,e){1&t&&(r.Nb(0,"main",0),r.Nb(1,"div",1),r.Nb(2,"div",2),r.Nb(3,"div",3),r.Nb(4,"span",4),r.oc(5,"My orders"),r.Mb(),r.Mb(),r.nc(6,kS,2,0,"div",5),r.nc(7,NS,3,0,"div",6),r.nc(8,RS,14,5,"div",7),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(6),r.dc("ngIf",1==e.isLoading),r.Ab(1),r.dc("ngIf",1==e.isLoaded&&0==e.orderArray.length),r.Ab(1),r.dc("ngForOf",e.orderArray))},directives:[j,k,Es],styles:[".my-order-page[_ngcontent-%COMP%]{min-height:120vh;padding-top:80px}div[_ngcontent-%COMP%]{font-family:Karla,sans-serif}.card[_ngcontent-%COMP%]{font-size:18px;margin-bottom:20px}.card-header[_ngcontent-%COMP%]{background-color:rgb(0 255 167/46%)}"]}),t})(),PS=(()=>{class t{constructor(t,e){this.handleLocalStorage=t,this.router=e}canActivate(){return"false"!==this.handleLocalStorage.getIsAuthenticated()&&null!=this.handleLocalStorage.getIsAuthenticated()||(this.router.navigate(["login"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Jw),r.Rb(_o))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})(),FS=(()=>{class t{constructor(t,e){this.handleLocalStorage=t,this.router=e}canActivate(){return"false"!=this.handleLocalStorage.getIsAdmin()&&null!=this.handleLocalStorage.getIsAdmin()||(this.router.navigate(["not-found"]),!1)}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Jw),r.Rb(_o))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function LS(t,e){1&t&&(r.Nb(0,"div",7),r.Nb(1,"h3"),r.oc(2,"You need to first add items to your cart."),r.Mb(),r.Mb())}function US(t,e){if(1&t&&(r.Nb(0,"div"),r.Nb(1,"div",13),r.Nb(2,"div",14),r.Nb(3,"div",15),r.Nb(4,"div",16),r.Nb(5,"h5",17),r.oc(6),r.Mb(),r.Nb(7,"p",18),r.oc(8),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t){const t=e.$implicit,n=r.Yb(2);r.Ab(6),r.pc(t.name),r.Ab(2),r.rc(" \u20b9",t.price," \xd7 ",t.quantity," = \u20b9",n.getItemTotalAmount(t.price,t.quantity)," ")}}function VS(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",19),r.Nb(1,"div",20),r.oc(2," You haven't set your address. Please do it otherwise we cannot confirm your order. "),r.Mb(),r.Nb(3,"button",21),r.Ub("click",function(){return r.kc(t),r.Yb(2).goToProfile()}),r.oc(4,"Go to profile"),r.Mb(),r.Mb()}}function qS(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",22),r.Nb(1,"div",23),r.Nb(2,"button",24),r.Ub("click",function(){return r.kc(t),r.Yb(2).goBackToCart()}),r.oc(3,"Back to cart"),r.Mb(),r.Nb(4,"button",25),r.Ub("click",function(){return r.kc(t),r.Yb(2).confirm()}),r.oc(5,"Confirm"),r.Mb(),r.Mb(),r.Mb()}}function BS(t,e){1&t&&(r.Nb(0,"div",26),r.oc(1," Your order has been placed successfully! "),r.Mb())}const zS=function(){return["/orders"]};function HS(t,e){1&t&&(r.Nb(0,"div",22),r.Nb(1,"div",23),r.Nb(2,"button",27),r.oc(3,"My orders"),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(2),r.dc("routerLink",r.fc(1,zS)))}function WS(t,e){if(1&t&&(r.Nb(0,"div"),r.nc(1,US,9,4,"div",8),r.Nb(2,"div",9),r.Nb(3,"h4"),r.oc(4),r.Mb(),r.Nb(5,"p"),r.oc(6,"(inclusive of 18% GST)"),r.Mb(),r.Mb(),r.nc(7,VS,5,0,"div",10),r.nc(8,qS,6,0,"div",11),r.nc(9,BS,2,0,"div",12),r.nc(10,HS,4,2,"div",11),r.Mb()),2&t){const t=r.Yb();r.Ab(1),r.dc("ngForOf",t.orderArray),r.Ab(3),r.qc("Total amount: \u20b9",t.totalAmt,""),r.Ab(3),r.dc("ngIf",1==t.addressNotFound),r.Ab(1),r.dc("ngIf",0==t.isProcessing&&0==t.isOrdered),r.Ab(1),r.dc("ngIf",1==t.isOrdered),r.Ab(1),r.dc("ngIf",1==t.isOrdered)}}let KS=(()=>{class t{constructor(t,e,n,r,i){this.handleCartService=t,this.handleLocalStorageService=e,this.router=n,this.orderDataService=r,this.userDataService=i,this.orderArray=[],this.isOrdered=!1,this.isProcessing=!1,this.addressNotFound=!1,this.cartObj=JSON.parse(this.handleLocalStorageService.getCartData())}ngOnInit(){this.populateOrderData(),this.handleCartService.hideCartBar(!0),this.userDataService.checkAddressPresentOrNot().then(t=>{(null==t||null==t||t.trim().length<1)&&(this.addressNotFound=!0)})}ngOnDestroy(){this.handleCartService.hideCartBar(!1)}populateOrderData(){if(null!=this.cartObj&&null!=this.cartObj.items){const t=this.cartObj.items;for(let e in t){const n=t[e];this.orderArray.push({id:n.itemId,name:n.name,price:n.price,quantity:n.quantity})}}this.calculateTotalAmount()}getItemTotalAmount(t,e){return Number(t)*Number(e)}calculateTotalAmount(){const t=.18*Number(this.cartObj.totalAmt);this.totalAmt=(Number(this.cartObj.totalAmt)+t).toFixed(2)}goBackToCart(){this.router.navigate(["cart"])}confirm(){!0!==this.addressNotFound&&(this.isProcessing=!0,this.cartObj=null,this.handleLocalStorageService.removeCartData(),this.orderDataService.addOrderData(this.orderArray,this.totalAmt).subscribe(t=>{this.isOrdered=!0,this.orderDataService.setOrderId(t.name)},t=>{console.log(t)}))}goToProfile(){let t=this.makeProfilePath(this.handleLocalStorageService.getUserName());this.router.navigate(["profile",t])}makeProfilePath(t){return t.split(" ").join("-")}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(QE),r.Kb(Jw),r.Kb(_o),r.Kb(DS),r.Kb(Zw))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-confirm-order"]],decls:8,vars:2,consts:[[1,"confirm-order-page"],[1,"album","py-5"],[1,"container"],[1,"d-flex","align-items-center","pb-3","mb-5","border-bottom"],[1,"fs-2"],["class","text-center",4,"ngIf"],[4,"ngIf"],[1,"text-center"],[4,"ngFor","ngForOf"],[1,"text-center",2,"margin-top","80px","margin-bottom","30px"],["class","mx-auto text-center","style","max-width: 500px; margin-top: 20px; margin-bottom: 50px;",4,"ngIf"],["class","text-center cart-btn-group",4,"ngIf"],["class","alert alert-success mx-auto","role","alert","style","max-width: 500px;",4,"ngIf"],[1,"card","mb-3","mx-auto",2,"max-width","700px"],[1,"row","g-0"],[1,"col-md-8"],[1,"card-body"],[1,"card-title"],[1,"card-text","item-price"],[1,"mx-auto","text-center",2,"max-width","500px","margin-top","20px","margin-bottom","50px"],["role","alert",1,"alert","alert-danger"],[1,"btn","btn-md","btn-outline-primary",3,"click"],[1,"text-center","cart-btn-group"],[1,"form-group"],[1,"btn","btn-outline-warning",2,"margin-right","15px",3,"click"],[1,"btn","btn-outline-danger",3,"click"],["role","alert",1,"alert","alert-success","mx-auto",2,"max-width","500px"],[1,"btn","btn-outline-primary",3,"routerLink"]],template:function(t,e){1&t&&(r.Nb(0,"main",0),r.Nb(1,"div",1),r.Nb(2,"div",2),r.Nb(3,"div",3),r.Nb(4,"span",4),r.oc(5,"Confirm order"),r.Mb(),r.Mb(),r.nc(6,LS,3,0,"div",5),r.nc(7,WS,11,6,"div",6),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(6),r.dc("ngIf",0==e.orderArray.length),r.Ab(1),r.dc("ngIf",e.orderArray.length>0))},directives:[j,k,wo],styles:[".confirm-order-page[_ngcontent-%COMP%]{min-height:120vh;padding-top:80px}div[_ngcontent-%COMP%]{font-family:Karla,sans-serif}.card-title[_ngcontent-%COMP%], .item-price[_ngcontent-%COMP%]{font-size:20px}"]}),t})();function GS(t,e){1&t&&(r.Nb(0,"div"),r.Lb(1,"app-loader"),r.Mb())}function $S(t,e){if(1&t){const t=r.Ob();r.Nb(0,"div",8),r.Nb(1,"div",9),r.Nb(2,"div",10),r.Nb(3,"h5",11),r.oc(4),r.Mb(),r.Nb(5,"div",12),r.Nb(6,"ul"),r.Nb(7,"li"),r.Nb(8,"strong"),r.oc(9,"Email:"),r.Mb(),r.oc(10),r.Mb(),r.Nb(11,"li"),r.Nb(12,"strong"),r.oc(13,"Address:"),r.Mb(),r.oc(14),r.Mb(),r.Nb(15,"li"),r.Nb(16,"strong"),r.oc(17,"User ID:"),r.Mb(),r.oc(18),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(19,"div",13),r.Ub("click",function(){r.kc(t);const n=e.$implicit;return r.Yb(2).goToOrders(n)}),r.oc(20," Orders "),r.Lb(21,"i",14),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=e.$implicit;r.Ab(4),r.pc(t.name),r.Ab(6),r.qc(" ",t.email,""),r.Ab(4),r.qc(" ",t.address,""),r.Ab(4),r.qc(" ",t.uid,"")}}function YS(t,e){if(1&t&&(r.Nb(0,"div"),r.Nb(1,"div",6),r.nc(2,$S,22,4,"div",7),r.Mb(),r.Mb()),2&t){const t=r.Yb();r.Ab(2),r.dc("ngForOf",t.usersDataArray)}}function QS(t,e){1&t&&(r.Nb(0,"div"),r.Lb(1,"app-loader"),r.Mb())}function XS(t,e){1&t&&(r.Nb(0,"div",13),r.Nb(1,"h3"),r.oc(2,"The customer hasn't ordered anything yet."),r.Mb(),r.Mb())}function JS(t,e){if(1&t&&(r.Nb(0,"div"),r.Nb(1,"p",18),r.oc(2),r.Mb(),r.Mb()),2&t){const t=e.$implicit,n=r.Yb(2);r.Ab(2),r.sc(" ",t.name,": \u20b9",t.price," \xd7 ",t.quantity," = \u20b9",n.getItemTotalAmount(t.price,t.quantity)," ")}}function ZS(t,e){if(1&t&&(r.Nb(0,"div"),r.Nb(1,"div",14),r.Nb(2,"div",15),r.Nb(3,"strong"),r.oc(4),r.Mb(),r.oc(5),r.Mb(),r.Nb(6,"div",16),r.Nb(7,"h5",17),r.oc(8),r.Mb(),r.nc(9,JS,3,4,"div",12),r.Lb(10,"hr"),r.Nb(11,"strong"),r.oc(12),r.Mb(),r.oc(13," (inclusive of 18 %GST) "),r.Mb(),r.Mb(),r.Mb()),2&t){const t=e.$implicit;r.Ab(4),r.qc("Order # ",t.orderNo,""),r.Ab(1),r.qc(" placed on ",t.addedOn," "),r.Ab(3),r.qc("ID: ",t.orderId,""),r.Ab(1),r.dc("ngForOf",t.orderedItems),r.Ab(3),r.qc("Total amount paid: \u20b9",t.totalAmt,"")}}const tI=function(){return["/admin/manage-orders"]},eI={scrollPositionRestoration:"enabled",anchorScrolling:"enabled",scrollOffset:[0,100]},nI=[{path:"",component:As},{path:"login",component:hC},{path:"sign-up",component:CC},{path:"profile/:name",component:AC,canActivate:[PS]},{path:"admin/items",component:$C,canActivate:[FS]},{path:"admin/items/add",component:GE,data:{path:"add"},canActivate:[FS]},{path:"admin/items/edit/:itemCategory/:itemId",component:GE,data:{path:"edit"},canActivate:[FS]},{path:"admin/manage-orders",component:(()=>{class t{constructor(t,e,n){this.userDataService=t,this.orderDataService=e,this.router=n,this.usersDataArray=[],this.isLoading=!1,this.isLoaded=!1}ngOnInit(){this.fetchAllUsersData()}fetchAllUsersData(){return Object(Bl.b)(this,void 0,void 0,function*(){this.isLoading=!0,this.usersData=yield this.userDataService.getAllUsersData(),this.formatUsersData(),this.isLoading=!1,this.isLoaded=!0})}formatUsersData(){for(let t in this.usersData)this.usersDataArray.push(this.usersData[t])}goToOrders(t){this.router.navigate(["admin",t.uid,"orders"],{queryParams:{name:t.name}})}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(Zw),r.Kb(DS),r.Kb(_o))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-manage-orders"]],decls:8,vars:2,consts:[[1,"manage-orders-page"],[1,"album","py-5"],[1,"container"],[1,"d-flex","align-items-center","pb-3","mb-5","border-bottom"],[1,"fs-2"],[4,"ngIf"],[1,"row","row-cols-1","row-cols-md-3","g-4"],["class","col",4,"ngFor","ngForOf"],[1,"col"],[1,"card"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"card-footer",3,"click"],[1,"fa","fa-angle-right"]],template:function(t,e){1&t&&(r.Nb(0,"main",0),r.Nb(1,"div",1),r.Nb(2,"div",2),r.Nb(3,"div",3),r.Nb(4,"span",4),r.oc(5,"Manage orders"),r.Mb(),r.Mb(),r.nc(6,GS,2,0,"div",5),r.nc(7,YS,3,1,"div",5),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(6),r.dc("ngIf",1==e.isLoading),r.Ab(1),r.dc("ngIf",1==e.isLoaded))},directives:[j,Es,k],styles:[".manage-orders-page[_ngcontent-%COMP%]{min-height:120vh;padding-top:80px}div[_ngcontent-%COMP%]{font-family:Karla,sans-serif}.card-footer[_ngcontent-%COMP%]:hover{background-color:#2e90ff;color:#fff;cursor:pointer}"]}),t})(),canActivate:[FS]},{path:"admin/:uid/orders",component:(()=>{class t{constructor(t,e){this.orderDataService=t,this.route=e,this.orderArray=[],this.isLoading=!0,this.isLoaded=!1,this.userName=this.route.snapshot.queryParams.name,this.uid=this.route.snapshot.params.uid}ngOnInit(){this.fetchOrderData()}fetchOrderData(){return Object(Bl.b)(this,void 0,void 0,function*(){this.isLoaded=!1,this.isLoading=!0,this.orders=yield this.orderDataService.getOrderDataById(this.uid);let t=0;for(let e in this.orders){t++;const n=this.orders[e],r=[];for(let t in n.orderedItems)r.push({name:n.orderedItems[t].name,price:n.orderedItems[t].price,quantity:n.orderedItems[t].quantity});this.orderArray.push({orderNo:t,orderId:n.orderId,addedOn:n.addedOn,orderedItems:r,totalAmt:n.totalAmt})}this.orderArray.reverse(),this.isLoaded=!0,this.isLoading=!1})}getItemTotalAmount(t,e){return Number(t)*Number(e)}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(DS),r.Kb(Zr))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-display-orders"]],decls:15,vars:6,consts:[[1,"my-order-page"],[1,"album","py-5"],[1,"container"],[1,"d-flex","flex-row-reverse",2,"margin-bottom","30px"],[1,"p-2"],["type","button",1,"btn","btn-outline-primary",3,"routerLink"],[1,"fa","fa-arrow-left"],[2,"margin-left","3px","margin-bottom","10px"],[1,"d-flex","align-items-center","pb-3","mb-5","border-bottom"],[1,"fs-2"],[4,"ngIf"],["class","text-center",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"text-center"],[1,"card","mx-auto",2,"max-width","700px"],[1,"card-header"],[1,"card-body"],[1,"card-title"],[1,"card-text"]],template:function(t,e){1&t&&(r.Nb(0,"main",0),r.Nb(1,"div",1),r.Nb(2,"div",2),r.Nb(3,"div",3),r.Nb(4,"div",4),r.Nb(5,"button",5),r.Lb(6,"i",6),r.Nb(7,"span",7),r.oc(8," Back to manage orders "),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Nb(9,"div",8),r.Nb(10,"span",9),r.oc(11),r.Mb(),r.Mb(),r.nc(12,QS,2,0,"div",10),r.nc(13,XS,3,0,"div",11),r.nc(14,ZS,14,5,"div",12),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(5),r.dc("routerLink",r.fc(5,tI)),r.Ab(6),r.qc("",e.userName,"'s orders"),r.Ab(1),r.dc("ngIf",1==e.isLoading),r.Ab(1),r.dc("ngIf",1==e.isLoaded&&0==e.orderArray.length),r.Ab(1),r.dc("ngForOf",e.orderArray))},directives:[wo,j,k,Es],styles:[".my-order-page[_ngcontent-%COMP%]{min-height:120vh;padding-top:80px}div[_ngcontent-%COMP%]{font-family:Karla,sans-serif}.card[_ngcontent-%COMP%]{font-size:18px;margin-bottom:20px}.card-header[_ngcontent-%COMP%]{background-color:rgb(0 255 167/46%)}"]}),t})(),canActivate:[FS]},{path:"menu-page",component:CS},{path:"cart",component:xS},{path:"orders",component:MS,canActivate:[PS]},{path:"confirm-order",component:KS,canActivate:[PS]},{path:"not-found",component:YE},{path:"**",redirectTo:"not-found"}];let rI=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({imports:[[Ro.forRoot(nI,eI)],Ro]}),t})(),iI=(()=>{class t{}return t.STARTS_WITH="startsWith",t.CONTAINS="contains",t.NOT_CONTAINS="notContains",t.ENDS_WITH="endsWith",t.EQUALS="equals",t.NOT_EQUALS="notEquals",t.IN="in",t.LESS_THAN="lt",t.LESS_THAN_OR_EQUAL_TO="lte",t.GREATER_THAN="gt",t.GREATER_THAN_OR_EQUAL_TO="gte",t.BETWEEN="between",t.IS="is",t.IS_NOT="isNot",t.BEFORE="before",t.AFTER="after",t.DATE_IS="dateIs",t.DATE_IS_NOT="dateIsNot",t.DATE_BEFORE="dateBefore",t.DATE_AFTER="dateAfter",t})(),oI=(()=>{class t{constructor(){this.ripple=!1,this.filterMatchModeOptions={text:[iI.STARTS_WITH,iI.CONTAINS,iI.NOT_CONTAINS,iI.ENDS_WITH,iI.EQUALS,iI.NOT_EQUALS],numeric:[iI.EQUALS,iI.NOT_EQUALS,iI.LESS_THAN,iI.LESS_THAN_OR_EQUAL_TO,iI.GREATER_THAN,iI.GREATER_THAN_OR_EQUAL_TO],date:[iI.DATE_IS,iI.DATE_IS_NOT,iI.DATE_BEFORE,iI.DATE_AFTER]},this.translation={startsWith:"Starts with",contains:"Contains",notContains:"Not contains",endsWith:"Ends with",equals:"Equals",notEquals:"Not equals",noFilter:"No Filter",lt:"Less than",lte:"Less than or equal to",gt:"Greater than",gte:"Greater than or equal to",is:"Is",isNot:"Is not",before:"Before",after:"After",dateIs:"Date is",dateIsNot:"Date is not",dateBefore:"Date is before",dateAfter:"Date is after",clear:"Clear",apply:"Apply",matchAll:"Match All",matchAny:"Match Any",addRule:"Add Rule",removeRule:"Remove Rule",accept:"Yes",reject:"No",choose:"Choose",upload:"Upload",cancel:"Cancel",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",weekHeader:"Wk",weak:"Weak",medium:"Medium",strong:"Strong",passwordPrompt:"Enter a password"},this.translationSource=new He.a,this.translationObserver=this.translationSource.asObservable()}getTranslation(t){return this.translation[t]}setTranslation(t){this.translation=Object.assign(Object.assign({},this.translation),t),this.translationSource.next(this.translation)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Gb)({factory:function(){return new t},token:t,providedIn:"root"}),t})();const sI=function(){return["/login"]};function aI(t,e){1&t&&(r.Nb(0,"li",8),r.Nb(1,"a",9),r.oc(2,"Log in"),r.Mb(),r.Mb()),2&t&&(r.Ab(1),r.dc("routerLink",r.fc(1,sI)))}const uI=function(){return["/sign-up"]};function cI(t,e){1&t&&(r.Nb(0,"li",8),r.Nb(1,"a",9),r.oc(2,"Sign up"),r.Mb(),r.Mb()),2&t&&(r.Ab(1),r.dc("routerLink",r.fc(1,uI)))}function lI(t,e){if(1&t){const t=r.Ob();r.Nb(0,"a",15),r.Ub("click",function(){return r.kc(t),r.Yb(2).onManageItems()}),r.oc(1,"Manage Items"),r.Mb()}}function hI(t,e){if(1&t){const t=r.Ob();r.Nb(0,"a",15),r.Ub("click",function(){return r.kc(t),r.Yb(2).onManageOrders()}),r.oc(1,"Manage Orders"),r.Mb()}}function dI(t,e){if(1&t){const t=r.Ob();r.Nb(0,"li",12),r.Nb(1,"a",13),r.oc(2),r.Mb(),r.Nb(3,"div",14),r.Nb(4,"a",15),r.Ub("click",function(){return r.kc(t),r.Yb().visitProfile()}),r.oc(5,"Profile"),r.Mb(),r.Nb(6,"a",15),r.Ub("click",function(){return r.kc(t),r.Yb().onMyCart()}),r.oc(7,"My Cart"),r.Mb(),r.Nb(8,"a",15),r.Ub("click",function(){return r.kc(t),r.Yb().onMyOrders()}),r.oc(9,"My Orders"),r.Mb(),r.nc(10,lI,2,0,"a",16),r.nc(11,hI,2,0,"a",16),r.Nb(12,"a",15),r.Ub("click",function(){return r.kc(t),r.Yb().onLogOut()}),r.oc(13,"Log out"),r.Mb(),r.Mb(),r.Mb()}if(2&t){const t=r.Yb();r.Ab(2),r.qc(" Hi, ",t.displayName," "),r.Ab(8),r.dc("ngIf",1==t.isAdmin),r.Ab(1),r.dc("ngIf",1==t.isAdmin)}}const fI=function(){return[""]},pI=function(){return["menu-page"]};let gI=(()=>{class t{constructor(t,e,n,r){this.authService=t,this.userDataService=e,this.router=n,this.handleLocalStorageService=r,this.isAuthenticated=!1,this.displayName=null,this.isAdmin=!1,this.displayName=this.handleLocalStorageService.getUserName(),this.isAuthenticated="true"==this.handleLocalStorageService.getIsAuthenticated(),this.isAdmin="true"==this.handleLocalStorageService.getIsAdmin(),this.isAuthSub=this.authService.getIsAuthObservable().subscribe(t=>{this.isAuthenticated=t}),this.userDataSub=this.userDataService.getUserDataObservable().subscribe(t=>{null!=t&&null!=t.name&&(this.displayName=t.name)}),this.isAdminSub=this.userDataService.getIsAdminObservable().subscribe(t=>{null!=t&&(this.isAdmin=t)})}ngOnInit(){}ngOnDestroy(){this.isAuthSub.unsubscribe(),this.userDataSub.unsubscribe()}onLogOut(){this.displayName=null,this.isAuthenticated=!1,this.userDataService.clearUserDataLocally(),this.authService.logOut()}visitProfile(){let t;t=this.userDataService.getName.split(" ").join("-"),this.router.navigate(["profile",t])}onManageItems(){this.router.navigate(["admin/items"])}onMyCart(){this.router.navigate(["cart"])}onMyOrders(){this.router.navigate(["orders"])}onManageOrders(){this.router.navigate(["admin/manage-orders"])}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(tC),r.Kb(Zw),r.Kb(_o),r.Kb(Jw))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-navbar"]],decls:18,vars:9,consts:[["id","navbar-container",1,"container"],["aria-label","Eighth navbar example",1,"navbar","navbar-expand-lg","navbar-light","bg-white"],[1,"container"],[1,"navbar-brand",3,"routerLink"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarsExample07","aria-controls","navbarsExample07","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarsExample07",1,"collapse","navbar-collapse"],[1,"navbar-nav",2,"margin-left","auto"],[1,"nav-item"],["data-bs-toggle","collapse","data-bs-target",".navbar-collapse.show",1,"nav-link",3,"routerLink"],["class","nav-item",4,"ngIf"],["class","nav-item dropdown",4,"ngIf"],[1,"nav-item","dropdown"],["href","#","id","navbarDropdown","role","button","data-toggle","dropdown","aria-haspopup","true","aria-expanded","false",1,"nav-link","dropdown-toggle"],["aria-labelledby","navbarDropdown",1,"dropdown-menu","dropdown-menu-lg-end"],["data-bs-toggle","collapse","data-bs-target",".navbar-collapse.show",1,"dropdown-item",3,"click"],["class","dropdown-item","data-bs-toggle","collapse","data-bs-target",".navbar-collapse.show",3,"click",4,"ngIf"]],template:function(t,e){1&t&&(r.Nb(0,"div",0),r.Nb(1,"nav",1),r.Nb(2,"div",2),r.Nb(3,"a",3),r.oc(4,"21 Club"),r.Mb(),r.Nb(5,"button",4),r.Lb(6,"span",5),r.Mb(),r.Nb(7,"div",6),r.Nb(8,"ul",7),r.Nb(9,"li",8),r.Nb(10,"a",9),r.oc(11,"Home"),r.Mb(),r.Mb(),r.Nb(12,"li",8),r.Nb(13,"a",9),r.oc(14,"Menu"),r.Mb(),r.Mb(),r.nc(15,aI,3,2,"li",10),r.nc(16,cI,3,2,"li",10),r.nc(17,dI,14,3,"li",11),r.Mb(),r.Mb(),r.Mb(),r.Mb(),r.Mb()),2&t&&(r.Ab(3),r.dc("routerLink",r.fc(6,fI)),r.Ab(7),r.dc("routerLink",r.fc(7,fI)),r.Ab(3),r.dc("routerLink",r.fc(8,pI)),r.Ab(2),r.dc("ngIf",0==e.isAuthenticated&&null==e.displayName),r.Ab(1),r.dc("ngIf",0==e.isAuthenticated&&null==e.displayName),r.Ab(1),r.dc("ngIf",1==e.isAuthenticated&&null!=e.displayName))},directives:[Co,j],styles:[".navbar-brand[_ngcontent-%COMP%]{font-family:Pacifico,cursive;font-size:40px}#navbar-container[_ngcontent-%COMP%]{margin-top:35px}.nav-link[_ngcontent-%COMP%]{color:#000;font-size:22px}.nav-item[_ngcontent-%COMP%]{padding-left:10px}a.close-icon[_ngcontent-%COMP%], a.close-icon[_ngcontent-%COMP%]:hover{color:inherit;text-decoration:none}.dropdown[_ngcontent-%COMP%]:hover   .dropdown-menu[_ngcontent-%COMP%]{display:block;margin-top:0}.dropdown-item[_ngcontent-%COMP%]{cursor:pointer}"]}),t})(),mI=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Eb({type:t,selectors:[["app-footer"]],decls:25,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-md-6","footer-column"],[2,"margin-top","60px"],[1,"text-center",2,"margin-top","60px"],[1,"icon","ion-heart"],["href","https://www.thecoducer.com/","target","_blank"],["href","https://github.com/thecoducer/restaurant-order-management-system","target","_blank"]],template:function(t,e){1&t&&(r.Nb(0,"footer"),r.Nb(1,"div",0),r.Nb(2,"div",1),r.Nb(3,"div",2),r.Nb(4,"h3"),r.oc(5,"Location"),r.Mb(),r.Nb(6,"p"),r.oc(7,"23, Ballygunge Place, Ballygunge, Kolkata, West Bengal 700019"),r.Mb(),r.Mb(),r.Nb(8,"div",2),r.Nb(9,"h3"),r.oc(10,"Contact"),r.Mb(),r.Nb(11,"p"),r.oc(12,"+91-896-963-9647"),r.Mb(),r.Mb(),r.Mb(),r.Lb(13,"hr",3),r.Mb(),r.Nb(14,"div",4),r.Nb(15,"p"),r.oc(16," Made with "),r.Lb(17,"i",5),r.oc(18," by "),r.Nb(19,"a",6),r.oc(20,"The Coducer"),r.Mb(),r.Mb(),r.Nb(21,"p"),r.oc(22,"View code on "),r.Nb(23,"a",7),r.oc(24,"Github"),r.Mb(),r.Mb(),r.Mb(),r.Mb())},styles:["footer[_ngcontent-%COMP%]{background-color:#003265;padding:50px 0}a[_ngcontent-%COMP%], a[_ngcontent-%COMP%]:hover, footer[_ngcontent-%COMP%]{color:#fff}.footer-column[_ngcontent-%COMP%]{text-align:center}.footer-column.nav-item.nav-link[_ngcontent-%COMP%]{padding:.1rem 0}.footer-column.nav-itemspan.nav-link[_ngcontent-%COMP%]{color:#6c757d}.footer-column.nav-itemspan.footer-title[_ngcontent-%COMP%]{color:#fff;font-size:14px;font-weight:700;text-transform:uppercase}.footer-column.nav-item.fas[_ngcontent-%COMP%]{margin-right:.5rem}@media (min-width:481px) and (max-width:767px){.footer-column[_ngcontent-%COMP%]{margin-top:30px}}@media (min-width:320px) and (max-width:480px){.footer-column[_ngcontent-%COMP%]{margin-top:30px}}"]}),t})();function bI(t,e){if(1&t){const t=r.Ob();r.Nb(0,"button",7),r.Ub("click",function(){return r.kc(t),r.Yb(2).onContinue()}),r.oc(1,"Continue"),r.Mb()}}function vI(t,e){if(1&t){const t=r.Ob();r.Nb(0,"button",8),r.Ub("click",function(){return r.kc(t),r.Yb(2).placeOrder()}),r.oc(1,"Place order"),r.Mb()}}function yI(t,e){if(1&t&&(r.Nb(0,"nav",1),r.Nb(1,"div",2),r.Nb(2,"span",3),r.oc(3),r.Mb(),r.Nb(4,"div"),r.Nb(5,"span",4),r.oc(6),r.Mb(),r.nc(7,bI,2,0,"button",5),r.nc(8,vI,2,0,"button",6),r.Mb(),r.Mb(),r.Mb()),2&t){const t=r.Yb();r.Ab(3),r.qc("Cart (",t.totalItems,")"),r.Ab(3),r.qc("Subtotal: \u20b9",t.totalAmt,""),r.Ab(1),r.dc("ngIf",0==t.goToOrders),r.Ab(1),r.dc("ngIf",1==t.goToOrders)}}let _I=(()=>{class t{constructor(t,e,n,r){this.handleCartService=t,this.handleLocalStorage=e,this.router=n,this.route=r,this.isCartEmpty=!0,this.goToOrders=!1,this.hideCartBar=!1,this.handleLocalStorage.getCartDataObservable().subscribe(t=>{null!=t&&Object.keys(t.items).length>0&&(this.isCartEmpty=!1,this.totalAmt=t.totalAmt,this.totalItems=Object.keys(t.items).length),null==t&&(this.isCartEmpty=!0)})}ngOnInit(){this.handleCartService.onCartPageObs().subscribe(t=>{this.goToOrders=t}),this.handleCartService.onConfirmOrderPageObs().subscribe(t=>{this.hideCartBar=t})}onContinue(){this.router.navigate(["cart"])}placeOrder(){this.router.navigate(["confirm-order"])}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(QE),r.Kb(Jw),r.Kb(_o),r.Kb(Zr))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-cart"]],decls:1,vars:1,consts:[["class","navbar fixed-bottom navbar-expand-lg","id","cart-bar",4,"ngIf"],["id","cart-bar",1,"navbar","fixed-bottom","navbar-expand-lg"],["id","cart-bar-div ",1,"container"],[1,"navbar-brand"],["id","subtotal"],["type","button","class","btn btn-outline-danger","id","view-cart-btn",3,"click",4,"ngIf"],["type","button","class","btn btn-outline-success","id","view-cart-btn",3,"click",4,"ngIf"],["type","button","id","view-cart-btn",1,"btn","btn-outline-danger",3,"click"],["type","button","id","view-cart-btn",1,"btn","btn-outline-success",3,"click"]],template:function(t,e){1&t&&r.nc(0,yI,9,4,"nav",0),2&t&&r.dc("ngIf",0==e.isCartEmpty&&0==e.hideCartBar)},directives:[j],styles:["#subtotal[_ngcontent-%COMP%]{padding-right:11px}#clear-cart-btn[_ngcontent-%COMP%]{margin-right:6px}#cart-bar[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 54px 55px rgba(0,0,0,.25),0 -12px 30px rgba(0,0,0,.12),0 4px 6px rgba(0,0,0,.12),0 12px 13px rgba(0,0,0,.17),0 -3px 5px rgba(0,0,0,.09);color:#000;font-family:Karla,sans-serif;font-size:20px;position:sticky}@media (min-width:481px) and (max-width:767px){.navbar-brand[_ngcontent-%COMP%]{font-size:17px}#subtotal[_ngcontent-%COMP%]{font-size:16px}#cart-bar-div[_ngcontent-%COMP%], #clear-cart-btn[_ngcontent-%COMP%]{font-size:14px}#view-cart-btn[_ngcontent-%COMP%]{font-size:15px}}@media (min-width:320px) and (max-width:480px){.navbar-brand[_ngcontent-%COMP%]{font-size:17px}#subtotal[_ngcontent-%COMP%]{font-size:16px}#cart-bar-div[_ngcontent-%COMP%], #clear-cart-btn[_ngcontent-%COMP%]{font-size:14px}#view-cart-btn[_ngcontent-%COMP%]{font-size:15px}}"]}),t})(),wI=(()=>{class t{constructor(t,e,n){this.primengConfig=t,this.authService=e,this.userDataService=n}ngOnInit(){this.authService.autoLogIn()}}return t.\u0275fac=function(e){return new(e||t)(r.Kb(oI),r.Kb(tC),r.Kb(Zw))},t.\u0275cmp=r.Eb({type:t,selectors:[["app-root"]],decls:4,vars:0,template:function(t,e){1&t&&(r.Lb(0,"app-navbar"),r.Lb(1,"router-outlet"),r.Lb(2,"app-footer"),r.Lb(3,"app-cart"))},directives:[gI,Eo,mI,_I],styles:[""]}),t})();class CI{constructor(t,e,n,r){this.keySelector=t,this.elementSelector=e,this.durationSelector=n,this.subjectSelector=r}call(t,e){return e.subscribe(new OI(t,this.keySelector,this.elementSelector,this.durationSelector,this.subjectSelector))}}class OI extends $e.a{constructor(t,e,n,r,i){super(t),this.keySelector=e,this.elementSelector=n,this.durationSelector=r,this.subjectSelector=i,this.groups=null,this.attemptedToUnsubscribe=!1,this.count=0}_next(t){let e;try{e=this.keySelector(t)}catch(n){return void this.error(n)}this._group(t,e)}_group(t,e){let n=this.groups;n||(n=this.groups=new Map);let r,i=n.get(e);if(this.elementSelector)try{r=this.elementSelector(t)}catch(o){this.error(o)}else r=t;if(!i){i=this.subjectSelector?this.subjectSelector():new He.a,n.set(e,i);const t=new SI(e,i,this);if(this.destination.next(t),this.durationSelector){let t;try{t=this.durationSelector(new SI(e,i))}catch(o){return void this.error(o)}this.add(t.subscribe(new EI(e,i,this)))}}i.closed||i.next(r)}_error(t){const e=this.groups;e&&(e.forEach((e,n)=>{e.error(t)}),e.clear()),this.destination.error(t)}_complete(){const t=this.groups;t&&(t.forEach((t,e)=>{t.complete()}),t.clear()),this.destination.complete()}removeGroup(t){this.groups.delete(t)}unsubscribe(){this.closed||(this.attemptedToUnsubscribe=!0,0===this.count&&super.unsubscribe())}}class EI extends $e.a{constructor(t,e,n){super(e),this.key=t,this.group=e,this.parent=n}_next(t){this.complete()}_unsubscribe(){const{parent:t,key:e}=this;this.key=this.parent=null,t&&t.removeGroup(e)}}class SI extends Ot.a{constructor(t,e,n){super(),this.key=t,this.groupSubject=e,this.refCountSubscription=n}_subscribe(t){const e=new Hn.a,{refCountSubscription:n,groupSubject:r}=this;return n&&!n.closed&&e.add(new II(n)),e.add(r.subscribe(t)),e}}class II extends Hn.a{constructor(t){super(),this.parent=t,t.count++}unsubscribe(){const t=this.parent;t.closed||this.closed||(super.unsubscribe(),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())}}const AI=new r.r("angularfire2.analytics.analyticsCollectionEnabled"),TI=new r.r("angularfire2.analytics.appVersion"),xI=new r.r("angularfire2.analytics.appName"),DI=new r.r("angularfire2.analytics.debugMode"),kI=new r.r("angularfire2.analytics.config");let NI=(()=>{class t{constructor(t,e,r,i,o,s,a,u){if(this.analyticsInitialized=new Promise(()=>{}),V(a)){window.dataLayer=window.dataLayer||[];const t=(...t)=>"config"===t[0]&&"firebase"===t[2].origin&&(this.measurementId=t[1],!0),e=t=>{window.gtag=(...e)=>{t&&t(...e),"event"===e[0]&&e[2].send_to===this.measurementId&&(i&&(e[2].app_name=i),r&&(e[2].app_version=r)),o&&"undefined"!=typeof console&&console.info(...e),function(...t){window.dataLayer.push(arguments)}(...e)}};window.dataLayer.some(t)?(this.analyticsInitialized=Promise.resolve(),e()):this.analyticsInitialized=new Promise(n=>{e((...e)=>{t(...e)&&n()})}),s&&this.updateConfig(s),o&&this.updateConfig({debug_mode:1})}else this.analyticsInitialized=Promise.resolve();const c=Object(ze.a)(void 0).pipe(Object(Ps.b)(new Fs.e(u).outsideAngular),hn(()=>V(a)?u.runOutsideAngular(()=>n.e(4).then(n.bind(null,"AAub"))):an.a),Object(St.a)(()=>Object(Fs.g)("analytics","AngularFireAnalytics",t,()=>{const n=t.analytics();return!1===e&&n.setAnalyticsCollectionEnabled(!1),n},[t,e,s,o])),ow({bufferSize:1,refCount:!1}));return Object(Fs.j)(this,c,u)}updateConfig(t){return Object(Bl.b)(this,void 0,void 0,function*(){yield this.analyticsInitialized,window.gtag("config",this.measurementId,Object.assign(Object.assign({},t),{update:!0}))})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(Fs.d),r.Rb(AI,8),r.Rb(TI,8),r.Rb(xI,8),r.Rb(DI,8),r.Rb(kI,8),r.Rb(r.C),r.Rb(r.A))},t.\u0275prov=Object(r.Gb)({factory:function(){return new t(Object(r.Rb)(Fs.d),Object(r.Rb)(AI,8),Object(r.Rb)(TI,8),Object(r.Rb)(xI,8),Object(r.Rb)(DI,8),Object(r.Rb)(kI,8),Object(r.Rb)(r.C),Object(r.Rb)(r.A))},token:t,providedIn:"any"}),t})();Object(Fs.f)(NI,[{app:null,logEvent:null,setCurrentScreen:null,setUserId:null,setUserProperties:null,setAnalyticsCollectionEnabled:null}]);let jI=(()=>{class t{constructor(t,e,n,r){if(this.disposables=[],q(e))this.initialized=Promise.resolve();else{let e;this.initialized=r.runOutsideAngular(()=>new Promise(t=>e=t)),this.disposables=[n.authState.subscribe(n=>{t.setUserId(null==n?void 0:n.uid),e()}),n.credential.subscribe(e=>{if(e){const n=e.user.isAnonymous?"anonymous":e.additionalUserInfo.providerId;e.additionalUserInfo.isNewUser&&t.logEvent("sign_up",{method:n}),t.logEvent("login",{method:n})}})]}}ngOnDestroy(){this.disposables.forEach(t=>t.unsubscribe())}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(NI),r.Rb(r.C),r.Rb(pw),r.Rb(r.A))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})();const RI="screen_class";let MI=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const PI={},FI=t=>{const e=[t.screen_class,t.outlet].join("#");if(PI.hasOwnProperty(e))return PI[e];{const t=MI++;return PI[e]=t,t}};let LI=(()=>{class t{constructor(t,e,n,r,i,o,s){if(!e||!V(i))return this;o.runOutsideAngular(()=>{const i=e.events.pipe(Cn(t=>t instanceof cr));var o;this.disposable=i.pipe(hn(t=>{var i;const o=(null===(i=e.parseUrl(e.url.replace(/(?:\().+(?:\))/g,t=>t.replace("://",":///"))).root.children[t.snapshot.outlet])||void 0===i?void 0:i.toString())||"",s=e.routerState.root.children.map(t=>t).find(e=>e.outlet===t.snapshot.outlet);if(!s)return Object(ze.a)(null);let a=s;for(;a.firstChild;)a=a.firstChild;const u=a.pathFromRoot.map(t=>{var e;return null===(e=t.routeConfig)||void 0===e?void 0:e.path}).filter(t=>t).join("/")||"/",c={screen_name:u,page_path:`/${o}`,firebase_event_origin:"auto",firebase_screen:u,outlet:t.snapshot.outlet};n&&(c.page_title=n.getTitle());let l=s.component;if(l){if(l===Ti){let e=t.snapshot;for(;e.firstChild;)e=e.firstChild;l=e.component}}else l=t.snapshot.component;if("string"==typeof l)return Object(ze.a)(Object.assign(Object.assign({},c),{[RI]:l}));if(l){const t=r.resolveComponentFactory(l);return Object(ze.a)(Object.assign(Object.assign({},c),{[RI]:t.selector}))}return Object(ze.a)(null)}),Cn(t=>t),Object(St.a)(t=>Object.assign({firebase_screen_class:t.screen_class,firebase_screen_id:FI(t)},t)),(o=t=>t.outlet,t=>t.lift(new CI(o,void 0,void 0,void 0))),Object(Tn.a)(e=>e.pipe(js((t,e)=>JSON.stringify(t)===JSON.stringify(e)),vn(void 0),Ds(),Object(St.a)(([t,e])=>t?Object.assign({firebase_previous_class:t.screen_class,firebase_previous_screen:t.screen_name,firebase_previous_id:t.firebase_screen_id},e):e),hn(e=>Object(Bl.b)(this,void 0,void 0,function*(){return s&&(yield s.initialized),yield t.logEvent("screen_view",e)}))))).subscribe()})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(NI),r.Rb(_o,8),r.Rb(wt,8),r.Rb(r.j),r.Rb(r.C),r.Rb(r.A),r.Rb(jI,8))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac}),t})(),UI=(()=>{class t{constructor(t,e,n){t.app.then(()=>{})}}return t.\u0275fac=function(e){return new(e||t)(r.Rb(NI),r.Rb(LI,8),r.Rb(jI,8))},t.\u0275mod=r.Ib({type:t}),t.\u0275inj=r.Hb({providers:[NI]}),t})(),VI=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Ib({type:t,bootstrap:[wI]}),t.\u0275inj=r.Hb({providers:[PS],imports:[[Fs.a.initializeApp(Ho),gw,kw,SE,UI,yt,rI,Cs,qe,Be]]}),t})();bt().bootstrapModule(VI).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);